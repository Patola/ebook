= Guia Maker de Impressão 3D - Teoria e Prática Consolidadas
Cláudio Luís Marques Sampaio, MSc.
v0.99r2, 17/11/2017
:updated: 2017-11-18
:Author: Cláudio Luís Marques Sampaio, MSc.
:Email: patola@makerlinux.com.br
:Date: 18/11/2017
:Revision: v0.99r2
:doctype: book
:producer: Asciidoctor
:keywords: impressão3d, ebook, e-book, maker, 3dprinting
:reproducible:
:icons: font
:lang: pt-BR
:toc-title: Índice
:caution-caption: Cuidado
:important-caption: Importante
:note-caption: Nota
:tip-caption: Dica
:warning-caption: Atenção
:appendix-caption: Apêndice
:example-caption: Exemplo
:figure-caption: Figura
:table-caption: Tabela
:toclevels: 5
:ascii-ids:
:showcomments:
:stem: latexmath
:math:
:mathematical-format: svg
:gitrepo: https://github.com/Patola/ebook
:copyright: CC-BY-SA 4.0
:text-alignment: justify
:source-highlighter: rouge
:imagesdir: imagens
:imagesoutdir: img
:front-cover-image: image:cover.png[Capa,1350,1909]

IMPORTANT: A versão mais atual deste livro estará sempre disponível no endereço:
http://www.makerlinux.com.br/ebook/[http://www.makerlinux.com.br/ebook/]

NOTE: Por favor, ao mencioná-lo, cite este endereço para baixar o livro (e se possível fazer doações). Não
é obrigatório mas seria uma gentileza. E preferivelmente não diga que o livro é "free": passa a idéia
errada de motivações e objetivos. O livro é _livre_ (open-source), licença CC-BY-SA, diferente em escopo e
propósitos de algo meramente gratuito.

= Prefácio
O conhecimento necessário para escrever este livro não surgiu somente da mente do autor. Surgiu, antes, das mentes agregadas
de vários indivíduos brilhantes e laboriosos que, por vezes camuflados sob pseudônimos irônicos de internet,
trabalharam duro e com paixão para o desenvolvimento e democratização de uma tecnologia que, por décadas,
ficou aprisionada em redutos industriais de acesso controlado e vigiado. A esses indivíduos, no entanto, poucas
vezes foi dado o devido crédito; ao contrário, pode-se enxergar uma tendência a apagá-los da história, ou a
reduzir suas contribuições a meras curiosidades. E o dano desta falta de reconhecimento não é só histórico ou
moral; tem consequências práticas profundas na medida em que evita que o aprendiz entenda a tecnologia, conheça
seus limites e possibilidades, e consiga usar a criatividade para aproveitá-la ao máximo. Se um documentário
famoso omite completamente o nome do projeto comunitário de impressão 3D que deu origem a virtualmente todas as
impressoras domésticas, ele impede que o telespectador tenha contato com as motivações, receitas e ensinamentos
do projeto; se um livro promete "a verdade" sobre impressoras 3D, e reduz esta "verdade" a uma trivialidade
sobre limitações contemporâneas de uma das formas domésticas desta tecnologia, ele desinforma e oculta de seu
leitor o _significado_ do aprendizado; se um curso de impressão 3D faz pouco mais que listar modelos de _grife_
e seus procedimentos pré-programados como uma lista de compras, trai o estudante tanto por priorizar _forma_
sobre _essência_ quanto por tentar confiná-lo ao papel de _consumidor_ numa tecnologia que o transforma em
__produtor__. Imagine um curso de culinária que ao invés de ensinar a cozinhar, diz apenas o que comprar para comer!

Colocar o consumidor como criador e produtor: essa é a razão pela qual a Impressão 3D é literalmente e sem
exageros __revolucionária__. O que significa revolução? Alude a giro de uma roda, mudança de papéis. Se o
consumidor deixa de ser um mero espectador e passa a fazer parte do processo, a _relação de poder_ muda. Em
inglês já se popularizou o termo "Prosumer" ("Prossumidor") e ele representa perfeitamente a mudança
paradigmática que está acontecendo; se você desejava adquirir outras tecnologias inovadoras de sua época,
como uma tevê ou celular, você procurava conhecer os fabricantes e comprar um modelo. E apesar de você poder
perfeitamente seguir esta forma ao orçar uma impressora 3D doméstica, com excelentes marcas nacionais além
das estrangeiras, você não está confinado a elas; o site _reprap.org_ lista literalmente dezenas de receitas
completas, incluindo listas de materiais e sugestões de como fazer ou comprar as peças, para você construir em
casa, peça por peça, sua própria impressora 3D, incluindo todo o software que precisa usar com ela com licença
"open-source" / "livre", isto é, permitindo livre cópia, modificações e melhorias.

Isso não é mera curiosidade sobre a tecnologia; antes, é seu __mote__, seu __nexo__. O projeto RepRap procura
fazer impressoras ("replicadores", daí o "Rep") que imprimam suas próprias peças; crianças de 12 anos de
idade, sem assistência dos pais, estão usando das receitas de internet para construir suas próprias impressoras
e até _aprimorar a tecnologia_ com sua criatividade típica, num processo de acumulação coletiva de melhorias
já batizado de __frictionless innovation__; notícias do meio já vêm _horizontalizadas_ com material para
estudo disponível e busca de voluntários ao invés de simples apresentação passiva, vertical, da tecnologia;
pesquisadores de áreas bem diversas dos mecanismos computadorizados das impressoras 3D estão as modificando e
criando novos meios para culturas de células, para próteses e órteses, para música e design, química e enfermagem,
numa verdadeira celebração do conhecimento humano, livre das grades de seus antigos carcereiros auto-nomeados.

É sob essa perspectiva, portanto, que este livro é escrito: de libertação, de exploração do potencial de
cada indivíduo curioso e criativo com que tiver contato. Para isso ser possível, o livro procura ser o mais
abrangente possível, explicando cada teoria necessária para se entender a impressão 3D. Para o técnico que
decide embelezar sua peça mecânica, existe o capítulo sobre acabamento e pintura. Para o artista gráfico que
deseja fazer um design eletrônico, a seção do livro sobre eletrônica e motores será uma boa referência,
explicando desde o início com vocabulário simplificado. Para o engenheiro eletricista que deseja saber como ABS
e acetona interagem, temos a parte sobre comportamento químico dos materiais. Para o programador de computador
que deseja saber sobre usar impressoras 3D para reciclagem, explicamos o caminho das pedras. E para todas essas
pessoas, trabalhando ao redor do mundo e trocando entre si os arquivos de suas realizações, o livro apresenta
em seu corpo vários casos de extrapolações criativas da impressão 3D -- arriscando inclusive ilustrar becos
sem saída, idéias sem continuação futura - de modo a que tenham a melhor utilização possível de seu equipamento.

Por fim, seria contraditório um livro se pretender libertador e ser, ele mesmo, aprisionado, confinado. As leis
de direitos autorais (copyright) são uma realidade atual inescapável, permitindo ao autor decidir por _120 anos_
o que as pessoas podem ou não fazer com seu trabalho intelectual. Em contraponto a isso, existe o _Copyleft (All
Rights Reversed)_ que, usando a própria lei de copyright, vira seus conceitos de ponta-cabeça, concedendo direitos
aos recipientes ao invés de limitações. A licença de uso de todo o conteúdo^1^ deste livro está nos apêndices,
mas de modo simplificado: você pode copiar este conteúdo quanto quiser, pode modificá-lo e fazer e redistribuir
sua própria versão, pode inclusive vendê-lo e fazer uso comercial dele; mas deve manter e citar a licença, ou
seja, dar aos outros o mesmo direito incondicionalmente, e deve preservar o crédito da autoria original do documento.

O cientista Isaac Newton já disse, ele mesmo referenciando a frase de outros: "se eu vi além, foi por me apoiar
nos ombros de gigantes". São os ombros acumulados de inúmeras gerações passadas que nos permitiram subir
tão alto, e estou oferecendo o meu ombro desimpedido para que as informações aqui contidas apoiem o máximo
possível de novos _makers_ e curiosos. Vamos imprimir o futuro em 3D!


[NOTE]
====
.Notas:
- As ilustrações coletadas de diversos sites da internet estão referenciadas nas descrições e são
copyright de seus próprios autores. Quando a ilustração aparece sem crédito, significa que foi criada pelo
autor deste livro e se encontra igualmente sob a licença CC-BY-SA.
- **Este livro tem erros**. Assim como acima de um limite, todo código de computador tem __bugs__, esta obra
faz todo tipo de afirmação sobre diversos assuntos... e algumas estarão erradas. É virtualmente impossível
coletar dados de tantas disciplinas diferentes, se embrenhar em tantas cabalas e indústrias e clubes e comunidades,
buscar os fatos escondidos atrás de opiniões, pesar os fatos conflitantes de perspectivas diferentes, e não cometer
nenhum equívoco. Equívocos que, com feedback adequado, são corrigidos em versões posteriores do documento. Uma
correção é também uma informação preciosa, uma lição aprendida, e para que isto não se perca, todas as
correções feitas no documento serão anotadas em seu __Changelog__, no mesmo repositório em que ele se encontra.
====
<<<
== Agradecimentos
Este livro teve muitos colaboradores indiretos, que auxiliaram o autor na resolução de dúvidas, sugestão de
temas, correção de erros e demais contribuições que permitiram que o conteúdo saísse... __amaciado__. Ricardo
Cavalini do __Makers__, com sua didática pró-ativa e avaliação metódica, exterminou muitos erros pontuais
em todo o texto. Rubens Medino, outro professor de impressão 3D, aumentou as perspectivas com suas sugestões
astutas, como a persistência em aprofundar sobre polímeros e G-Code. Alex Borro, com seu canal do youtube e suas
observações cirúrgicas sobre a engenharia e princípios por trás da impressão 3D, produziu muito conteúdo que
serviu para embasar os capítulos; sua persistência para evitar o uso de termos incorretos como "voltagem"
foi um bem-vindo norte ao conteúdo. "Boby Burn", com seu conhecimento de indústria e logística, ajudou na
terminologia e contextualização dos temas. Carlos Roberto, com seus conhecimentos profundos e pragmáticos sobre
Simplify3D e incansável pontuação de suas vantagens e desvantagens. Rafael Estevam, com seu pensamento "fora
da caixa", contribuiu com suas idéias originais e sua grande vontade de retribuir conhecimento e código. André
Ruiz, com suas tabelas e gráficos que simplificam enormemente o entendimento de tópicos complicados de impressão
3D. Roberto Reis, com suas preciosas informações sobre deltas, mecânica e ARM.

O Serviço Social do Comércio (SESC) de Campinas, especialmente pela figura de Fernando Mekaru, ajudou enormemente
no patrocínio indireto com suas oficinas e cursos encomendados; tal material foi essencial na confecção deste
livro e o retorno financeiro deles ajudou a "segurar as pontas" durante os longos meses da redação do conteúdo.

Na área acadêmica, tive o aconselhamento e guia de Dra. Maria Elizete, Luciano Paulino Silva, Marcelo Sperandio,
Elizabeth Ferreira Martinez e Luvas Novaes Teixeira, indispensáveis para poder encontrar e selecionar informação
especializada que pudesse ser oferecida de forma amigável para o público leitor desta obra.

O Dr. Joshua Pearce, com quem troquei vários e-mails no curso da escrita desse livro, é um grande entusiasta do
open-source e de sustentabilidade e atuou não só como fonte, guia e professor mas como inspiração, por todos
os seus trabalhos, livros, artigos e dedicação à causa do conhecimento. Não é coincidência que a licença
adotada neste livro seja a mesma de sua obra "Open Source Laboratory".

Contribuíram com a correção e revisão do texto: André Ruiz, Ricardo Cavallini, André Stavraskas,
Roberto Reis, Carlos Roberto Varela, Rafael Estevam, William Lima e Paulo Miamoto Dias.

Costuma-se dizer que sem conflito não há progresso, sem o contraditório não há resolução de problemas. Nesse
espírito, o ceticismo ajuda, até mesmo o ceticismo ácido e pirronista. E ainda que muitos acreditassem no
empreendimento e sustentabilidade de uma obra totalmente livre, houve os que duvidassem e contestassem o que não
pertence às perspectivas de seu microcosmos, o que não raramente tem o efeito de minar o espírito pioneiro e
enfraquecer a vontade. Alguns amigos -- pois amizade não depende de opinião - permaneceram firmes em desafiar
meu projeto, e agradeço a eles porque isso ao invés de enfraquecer me deu ainda mais energia para realizar
minhas pretensões, provar meu ponto, fazer frente ao escárnio, retornar números e resultados sólidos contra
suas contestações. Menção honrosa para Hélio Loureiro, o mais resiliente e provocador oponente intelectual,
sem o qual eu não teria feito tantos preparativos para a abordagem livre e inovadora da obra.

Mas acima de tudo, eu não teria conseguido sem o apoio, participação e companhia inseparável de minha esposa,
Kimberly Sampaio, essa pessoa extraordinária que me conheceu em um momento de amargura e me fez subir do poço
para as alturas.

[NOTE]
====
.Nota sobre as referências
Esta obra não tem um estilo único de referências -- em alguns trechos usa referências numeradas para não
interromper o fluxo de raciocínio do texto, em outros trechos expõe a referência em parênteses ou explicitamente,
de modo a conectar esta referência ao raciocínio. Isto é proposital e embora represente um leve rompimento de
paradigmas de boa escrita, compensa pelo valor pedagógico.

Embora tradicionalmente para o campo da tecnologia e ciência as referências adotadas sejam de artigos científicos
publicados em periódicos ou livros anteriores publicados, nesta obra existem muitas referências que advém de
__blogs__, _wikis_ e vídeos de internet. Ainda que sejam frequentemente mais informais e com menor escrutínio
acadêmico, não entenda o leitor que isso significa baixo rigor na escolha de fontes para as informações;
significa, antes, que está havendo uma mudança paradigmática e organizacional do saber na sociedade, e que muitas
das informações que antes só se encontravam em guardiões nomeados do conhecimento agora se obtém de indivíduos
e iniciativas de todos os tipos de formação, origem e associação, fazendo parte da própria cultura _Maker_
que explicitamos. Muitas vezes a informação simplesmente ainda não teve tempo de chegar à academia ou aos
livros. Outras vezes, o _blog_ ou _wiki_ simplesmente apresenta o conteúdo de forma mais didática e independente
de leituras anteriores. Essas fontes, quando citadas, são escolhidas criteriosamente de acordo com seu conteúdo e
impacto percebido nos círculos _Maker_ para inclusão no livro, mas também citamos referências mais convencionais
como patentes, artigos científicos, _white papers_ e outras publicações formais quando relevante e útil.
====
<<<
= Quer contribuir? Você pode!
Este livro é o resultado de anos de prática, leituras, experimentos, debates, vídeos, palestras, aulas, oficinas,
parcerias e fabricações do autor. O foco desde o início foi trazer o máximo possível de compreensão com o
mínimo possível de pré-requisitos, o que é uma tarefa hercúlea considerando um campo que agrega e se utiliza
de tantas disciplinas do conhecimento humano. Algumas partes foram reescritas três, quatro vezes, para garantir
a melhor didática. Alguns trechos de duas páginas do livro (como as das impressoras 3D delta) demoraram semanas
para serem compostos não por falta de teoria, mas pelo esforço de garantir uma apresentação explicando os
_princípios_ para que houvesse a "compreensão profunda" do tema, "a ficha caindo". Ainda assim, embora
o leitor possa comprar este livro em sua forma impressa, pode também baixá-lo gratuitamente pela internet e sua
distribuição é livre. O entendimento é que o _valor_ do livro é tão maior quanto maior audiência ele tenha,
quanto mais o conhecimento se dissemine, e não é razoável sacrificar este valor em detrimento do __preço__,
ainda mais se este preço estiver condicionado à limitação artificial de cópia que as leis de copyright por
default impõem.

Nesta perspectiva, é compreensível que o leitor se sinta grato por esta atitude diferenciada e em alguns casos
se sinta impelido a retribuir. Até pequenas correções de informação serão úteis, são os _patches_ para
os _bugs_ do texto. E assim como Eric Raymond demonstra em __A Catedral e o Bazar__, "com olhos suficientes,
todos os bugs são rasos".

== Introdução
Quando se fala em Impressão 3D, a maior surpresa para quem é apresentado à tecnologia é saber que ela é bastante
antiga. As primeiras tentativas de fabricar peças computadorizadas de forma aditiva surgiram ainda na década
de 1970 e finalmente na década de 80 foram formalizadas e tiveram suas primeiras patentes. Mas o que aconteceu,
então, para que somente nos últimos anos a tevê começasse a mencioná-la, ela pipocasse em fóruns técnicos
e as máquinas que já vemos em pequenas empresas e pequenos negócios começassem a ser vendidas?

A resposta a essa questão não é mera curiosidade. Ao contrário, este contexto é essencial para entender esta
tecnologia -- ou, melhor falando, conjunto de tecnologias, visto que são várias técnicas com às vezes poucos
pontos em comum -- e principalmente trabalhar com ela.

O melhor jeito de começar uma explicação, entretanto, é com definições:

=== O que é, afinal, Impressão 3D?

Formalmente, a Impressão 3D é definida pela _criação de um objeto de três dimensões usando processos
aditivos._ Três dimensões significa que o objeto tem volume -- altura, largura e comprimento -, em comparação
com um desenho em uma folha de papel, por exemplo, que só tem duas dimensões (altura e largura). As impressoras
"convencionais" que desenham em folhas de papel muitas vezes são chamadas de "impressoras 2D" quando em
contraste com as impressoras 3D.

[[impressora2de3d]]
image::impressora-2d-e-3d2.png[impressora2de3d,width=687,height=280,role="related thumb center",title="Impressora \"2D\" (à esquerda) e 3D (à direita) (créditos: reprap.org)"]


E quanto a "processos aditivos"? Pode-se inferir o significado pelo nome: processos que envolvem a _adição_
de material durante a fabricação da peça. Outro nome com que a impressão 3D é conhecida usa este conceito:
"fabricação aditiva". Pressupõe-se também que há um controle do processo por algum circuito, microcontrolador
ou computador, no que é chamado de "Controle Numérico por Computador", ou "CNC".

Tradicionalmente, antes dos processos aditivos formalizados na década de 80, toda fabricação controlada por
computador era __subtrativa__. As assim chamadas "máquinas CNC" começaram a surgir nas décadas de 40 e 50,
com motores que seguiam pontos descritos em cartões perfurados para depois serem substituídas por computadores
analógicos e digitais. Inicialmente usadas para tarefas de cortes ou gravações simples, as máquinas CNC se
diversificaram e se sofisticaram, gerando de cortadoras laser a tornos computadorizados a fresas automáticas. A
história das CNCs está tão ligada à fabricação subtrativa que causa certa estranheza hoje em dia se referir
a uma impressora 3D como uma "CNC", embora usem, essencialmente, a mesma técnica, apenas de formas diferentes
-- subtração versus adição.
[[amsterdamcnc]]
image::amsterdam-cnc.jpg[amsterdamcnc,width=600,height=376,role="related thumb center",title="CNC fresa de MDF no FabLab de Amsterdam. Créditos: wikimedia foundation"]

Impressoras 3D e CNCs, incluindo as máquinas conhecidas como "pick and place" e gravadoras de circuitos,
são os equipamentos comumente usados para aquilo que é chamado de __prototipagem rápida__. Este termo designa o
conjunto de tecnologias usadas para a fabricação de objetos físicos diretamente a partir de dados de computador,
dados estes gerados a partir de um software de "CAD" (Computer-Aided Design, ou seja, qualquer programa que
faça a modelagem), e guiados por um "CAM" (o software que cuida da parte efetiva da fabricação, como um
controlador de impressão 3D ou fatiador).^1^ Nessas horas, a criatividade da internet também pesa nos termos
técnicos: o conhecido grupo do servidor de torrents _The Pirate Bay_ batizou os dados de computador que, ao serem
alimentados em uma máquina específica, geram objetos físicos de "physibles"^2^, o que em português daria
algo como "fisíveis" (não confundir com "fusíveis"!).

[NOTE]
====
.Notas:
1 -- Existem outros termos envolvendo a prototipagem rápida como "computer-aided industrial design" e
"computer-integrated manufacturaing", mas têm uso mais de nicho -- podendo ser ignorados sem prejudicar a
compreensão geral do assunto.

2 - https://thepiratebay.org/blog/203[_https://thepiratebay.org/blog/203_]
====

== Histórico

=== Fotoescultura e topografia

Em 1860 o artista francês François Willème criou um processo em que colocava o objeto de interesse em uma
plataforma rodeado por 24 câmeras; fotografava para obter a silhueta de cada ângulo; e usava um processo usando
um pantógrafo ligado a um cortador que reproduzia cada um desses perfis, totalizando uma forma tridimensional. Ele
batizou o processo de __fotoescultura__.

[[fotoescultura]]
image::image5.gif[image,width=388,height=423]

Isso significa que já no século XIX tínhamos não só um rudimento da impressão 3D, como também de um processo de
digitalização em 3D hoje chamado de fotogrametria. Faltavam, claro, os computadores para automatizar este processo.

Na topografia, surgiram outras idéias. J. E. Blanther em 1890 sugeriu um método de camadas com suavização de
placas de cera para criar mapas topográficos de terrenos, idéia aprimorada por Perera (1940) usando folhas de
cartolina. Zang (1964) usava placas transparentes com inscrições e Gaskin (1974) criou um dispositivo educacional
com tais técnicas.

Em 1968, Swainson propôs um método que fabricaria peças tridimensionais pela cura seletiva do plástico,
aplicando dois feixes de laser cruzados em um polímero fotossensível, com um trabalho paralelo sendo conduzido
nos laboratórios Battelle. A técnica foi cunhada de maquinagem fotoquímica.

Outro foi proposto por Ciraud (1971), usando pó depositado em uma matriz por gravidade, eletrostática, ou por
um bico, e parcialmente derretido para produzir um objeto.

Em 1972, Matsubara da Mitsubishi Motors propôs um processo topográfico que usaria materiais que endurecem
com a luz. No processo, uma resina de fotopolímero (líquido monomérico que sofre polimerização, isto é,
endurecimento) é usada como revestimento em partículas refratárias, como areia ou grafite, que são então
espalhadas e aquecidas para formar uma folha consistente. A luz de uma lâmpada é seletivamente projetada nesta
folha para endurecer uma porção definida dela, e o resto dissolvido. Já em 1974, DiMatteo reconheceu que esta
técnica tinha o potencial de fabricar formas que são particularmente difíceis de obter conforme técnicas de
usinagem padrão, como propulsores e aerofólios.

Em 1979, Professor Nakagawa da Universidade de Tóquio começou a usar técnicas de laminação para fabricar
ferramentas, em particular de prensa e injeção de moldes, e menciona a possibilidade de canais de resfriamento
complexos em moldes de injeção.

Foi em 1981, entretanto, em que o primeiro modelo funcional de uma máquina de impressão 3D funcional foi publicado
por Hideo Kodama do Instituto de Pesquisas Industriais Municipal de Nagoya, no Japão. Seu sistema descrevia um
sistema de prototipagem rápida baseada em fotopolímeros com construção de camadas correspondendo a seções
transversais do modelo por três diferentes aparatos, dois deles sendo reconhecíveis no mercado hoje como as SLA
"top-down" e "bottom-up" e o terceiro lembrando bastante a técnica conhecida como __polyjet__.^1^

[NOTE]
====
1 - _Automatic method for fabricating a three‐dimensional plastic model with photo‐hardening polymer_ -
H Kodama - Review of Scientific Instruments, 1981 - scitation.aip.org
====

=== 3D Systems, DTM e Stratasys

A primeira patente relacionada a impressão 3D veio em 16 de julho 1984, mas de franceses liderados por Alain Le
Mehaute. Entretanto, a patente foi abandonada pelas instituições que fundavam a pesquisa e Charlie (Chuck) Hull,
três meses mais tarde, deu entrada na primeira patente da tecnologia que mudaria o mundo. Chuck cunhou o termo
"estereolitografia" para descrever a técnica em que, usando um material curável por luz ultravioleta e um
feixe desta luz, sucessivas camadas representando as seções transversais de um objeto, iniciando da mais baixa
até a mais alta, são atingidas seletivamente pelo feixe solidificando-o.

[[slaantiga]]
image::image6.jpeg[image,width=600,height=488]

Em 1986, Chuck fundou a primeira companhia de Impressão 3D do mundo, a **3D Systems Inc**. A companhia criou
o hoje famoso formato de arquivo "STL", uma forma simples de representação de uma malha tridimensional
por coordenadas dos vértices de triângulos orientados. A primeira impressora 3D com a técnica patenteada de
estereolitografia (ou "SLA") só viria a ser produzida para venda em 1988 pela empresa.

Em 1987, Carl Deckard, que trabalhava para a universidade do Texas, registrou uma patente para o processo que
chamou de sinterização seletiva por laser ("Selective Laser Sintering" - SLS). A técnica consistia na
"sinterização" sucessiva de camadas de um substrato em pó por um feixe de laser. A "sinterização" é
um processo em que um pó, em temperatura menor que a de derretimento, se torna um sólido contínuo ao se unir com
os grânulos do mesmo material ao redor. A patente foi concedida em 1989 e licenciada para a empresa **DTM Inc**,
que foi mais tarde adquirida pela 3D Systems.

[[brilhosls]]
image::image7.jpeg[image,width=642,height=458]

Foi o ano de 1989 que viu o surgimento da técnica de impressão 3D que, por suas características de robustez e
economia, se tornou a dominante no mercado de massa de hoje: a FDM, ou modelagem por deposição de material fundido
("Fused Deposition Modeling"). S. Scott Crump, um cientista de garagem interessado em fabricar brinquedos para
a filha e maquetes para engenheiros (ou assim diz a lenda), fez o pedido de patente nesse ano e em 1992 conseguiu
financiamento para criar a empresa **Stratasys**.

[[fotosstratasys]]
image::image8.jpeg[image,width=615,height=383]

=== Os anos 90 e primeira metade dos anos 2000

Após estes primeiros empreendedores darem a ignição na indústria de impressão 3D, os anos 90 e início dos
2000 tiveram uma explosão de novas técnicas de manufatura aditiva e esses anos representaram o amadurecimento da
tecnologia de impressão 3D. Inicialmente usada apenas para peças de amostra ou protótipos, isto é, peças que
não precisam apresentar acabamento refinado ou propriedades mecânicas robustas, as inovações e aprimoramentos
dessa era foram gradativamente tornando-a apta para produção industrial e em escala. A primeira técnica a
perseguir este objetivo foi a *DMLS* da empresa EOS, Direct Metal Laser Sintering, que utiliza uma variação da SLS
para fabricar peças em metal. A técnica batizada redundante e genericamente de "**3DP**", também chamada de
_binder jetting_ por ser um nome mais descritivo, utiliza uma idéia parecida com a SLS, no entanto substituindo o
laser por um jato de líquido de aderência e cor, tendo sido uma das primeiras técnicas a permitir combinações
de cores na impressão 3D. Outra técnica a usar cores é a chamada **LOM**, Laminated Object Manufacturing, que
consiste em uma impressora de jato de tinta imprimindo as camadas do objeto 3D em papel, empilhando as folhas de
papel e as cortando de forma a criar a forma tridimensional. Esta técnica hoje é capitaneada pela empresa MCOR. A
**SLM**, ou Selective Laser Melting, veio estender a funcionalidade da SLS para funcionar com materiais derretidos
ao invés de somente sinterizados. A **EBM**, ou Electron Bean Melting, utiliza basicamente o mesmo funcionamento da
SLM mas usando um feixe de elétrons e consegue trabalhar com materiais com altíssimo ponto de fusão como titânio.

[[lomartefinal]]
image::image9.png[image,width=642,height=535]

=== O rompimento: o projeto RepRap

[[fotoreprap]]
image::image10.jpeg[image,width=642,height=379]

Infelizmente, com todo esse aparecimento de novas tecnologias prometendo revolucionar a indústria e os modos de
criação, vieram também as chagas da propriedade intelectual. Tradicionalmente, ao criar uma nova tecnologia,
indivíduos e empresas registram em seu país uma "patente", que é um dispositivo legal que permite ao seu
detentor ter o monopólio de comercialização daquela idéia ou processo por um prazo que chega até 20 anos
a partir da data de aplicação^1^. Ao aplicar a uma patente em um país, por força de tratados internacionais,
o requerente ganha também a exclusividade internacional para registrar o mesmo processo em outro países pelo
prazo de um ano.

Patentes podem até facilitar o retorno financeiro, mas têm o efeito colateral de impedir ou limitar o uso daquela
tecnologia, elevar enormemente o preço e impedir inovações externas pelos 20 anos de vigência da patente. Se
poucos anos após a patente da Stratasys alguém tivesse pensado em um jeito de aprimorar a técnica tornando-a
mais eficiente, barata ou acessível, teria que ter uma conversa constrangedora com os advogados da empresa,
que não se interessava muito por estas melhorias já que visava somente o mercado industrial e não o mercado de
massa ou de pequenos empresários.

E aconteceu o previsto: A tecnologia ficou basicamente estagnada pelos 20 anos de vigência da patente. Ainda
hoje, a Stratasys tornou-se proficiente em _patent fencing_ e tem mais de 500 patentes relacionadas e um time
legal numeroso pra tentar se assegurar que mais ninguém use a tecnologia.

Mas já por volta de 2004, o engenheiro e matemático Adrian Bowyer pensava em aproveitar a vindoura queda da patente
em 2009. Ele escreveu na página da Universidade Bath sobre o que batizou de __projeto RepRap__, uma máquina de
manufatura aditiva auto-replicante, isto é, que seria capaz de fazer peças para fabricar outras do mesmo tipo. O
nome do projeto ilustrava isto: "RepRap" significa __Replicator for Rapid Prototyping__, ou Replicador para
Prototipagem Rápida. O projeto seria colaborativo e open-source, como o kernel de sistema operacional Linux,
e documentado em um "wiki" como a wikipedia. Doctor Bowyer conseguiu voluntários para ajudá-lo, entre eles
Vik Olliver e Joshua Pearce, sem contar uma colaboração mais tarde com Massimo Banzi do projeto Arduino de
microcontroladores open-source. Em 2005 o site do projeto já estava no ar. Para evitar conflitos com a sigla
"FDM" que é marca registrada da Stratasys, chamaram o mesmíssimo processo de "FFF" - Fused Filament
Fabrication (Fabricação por Filamento Fundido). Em janeiro de 2009, com uns poucos projetos de impressora 3D
já no site, o primeiro kit de impressora 3D open-source estava à venda, da BfB RapMan. Em Abril do mesmo ano a
empresa *Makerbot Industries* liberou também a sua impressora 3D open-source, a __CupCake__. Outras empresas se
seguiram, como a *Ultimaker* que além de liberar sua primeira impressora 3D contribui até hoje para o fatiador
_cura_ e o firmware __Marlin__; outras receitas de impressoras 3D apareceram, e com o sucesso retumbante do projeto
a pilha completa de software e firmware para operar uma impressora 3D usando qualquer sistema operacional estava
completa. Segundo a wikipedia, no ano de 2009 o preço de uma impressora 3D diminuiu em duas ordens de grandeza,
aproximadamente 100 vezes.

O projeto reprap cumpriu perfeitamente muitos de seus objetivos. Conseguiu peças mais acessíveis e baratas para
os componentes de impressão 3D^2^, usando desde barras roscadas que se encontra em qualquer loja de parafuso para
eixos ao invés de fusos trapezoidais até plataformas com resistência aquecedora para serem usadas no lugar
das caríssimas câmaras aquecidas isoladas. Agregou e incentivou desenvolvedores a criarem firmwares open-source
completos e cheios de recursos para os microcontroladores usados, estes baseados no Arduino Mega e mais tarde em
microprocessadores sofisticados como o do embarcado Beaglebone Black. Estabeleceu um centro de referência para
as informações sobre impressoras 3D de baixo custo. E junto com isso estabeleceu uma série de padrões seguidos
por empresas e indivíduos sem necessidade de agências reguladoras para encarecer o processo.^3^

Hoje o projeto reprap tem meia dúzia de fatiadores open-source multiplataforma e que funcionam em qualquer
impressora 3D FFF de baixo custo, tem 11 firmwares diferentes que podem ser usados em suas máquinas (o número
é maior, mas ninguém sai contando os _forks_ de firmwares existentes que surgem), e tem mais de 100 receitas
completas de construção de impressoras open-source, com os softwares, diagramas, planos de corte, arquivos 3D
(STL) das peças imprimíveis e lista de compras (BOM - "Bill of Materials"). Um outro uso do projeto reprap
é para inventores de diversos dispositivos -- geralmente associados à impressão 3D, claro -- registrarem todo
o projeto de sua invenção e assim impedirem que ela seja patenteada, visto que um wiki mantém o histórico das
modificações eternamente e que as leis de patentes declaram uma patente nulificada se for descoberto que há
"arte prévia", ou seja, uso real da idéia ou processo em algum outro produto.

O projeto RepRap também explica o que aconteceu com o mercado de massa após 2009. Foi quando as primeiras manchetes
sobre "impressão 3D" começaram a aparecer, encantando o público com suas criações, e em como apareciam
indivíduos "geniais" que construíam suas próprias impressoras 3D mas que na verdade apenas reutilizavam
receitas do site do projeto.

[[impressaocobreebronze]]
image::image11.jpeg[image,width=443,height=372]

Livre das amarras das patentes, o mercado de massa de impressão 3D irradiou-se para uma série de áreas antes
inexploradas, desde simples reparos domésticos (quem usaria uma impressora de um milhão de dólares pra isso?) até
próteses e utilidades que ninguém imaginaria antes -- um professor de faculdade adquiriu uma Replicator e
trocou seu extrusor por uma seringa aquecida de água e açúcar, que gera arcabouços de açúcar solidificado
onde se joga uma cultura de células, que crescem em volta do arcabouço e o consome, formando veias e artérias
no lugar. Um dos mais problemáticos obstáculos da cultura de órgãos foi resolvido desta forma simples! Se a
Stratasys não tivesse segurado a patente, imagine quanto sofrimento teria impedido ou até vidas teria salvado;
se o projeto RepRap não tivesse surgido, imagine quantas vidas estariam miseráveis ou até nem mais vivas.

E melhorias na tecnologia FDM -- ou FFF, como preferir -- surgiram por todos os lados, não só nas máquinas. Os
firmwares e fatiadores conseguiram recursos admiráveis, os modeladores populares de formas 3D se apressaram em
garantir compatibilidade com o formato de arquivo usado pelos fatiadores e em oferecer recursos que ajudassem a
impressão 3D. Pequenas startups de engenheiros químicos e cientistas de materiais começaram a trabalhar com
filamentos diferentes do plástico convencionalmente usado nas impressoras 3D, o ABS -- e já vieram com o PLA,
um plástico de origem orgânica da empresa NatureWorks.

E o PLA foi só o começo. Outros materiais começaram a aparecer, como os nylons da empresa Taulman3D; os
filamentos flexíveis, como o italiano Filaflex ou o estadunidense Ninjaflex; os de imitação de materiais,
como madeira (serragem misturada com PLA), cobre e bronze (também com pó de metal); os fosforescentes; os
condutores; os demais plásticos usados em injeção -- PEAD, PETG, policarbonato, poliacetal, polipropileno;
os filamentos dissolvíveis, como PVA e HiPS; os filamentos para fundição, como Filamet Copper... Ninguém fez
uma contabilidade de quantos materiais diferentes já estão disponíveis para impressoras FDM de baixo custo,
mas esse número com certeza já ultrapassa uma centena.

[[hotendcyclop1]]
image::image12.png[hotendcyclop,width=193,height=289,float="right"]

Esse gigantesco desabrochar e democratização de uma tecnologia avançada está tendo impacto profundo em nossa
sociedade. Outras tecnologias não sofreram o mesmo processo. Você não teve as pessoas construindo televisões em
casa quando a tecnologia ficou popular. Você não teve pessoas criando seus próprios computadores ou smartphones
em suas garagens ou pequenas empresas quando da massificação dessas tecnologias. Mas isso está acontecendo com a
impressão 3D, criando uma dinâmica de mercado muito diferente daquilo que se conhecia até então. Por exemplo,
existem muitas empresas famosas por criarem peças genéricas para impressoras 3D de alta qualidade, como a *e3d*
e *reprap.me,* e liberarem seus projetos sob licenças open-source para serem fabricados em qualquer lugar do mundo.

Talvez esse mercado incipiente explique o que a Stratasys fez em 2013. Para entender isso, vamos falar mais de
uma empresa que já mencionamos.


[NOTE]
.Notas:
====
1 -- Alguns detentores de registros de patentes utilizam-se de uma estratégia chamada "__Patent fencing__",
que se traduz em registrar uma extensão óbvia do processo da patente original quando a data de expiração desta
patente estiver próxima, estendendo assim na prática a duração da patente.

2 - http://reprap.org/wiki/BackgroundPage[_http://reprap.org/wiki/BackgroundPage_]

3 -- Para uma história do projeto reprap contada pelos próprios integrantes, uma boa referência é
https://all3dp.com/history-of-the-reprap-project/[_https://all3dp.com/history-of-the-reprap-project/_]

4 -- A história da impressora de açúcar pode ser vista em inglês aqui:
http://www.3dprinterworld.com/article/aleph-objects-enjoys-809-percent-two-year-revenue-growth[_http://www.3dprinterworld.com/article/aleph-objects-enjoys-809-percent-two-year-revenue-growth_]
====

=== Makerbot (2009)

[[fotomakerbot]]
image::image13.jpeg[image,width=642,height=434]

Empresa que começou junto ao movimento RepRap, com um de seus fundadores, Zach Smith, sendo também um dos
fundadores do projeto. Ganhou fundos de investimento do próprio Adrian Bowyer e sua esposa. Reconhecida também
por fomentar a criatividade na impressão 3D com o portal __thingiverse.com__, o site de modelos para impressão
3D mais acessado da internet. Atualmente, o portal tem mais de 600 mil modelos completamente gratuitos para baixar,
muitos deles com licenças open-source permitindo modificação, redistribuição e uso comercial.

Suas impressoras 3D começaram vindo com um fatiador open-source próprio chamado __ReplicatorG__; como decisão
de projeto, resolveram abandonar o formato mais usado de instruções de máquina CNC -- o chamado g-code --
para utilizar um formato próprio chamado S3G (terminação .x3g) para funcionar com seu firmware open-source
__Sailfish__. Posteriormente, o ReplicatorG foi trocado por outro fatiador com bibliotecas open-source mas interface
fechada, embora muito mais amigável (e com menos opções).

A empresa teve uma história conturbada. Apesar do seu começo idealista e promissor (as primeiras unidades se
esgotaram rápido), em 2012 Zachary Smith já foi expulso da empresa por discordar das mudanças em relação
a liberação de código acontecendo e em 2013 ela foi adquirida pela Stratasys. Logo após a aquisição, sua
próxima impressora, a Replicator 2, começou a ser vendida sem liberação de código ou receitas, ou seja,
abandonando toda a filosofia open-source a que a empresa tinha se comprometido no começo.

Em 2014, a operadora de streaming _Netflix_ produz um documentário sobre a empresa intitulado __Print the
Legend__. Objetivando ser um registro histórico do início das impressoras 3D de baixo custo, ele foca no fundador Bre
Pettis, no abandono dos princípios open-source e na trajetória conturbada da empresa. Aparecem vários integrantes
do projeto Reprap e, claro, Zachary Smith, mas em uma hora e meia de documentário não aparece absolutamente nenhuma
menção ao projeto e nem mesmo há a sugestão que haveria alguma iniciativa open-source fora da Makerbot no início.

No mesmo ano de 2014, um escândalo acomete a Makerbot através de sua companhia-mãe, a Stratasys. Aproveitando-se
da extrema popularidade do seu site __thingiverse__, a empresa aplicou alguns registros de patentes de design
open-source feitos por usuários do portal, sem sequer informá-los disso e para usar em seus produtos. A empresa
OpenBeam, uma das empresas do ecossistema open-source de impressão 3D, descobriu isso e publicou uma carta aberta
à Makerbot para ela "manter a classe"^1^. Um movimento em massa de saída dos usuários iniciou, sendo que
muitos deles deixam postados protestos em suas páginas do thingiverse apontando para outros portais do mesmo gênero.

Devido a manchas na reputação como essa, ao elevado preço das impressoras 3D da empresa, à diminuição
de qualidade após a aquisição pela Stratasys, e à elevada competição de outras impressoras domésticas,
a Makerbot começou a perder bastante mercado, e já passou por algumas levas de demissão em massa, sendo hoje
uma companhia diminuta perto do que era.

[NOTE]
.Notas:
====
1 -
http://www.openbeamusa.com/blog/2014/5/22/stay-classy-makerbot[_http://www.openbeamusa.com/blog/2014/5/22/stay-classy-makerbot_]
====

=== A Alvorada da SLA -- Formlabs e B9 Tech

Ainda que este curso tenha maior foco na tecnologia FFF, é importante notar uma outra técnica de impressão 3D
que está tendo uma trajetória não muito diferente das de material fundido. A tecnologia é a estereolitografia
de Chuck Hull, mais antiga, cuja patente principal expirou em 2014, o que tem levado mais e mais fabricantes
a investirem nessa tecnologia. A partir do ano de 2016 os insumos já sofreram uma queda grande de preços,
inclusive no Brasil, e a tendência continua.

Comecemos pelas diferenças -- enquanto Makerbot e Ultimaker são empresas que começaram por seus próprios meios,
poucos anos mais tarde as iniciativas de __crowdfunding__, ou financiamento coletivo, já estavam mais populares e
empreendedores confiavam mais nelas para começar seus negócios. Tanto a Formlabs Form1 (2012) quanto a B9 Tech
B9 Creator (2013) foram impressoras 3D de resina fotopolimerizável iniciadas no portal de financiamento coletivo
__kickstarter__.

Pode parecer estranho que uma empresa comece a comercializar um modelo concorrente 2 anos antes de a patente expirar,
mas a esperança é que a empresa cuja patente esteja sendo violada não se dê ao trabalho. A Formlabs lançou
sua SLA e foi processada pela 3D Systems, mas acertaram os termos fora das cortes e a impressora 3D continuou
sendo comercializada, hoje em dia sem precisar pagar royalties.

[[fotodonoformlabs]]
image::image14.jpeg[image,width=642,height=480]

Já a B9 Creator sofreu menos este revés, pois ao invés de utilizar a tecnologia SLA "pura", usou uma variante
dela que ao invés de um feixe de laser, usa um retroprojetor modificado. Essa tecnologia é chamada de SLA/DLP
ou simplesmente DLP, por causa do projetor. Adicionalmente, a impressora deles foi financiada com apenas um ano de
diferença e inicialmente o projeto era open-source, com um fatiador multiplataforma e aberto. Não foram processados.

[[fotob9creatoreform1]]
image::image15.png[image,width=596,height=368]

Essas duas impressoras "iguais mas diferentes", assim como as repraps, criaram o padrão de compatibilidade que
todas as novas impressoras 3D SLA / SLA/DLP estão adotando. Comprimento de onda do raio ultravioleta, resolução,
volume e até interface do fatiador são imitados por outras empresas entrando na área.

Esta tecnologia usa um material que consegue ter maior resolução que FFF (tipicamente, 25 mícrons de camada
mínima, comparada com 100 mícrons de uma FFF) e até na mesma resolução, maior qualidade de acabamento.

O uso, os insumos, os acabamentos no entanto diferem bastante. Embora isso já fuja ao
escopo deste curso, você pode ver uma comparação entre o uso de FFF e SLA neste vídeo:
https://www.youtube.com/watch?v=UksOU1J0AIM[_https://www.youtube.com/watch?v=UksOU1J0AIM_]

Por último, já existem muitas impressoras SLA e SLA/DLP sendo inventadas e construídas sob licença open-source,
até mesmo por grandes empresas. A conhecida software-house Autodesk criou uma SLA/DLP completa com eletrônica,
firmware e até resina licenciados sob CC-BY-SA (a mesma licença deste documento!) de nome Ember. Outras
empresas e indivíduos foram pelo mesmo caminho e você encontra comunidades fervilhantes de idéias como a do
site "Build Your Own SLA" (http://buildyourownsla.com/[_http://buildyourownsla.com_]) ou do projeto OpenSLA
(https://plus.google.com/communities/109609533907401814291[_https://plus.google.com/communities/109609533907401814291_]).

==== A Alvorada da SLS?

A Formlabs não descansou em cima dos méritos. Além de continuar aprimorando e colocando sensores e controladores
nos novos modelos e de liberar certos códigos de forma aberta e multiplataforma, recentemente lançou uma solução
de impressão em lote automatizada (__Form Cell__) e agora uma impressora 3D SLS (Selective Laser Sintering), a **Fuse
1**. Será um indício que antes mesmo de a SLA se estabelecer completamente, SLS chegará ao mercado de baixo custo?

[[fotoformfuse1sls]]
image::image19.png[image,width=642,height=409]

=== A Academia e a Impressão 3D

Internacionalmente, a impressão 3D e suas várias tecnologias não eram muito conhecidas ou popularizadas (por
causa das patentes) até começar a tomar proporções industriais, no final da década de 90. Como consequência
desse baixo __mindshare__, a academia -- isto é, as universidades, instituições de pesquisa, laboratórios de
testes e outras instituições que se ocupam em criar o conhecimento de nível superior -- praticamente ignorava
o assunto, com algumas poucas incursões de pesquisadores mais entusiasmados pelo conceito (e que inevitavelmente
tinham que gastar um espaço de seus artigos para explicar a tecnologia e para o que ela servia). Com a virada do
milênio, e com as então corporações do ramo necessitando de resultados científicos e confiáveis para clientes
cada vez mais exigentes, e fabricações cada vez mais sendo usadas como produto final ao invés de protótipos,
a aproximação à academia era inevitável.

Isso não era tão fácil: O ambiente de cabala, os designs patenteados, os segredos industriais e o acesso
dificultado às máquinas e instalações das impressoras 3D estava nitidamente em contradição com a necessidade
acadêmica de divulgação de informação, exposição às claras e acesso livre para experimentação. Ainda
assim, com dinheiro envolvido e iniciativas de colaboração com universidades destacadas - principalmente em
seus departamentos de engenharia -, os artigos de relevância começaram a crescer em número. É de 2002 que por
exemplo temos o artigo seminal __Anisotropic material properties of fused deposition modeling ABS__^1^, que analisa o
problema das resistências não-uniformes numa peça impressa em 3D; também em 2002 que temos o __Fused deposition
modeling of novel scaffold arthictectures for tissue engineering applications__^2^, analisando padrões de suporte
e raft. Do lado da estereolitografia, que já tinha relações mais estreitas com a academia, temos o __Use of
stereolithography to manufacture critizal-sized 3D biodegradable scaffolds for bone ingrowth__^3^, um artigo sobre
padrões de estrutura para auxílio de crescimento de ossos, e já sinalizando para a entrada da impressão 3D no
campo biomédico. Muitos outros artigos com técnicas, números e variáveis usados até em impressoras 3D de baixo
custo são dessa época -- mostrando uma explosão tanto da relevância da tecnologia quanto do interesse acadêmico.

Foi desse interesse acadêmico, aliás, e nesse ambiente favorável que Adrian Bowyer, Vik Olliver e outros
tiveram em 2004 a idéia para o projeto 2004 e em 2006 Boywer já publicava a apresentação __The Replicating
Rapid-prototyper - moving hardware through the wires__^4^ pela Universidade de Illinois.

Em meados dos anos 2000, o próprio _Journal of Rapid Prototyping_ já estava consolidado como uma publicação de
Alto Impacto e as variadas tecnologias de impressão 3D já tinham razoável _mindshare_ acadêmico, que depois seria
ampliado para fora da academia devido ao projeto reprap. A segunda metade da primeira década do milênio experimentou
uma escalada extraordinária de artigos úteis para fabricação, muitos deles já tratando a incipiente idéia da
impressão 3D de baixo custo. Entre eles temos o paper de Bowyer e seus colaboradores avaliando os resultados do
projeto reprap em 2009, "__RepRap: The Replicating Rapid Prototyper -- maximizing customizability by breeding
the means of production__"^5^ e novamente em 2011 com "RepRap -- the replicating rapid prototyper"^6^.

[NOTE]
.Referências:
====
1 - Ahn, S. H., Montero, M., Odell, D., Roundy, S., & Wright, P. K. (2002). Anisotropic material properties of
fused deposition modeling ABS. __Rapid prototyping journal__, __8__(4), 248-257.

2 - Zein, I., Hutmacher, D. W., Tan, K. C., & Teoh, S. H. (2002). Fused deposition modeling of novel scaffold
architectures for tissue engineering applications. __Biomaterials__, __23__(4), 1169-1185.

3 - Cooke, M. N., Fisher, J. P., Dean, D., Rimnac, C., & Mikos, A. G. (2003). Use of stereolithography to manufacture
critical‐sized 3D biodegradable scaffolds for bone ingrowth. __Journal of Biomedical Materials Research Part B:
Applied Biomaterials__, __64__(2), 65-69.

4 -
http://self.gutenberg.org/wplbn0002096545-the-replicating-rapid-prototyper-by-adrian-bowyer.aspx?&words=technology[_http://self.gutenberg.org/wplbn0002096545-the-replicating-rapid-prototyper-by-adrian-bowyer.aspx_]

5 - Sells, E., Smith, Z., Bailard, S., Bowyer, A., & Olliver, V. (2009). RepRap: the replicating rapid prototyper:
maximizing customizability by breeding the means of production.

6 - Jones, R., Haufe, P., Sells, E., Iravani, P., Olliver, V., Palmer, C., & Bowyer, A. (2011). RepRap--the
replicating rapid prototyper. __Robotica__, __29__(01), 177-191.
====

==== academia.edu e Joshua M. Pearce

No mundo de _facebook_ de hoje, é notório que as redes sociais de internet são um poder à parte, uma forma de
organização com grande impacto sócio-econômico global, e com a capacidade efetiva de dirigir a mudança de
papéis de antigas e novas instituições. Redes sociais especializadas existem para tudo, de uso e manufatura
de mapas para viagem até para contatos e mobilidade profissional, e o campo acadêmico não é exceção, com
portais como _researchgate_ e __academia.edu__. Fundada em 2008 como rede de publicações de artigos científicos,
a rede social _academia.edu_ serviu como plataforma ideal para os entusiastas do movimento _Open Access_ (ou seja,
artigos científicos que não sejam cobrados ao público leitor) e por isso costuma ter uma porcentagem muito
maior deste tipo de artigo. Como uma grande parte dos gastos das publicações científicas se relaciona com
o processo de revisão por pares, o portal tem experimentado novas maneiras de o realizar diminuindo os custos,
como os comentários de outros pesquisadores. Os artigos colocados lá são "pré-print", ou seja, antes mesmo
de passarem pelo processo formal de revisão de pares (externo) e publicados.

Um pesquisador que esteve presente em todos esses momentos e teve participação pesada no movimento RepRap é o
Prof. Dr. Joshua Pearce, estando entre os 0.1% maiores contribuidores, e sempre com artigos de enorme utilidade
para a fabricação digital de baixo custo, com tantos exemplos úteis que a citação de artigos desta parte
__transbordaria__. Para citar apenas alguns artigos^1^ recentes, em "Emergence of Home Manufacturing in the
Developed World: Return on Investment for Open-Source 3-D Printers", ele examina o retorno econômico da venda
e peças de impressoras 3D open-source; em "Free and Open Source Automated 3-D Microscope" ele ensina como
construir um microscópio eletrônico usando impressão 3D; em "Open Source Laser Polymer Welding System:
Design and Characterization of Linear Low-Density Polyethylene Multilayer Welds", ele ensina técnicas e
caracterização de construção de impressoras 3D SLS open-source, e em "Environmental Life Cycle Analysis
of Distributed Three-Dimensional Printing and Conventional Manufacturing of Polymer Products" ele analisa
modos de reciclar e reutilizar plástico de impressão 3D de baixo custo. Seus artigos se concentram na área
de tecnologia sustentável, impressão 3D open-source, economia e ciclos econômicos de hardware open-source,
e diferentes tecnologias de impressão 3D. Sua obra mais famosa é um livro cuja influência na cultura _Maker_
tem sido basal, o "Open-Source Lab", que poderia ser uma enorme ajuda nos muitos laboratórios de física,
química e biologia do Brasil se fosse mais conhecido por aqui.

Dr. Pearce continua ativo e produzindo muita informação. Em especial, ele e seu grupo têm o costume de, mais
do que deixar os artigos publicamente acessíveis na __academia.edu__, detalhar os projetos no wiki de tecnologia
sustentável http://appropedia.org/[_http://appropedia.org_], onde tem uma página detalhando suas informações.^2^

[[opensourcelab]]
image::image20.png[image,width=471,height=705]

[NOTE]
====
.Referências:

1 -- Você pode ver todos os artigos do Dr. Pearce que estão no _academia.edu_ neste endereço:
https://mtu.academia.edu/JoshuaPearce[_https://mtu.academia.edu/JoshuaPearce_]

2 - http://www.appropedia.org/User:J.M.Pearce[_http://www.appropedia.org/User:J.M.Pearce_]
====

==== Ainda sobre os "papers não-acadêmicos"

Já no início desta obra fomos claros quanto às referências informais. Estamos num período
de mudança de papéis sociais, não há dúvidas disso. E embora tenhamos ressaltado o papel da academia como uma
fonte de conhecimento científico da humanidade, é importante que ela não é a única, e um fenômeno que surgiu
com a internet foram os artigos escritos com metodologia científica ou próxima da científica por indivíduos
considerados __amadores__, _hobbyistas_ ou de alguma forma sem vínculos profissionais ou acadêmicos profundos com
o campo do conhecimento em questão, e que ainda assim foram seminais e influentes em sua concepção, informando
algum problema e explorando soluções para ele. Tais artigos, geralmente pertencentes a _wikis_ ou _blogs_ pessoais,
não estão submetidos ao formalismo acadêmico e por isso não têm publicações em periódicos, fator de impacto
associado, citações contabilizadas (exceto por dados privados como os coletados pelos _spiders_ do Google) e
têm sua localização e importância relativa enormemente dificultadas em relação aos acadêmicos. São artigos
que merecem ser retirados da obscuridade até para embasar o escrutínio acadêmico de que necessitam e este livro
procura cumprir este papel. Alguns deles são referenciados no decorrer deste livro, um exemplo notável sendo o
artigo "Polyholes"^1^ do usuário experimentalista _nophead_ (Chris Palmer).

[NOTE]
====
.Referência:
1 -
http://hydraraptor.blogspot.com.br/2011/02/polyholes.html[_http://hydraraptor.blogspot.com.br/2011/02/polyholes.html_]
====

=== E no Brasil?
==== O Fork Comunitário:
Do GuiaCNC para a RepRapBR

O projeto RepRap foi -- e continua sendo -- o catalisador de oportunidades para que pessoas criativas, engenhosas
e curiosas fizessem, ao redor do mundo, suas pequenas revoluções, seus trabalhos em grupo. Nosso país sempre foi
um berço de mentes brilhantes que, com escassos recursos, conseguiam fazer bastante. O objetivo de barateamento e
peças comuns das "reprap", então, caiu como uma luva! Em 2010, integrantes do fórum _GuiaCNC_ com conhecimentos
de eletrônica resolveram encomendar juntos kits da impressora 3D CupCake, a impressora 3D Open-Source da Makerbot,
para estudar e aprimorar. Criaram uma lista de discussão, reservaram na casa de um deles um local espaçoso e
com equipamentos para se reunir -- que chamaram de "Masmorra" -- convidaram outros interessados e uma vez
dada a "partida", começaram a realizar encontros de confraternização e troca de idéias e progressos na
empreitada. Este foi o primeiro e-mail do grupo que se intitulou "Grupo de Estudo RepRapBR" (o remetente foi
__Alain Mouette__, que já acompanhava há anos o projeto RepRap):

[IMPORTANT,icon=None]
====
[small]`Este é o convite oficial para participação do Grupo de Estudo para RepRap. +
 +
* O objetivo é comprar um kit derivado do RepRap <http://store.makerbot.com/featured-products/cupcake-cnc-basic.html>
cujo custo é de US$750, se conseguirmos trazer sem impostos. Não é o RepRap original, mas usa as mesmas
placas. Infelizmente o dinheiro vai ter que vir na frente, nenhum de nós tem como bancar... +
 +
* vamos nos reunir regularmente uma vez por mês na masmorra (Sir. Jorge já deu sua benção). +
 +
* Vamos estudar esse protótipo para estudar como fazer nossas cópias e estudar também como fazer usando CNCs
que já existem. Estudo preliminar já mostrou que deve ser possível, mas parte do Hardware tem que ser o deles
para ser compatível com o software. +
 +
* Este grupo é só para quem estiver presente, tudo que levantarmos será conhecimento aberto, mas não pretendemos
ficar documentando de progresso do nosso estudo. Salvo é claro que alguém seja voluntário para esse fim específico.`
====

Isto está documentado no primeiro post do blog do grupo de estudo,
http://reprapbr-ge.blogspot.com.br/2010/08/historico-do-grupo-de-estudo.html[_http://reprapbr-ge.blogspot.com.br/2010/08/historico-do-grupo-de-estudo.html_].
Os posts subsequentes trazem um verdadeiro e fidedigno registro histórico do progresso do pensamento de comunidade
e interação de indivíduos brilhantes levando a sucessivas melhorias no design usado -- acompanhando e muitas
vezes superando o que também acontecia lá fora.

Lá se acompanham as tentativas e desventuras no desenvolvimento da placa controladora de impressão baseada na
"Gen7" - a "Gen7BR", a mesa aquecida com resistências de bloco, as instruções de montagem de cada parte
das diversas iterações da impressora, o extrusor do Alain, a Prusa Air e os vários aplicativos gratuitos do JP,
tudo com detalhadas descrições técnicas. A leitura é altamente recomendada como complemento a este livro.

O blog do grupo de estudo, entretanto, não conta toda a história, além de só ir até 2013. Com o começo do
projeto e a criação da _lista de discussão_ ReprapBR no Google Groups, muitos outros indivíduos começaram a
participar -- e, embora não tão fortemente integrados ao grupo inicial e aos seus desenvolvimentos específicos,
também trouxeram suas colaborações com projetos paralelos, idéias independentes e principalmente um período
de muito debate construtivo e ajuda a iniciantes na lista. Muitos criando seus próprios blogs de ajuda que
são até hoje referência, como o _Reprap Paraná_ (de Valter F.C.) que tem ainda os melhores textos de ajuda a
montagem da impressora Graber i3; outros com lojas de peças, como a _ReprapBR_ (Brian Conçalves), _Impressora
3D_ (Bruno Cabral) e _GTMax3D_ (Luciano Moda); outros com iniciativas que de blogs no início e documentação
de peças particulares se tornaram empresas de produção de impressora 3D, como a _3DMachine_ em São Paulo
(Paulo Fernandes), a _Movtech_ em São Bernardo do Campos (Ígor Jocionis), a _Reprap3D_ em Jundiaí (Bruno
Pontes) e a _Sethi3D_ em Campinas (Marcelo Ribeiro e Sérgio Carminitti), os filamentos da _Filamentos3DBrasil_
(Anderson Godoy), da _3DX_ (Cléber Rampazo), _PrintGreen3D_ (Willian Lima), _Faz3D_ (Roberto Polisel Samartin)
e _3DLab_ (Brian Filipe e Sérgio Portela) e os produtos _CoreAB_ e _A.Bond_ (Alex Borro) e o hotend _R6P_ (Renato
Parisotto). Felipe ("Juca") Sanches da _Metamáquina_ também teve participação na lista, ainda que breve. Usos intensos e
criativos da Impressão 3D e tecnologias relacionadas também fizeram história: _Solution 3D_ com seus brindes
e vasos (Roberto Varela), _3DToy_ com seus brinquedos, utensílios e quebra-cabeças (Rubens Medino). Muitos
outros passaram por este fórum de
discussão, que ainda hoje é ponto nevrálgico do desenvolvimento de impressão 3D no Brasil. Não é o único,
claro, e outros lugares de comunidades e fóruns também constam com suas estrelas, como a _Faerkrag Props_
com seus itens de cosplay (Eduardo Pimentel) ou Guilherme "Razgriz" com seus cursos e designs. Indivíduos
criativos como Cícero Moraes e Paulo Miamoto Dias (e seus vários colaboradores), com suas reconstruções faciais
forenses e próteses para animais como tartarugas e tucanos, também contribuíram muito para o ecossistema, tanto
pelo seu trabalho artístico quanto pela divulgação na mídia. E desenvolvedores talentosos como Lays Rodrigues
com seu projeto de controlador de impressão __Atelier__.

Ainda merecem menção especial a empresa __Cliever__, que junto à Metamáquina foram as primeiras empresas
de impressão 3D do Brasil; a __e-tech__, vendedores da linha de impressoras 3D 3DCloner; a Tato Indústria e
Comércio, pioneira de impressão 3D no país; e a CNCBrasil, com suas iniciativas ousadas de propelir a impressão
FFF a dimensões industriais.

Durante a trajetória do Grupo de Estudos e a lista de discussão, no entanto, certos _eventos_ chamam especial
atenção pela regularidade com que ocorreram. Dada a interseção de conhecimentos exigido, muitos integrantes
eram do Fórum GuiaCNC, e encontros regulares aconteciam na Chácara de Rubens Medino. Em 2014, dia primeiro de
maio, o primeiro encontro "oficial" RepRapBR aconteceu, com 89 participantes, se configurando como o começo de
uma saga -- no ano seguinte o sucesso se repetiu no mesmo dia, com 101 inscritos (e 45 que perderam a lotação).
Em 2016, já prevendo não haver espaço para o público, Rubens e outros inscritos no grupo se associaram para profissionalizar
este encontro e criaram a Primeira Expo3DBR -- Encontro Nacional de Impressoras 3D, também em primeiro de maio,
com público registrado de _1240_ pessoas! Foi realizado em um ginásio de Hortolândia, com palestras e a presença
de feira e demonstrações de fabricantes e profissionais de Impressão 3D.

[[expo3dbr2016_1]]
image::image21.jpeg[image,width=610,height=475]

[[expo3dbr2016_2]]
image::image22.jpeg[image,width=610,height=524]

[[expo3dbr2016_3]]
image::image23.jpeg[image,width=642,height=377]

Além do movimento _diretamente_ relacionado à impressão 3D, tivemos em solo nacional -- sempre com ligações
internacionais pois o desenvolvimento aberto é por natureza inclusivo -- vários grupos de pesquisa, fabricação e
estudo que é indispensável citar, tanto pela aplicação prática da tecnologia com muitos beneficiados diretamente
por ela quanto pelo incentivo educacional, social e moral que deram aos entusiastas da tecnologia.

São eles o projeto __Mão3D__, de próteses impressas baratas; as várias iniciativas do time encabeçado por
_Cícero Moraes_ e __Paulo Miamoto Dias__; o instituto de pesquisa CTI Renato Archer; a empresa brasileira __Makers
Brasil__, intimamente ligada à explosão do movimento Maker; e os grupos de pesquisa LAPAC da Unicamp e GPMA do ITA.

==== Makers Brasil

Empresa inovadora no mercado __Maker__, começou seu primeiro curso e workshop de impressão 3D já em 2013 (já
tendo educado mais de mil alunos só em impressão 3D em 2016). Fundada em 2012 por Ricardo Cavallini, criador do
kit educacional eletrônico acessível "RUTE", consiste de uma plataforma de educação e inovação focada na
prototipagem e desenvolvimento de produtos para a "Nova Revolução Industrial", alcunha para o que os vários
desdobramentos e mudanças do movimento Maker vêm trazendo. Hoje tem mais de duas dezenas de cursos, dos mais
técnicos aos mais conceituais, e a maioria para leigos, visto que seu objetivo é trazer mais gente para esse
universo tecnológico. O perfil de seus alunos vai de meninas de 6 anos de idade a gestores de empresas. Além
de todo o papel educacional de seus cursos, disponibiliza também editoriais, palestras, artigos e _papers_
em sua página com explicações aprofundadas e estratégicas do Movimento Maker. O endereço da página é
http://www.makers.net.br/[_http://www.makers.net.br_].

[[fotomakersnet]]
image::image24.png[image,width=642,height=571]

==== LAPAC -- Universidade Estadual de Campinas

A Universidade Estadual de Campinas, uma das mais proeminentes do país em pesquisa e extensão, não poderia
deixar de participar desta tendência. Desde sua criação em 2006, o _Laboratório de Automação e Prototipagem
para Arquitetura e_ Construção (LAPAC) teve por objetivo estudar sistemas generativos de projetos, tecnologias
tridimensionais (prototipagem rápida, fabricação digital e digitalização 3D), programação de computadores
e técnicas de automação e suas aplicações na arquitetura, desde o processo de projeto até a construção de
edifícios. Seu laboratório (com fresadoras CNC, cortadoras laser, impressoras 3D, etc.) é restrito a alunos da
universidade, mas trabalham em conjunto com o Museu Exploratório de Ciências da Unicamp e estão prestes a criar
um _fablab_ em um edifício antigo no centro de Campinas, deste modo ampliando seu alcance comunitário. Mas de
longe, seu maior valor para o _maker_ que não é aluno da universidade está em seus artigos claros e educativos
sobre o processo de fabricação aditiva, assim como o seu canal do youtube. Como são fontes __da academia__,
pode-se esperar delas um rigor e conformidade muito maior do que comumente se encontra no meio __Maker__. Assim,
o LAPAC presta um importante papel de embasamento científico e formal para o tão disperso conhecimento nessa área.

[[fotolapac]]
image::image25.jpeg[image,width=613,height=505]

.Referências:
Site do LAPAC: http://lapac.fec.unicamp.br/[_http://lapac.fec.unicamp.br_]

Canal de youtube: https://www.youtube.com/user/lapacfec[_https://www.youtube.com/user/lapacfec_]

Algumas publicações:
http://www.fec.unicamp.br/\~lapac/publicacoes.htm[_http://www.fec.unicamp.br/~lapac/publicacoes.htm_]. Artigos
adicionais podem ser encontrados no currículo _lattes_ da chefe do Laboratório, Gabriela Celani:
http://buscatextual.cnpq.br/buscatextual/visualizacv.do?id=K4792067H6[_http://buscatextual.cnpq.br/buscatextual/visualizacv.do?id=K4792067H6_]

==== O Projeto Mão3D

Gerido e criado pela Professora Doutora Maria Elizete Kunkel em janeiro de 2015, o projeto Mão3D, inspirado
pelo iniciativa internacional de auxílio a desabilitados "Enabling the Future" e seu projeto comunitário de
designs voluntários "e-NABLE", procura auxiliar os milhares de brasileiros amputados a levar uma vida menos
estigmatizada e mais confortável com o uso de próteses acessíveis feitas através de impressão 3D doméstica,
com o acompanhamento apropriado de psicólogos e fisioterapeutas.

A reabilitação de amputados é uma tarefa árdua pois lida com aspectos emocionais e de saúde, e é especialmente
delicada em relação a crianças, que além do problema de poderem não entender ou lidar bem com os procedimentos,
têm crescimento rápido levando à necessidade de substituição constante das próteses (e isso agrava a
necessidade de serem baratas).

[[colagemmao3d]]
image::image26.png[image,width=619,height=116]

O grupo da Dra. Elizete além de trabalhar com os modelos open-source do projeto e-NABLE busca desenvolver um
protocolo de reabilitação adequado. Com seu caráter acadêmico como projeto de extensão universitária no
Instituto de Ciência e Tecnologia da Universidade Federal de São Paulo (ICT-UNIFESP), tem também como parte de
sua missão a publicação de artigos científicos, disseminação do conhecimento pela participação em eventos
e seminários e treinamento para reabilitação e produção de próteses. Diferente de iniciativas acadêmicas
que se comportam como "cabalas" fechadas com acesso somente pelos graduados, o programa Mão3D desde o
início procurou a interação com a sociedade, desde por parcerias e recepção de doações de empresas privadas
(geralmente __startups__), até participação nos fóruns, _hackerspaces_ e demais lugares onde a comunidade _Maker_
se encontra. Assim, se por um lado o programa tem projetos universitários avançados de pesquisa envolvendo até
próteses mioelétricas, por outro comparece na _Campus Party_ e _The Developer Conference_ e até faz seu próprio
_blog_ e tem página de facebook para comunicação com o público.

.Recursos do grupo Mão3D:

* página do projeto: https://www.biomecanicaeforense.com/mao3d[_https://www.biomecanicaeforense.com/mao3d_]
* blog: https://mao3d.wordpress.com/[_https://mao3d.wordpress.com/_]
* facebook:
https://www.facebook.com/Mao3D/[_https://www.facebook.com/Mao3D/_]
* Canal do youtube:
https://www.youtube.com/channel/UCfMU_lReiz3F3mBMnONvYbg[_https://www.youtube.com/channel/UCfMU_lReiz3F3mBMnONvYbg_]
* projeto e-NABLE: http://e-nable.org/[_http://e-nable.org/_]

Mais do que uma instituição, o Mão3D é importante como referência para a seriedade de trabalho e formalidades
necessárias para o trabalho com deficientes (com os alunos tendo inclusive que passar pela complexa burocracia de um
comitê de ética), pois infelizmente este é um campo em que os picaretas, trambiqueiros e oportunistas abundam,
com "iniciativas" geralmente comerciais que não dão assistência devida, não cumprem padrões éticos e
muitas vezes revindicam créditos sobre algo que não criaram, com os designs open-source do projeto _e-nable_
sendo um alvo frequente.

[[fotoeventomao3d]]
image::image27.jpeg[image,width=642,height=534]

Das colaborações do projeto Mão3D, uma que se destaca é a colaboração com outro grupo acadêmico, o Grupo de
Pesquisa em Manufatura Aditiva do Instituto Tecnológico da Aeronáutica, GPMA/ITA. O desafio é tão grande que,
como se diria no dialeto popular, os universitários tiveram que chamar os _outros_ universitários!

==== O GPMA/ITA

O plástico das impressoras 3D de fabricação de filamento fundido é razoavelmente resistente e serve para
próteses de mão que não passam por muitos estresses mecânicos. Mas a coisa muda de figura quando consideramos
os amputados que perderam seus membros inferiores ou nasceram sem eles. Estas são as partes de nosso corpo que
mais estão sujeitas a grandes forças e movimentos e embora os plásticos impressos possam conseguir sustentar
uma pessoa estática, não têm condições de suportar as variadas agressões do meio como grandes tensões,
compressões, cisalhamentos e até desgaste químico e biológico. Para este fim, as próteses inferiores ainda
são restritas às grandes impressoras 3D industriais que trabalham com polímeros contínuos maciços e metais
e que tipicamente custam na casa de centenas de milhares de reais, com o insumo igualmente caro. E isso não é
somente um problema para próteses: o uso em estruturas aeroespaciais também é uma necessidade.

É nesse contexto que entra o GPMA. O grupo, criado no início de 2016 pelo Professor Rafael Ferreira e os doutorandos
Thiago Dutra e Rafael Quelho, que explora a tecnologia de Fused Filament Fabrication com o objetivo de estabelecer
uma linha de trabalho em impressão 3D que possa contribuir na área de fabricação de componentes impressos
que possuam responsabilidade mecânica em sistemas de engenharia, não sendo apenas protótipos de forma. Ao
presenciar aumento considerável no número de bons artigos publicados nessa área em nível internacional,
seus integrantes acreditaram que o momento era propício para a pesquisa mais aprofundada, devido à crescente
complexidade dos processos envolvidos e à rápida expansão técnica dos processos mais utilizados como os das
impressoras RepRap. São estudados conformações e reforços dos termoplásticos com fibra de carbono, vidro e
kevlar, tanto curtas quanto contínuas. A caracterização dos materiais impressos também é essencial e o grupo
tem desenvolvido artigos quantificando rigidez e resistência dos mesmos para que possam ser usados adequadamente
em projetos de engenharia. E por fim, as estruturas compósitas com esses materiais são analisadas, otimizadas e
modeladas por elementos finitos, já tendo sido defendidos no momento da redação deste livro três trabalhos de
graduação e um de iniciação científica, com dois doutorados no caminho. Os artigos científicos decorrentes serão
publicados ainda em 2017 e estão sendo compartilhados também pelo _academia.edu_ e __researchgate.net__. Tomara
que outros grupos sigam o mesmo caminho e quando possível coloquem os artigos como _open access_ (acesso aberto),
para que qualquer usuário -- maker, profissional, industrial ou doméstico -- possa usar os resultados sem ter
que pagar fortunas pela informação. O grupo centraliza sua interação com a comunidade e os links dos artigos
em sua fanpage no facebook: https://www.facebook.com/GPMA.ITA/[_https://www.facebook.com/GPMA.ITA/_]

==== A Fotogrametria de Cícero Moraes e Paulo Miamoto Dias

Como desdobramento dos trabalhos de Cícero e Paulo em colaboração com o médico veterinário Roberto Fecchio,
as técnicas foram aplicadas para a digitalização de lesões em animais para sua reabilitação protética. Algum
tempo depois, protótipos de próteses foram impressos, até que o primeiro caso bem-sucedido foi o do jabuti
Freddy. Outros animais também foram reabilitados com a integração de modelagem e impressão 3D, materiais dentários
e cirurgia veterinária. O grupo voluntário que formou-se a partir desta parceria, terminou por atender mais 12
animais, e segue em atividade, ganhando a alcunha de ‘Animal Avengers’, após uma brincadeira que comparava as
diferentes habilidades dos integrantes, ligados à área de medicina veterinária, odontologia e design gráfico
às habilidades do notório grupo de heróis de histórias em quadrinhos. Atualmente, Cícero não faz mais parte
da equipe, e dedica-se a projetos pessoais, enquanto Miamoto conduz os processos ligados à modelagem e impressão 3D.

Nos trabalhos da dupla (muitas vezes com outros colaboradores), Cícero geralmente era o porta-voz, aparecendo
em vários veículos de mídia nacionais e internacionais, incluindo o programa Fantástico da Rede Globo de
Televisão. Seus vídeos educativos no youtube baseados nos trabalhos que faz contribuíram para sua fama, assim
como seus artigos de blog e até participação em artigos científicos, com seu maior trabalho sendo o seu e-book
em português em co-autoria com Miamoto, que ensina Reconstrução Facial Forense usando softwares livres e gratuitos.

[[fotociceroepaulo]]
image::image28.jpeg[image,width=642,height=435]

Esta parceria iniciou-se com as ciências forenses como pano de fundo, e embora novas metodologias estivessem em
franco desenvolvimento (como o protocolo para reconstruções faciais totalmente realizado com software livre),
o diálogo técnico-científico com instituições era dificultado pelo fato de serem dois indivíduos a propor
projetos em parceria. Sem vínculo com instituições de ensino superior à época, mas ávidos por explorarem os
progressos em prol das ciências forenses no Brasil, Miamoto viu na fundação de uma organização não governamental
sem fins lucrativos uma alternativa para institucionalizar as ações. Em 2014 foi fundada a Equipe Brasileira de
Antropologia Forense e Odontologia Legal (Ebrafol), em conjunto com profissionais de direito e odontologia. Com
o intuito de promover os direitos humanos por meio do aprimoramento dos métodos de produção da prova pericial,
a Ebrafol passou a atuar em três eixos:

. prestando serviços periciais em perícias de análises antropológicas de cadáveres desconhecidos, sendo
a Faculdade de Odontologia de Ribeirão Preto sua maior parceira;
. capacitando recursos humanos, em diversos
cursos e palestras que deram autonomia para peritos oficiais dominarem técnicas de digitalização aplicadas às
suas respectivas áreas; e
. promovendo cultura em projetos que utilizam das mesmas técnicas, porém fora do
âmbito forense, como no caso da reconstrução facial dos santos peruanos São Martinho de Porres, São João
Macias e Santa Rosa de Lima.

Em 2016, Cícero também deixou o cargo de Vice-Coordenador da Ebrafol para dedicar-se a seus projetos pessoais,
todavia sua atuação prossegue.

Interessante notar que desta inusitada parceria, uma pequena revolução com smartphones e notebooks prosperou,
e atualmente os conteúdos de digitalização, modelagem e impressão 3D agora passam a integrar o temário de
cursos de pós-graduação em odontologia legal, além de embasar diversos trabalhos científicos. Enquanto Moraes
segue em projetos de divulgação de ciência e tecnologia junto à mídia, Miamoto dedica-se à carreira acadêmica
como docente de cursos de graduação e pós-graduação em odontologia e medicina e pesquisador.

[[colagemciceropaulo]]
image::image29.png[image,width=632,height=544]

É sempre saudável notar que muitas das conquistas de Paulo, Cícero e seus associados foram possíveis por causa
de uma instituição governamental que é central ao desenvolvimento da impressão 3D industrial e comunitária
no Brasil: muitos de seus trabalhos foram fabricados por impressoras 3D do CTI Renato Archer.

==== CTI -- Centro de Tecnologia da Informação Renato Archer

É impossível falar de impressão 3D no Brasil sem mencionar o trabalho do Centro de Tecnologia da
Informação Renato Archer, popularmente conhecido como "CTI", em especial o seu Departamento de Tecnologias
Tridimensionais (DT3D), hoje _Núcleo_ de Tecnologias Tridimensionais. O CTI é uma unidade de pesquisa do Ministério
da Ciência, Tecnologia e Inovação. Foi inaugurado em 1982 e o DT3D em 1997, desde então contribuindo para
o avanço tecnológico brasileiro incluindo bastante interação com indivíduos e empresas privadas. Cícero e
Paulo, por exemplo, utilizaram das impressoras 3D industriais do CTI para algumas de suas próteses (como as de
titânio para bico) e para a impressão em cores da face de Santo Antônio.

Mas não se resumem à impressão 3D industrial. O CTI tem iniciativas comunitárias e "Maker" como o Fab@Home
(uma impressora 3D / fabricador pessoal estilo __reprap__) e o software especializado __Invesalius__, um software
que pega imagens médicas em formato "DICOM" de tomografias computadorizadas ou ressonância magnética
("fatias") e reconstrói a imagem tridimensional a partir destas fatias. O nome do software é uma homenagem
a _Andreas Vesalius_ (1514-1564, considerado o "pai da anatomia moderna") e ele é open-source, licenciado
sob a GPL versão 2, disponível para Mac OS X, Linux e Windows.

[[screenshotinvesalius]]
image::image30.jpeg[image,width=593,height=438]

[[colagemcti]]
image::image31.png[image,width=586,height=520]

Faz-se mister dar crédito especial ao Dr. Jorge pelo envolvimento com a impressão 3D bem antes da sua explosão
com a queda da patente, já em 2007 tendo colaborado com um livro organizado pelo pesquisador Neri Volpato:

[[livromariovolpato]]
image::image32.jpeg[image,width=352,height=570]

==== Outros pioneiros e divulgadores

A tarefa de reconstrução histórica nunca é completa, ainda mais no Brasil onde a informação é desencontrada e
esparsa. Certamente não citamos todas as pessoas que contribuíram para a divulgação e enriquecimento do espaço
_Maker_ no Brasil -- que, aliás, é uma história que ainda está sendo escrita -, e agradeceremos imensamente
contribuições para edições posteriores deste livro. Se você, caro leitor, julga que uma pessoa, grupo ou instituição
proeminente foi esquecida, receberemos de braços abertos esta informação.

<<<
== O Universo Maker
=== A Exaptação

Um conceito da biologia evolucionista que pode ser útil para entender a mentalidade "Maker" tão integral à
impressão 3D atual é o de __exaptação__^1^, um fenômeno que ocorre quando um determinado traço biológico que
desempenha determinada função é cooptado para uma função diferente, tendendo a evoluir naquela direção. Assim
como as penas primitivas, usadas para regulação térmica, acabaram sendo cooptadas para facilitar planagem e voo,
se cooptaram os grudentos _laquês de cabelo_ para facilitar a aderência da peça impressa na mesa. Assim como a
proteína alfa-cristalina, usada no metabolismo do sistema regulatório dos primeiros seres, acabou cooptada para
preencher o tecido transparente da córnea ocular^2^, o espaguete de _nylon_ usado em roçadeiras para cortar grama
foi derretido nas impressoras 3D para fabricar peças e utensílios. De fato, até na arqueologia e história
por vezes se cita "exaptação" para ilustrar inovações tecnológicas da humanidade a partir de objetos
que desempenhavam outras funções, e mesmo para tempos modernos há artigos e publicações que resgatam este
termo^3^. Isso ocorre porque a exaptação é um exemplo ilustre de uso criativo e livre de algo já existente,
ou pelo menos até que mecanismos de controle que impedem reuso e inovação como Digital Rights Management,
copyright e patentes metam o pé na frente -- algo que os cientistas que começaram a usar o videogame Playstation
3 da Sony como supercomputador para seus clusters de processamento descobriram da pior maneira, quando a empresa
bloqueou este uso por uma atualização.

Muitos desses mecanismos de aderência à mesa são "exaptados" de soluções de mercado de massa que têm as
propriedades necessárias para funcionar bem, e por serem produzidos em série em processos industriais, acabam
sendo uma opção bem mais barata; as molas usadas em extrusores e mesas aquecidas, por exemplo, são praticamente
idênticas às que vêm nos pregadores comuns de plástico -- mas tais pregadores são tão mais baratos que vale
mais a pena comprar um pacote deles e jogar a parte plástica fora do que ter que encomendar as molas específicas,
que ainda são difíceis de achar.

[[fotomolaspregador]]
image::image33.png[image,width=642,height=591]

Citações:

1.  Gould, S. J. (1991). Exaptation: A crucial tool for evolutionary psychology. __Journal of Social
Issues, 47__, 43-65.  2.  Jester JV (2008). _https://www.ncbi.nlm.nih.gov/pmc/articles/PMC2275913["Corneal crystallins
and the development of cellular transparency"]._ Seminars in Cell & Developmental Biology. *19* (2): 82--93.  3.
Innovation Through Exaptation - http://timkastelle.org/blog/2010/05/innovation-through-exaptation/

=== O Complicado Mercado Maker: o Bom, o Mau e o Feio

Se há algo que pode ser dito sem equívocos sobre a época atual, é que a indústria obtusa e conservadora não
entende o mercado Maker. Uma sugestão gritante disso é a dificuldade de achar peças de máquinas no varejo,
disponíveis apenas no atacado, dificultando a vida dos entusiastas de impressão 3D (nada de _long tail_ no ramo
industrial, aparentemente^1^). Outra evidência independente é a mentalidade "sucesso do iPhone": virtualmente
todas as empresas do ramo de fabricação agem como se achassem que o que falta é um "jeito genial" de
tornar as impressoras 3D tão fáceis quanto um eletrodoméstico, como aconteceu com o iPhone e em parte com o
computador. Existem dois problemas com essa visão -- uma é ela contextualizar a relação entre fabricante,
vendedor e cliente como uma relação necessariamente vertical e hierárquica, que tem as "decisões" feitas pelo
fabricante e a "escolha" feita pelo cliente. Quando você tem 100 designs de extrusores alternativos para sua
impressora 3D popular compartilhados no site __thingiverse__, a maioria deles superior ao original, você perceberia
que essa suposta verticalidade, ou hierarquia, não existe. A segunda é não entender a função de uma "fábrica
pessoal" e a relação psicossocial dela com o consumidor deste tipo de dispositivo. O "consumidor" de uma
ferramenta como um martelo não é só um consumidor, é um __maker__. Ele quer usá-la da maneira que precisar
e construir coisas com ela e isso pode envolver até "exaptações" da ferramenta. Quanto mais versátil o
martelo for, melhor, mesmo que possa haver acidentes com essa versatilidade. Os riscos de martelar um dedo, cair
em cima do pé ou ainda ser usado como uma arma são aceitáveis ou até, pasmem, _desejáveis_ (sob ameaça,
um martelo pode ser um jeito efetivo de se defender). Se você faz um martelo à prova de acidentes, bem leve,
de plástico, atóxico, acolchoado e com trava de segurança, será apenas um brinquedo e apenas crianças irão
consumir. E não só isso: um instrumento _maker_ transforma o consumidor em produtor, ou na nossa analogia, a
criança em adulto. Portanto, mesmo as crianças que compram seu martelo de brinquedo crescerão e precisarão de
martelos "de verdade". Esse efeito é tanto maior quanto maior for o ecossistema de suporte, e as empresas que
conseguem ver isso, como as de insumos e peças para impressoras 3D, estão crescendo explosivamente. Tudo incentiva
a abertura -- se você vende peças pra impressoras 3D, é interessante elas serem compatíveis com o máximo de
modelos do mercado, e se você vende impressoras 3D, é interessante elas terem peças de substituição baratas
e facilmente encontráveis no mercado. A fabricante de hotends e3d deixa todos os seus designs __open-source__,
e não é coincidência que tenham se tornado o padrão efetivo de mercado. Isso não é só uma semelhança com
o "mercado aberto de PCs" versus o antigo "mercado fechado da Apple", é uma gigantesca extrapolação da
antiga abertura dos PCs -- afinal, ninguém fabricava seus próprios PCs em casa.

Dito isto tudo, o mercado Maker no qual a impressão 3D se insere está longe de ser harmonioso e sem falhas. Quando
se tem uma única instituição ou um pequeno número de instituições controlando um espaço tecnológico, se
tem também a imposição de uma visão única -- uniformidade. Além disso, todo o conhecimento -- geralmente
restrito e reservado aos "favorecidos" - é internamente consistente e completo. Mas no mercado maker em
que a experimentação, variedade e desvio da norma são encorajados, as mesmas forças de mercado que tornaram
o padrão da e3d inescapável fazem com que carretéis de filamento de impressoras 3D de diferentes fabricantes
tenham diâmetros diferentes, furos diferentes, características diferentes e forçam fabricantes de impressoras
a adotarem encaixes para esses carretéis o mais genérico possíveis, ao invés de otimizados para qualidade e
eficiência espacial. Até mesmo quando as medidas parecem "padronizadas" ocorrem desvios da interpretação
do padrão (ou mesmo de qualidade pura e simples) que dificultam o uso harmonioso de fontes diferentes -- como
no caso da impressora 3d open-source __Graber i3__, largamente vendida no Brasil por diversos fabricantes mas em
muitas variedades distintas, não especificadas, no corte do MDF ou acrílico. No caso dos materiais de filamentos,
a grande maioria dos produtores brasileiros não coloca a composição por medo de concorrência, sem se dar
conta que há muitas aplicações para as quais esta informação é essencial -- apesar de esse não ser um
exemplo representativo do mercado "Maker" porque ele pressupõe abertura e transparência. Além disso, por
sua própria natureza controladora, as empresas mais industriais costumam ter contratos prolongados e relação
estreita com o cliente, facilitando expedientes como reciclagem de carretéis (um dos raros pontos positivos da
Stratasys^2^). Existe uma iniciativa entre os próprios fabricantes e comerciantes ligados à impressão 3D (em
sua maior parte, empresas pequenas e médias) para resolver este problema, envolvendo padronizações de medidas,
regras para informação ao cliente, expedientes de reciclagem e proteção do consumidor, mas ainda tímida e
sem site próprio, consistindo no momento de fórum e grupo de __whatsapp__. Torçamos para que uma iniciativa
como essa cresça o suficiente para trazer soluções ao ecossistema!

=== A Teoria, a Prática, o Ruído e o Sinal

Um outro aspecto negativo do movimento Maker é em relação à não-conformidade do conhecimento: o mesmo
espírito de rebeldia, a mesma informalidade, o mesmo experimentalismo e a mesma abertura a pessoas de todos os
tipos de formações diferentes traz também um "caos" de teorias com muito menor uso de conhecimento formal
e organizado, mais erros, equívocos, desentendimentos e opiniões disfarçadas de afirmações de fatos. Essa é
uma característica que talvez seja __irredutível__, inerente ao próprio processo. Isso não quer dizer que não
possa ser mitigada, esta obra sendo exatamente uma tentativa de criar um roteiro científico com sentido para os
iniciantes e até veteranos em impressão 3D.

O pragmatismo sem embasamento e a teoria capenga, faltante ou equivocada resulta em tentativas e experimentos
perdulários; se você não entende que numa FFF o que faz o filamento ser extrudável é estar em estado de
transição vítrea e funcionar como êmbolo de si mesmo em uma seringa imaginária, limitando os materiais que
funcionam com a tecnologia, você pode acabar perdendo seu tempo testando usar estanho de solda na impressora 3D,
um material que passa imediatamente do estado sólido para o líquido.

Outros casos são típicos do ecossistema. Se você já se perguntou por que óleos vegetais, daqueles vendidos em
mercadinhos, não são usados em maquinário já que costumam ser mais baratos e parecem também cumprir a função
de "lubrificar" algo, geralmente a substância culpada por isso é a glicerina, ou glicerol. É um líquido sem
cor, sem odor e de gosto doce solúvel em água e higroscópico. Aqui se situa o principal problema (embora não o
único); uma das funções de lubrificantes finos em peças de máquinas é evitar que água e oxigênio ataquem
o material. Existem outros problemas como a possível formação de impurezas em altas temperaturas (a glicerina
se transforma em acroleína), mas é suficiente dizer que usar óleos comestíveis nas peças delicadas de um
equipamento de controle fino não é uma boa idéia, e mesmo assim se alastrou na comunidade _Maker_ a idéia de
usar _óleo de canola_ no interior do tubo do hotend ou no filamento PLA com a finalidade de lubrificar a passagem
do filamento, visto que o PLA tem uma tendência maior que outros materiais a aderir às paredes. O óleo de canola
tem certa vantagem legítima aqui que é um "ponto de fumaça" alto, mas é facilmente substituível por óleos
lubrificantes finos para máquinas de mesma característica, como "óleo Singer" ou silicone lubrificante
de esteira.

Outro caso sintomático de falta de informação é a recorrente busca, especialmente em grupos de discussão
e fóruns de impressão 3D, de reutilização do plástico das garrafas de refrigerante, o PET (polietileno
tereftalato), para fabricação de filamento de impressão 3D. O raciocínio é saudável: tais garrafas -- e
outros utensílios feitos do mesmo material -- representam um enorme desperdício da civilização moderna e
um problema ambiental, pois simplesmente são usadas, descartadas e terminam em lixões, só nos últimos anos
começando a serem recolhidas para reciclagem. As impressoras 3D de baixo custo estão aí fazendo uso útil e
eficiente de vários termoplásticos, por que não reusar o plástico das garrafas nessas máquinas? O diabo,
já diria o provérbio, mora nos detalhes. O plástico de tais utensílios, para começar, é repleto de dopantes
e impurezas que precisam ser filtrados e lavados no processo. Plantas imensas de processamento, com sua própria
_pegada de carbono_ e impacto ambiental, são necessárias para tal reciclagem, em que depois da lavagem e prensagem,
ainda é necessário uma etapa de trituração em flocos, extrusão em grãos e finalmente extrusão dos grãos
para uma forma utilizável, como um utensílio ou candidato a filamento de impressão 3D. Mas aí mora outro
problema, pertinente às propriedades do material: apesar de ser um termoplástico com vários ciclos possíveis
de derretimento e solidificação, o PET tende à cristalização, isto é, formação de padrões atômicos
regulares que deixam a substância rígida e quebradiça. No processo industrial este fenômeno indesejado é
evitado com o resfriamento rápido do plástico, o que evita que as moléculas se organizem em cristais, mas este
resfriamento rápido seria caro e difícil de implementar em uma impressora 3D. Em resumo, a reciclagem de garrafas
PET para impressão 3D parece não ser viável, ou no mínimo um desafio para um profissional experiente do ramo de
plásticos e não para discussões desinformadas do próprio processo de reciclagem em fóruns. Para informação,
existe uma variedade do PET, o PETG ou PET glicol, utilizada como filamento para impressão 3D que não cristaliza,
mas seu processo de fabricação, mais caro que o do PET, já o cria como PETG e não a partir de PET comum.

Por último, um dos casos mais curiosos de desinformação no meio Maker é a desinformação __em relação
ao próprio meio__. O exemplo mais notável se expressa no design da impressora 3D _Prusa i3_ do projeto
reprap. Olhando-se a impressora ativa de perto e vendo a movimentação do carro no sentido vertical, se percebem
características dignas de estranheza:

* A movimentação do carro se assenta em _dois_ pares independentes de suportes, presos em paralelo. Um de barras
roscadas, que se movimenta, e um de barras lisas, por onde o carro escorrega. Por que a redundância? Não seria mais
palatável simplesmente apoiar em _um_ par de barras roscadas?
* A barra roscada __não é totalmente reta__. De
fato, o processo de fabricação desses componentes, ou até mesmo o transporte e distribuição, não raramente
gera uma ligeira curvatura, visível a olho nu sob inspeção cuidadosa.
* Para piorar, a barra roscada _só é
presa por baixo_ e pela rosca ao quadro da impressora. O extremo superior da barra gira em falso, solto na parte
de cima.
* As barras lisas, cuja retidão é maior, são consideravelmente mais grossas que as barras roscadas - 8mm contra 5mm de diâmetro.

Esse quebra-cabeça leva muitos a concluir, sem pesquisar, que tais características são simplesmente erros de
projeto, erros que precisam ser consertados, claro. As "soluções" para o problema são variadas, mas devido
à trivialidade de modelar tal peça e da facilidade geométrica de encaixar algo no topo do quadro, os modelos
mais frequentes implementam um orifício para manter a rotação da barra roscada sempre no mesmo lugar, às vezes
com encaixe para rolamento para sugerir maior reflexão.

O problema desta "solução", claro, é que trata um problema __que não existe__. As impressoras 3D
são projetadas desde o início pra tirar vantagens dos componentes baratos e inclusive tratar seus pontos
negativos. Barras roscadas, sejam elas de 5mm ou 8mm, são, como já foi dito, susceptíveis a curvaturas e
projetadas mais para forças de tração, não de compressão. Por outro lado, barras lisas são por natureza
extremamente retilíneas e resistentes a curvaturas. Essa é a razão da aparente redundância, que na verdade é
uma separação de tarefas: cumpre às barras roscadas movimentar o carro verticalmente, enquanto que as barras
lisas servem para _guiar_ o carro numa trajetória perfeitamente retilínea. Para assegurar que a curvatura das
barras roscadas não interfira muito, elas têm diâmetro menor, e não têm ponto de fixação superior pois isso
daria maior força de contraposição à curvatura.

Que é exatamente o que a "solução" desinformada faz, cria um ponto de apoio extra para a barra roscada que
a faz ficar em tensão constante com as barras roscadas. Isso aumenta o desgaste das peças, aumenta o chamado
"Z wobbling" (variações do Z) e, claro, leva a impressões piores. O contrário do efeito advogado pelos
projetistas da "solução".

[[reinvencaodarodaquadrada]]
image::image34.png[image,width=642,height=483]

Embora raramente, o teste desinformado pode suprir resultados e resultar em algo genuinamente inovador. É possível
fazer uma analogia com o processo evolutivo: mutações são erros de cópias de genes, e quase sempre são
prejudiciais ao organismo visto que seu DNA já está adaptado ao ambiente por muitas gerações. Mas algumas raras
vezes esse erro de cópia resulta em um gene que funciona melhor que o anterior, e com essa vantagem de funcionamento
ele contribui para a sobrevivência e reprodução do indivíduo, se alastrando pela população. Na reprodução,
em parte, essa analogia quebra: estamos tratando de experiências domésticas, ou em ambientes "de garagem"
ou pequena empresa. Aquela inovação legítima na maioria dos casos não tem o incentivo para ser documentada
cientificamente, nem submetida a escrutínio formal, e raras vezes chega a se traduzir em produto. Em especial as
_falhas_ pois são tidas como motivos de vergonha e não são muito comentadas -- uma notável exceção sendo a
coluna "Fail of the Week" do sítio web __Hackaday^3^__. Algumas vezes, com sorte, será descrita ou implementada
de modo a que outros possam repeti-la e a idéia se espalhe. A chance é baixa, mas a "reinvenção da roda"
acontecendo em paralelo massivamente às vezes compensa estatisticamente as baixas chances e oferece algo de novo.

[NOTE]
.Notas:
====
. https://pt.wikipedia.org/wiki/Cauda_longa[_https://pt.wikipedia.org/wiki/Cauda_longa_]

. http://www.stratasys.com/recycle[_http://www.stratasys.com/recycle_]

. https://hackaday.com/category/hackaday-columns/fail-of-the-week-hackaday-columns/[_https://hackaday.com/category/hackaday-columns/fail-of-the-week-hackaday-columns/_]
====

=== Por outro lado...

Há outros contextos do processo _maker_ mais propícios às inovações e descobertas. Um deles é a __frictionless
innovation__, já mencionada na introdução. Nesse caso temos um produto (software, modelo tridimensional,
hardware, etc.) já existente ao qual o _maker_ faz uma pequena melhoria. O produto não tem restrições de uso
ou modificação e tipicamente tem novas versões com o tempo; torna-se do interesse daquele maker ter a melhoria
incorporada nas novas versões, no mínimo para não ter o trabalho de reaplicá-la. Ele se torna compelido a
incluir sua modificação no ciclo de vida daquele produto, e junto com outros colaboram com pequenas melhorias que,
em número, o tornam muito melhor.

Um exemplo ajuda a clarear o conceito. Vamos explicar mais pra frente as peças, mas um dos primeiros extrusores
de impressoras 3D _reprap_ a aparecer, com as partes que fazem o mecanismo de aprisionamento do filamento,
sustentação do motor e do hotend sendo impressas em plástico, foi o "Wade’s Geared Nema17 Extruder",
pelo usuário Wade. Ele o criou para ser usado nas impressoras 3D Darwin (a primeira do projeto reprap, criada
por Adrian Bowyer) ou Mendel (a primeira criada por Josef Prusa). Ele usava um motor NEMA17 como os dos eixos,
diferente do extrusor da Darwin em que foi baseado que usava um NEMA14.

Um pouco como era de se esperar, o design é relativamente simples, cantos retos, poucas curvas. Estamos ainda no
início do projeto reprap.

[[extrusorwade]]
image::image35.png[image,width=642,height=466]

É um design funcional e o fato de ter _redução_ no tracionamento (ou seja, engrenagens adicionais ligadas à
rotação do motor até os dentes que empurram o filamento) era essencial para a época, em que se usavam motores
relativamente fracos (por volta de 1 a 3 kgf.cm de torque de retenção, quando hoje em dia é usado pelo menos
4 kgf.cm) e reduzir a velocidade com engrenagens aumenta o torque aplicado.

Um usuário ativo nos fóruns do projeto _reprap_ e no site thingiverse na época, GregFrost, achou que o design
poderia ser melhorado, e botou as mãos na massa. Usando o software open-source OpenSCAD, redesenhou todo o
extrusor com 9 melhorias numeradas, a nona sendo "adicionadas curvas sensuais" - algo que reflete tanto o
acesso a ferramentas melhores, quanto a caprichos maiores de projeto. Nomeou o extrusor dele de "Accessible
Wade’s Extruder", pra não deixar de dar crédito ao Wade, mas o extrusor, que teve enorme adoção, acabou
sendo conhecido como "Greg’s Wade Extruder" (‘extrusor do Wade do Greg’).

[[extrusorgreg]]
image::image36.png[image,width=619,height=540]

Apesar de o extrusor do Greg aparecer com menos derivações que o Wade (19 contra 22) no site thingiverse, ele
teve _muito_ mais sucesso. Muitas delas foras do site, ou ainda no próprio thingiverse mas não contabilizada,
e todas mais usadas nos modelos comerciais. Uma razão desse sucesso foi a ferramenta escolhida por greg: o
OpenSCAD, open-source e multiplataforma, podia ser baixado de graça ao invés de custar milhares de dólares
como os modeladores 3D da época. Fácil de usar e simplificado ao extremo, permitia fazer não só peças de
máquina de medidas exatas com facilidade como ganhou até o privilégio de ser a base para os hoje famosos designs
"customizáveis" no thingiverse.

Esta pequena diferença funcionou praticamente como uma medida de acessibilidade, visto que permitiu a usuários
de diversos sistemas operacionais, e sem envolvimento prévio com a indústria de modelagem ou investimento de
muito dinheiro, tivesse acesso a fazer modificações em modelos 3D. A facilidade de modificações pesa porque o
formato 3D cru utilizado, o STL, pode sim ser modificado diretamente, mexendo em arestas, vértices e superfícies;
mas quanto mais complexo e elaborado o design, quantas mais etapas para construí-lo, mais difícil se torna essa
modificação direta, tornando necessário que o interessado em modificar tenha acesso aos passos "fonte"
do modelo, às operações que o criaram, essas geralmente gravadas em um formato próprio do modelador, como
"SLDPRT" do SolidWorks ou "DWG" do AutoCAD. O OpenSCAD usa um formato-fonte próprio, .scad, que é um
simples e legível arquivo-texto com comandos, como um código-fonte de programação. A "compilação" desse
arquivo pelo programa é que gera a forma 3D; se você quer modificar algo na forma, é muito mais fácil mexer
nesse código. Isso desatou um nó enorme no processo, pois muitos interessados em modificações e aprimoramentos
nos designs existentes tinham acesso ao fonte por causa de licença open-source mas não a modificá-lo visto que
o formato de arquivo era proprietário e necessitava de uma ferramenta restrita e geralmente cara.

Uma dessas modificações veio em 2012, de Jonas Kuehling. Utilizando os mesmos fontes .scad ele melhorou o design
e fez o dele incorporando modificações pontuais de outros, e também se tornando enormemente popular e dando
origem a nada menos de 88 derivações contabilizadas! E se tornando o __extrusor do Wade do Greg do Jonas__.

[[extrusorjonas]]
image::image37.png[image,width=642,height=526]

Lembra-se que falamos da trajetória do grupo ReprapBR? Aqui os caminhos se cruzam. O mesmo Alain Mouette que
enviou o primeiro e-mail para o grupo aparece agregando mais um vagão ao agilíssimo trem da frictionless innovation:

[[extrusorajgw]]
image::image38.png[image,width=642,height=419]

=== Quando vem a fricção

Patentes, especialmente as consideradas "bem escritas", são um estorvo incomensurável, um golpe de prejuízo
incalculável contra o progresso da tecnologia, pois bloqueiam um design / projeto / invenção e às vezes todo um
campo da tecnologia de progredir por sua duração que é, grosso modo, de vinte anos. Foi o caso da impressão
3D FFF com a Stratasys, e outros casos históricos em que a tecnologia "emperrou" por décadas por causa
delas são conhecidos, como o barco a vapor.^1^ Este progresso incremental que ocorreu com os extrusores _também_
ocorre com as patentes, mas com atrasos de anos para a chegada no mercado e quantias imensas de dinheiro jogadas
fora com os registros na "guerra de pequenos incrementos", contribuindo com os altos preços das tecnologias
e do custo de pesquisa e desenvolvimento.^2^

Uma vantagem, por assim dizer, das patentes é que elas obrigam o inventor a detalhar com pormenores e ilustrações
a sua idéia, de modo que quem constrói algo semelhante possa ser processado -- e quem quiser construir algo
semelhante, uma vez expirada a patente (que não pode ser renovada), conseguiria. Um exemplo notável disso é a
iniciativa do advogado de patentes novaiorquinho Martin Galese, que resgata patentes expiradas para transformar
em modelo digital e compartilhar no site __thingiverse^3^__.

Mas patentes não são a única _fricção_ que atrapalham a agilidade da __frictionless innovation__. Nem mesmo
licenças de uso livres são o fator principal para a modificação e reuso. Como foi ressaltado no caso do extrusor
do __Greg__, um grande salto de "modificabilidade" que aconteceu foi a mudança do design para a ferramenta
__OpenSCAD__, ela mesma livre / open-source, e com um formato tão simples e compreensível que são possíveis
modificações sem usar a ferramenta e hoje em dia existem até interfaces web para ela.

O que aconteceria caso Greg não tivesse usado uma ferramenta acessível como o OpenSCAD? Historicamente, é muito
difícil tratar "e se", mas podemos ter uma evidência notável, ainda em 2014 , com um extrusor de excelência
técnica que foi muito aclamado em fóruns e é usado em impressoras open-source brasileiras, o __Alex Extruder__.

[[extrusoralex]]
image::image39.png[image,width=642,height=491]

Sob todos os pontos de vista, a excelência técnica do extrusor é inegável. Tem mais plástico nos pontos
de stress mecânico do extrusor. Tem encaixes finos permitindo a movimentação desimpedida da dobradiça e o
encaixe dos rolamentos e parafusos. E sendo um design feito por um brasileiro, vem com variações com encaixes
para diversos hotend do mercado nacional.

No entanto, tendo sido feito por um engenheiro mecânico com a poderosa ferramenta a que está habituado, o
Solidworks, ferramenta de modelagem sólida, a licença livre de pouco adiantou. O projeto tem apenas _duas_
derivações, ambas sendo a reconstrução e extensão em ferramentas diferentes.

[[extrusorlucaseka]]
image::image40.png[image,width=642,height=361]

O *KA Extruder* foi uma tentativa de transposição do Alex Extruder para o OpenSCAD. Mas, como se pode notar pelos
comentários na página do design, ele tinha várias "pontas soltas", era feito para um padrão de filamento que
começava a apresentar sua obsolescência (3mm de espessura) e não tinha encaixes para as peças mais populares do
mercado. Por isso, mesmo com sua licença e ferramentas livres, e por ser apenas a reimplementação de um design
já existente com menos variedades, não teve derivações.

Por outro lado, o *Lucas Extruder* foi muito mais do que apenas um derivativo. Além das obrigatórias melhorias
pontuais no projeto, Lucas Corato, um arquiteto brasileiro, criou um projeto que misturava várias boas idéias de
diversos extrusores do mercado, incluindo os "bits" (pedacinhos) intercambiáveis e a desmontagem rápida dos
componentes para manutenção. O extrusor pode ser usado com ou sem sensor de nivelamento, com filamentos de 3mm ou
1,75mm, com praticamente qualquer hotend do mercado, e resolveu _muitos_ problemas, enumerados em sua entrada. Não
à toa, sua popularidade, expressa nos "curtir" (158) e "adicionar à coleção" (208), foi enorme.

No entanto, novamente, o profissional acostumado a mexer em modelagem 3D usou a ferramenta a que está acostumado. No
caso essa foi a ferramenta __Sketchup__, um modelador de malha (como o Blender) que, apesar de ser disponível em
Windows e Mac OS X e ter versões gratuitas (com limitações de elementos), ainda assim é software proprietário
e, portanto, restritivo. Novamente, é revelador que um design assim tivesse apenas 3 derivações, 1 delas sendo a
versão seguinte do próprio autor e duas outras sendo leve modificações de malha a partir do STL final, e não
do arquivo-fonte de Sketchup disponibilizado na página.

[[extrusorlucasv2ederivacoes]]
image::image41.png[image,width=642,height=225]

O fluxo e evolução dos designs do thingiverse e outros sítios web de compartilhamento serve como uma fábula com
moral para os interessados no compartilhamento de projetos e participação do mercado Maker: acessibilidade é
o óleo das engrenagens da inovação. E até mesmo a escolha de ferramentas em que é feito pode ser um entrave
inesperado contra o sucesso do seu empreendimento. Isto é algo a se observar pois este equívoco é feito até
pelo mais bem-intencionados; o famoso chaveiro Marvin, peça usada para testar impressoras 3D, foi também feito
em SolidWorks.

[NOTE]
.Referências:
====
. 2003 Lawrence R. Klein Lecture, The Case Against Intellectual Monopoly -- M Boldrin, DK Levine -- International
Economic Review, 2004 -- Wiley Online Library.

. Leiva, Fernando, "Innovations as a Network of Ideas: Assessing Patent Values through Citations", Working Paper
(2007).

. http://www.popsci.com/diy/article/2013-08/get-3-d-printer-designs-expired-patents[_http://www.popsci.com/diy/article/2013-08/get-3-d-printer-designs-expired-patents_]
====

=== Usando sua impressora 3D pra ganhar dinheiro

Vimos na história da reprap e da impressão 3D no Brasil que a impressão de baixo custo vem acontecendo desde 2009
e, no Brasil, os hobbyistas começaram por volta de 2012/2013. Quem começou a aprender impressão 3D e a cobrar por
peças já teve uma vantagem na largada, e se soube aproveitar a oportunidade de ser um _early adopter_ (pioneiro)
e acumular este tempo de lucro, já transformou seu negócio em aquilo que chamamos de "birô de impressão",
um serviço de impressão 3D que tipicamente trabalha com várias tecnologias e materiais diferentes. Em 2013, o
difícil era achar os primeiros clientes pois a mentalidade de procurar a impressão 3D "de baixo custo" para
projetos ainda era incipiente. Hoje, já é muito mais fácil, mas por outro lado a impressão 3D de baixo custo,
especialmente a de FFF, já se popularizou tanto que é _muito_ difícil oferecer um diferencial. O mercado está
saturado e a saturação continua crescendo. Num mercado desses acaba somente "sobrevivendo" quem consegue
trabalhar com uma margem de lucro baixa ao mesmo tempo em que oferece vantagens, consistência, rapidez e qualidade
acima da média para seus clientes.

Dizer isto é necessário para contextualizar o leitor sobre as dificuldades que pode enfrentar, não
desencorajá-lo. Afinal, uma impressora 3D é uma pequena fábrica pessoal, algo que produz objetos reais úteis,
funcionais ou esteticamente desejáveis; transformar esta fábrica em uma fonte de sustento é uma inferência
lógica óbvia.

==== Como anunciar e onde

O primeiro dilema ao candidato à impressão sob demanda é __como encontrar e atrair os clientes__. O primeiro
pensamento é, claro, montar uma _loja_ para vender suas impressões. Como um serviço ainda não estabelecido
no mercado de massa, normalmente é dispendioso demais comprar ou alugar um escritório em local físico de
comércio para a administração das vendas, além de desnecessariamente limitar a clientela. A escolha, então,
penderia para o lado de uma __loja virtual__, o que exigiria um esforço de hospedagem, escolha de um software
adequado para gerenciar a loja, publicidade adequada para ela, cadastro dos serviços, fotografia do portfolio
e redação por advogado de um contrato de serviço prevendo todas as condições, preços, prazos e reveses da
transação. Existem serviços que se dispõem a gerenciar a maioria desses detalhes para o comerciante, geralmente
através de um pagamento mensal ou de uma parte do lucro -- exemplos brasileiros são _loja integrada_ e __loja
virtual do pagseguro__, entre outras. Mas existe algo que vai além -- serviços web específicos para impressão
3D, e que cumprem o papel de aproximar o produtor local do consumidor das impressões.

Nesses serviços, cada proprietário de impressora 3D cadastrado é um "hub", uma loja ou birô de impressão. A
interface web facilita ao máximo que o produtor cadastrado exponha seu portfolio, detalhe as tecnologias e materiais
de que dispõe, e aceite pedidos. Ao mesmo tempo, ela facilita também ao consumidor que ache serviços dentro da
faixa de preço que procura e principalmente, produtores locais, numa busca por proximidade -- já que estamos
falando de objetos físicos e frete pode ser considerável.

Um sistema de placar/reputação completa o funcionamento desses sistemas. Produtores que ganham altas notas dos
consumidores vão aparecendo primeiros nas buscas e em todo momento a reputação do produtor estará visível.

O portal de impressão 3D mais popular no mundo, e com funcionamento no Brasil, o 3DHubs é o melhor exemplo
disso. Fica com 15% da venda, fazendo seu serviço ser apreciado pela mediação rápida e competente, pela
facilidade em se realizarem tais negócios e até pelos ajudantes de serviço de frete. Uma vantagem enorme desse
tipo de serviço é que os termos de contrato estão pré-estabelecidos, afastando dores legais do caminho.

Para assegurar um sistema com bastante concorrência, o 3D Hubs pede ao produtor que entre com dados na interface
para que haja o cálculo automático do preço de qualquer peça, de acordo com o volume em mm^3^ dela. Assim,
quando o consumidor procura produtores em sua área e já tem o modelo da peça, pode simplesmente ver os diferentes
preços já explicitados na busca do sistema.

[[screenshot3dhubs1]]
image::image42.png[image,width=601,height=573]

Quem entende da técnica já notará algo "fora da ordem" aí: o preço ser calculado _automaticamente_
não parece certo. Uma peça pode ter muitas geometrias possíveis, das mais fáceis às mais difíceis. Veremos
na parte sobre fatiamento desta obra que existem muita maneiras diferentes de imprimir uma mesma peça, com
quantidades maiores e menores de material. Você pode precisar de suportes, _muitos_ suportes. O software (de
desktop) utilizado para isto se chama fatiador e dá estimativas do plástico gasto, tempo e custo da impressão,
algumas vezes bem distantes da estimativa do serviço web. Algumas formas serão impossíveis em certas tecnologias
de impressão 3D, e outras exigirão bastante acabamento ou retoques. Isso não entra automaticamente no preço,
em nome da facilitação das compras. Algumas vezes o que acaba acontecendo é que o cliente faz o pedido e o _hub_
não aceita por não compensar, ou aceita e faz um trabalho ruim, tendo sua nota diminuída.

O 3DHubs não é o único. Em franco crescimento e popularização existe o serviço brasileiro __Cammada__,
que tem uma interface mais amistosa. A busca equivalente no Cammada permite até cálculo automático de frete:

[[screenshotcammada1]]
image::image43.png[image,width=636,height=473]

O cammada permite ao produtor uma certa flexibilidade no cálculo automático como descontos conforme o volume
aumenta. Ainda assim, não há nada que avalie estruturas adicionais, dificuldade do modelo e demais atributos,
dependendo de negociação posterior.

Isso nos leva ao próximo ponto: já que estamos tratando de um serviço feito a partir de geometrias arbitrárias
de modelos de computador, qual é a melhor maneira de cobrar por este serviço, de modo a que haja um balanço
ótimo entre consumo e produção?

==== Como cobrar por impressões

A citação do serviço brasileiro Cammada é providencial: além de fornecer o cômodo serviço de intermediador
de fabricação digital, seus fundadores procuram também gerar informação e _mindshare_ para a tecnologia --
um cenário aliás ideal para a produção de conteúdo open-source -, e uma de suas contribuições já bastante
difundidas ao público é a __calculadora Cammada__, uma aplicação web elegante que sugere e calcula o modo e
preço de cobranças de acordo com uma série de variáveis.

[[calculadoracammada1]]
image::image44.png[image,width=630,height=438]

A calculadora do Cammada tem ainda a (óbvia?) vantagem de ser perfeitamente integrada ao serviço que fazem,
com detalhes como os descontos progressivos para volumes maiores. No entanto, isso não faz dele o único meio de
cobrar, nem o universalmente aceito. Antes de explicar por quê, é necessária uma breve digressão: precisamos
falar sobre economia!

==== Economia: Valor-Trabalho versus Valor Subjetivo

Podemos chamar a esse antagonismo de _A_ __Guerra dos Carlos__, devido aos seus principais expoentes serem
variações deste nome (Karl Marx e Carl Menger). Tratam de como atribuir _valor econômico_ a algo resultante
da atividade econômica. _Valor_ é definido como a medida de um benefício provido por um bem ou serviço a um
agente econômico (e infelizmente o uso cotidiano em português não ajuda nesta delimitação conceitual, pois
comumente usam a palavra como sinônimo de "preço" ou ainda "custo").

A mais antiga teoria de valor, a teoria do **Valor-Trabalho**, que vem de Adam Smith, David Ricardo e Karl Marx,
postula que o valor de uma mercadoria é determinado pela _quantidade total de trabalho_ _socialmente necessário_
requerido para sua produção. Por socialmente necessário, entenda-se todo o trabalho anterior para produzir
matérias-primas, máquinas e outras mercadorias associadas. Na transposição para a situação que analisamos,
o _valor_ do produtor de impressão 3D deriva somente da quantidade de filamento utilizado, dos preços das
impressoras, da energia elétrica e outros custos envolvidos, mais o lucro que é equivalente ao trabalho de
transformação daqueles custos em um novo produto.

A outra perspectiva, o **Valor Subjetivo**, tendo surgido principalmente no século XIX com William Stanley Jevons,
Léon Walras e Carl Menger mas tendo sido mencionada também ainda na Idade Média e Renascença europeia, diz que
o valor de um bem ou serviço é determinado não por alguma propriedade inerente, nem pela quantidade de trabalho
necessária para produzi-lo, e sim pela importância que um agente individual lhe atribui para a realização
de seus fins desejados. Uma situação hipotética comumente usada para ilustrar o conceito é o indivíduo que
cava um enorme buraco em seu quintal, aluga escavadeiras, paga para removerem todo o entulho e terra que tirou,
e tenta alugar o buraco ou vender a propriedade em que o escavou: não terá sucesso mesmo que cobre preço bem
abaixo dos custos que teve porque, apesar de todo o trabalho genuíno exercido, ninguém enxerga valor nesse buraco.

Transpondo para a nossa situação, de acordo com esta teoria, o consumidor estaria disposto a pagar mais a um dos
serviços, entre dois serviços de impressão que se utilizam dos mesmos filamentos, mesmas impressoras 3D e exercem a
mesma quantidade de trabalho mas diferem em detalhes como a qualidade percebida ou a consistência de preços e prazos.

Em economia, é contencioso dizer que alguma dessas teorias está "provada" ou ainda que "refuta" a outra,
além de estarem associadas a correntes ideológicas que trazem consigo bagagens fora do escopo desta obra. Desta
forma, é suficiente dizer que, para a análise que fazemos aqui, adotamos especificamente a perspectiva do *Valor
Subjetivo do Trabalho* para as conclusões. Seguimos o Carl e não o Karl. Esta informação facilita inclusiva
para quem discordar do posicionamento usado nesta obra, por tornar as premissas explícitas.

Vale dizer, como uma observação final, que isso de maneira nenhuma significa que o cálculo do trabalho (os
custos) _não_ deva ser feito. Pelo contrário, nenhum negócio sobrevive de "intuições", e e os custos
dizem o valor mínimo de renda necessário para sobrevivência, assim como saber quanto se lucra é essencial para
sustentação do negócio, tanto no pagamento de contas quanto nos investimentos futuros. Mas a consideração do
valor subjetivo indica que é sensato manipular o botãozinho giratório do lucro esperado -- para baixo ou para
cima -- de acordo com a expectativa do cliente.

==== Fechando parênteses

Voltando aos problemas da cobrança da calculadora do Cammada, a primeira dificuldade consiste no fato de o serviço
se basear em cobrança por _volume_ (cm^3^). O principal ingrediente das impressões 3D é o material da impressão
-- no caso das impressoras FFF, o plástico, e ele é quase universalmente vendido em carretéis __por quilo__, ou
seja, por peso (ou massa). Não é um obstáculo intransponível porque quando se tem a densidade exata do material,
a transposição de um para o outro é direta: tendo o volume em cm^3^, basta multiplicar pela densidade para se
obter o peso gasto. Para facilitar mais ainda, os números de peso e volume são geralmente bem próximos, de modo
que um dá a idéia do outro: água tem 1 g/cm^3^, ABS tem 1,04 g/cm^3^, e PLA geralmente está entre 1,21 a 1,26 g/cm^3^.

Mas cada etapa adicional, ainda que trivial, contribui negativamente para um fator que é constantemente
desprezado pelos produtores: a _estimativa independente de custo_ pelo consumidor. Quem vai gozar dos benefícios
e funcionalidade da peça impressa é ele, e portanto seria ele quem ditaria, __a priori__, seu valor; atrapalhar
esta previsão constitui um obstáculo, inclusive porque ele precisa colocar na balança o custo antes mesmo de
escolher a solução ótima entre várias tecnologias e produtores. Numa situação ideal, o cálculo desse custo
-- o valor para o consumidor - seria ou previamente conhecido ou mais simples e direto possível, a complexidade
intrínseca e variável sendo tratada pelo produtor sem repassar decisões técnicas ao cliente. Quaisquer
complexidades refletidas _no preço_ podem até trazer maior economia ao consumidor, mas dificultam que o cliente
trate os diferentes preços de forma consistente e consiga traçar um plano de longo prazo, com custos facilmente
calculáveis. Um administrador de empresas pode preferir um serviço mais caro, mas com custo das peças intuitivo
e de cálculo simples, por simples questão de encaixe fácil no seu plano de orçamento.

No serviço cammada, o dilema entre volume e peso não se torna problema pois a densidade é um dos campos de
entrada e a conversão é feita automaticamente pela interface. Nem todos os modos de cobrar terão, porém, tais
facilidades. Ainda considerando as variáveis a entrar na cobrança, o cammada não trata fatores como o plástico
extra das estruturas de arcabouço (suporte, bainha, etc.), nem a energia elétrica gasta nas impressões, nem
o tempo e trabalho de acabamento, inclusive por serem custos a princípio parcialmente imprevisíveis ou, como a
energia, dependentes de fatores externos como localização.

Este problema de custos é realmente difícil de tratar, e leva muitos profissionais a simplesmente serem subjetivos
em seus serviços, submetendo o cliente uma etapa de orçamento em que o preço final e o tempo a levar é gerado
de forma a refletir a estimativa de dificuldade e custos que o profissional acha que vai ter (uma perspectiva de
valor-trabalho). Reiterando o que já dizemos, isto impede que o cliente consiga comparar o serviço com outros
e coloca incógnitas em sua agenda. Uma maneira de amenizar isso é _amortizar_ estas incógnitas, ou seja, ter
uma estimativa (mesmo que grosseira) dos custos totais das peças mais refinadas e trabalhosas e das mais simples
e calculáveis, de suas frequências no serviço cotidiano, do lucro esperado e então traçar um preço médio
de acordo com um índice único e verificável, como o grama de filamento utilizado ou o volume útil do modelo
tridimensional. Um profissional pode portanto dizer ao cliente que cobra 10 vezes o preço do filamento utilizado
para impressão com acabamento, e instrui, se preciso, o cliente a usar o mesmo fatiador pra calcular com exatidão
o preço. Não é o expediente mais simples do mundo, mas funciona. Num mercado de grande concorrência, pedidos
muito granulados e pouca fidelidade de cliente como o cammada, no entanto, o produtor perderá encomendas de itens
mais simples e grosseiros pelo preço amortizado para cima.

==== Tempo é dinheiro

Pegando carona na crítica da subjetividade da cobrança dos serviços, existe outro equívoco feito com bastante
frequência no ecossistema de impressão sob demanda, que é a classificação do _tempo de serviço_ como _custo
do produtor_ e não __do cliente__. Em outras palavras, quanto maior o tempo que o serviço leva, mais é cobrado
ao consumidor. Percebe o problema? O consumidor _não deseja_ que o serviço demore -- atribui *valor negativo*
a isso - e ainda paga um **preço maior**. O costume parece vir da mais antiga ocupação de produção em CNCs
subtrativas, em que o cliente pertencia a chão de fábrica com muito mais proximidade e participação do processo
de fabricação e portanto muito mais envolvimento nas demoras associadas. O mercado mais de massa, concorrido e
comoditizado dos serviços de impressão 3D no entanto pouco tolera essa literal inversão de valores, e produtores
com impressoras mais rápidas ou prazos que não passem a impressão subjetiva de penalidade acabam conquistando
mais os clientes.

==== Agregando valor ao camarote

Outro aspecto do serviço de impressão sob demanda é que ele está inextrincavelmente atrelado a todo um workflow
de produção. Para imprimir um modelo, é preciso antes que ele seja criado digitalmente, seja por modelagem,
digitalização 3D ou qualquer outro processo. E é raro que o modelo cru como saiu da impressora seja utilizado,
acabamento ou ciclos reiterantes de impressões de protótipos antes da versão final são frequentes. Existe um
campo aberto de opções que o profissional pode utilizar para agregar ao seu serviço, se diferenciar no mercado e
obter reconhecimento público e confiança, potencializando seu lucro. O exemplo mais simples é agregar o serviço
de acabamento, mas combinar a impressão com modelagem ou retoques da peça também é um serviço interessante --
ainda mais contando que as diferentes tecnologias de impressão 3D exigem e oferecem especifidades geométricas
que devem guiar o processo de modelagem, e esse conhecimento de interface mostra melhor o seu valor, com as duas
partes estando em harmonia.

Para o cliente, inclusive, agregar etapas necessárias à fabricação é ótimo -- economiza pesquisa de mercado,
economiza iterar entre diversos fornecedores de serviço, agiliza e uniformiza o trabalho.

O maior revés da diferenciação e expansão e escopo do serviço é o conflito de escopo e interesses em
participar como um hub de serviços como o Cammada e 3DHubs. Além de não terem precificadores automáticos para
tais serviços como têm para a impressão, o fato de serem intermediários obrigatórios em cada parte do processo
pode atrasar e prejudicar a interação e a viabilidade financeira da transação.

==== Aprenda a dizer não

A tecnologia da impressão 3D é formidável -- e o que se pode fazer com ela às vezes parece ilimitado, ainda
mais comparando com outras tecnologias de fabricação, e o entusiasmo e a paixão pelo trabalho podem levar o
profissional, especialmente o iniciante, a achar que poderá produzir qualquer forma, qualquer geometria com a
mesma qualidade e facilidade, mas nada poderia estar mais longe da verdade -- que é a das severas limitações
de formas de qualquer tecnologia atual de fabricação digital. Birôs de impressão populares que usam interface
de importação de modelos tridimensionais por esse motivo colocam verificadores automáticos de geometria que já
podem de imediato recusar um modelo por malha com erros, paredes finas e outros problemas, e ainda dão um prazo
de análise manual dos modelos importados sem erros para o orçamento, tudo isso porque conhecer os limites da
tecnologia é importantíssimo -- e, aliás, tais problemas _devem_ necessariamente ser previstos pelo contrato da
transação, porque acontecerão! Fazemos uma análise dos possíveis problemas e armadilhas nas seções de malhas,
com grande parte do material vindo de artigos dos próprios birôs educando os clientes sobre o que funciona e o
que não funciona na impressão 3D.

De qualquer jeito, reter um cliente é essencial, e o "não" sempre pode ser dito de uma maneira a resolver
seu problema. Se a forma tem erros, é inadequada para impressão, ou é de qualquer outro modo impalatável para
o serviço, ter um expediente que resolva o problema -- ainda que seja por terceiros -- pode agradar o cliente,
potencializar o serviço e ainda aumentar o lucro, se o serviço adicional -- como retoque na modelagem 3D, ou uso
de outra tecnologia de impressão 3D mais consistente com a finalidade da peça - for oferta do próprio profissional.

Resta dizer ainda que, no mercado comoditizado em que estamos, algumas dicas bastante específicas se tornam úteis:

* Clientes com modelos tridimensionais prontos para imprimir muitas vezes o terão em um formato proprietário
diferente do que os fatiadores aceitam, como SLDPRT (SolidWorks) ou SKP (Sketchup). O ideal é recusá-los _sempre_
quando a tarefa for de impressão, mesmo tendo o software para manipular o arquivo. A razão é que a conversão
para o formato de impressão, que é uma malha -- STL, AMF, 3MF -- pode inserir erros que tornam a impressão
inviável, e isso se origina de uma modelagem de baixa qualidade. Tais erros basais de modelagem devem ser corrigidos
na fonte, e o melhor jeito de assegurar isso é exigir o modelo já "transformado".
* Para muitos casos, uma
malha com erros simples enviada pelo cliente pode ser consertada por softwares de conserto de malha automático ou
serviços de nuvem gratuitos (azure 3d print service, makeprintable, etc.) que realizam essa tarefa rapidamente e
permitem que o serviço seja executado. Tenha sempre em mente que isso é acostumar mal o cliente e o tiro pode
sair pela culatra, quando ele enviar um modelo com erros que não são consertáveis de forma automática e se
recusar a contratar o conserto. Outro problema, pertinente aos serviços de nuvem, é que há problemas legais em
disponibilizar modelos sob copyright para terceiros sem permissão expressa e sem contrato de confidencialidade
com esses terceiros.
* Quando o produtor tiver o serviço agregado de retoque de uma modelagem já existente,
é praticamente obrigatório o uso da mesma ferramenta em que ela foi feita. Isso porque, especialmente nas peças
mais complexas, os metadados do modelo como o histórico de modificações é essencial para que um retoque não
prejudique ou destoe de outras partes do modelo. Em especial, ferramentas de modelagem sólida -- como Solidworks,
Inventor, AutoCAD, FreeCAD -- são mais adequadas para retoques e reparos grandes e basais, enquanto ferramentas
que trabalham diretamente com malhas, como Sketchup, Blender, Maya, ZBrush são eficazes apenas para modificações
pequenas ou bem localizadas, com grande chance de introduzir erros na malha.
* Se a forma é muito complexa --
apesar de ser em um material só - e você tem uma impressora FFF com apenas um extrusor, considere adquirir uma
outra impressora com dois extrusores para essas ocasiões. A razão é que você poderá usar nela filamentos
dissolvíveis que permitem imprimir suportes removíveis por imersão no acabamento. Tais filamentos, tanto por
seu preço quanto por sua especificidade, tornam o serviço consideravelmente mais custoso, mas muitos clientes
privilegiam a qualidade e complexidade da forma e pagarão o necessário. É um diferencial valioso.
* Ferramentas: procure não se fiar nunca em apenas uma ferramenta. Existem diversas ferramentas "ajudantes" e analíticas
que aprimoram bastante o workflow de fabricação e não têm equivalentes, ou têm equivalentes inferiores mesmo
nos softwares mais complexos e caros. Muitas dessas ferramentas são open-source (meshlab, blender, CloudCompare,
FreeCAD, etc.) e outras ainda são proprietárias, mas gratuitas (meshmixer, netfabb trial, 3D Builder, etc.),
representando apenas o custo do tempo de aprendizado. Aprender um pouco de cada pode parecer desperdício de tempo
mas compensa a longo prazo... E se você deseja trabalhar com a impressão 3D, o longo prazo está implícito.
* Seja criativo e paciente. Aprenda habilidades extras no seu tempo para complementar o serviço de impressão 3D,
desde arte de acabamento, pintura, reforço de partes, revestimento, modelagem, embelezamento, ou qualquer outra
coisa que pode imaginar. Pode ser um passatempo cativante e uma hora se tornar o seu diferencial. As pessoas ainda
estão se acostumando à tecnologia em suas vidas, e as extrapolações delas, e a busca por contratá-las, ainda
são incipientes. Esteja também preparado para os avanços da tecnologia: ela tem progredido a passos rápidos,
e as exigências dos clientes e massificação do mercado progridem do mesmo jeito. Para continuar relevante, você
tem que progredir no mínimo na mesma velocidade -- como a corrida da Rainha Vermelha no livro _Alice no País
dos Espelhos_ de Lewis Carrol, em que para permanecer no mesmo lugar era necessário correr o máximo que pudesse,
e para ir a outros lugares só correndo duas vezes mais rápido.

==== Financiamento coletivo (crowdfunding)

__Crowdfunding__, ou financiamento coletivo, é a prática de conseguir fundos suficientes para iniciar um projeto
angariando contribuições monetárias de um grande número de pessoas pela internet. Geralmente envolve categorias
de "prêmios" que são dados às pessoas de acordo com suas contribuições, e que envolvem as primeiras
levas de produtos provenientes do início do projeto. Crowdfunding é uma categoria particular de _crowdsourcing_
(colaboração coletiva), que é o processo de obtenção de serviços, idéias ou conteúdo mediante a solicitação
de contribuições de um grande grupo de pessoas. O crowdsourcing surgiu com o Movimento Maker, com a idéia
de viabilizar projetos sem cair na armadilha de dependência de indústrias fechadas ou grandes instituições
financeiras. Alguns sites de crowdfunding de projeto conhecidos são os estrangeiros _kickstarter_ e _indiegogo_
e os brasileiros _catarse_ e __kickante__, e de crowdfunding recorrente temos o _patreon_ e o __apoia.se__. O
jeito pelo qual funcionam é exigir aos idealizadores de um projeto, cadastrados em seu site, um vídeo mostrando
o que pretendem e que produto irão entregar, e os "prêmios" que serão dado aos investidores da idéia de
acordo com a quantia que investiram em uma data marcada no futuro, um dos prêmios sendo o produto a ser obtido. O
"produto" pode ser praticamente qualquer coisa, itens científicos e tecnológicos são frequentes mas filmes
inteiros foram feitos, jogos de computador foram programados, campanhas humanitárias arrecadaram dinheiro, causas
políticas ganharam tração.

Tanto por sua ligação com o Movimento Maker, quanto por seu caráter feito praticamente sob medida para projetos
tecnológicos de médio investimento, o crowdfunding parece ideal para a impressão 3D[[FEITO crowdfunding]]
e também é fonte de muitos projetos __open-source__, visto que a possibilidade de ter algo reusável e
modificável no final, e ainda independente da trajetória específica da empresa, torna-se um importante ponto
de publicidade e atratividade para angariar contribuidores. Muitos projetos de impressoras 3D inovadoras em sua
época, como a impressora SLA __Form1__, a SLA/DLP _B9 Creator_ e a FFF brasileira open-source _Metamáquina_
surgiram de crowdfunding. Hoje já se tornou cômica a forma com que praticamente todo dia há algum projeto
novo de impressora 3D nos sítios web de crowdfunding, assim como a contrastante e cada vez mais popular máxima:
"nunca compre impressora 3D de financiamento coletivo!".

[[fotometamaquinacatarse]]
image::image45.png[image,width=619,height=510]

Mas como qualquer fenômeno de inovação econômica e social, o crowdsourcing em geral e o crowdfunding em
particular não estão isentos de percalços, tanto para quem está do lado dos contribuidores quanto para quem
oferece seus projetos em uma plataforma dessas.

*Para o lado dos clientes,*

* ..., ou, melhor dizendo, __financiadores do projeto__. Esse é o primeiro problema e, apesar de abstrato, até
filosófico, tem consequências práticas bem pungentes. Os usuários pagantes de um projeto de financiamento
coletivo dificilmente se enxergam como _investidores_ ou __financiadores__ e os próprios portais envolvidos
não ajudam nisso. Tudo fica parecendo uma simples compra de produto existente. Não é mencionado o _*risco*_
inerente a esses negócios exceto bem no final, de forma obscura e em letrinhas miúdas. Se por um certo lado a
linguagem publicitária é tida como necessária para envolver e convencer o usuário prospectivo, por outro lado
seduz sem informar o necessário. Isso se reflete nos próprios termos dos usuários, pois raramente quem investe
em tais projetos diz que financiou algo - a palavra usada é "comprar", como se fosse só mais um brinquedo de
aliexpress que demorasse alguns meses para chegar.

* Muitos projetos -- a maioria, aliás -- atrasam a data de
entrega dos prêmios. Em 2012 um levantamento do portal _kickstarter_ pela CNNMoney verificou que 84% dos projetos
atrasaram^1^. Atraso não é a mesma coisa que falha, certamente, com os projetos que realmente falham sendo menos de
5%, mas se é algo com que se conta para produção, o despreparo para isso pode acarretar prejuízos.

* Como se
fosse uma nova Corrida ao Ouro, muitos projetos se aproveitam da ingenuidade ou pouco conhecimento científico dos
usuários e prometem façanhas irrealizáveis e tecnologias inexistentes, um novo __ouro de tolos__. Alguns exemplos
são o "respirador artificial compacto" __Triton__^2^ e o "extrator de água" __Waterseer__^3^. O logro do
Waterseer é ainda mais complexo pois o investidor não ganha um prêmio, o resultado do projeto sendo entregue
a "lugares na África" não especificados, isto é, ainda espolia ardilosamente sentimentos humanitários
de quem dá o dinheiro! Tais projetos invariavelmente mostram renderizações computadorizadas da situação
que dizem almejar ao invés de um protótipo funcional.

* No caso brasileiro, há a dificuldade adicional de
frete e impostos. Na hora do financiamento o frete é apenas estimado, e pode ser diferente quando do envio para o
Brasil. Algumas vezes o produtor não conhece bem as regras alfandegárias para o país e envia o produto por exemplo
sem CPF, se arriscando a tê-lo barrado pela receita. Além disso, os impostos a incidir podem ser bem salgados,
possivelmente maiores que de itens importados normalmente pois podem ser considerados itens de finalidade industrial.

Claro que conhecer o lado dos clientes também é indispensável para o produtor interessado em utilizar do
financiamento coletivo, no mínimo por uma questão de viabilidade do projeto e publicidade. Os dois lados estão
colaborando em conjunto para o projeto chegar à sua resolução, o que ainda evidencia que harmonia de interesses
e comunicação são essenciais.

*Para o lado dos produtores,*

* ...a primeira observação a notar, e de novo abordando o aspecto psicológico da questão, é que **não existe
prêmio por merecimento**. Devido à sua associação quase mística com o movimento Maker, à sua aura de inovação e
de dinheiro relativamente fácil para mentes brilhantes realizarem seu potencial, **é muito fácil cair na armadilha
da autoconfiança excessiva**. E a primeira razão dessa armadilha é que o campo das idéias, dos projetos, da
excelência intelectual é _muito_ diferente do campo da logística, do comércio, da indústria, da burocracia
estatal e impostos, da publicidade e viabilidade de colocar alguma coisa no mercado e ela ser competitiva. Nesse
sentido se pode dizer que há pouca diferença do financiamento coletivo e de uma _startup_ comum: é preciso ter
um plano de negócios sólido, fornecedores confiáveis e que cumpram seus prazos, é preciso adicionar na conta
os custos de muitos intermediários e peças e procedimentos adicionais (eletrônicos e novos compostos podem ter
que passar por um bocado de certificações industriais e testes de regulações, por exemplo), e não é surpresa
que empreendedores de mercado mais falhem que sucedam. Alguns projetos podem ainda ter sucesso, mas a falta de
planejamento para _depois dele_ pode levar uma campanhia à falência. *Mesmo uma idéia genuinamente brilhante e
inovadora pode falhar, e falha* -- muito facilmente. Exemplos não faltam, um deles sendo a impressora 3D estilo
delta Tiko^4^, e um exemplo nacional sendo a controladora de impressão 3D de escopo industrial "3DRoot"^5^. Em
comum entre esses dois projetos, aliás, é confiar demais na parte do hardware e esquecer que o _software_ (ou no
caso o firmware da controladora) é complexo e precisa de muito uso em campo pra ser devidamente depurado e afinado,
ainda mais quando não são usados como base softwares maduros e testados como os do projeto reprap.

* Reforçando
uma obviedade, o investidor ou cliente __**busca gratificação**__. Isso não pode ser perdido de vista e se temos
também os projetos de financiamento coletivo que buscam o máximo possível ter seus prêmios parecendo produtos
finalizados de prateleira, temos o outro lado, especialmente para projetos de cunho beneficente, comunitário
ou ecológico, de ser feita uma promessa ao investidor com prêmios pífios, intangíveis ou desmotivadores de
alguma forma. Por exemplo, um hipotético financiamento coletivo para entregar um item que ajuda na recuperação
de câncer é uma causa humanitária muito bonita, mas quem recebe tal ajuda? Poder-se-ia criar uma campanha sem
especificar os auxiliados e com prêmios consistindo de camisas "eu ajudei um doente de câncer", ou pode-se
dar a sensação de empoderamento ao financiador permitindo que ele especifique o hospital a ganhar os itens que
ele financia. O segundo caso terá muito mais sucesso pela gratificação que proporciona, e sendo um campo em
aberto, muitas soluções criativas podem ser inventadas para se ter sucesso na campanha. No caso específico de
campanhas de cunho __político__, ideologias pesam bastante e o maior projeto de financiamento coletivo de cunho
não-lucrativo foi do advogado Lawrence Lessig para reformar as regras de financiamento de campanhas políticas.^6^

* Uma vantagem do financiamento coletivo é que um dos modos de o realizar -- o mais frequente -- é "tudo ou
nada": o financiado estipula uma quantia mínima a ser atingida para que o processo possa ter sucesso, um prazo é
criado (digamos, dois meses) e durante este prazo, a campanha está aberta aos investidores. Passado o prazo, caso a
quantia mínima não seja alcançada, todo o dinheiro é devolvido. Ninguém sai perdendo. Um produtor resoluto pode
tentar obter o financiamento outras vezes, e isso realmente acontece -- certas campanhas só pegam "tração" na
segunda ou terceira vez que são tentadas, e daí migram para o sucesso, como o bico de tungstênio de impressora 3D
da dddmaterial^7^.

* É educativo ao interessado no financiamento estudar os casos de falha de entrega, mais que
os casos de sucesso. Fiascos milionários com quebra de contrato e intrigas pessoais como a impressora de resina
__Peachy Printer__^8^ podem acontecer com qualquer um, e mostram bem a tensão e pressão pública que acometem
um projeto desses. É interessante ainda ver que mesmo com a fragorosa falha deste projeto, o fato de a terem
criado em regime open-source, com repositório no github^9^, permitiu que o projeto fosse continuado na forma
da YXE3D^1^⁰, o que nos leva ao próximo ponto.

[[yxe3dexpeachyprinter]]
image::image46.png[image,width=580,height=563]

* Se parte do objetivo do projeto é disseminar uma tecnologia, não só vendê-la, vale muito a pena considerar
anunciá-la como open-source (e existem diversas licenças para escolher que permitem diferentes tipos de controle),
pois assim, mesmo com o projeto falhando, os usuários pagantes terão uma "consolação" (que pode, no limite,
evitar ou amenizar um processo pesado, por exemplo) e uma chance de continuidade por terceiros. Uma comunidade
de usuários progressivamente mais informada tem se importado bastante com este detalhe em uma campanha, e ele
serve como publicidade e inspirador de confiança para investidores. A mentalidade open-source tem sido tão
influentes que existem portais de financiamento coletivo _somente para projetos desse_ tipo como o BountySource e
FreedomSponsors^1^^1^, e não surpreendentemente, os portais convencionais também têm toda uma seção dedicada
a isso. Um portal web onde você pode escolher licenças para seu produto de acordo com sua necessidade é o
_Creative_ Commons, http://www.creativecommons.org/[_http://www.creativecommons.org_]. Note, entretanto, que o
conceito de "open-source" não permite nenhum tipo de proibição de uso comercial, e licenças que fazem isso
como CC-BY-NC não têm apelo.

Por fim, há muito mais o que dizer sobre financiamento coletivo do que caberia em um livro, é uma nova dinâmica
econômica que ainda tem muito a oferecer, e muito o que amadurecer na sociedade moderna. Esta pequena introdução
tem a intenção mais de apresentar um conceito do que realmente oferecer caminhos, já que tais caminhos, na
verdade, ainda estão sendo traçados.

[NOTE]
.Notas:
====
. http://money.cnn.com/2012/12/18/technology/innovation/kickstarter-ship-delay/[_http://money.cnn.com/2012/12/18/technology/innovation/kickstarter-ship-delay/_]
. http://www.digitaltrends.com/cool-tech/triton-reboots-artificial-gill-campaign/[_http://www.digitaltrends.com/cool-tech/triton-reboots-artificial-gill-campaign/_]
. _https://www.indiegogo.com/projects/waterseer-water-women#/_
. http://hackaday.com/2017/02/27/the-tiko-printer-what-happens-when-you-innovate-too-much/[_http://hackaday.com/2017/02/27/the-tiko-printer-what-happens-when-you-innovate-too-much/_]
. _https://www.indiegogo.com/projects/3droot-high-reliability-3d-print-controller/#/_
. https://en.wikipedia.org/wiki/Mayday_PAC[_https://en.wikipedia.org/wiki/Mayday_PAC_]
. https://www.kickstarter.com/projects/dddmaterial/3d-printer-tungsten-premium-nozzle-reloaded[_https://www.kickstarter.com/projects/dddmaterial/3d-printer-tungsten-premium-nozzle-reloaded_]
. https://motherboard.vice.com/en_us/article/peachy-printer[_https://motherboard.vice.com/en_us/article/peachy-printer_]
. https://github.com/peachyprinter[_https://github.com/peachyprinter_]
. http://www.yxe3d.com/[_http://www.yxe3d.com/_]
. http://www.techdrivein.com/2012/12/top-5-kickstarter-crowdfunding-alternatives-opensource-software.html[_http://www.techdrivein.com/2012/12/top-5-kickstarter-crowdfunding-alternatives-opensource-software.html_]
====

== A tecnologia FFF

A tecnologia que chegou à popularização em nossos dias foi a patenteada por S. Scott Crump. Há vários motivos
para isso: é razoavelmente fácil construir uma máquina (hoje em dia, ainda mais com as receitas do projeto reprap);
e o material é barato e relativamente fácil de encontrar -- plástico está em todo o nosso dia-a-dia. Tê-lo em
forma de filamento enrolado em um carretel é questão apenas de o passar por uma máquina também barata chamada
de filamentadora ou extrusora. O processo de derretimento do plástico pode ser entendido com o seguinte diagrama:

[[explicacaofff]]
image::image47.png[image,width=506,height=454]

Este é o núcleo comum da tecnologia; no entanto, após a queda da patente da Stratasys em 2009, o mercado
mudou. As impressoras passaram disso:

[[fdmindustrialprereprap]]
image::image48.png[image,width=316,height=292]

para isso:

[[ultimakerreprap]]
image::image49.jpeg[image,width=662,height=358]

O que mudou, neste caso? E se mudou tanto, o que as impressoras da segunda ilustração têm em comum? Para
responder isso, vamos separar as impressoras 3D em suas partes componentes:

=== Estrutura
É a parte mais visível, o que dá a forma a impressora. Ainda que possa haver
variações, de forma geral entram nas seguintes categorias principais:

.Enclausuramento
[width="100%",cols="^1s,^2m,2e",frame="topbot",options="header"]
|====
| Tipo		| Exemplo					| Descrição
| Aberta 	| image:image61.png[image,width=141,height=189,align="center"]	| É possível alcançar a peça impressa diretamente.
| Fechada	| image:image62.png[image,width=158,height=158,align="center"]	| A peça fica em uma câmara interna.
|====

.Material

* *MDF* (Medium Density Fibreboard, ou Painel de Fibra de Média Densidade):
Popular nas variantes de _Graber i3_ vendidas no Brasil, o MDF é um compósito baseado em madeira que se assemelha
a compensados, mas é menos resistente, mais liso e consistente e facilmente cortável em CNCs laser e mecânicas,
além de empenar menos. Também é eficaz em dissipar pequenas vibrações das estruturas. Por outro lado, absorve
umidade facilmente e não resiste muito a chamas (apesar de resistir a altas temperaturas). É fácil de usar para
montagens e o mais barato dentre as alternativas listadas, sendo encontrado nas repraps na variedade de 6mm de
espessura. Para se revestir ou pintar, deve-se antes usar um _primer_ baseado em óleo que não seja aerossol/spray.
* *Acrílico* (PMMA): Disputando em popularidade com o MDF como o material de escolha dos cortes de __reprap__,
tem em comum o fato de ser facilmente cortável em CNCs, aparência brilhante com cores vivas e esteticamente
agradável, rigidez considerável e limpeza fácil. O primeiro ponto negativo é que com a alta rigidez o material
é relativamente quebradiço e é especialmente propenso a rachaduras com fixação de parafusos. O segundo é que,
sendo um termoplástico, tem baixa resistência a altas temperaturas, tendo a temperatura de transição vítrea em
torno de 105°C. É mais caro que o MDF, com o mesmo corte deste material e na mesma espessura saindo cerca de 3 vezes
mais caro.
* **Alumínio**: Material resistente, não-ferromagnético (não é atraído por ímãs) e com cortes que
permanecem bastante retilíneos, é mais raramente encontrado em cortes de repraps e, quando encontrado, adaptado para
espessura mais fina (como 3mm) para economia em material. É mais usado em elementos usinados como perfis e blocos
aquecedores. Tem alto coeficiente de condução de calor, o que pode ser indesejável se tiver contato com altas
temperaturas.  ** Aço: Usado em impressoras 3D de cunho mais industrial, geralmente de frame fechado e que precisam
aguentar altíssimas temperaturas, é encontrado na variedade inoxidável e escovado para resistir também a oxidação
e agentes do ambiente. Tem baixo coeficiente de condução de calor.
* *ACM* (Aluminium Composite Material): também
conhecido pelo seu nome comercial DIBOND®, se trata do termoplástico polietileno ensanduichado entre duas placas de
alumínio, juntando as propriedades desejáveis do metal com a do plástico. É um material bastante usado em placas
de sinalização e a utilização em impressoras 3D é bem representada pelas máquinas Ultimaker 2 e Ultimaker 3.

.Arranjo Mecânico e Cinemática

.Transformações de eixos.
[width="100%",cols="^1s,^2m,2e",frame="topbot",options="header"]
|====
| Tipo		| Exemplo								| Descrição
| Cartesiana	a| image:image54.jpeg[image,width=138,height=149,align="center"]			| [small]##Eixos X, Y e Z correspondem ao plano cartesiano.##
| Delta		a| image:image57.png[image,width=122,height=255,align="center"]				| [small]##X, Y e Z são transformadas trigonométricas das posições dos três pilares (colunas verticais).##
| CoreXY 	a| image:reprapxy-pequeno.jpg[reprapxypequeno,width=533,height=400,align="center"]	| [small]##X e Y são transformadas lineares de acordo com o padrão "CoreXY" de deslocamento. Por ser uma transformação relativamente simples de coordenadas, informalmente costuma ser tratada como cartesiana.##
| SCARA		a| image:scara.png[scara,width=601,height=710,align="center"]				| [small]##**S**elective **C**ompliance **A**rticulated **R**obot **A**rm, ou Braço Robótico Articulado de Conformidade Seletiva, é o nome dessa transformação de eixos comumente usada em máquinas industriais "pick and place" e de linha de montagem de veículos.##
| Polar		a| image:polartheta.png[polartheta,width=466,height=385,align="center"]			| [small]##Coordenadas polares, ou seja, baseadas em ângulos, são populares nos campos matemáticos, mas em impressoras 3D não são muito práticos, servindo mais como prova de conceito. Alguns modelos de impressora têm apenas um ou dois eixos polares, e os restantes cartesianos.##
|====

Apesar de separarmos as impressoras 3D de mercado nessas cinco categorias, a verdade é que existem tantos sistemas
diferentes e tão promissores que é impossível fazer justiça citando todos,
menos ainda os explicando. Ao invés disso, focalizaremos no que é mais usado hoje. O estilo __delta__, um sistema já antigo e usado em algumas máquinas
pick-and-place de indústrias de equipamentos pesados e fabricantes de circuitos impressos, ganhou tração no
ecossistema RepRap depois que Johan C. Rocholl, um funcionário alemão do Google, criou o design da impressora
intitulada de _Rostock_ em 2012, utilizando peças convencionais já usadas em impressora anteriores, como
rolamentos lineares LM8UU e barras lisas. Tendo um grande volume de impressão para a época (200 mm x 200 mm x
400 mm), a impressora ganhou vários redesenhos e variações, um deles do próprio Johan, chamado de
__Kossel__.

A Kossel abandonava as guias lineares e passava a usar extrusões de alumínio com _patins_ usinados,
peças mais caras e industriais porém com muito maior precisão, e também abandonava os cortes de MDF para adotar
apenas peças impressas. Ambos os designs guiaram o mercado de deltas, menos numeroso que o das cartesianas mas
crescendo a cada dia. Nem toda impressora delta usa postes fixos para guiar a impressão, alguns designs como o da
reprap _Gus Simpson_ usam de braços articulados.

O design dessas impressoras não permite mapear diretamente
uma posição do mecanismo para uma coordenada do objeto a ser impresso, mas é possível calcular a posição
do bico extrusor obtendo-se a coordenada de cada patim nas torres de sustentação -- torres chamadas de "A,
B e C" - e efetuar um cálculo matemático, baseado nas medidas da estrutura da impressora (como a altura das
torres, a mediana entre elas e outros), que resulta em coordenadas X, Y e Z "virtuais", por onde orienta-se o
extrusor a seguir como em uma impressora cartesiana comum. Esses cálculos são efetuados no mesmo microcontrolador
(ou microprocessador) que controla os motores da impressora, no momento da leitura do g-code que é sempre escrito
em coordenadas X,Y e Z.

Uma diferença notável das coordenadas virtuais X, Y e Z de uma impressora delta é que
o ponto (0,0,0) do volume está no centro da impressora, com possibilidade de coordenadas negativas; em contraste,
nas cartesianas o ponto (0,0,0) situa-se no vértice abaixo, à esquerda e à frente, estando-se de frente para
a impressora.

Algumas das vantagens de impressoras delta sobre as cartesianas são:

* *Maior velocidade, especialmente no eixo Z* - Como impressoras delta não utilizam barras roscadas ou fusos e todos os pilares têm
correias com pinhões que traduzem o movimento de cada motor para um movimento bastante rápido na posição. Isso
resulta em velocidades de movimentação que podem chegar a 3 vezes o equivalente a impressoras 3D cartesianas de
construção equivalente. A velocidade muito maior no eixo Z em especial permite que a impressora use o "Z hop"
(ver capítulo de configurações de fatiamento) sem adicionar muito tempo à impressão.
* *Mesa fixa* -- como
todo o movimento do extrusor está nos pilares, não é necessário movimento adicional da mesa na impressão. Isso
dá às deltas uma boa vantagem em estabilidade de impressão especialmente para peças altas, finas e delicadas,
que poderiam sofrer perturbações elásticas pelo movimento da mesa.

Mas, claro, nem tudo são flores. Era
de se esperar, como qualquer assunto em engenharia, que as vantagens também vêm acompanhadas de respectivas
desvantagens:

* **Menos possibilidade de carga no effector**, até como consequências de os motores serem mais
rápidos, pois como em marchas de um carro, maior velocidade tem menos força. Isso implica em algumas restrições
de projeto para remover o máximo possível de peso do effector, como utilizar filamento guiado ao invés de extrusor
direto. Isso também minimiza a inércia da impressora, no entanto, dando-lhe boa precisão.
* *Baixa resolução de posicionamento, especialmente nos extremos* -- como as coordenadas X, Y e Z são calculadas, "virtuais"
através das posições dos braços, o espaçamento entre elas não apresenta a regularidade de coordenadas
reais, sendo muito menor (e portanto com maior resolução) perto da mediana das distâncias dos postes e maior
(e portanto com menor resolução) perto das "quinas" onde estão os postes.
* *Troca de volume horizontal
por volume vertical* -- o fato de uma impressora delta ter somente os pilares como estruturas laterais dá a essas
impressoras a vantagem de ocuparem pequena área horizontal, cabendo facilmente em uma mesa ou móvel; entretanto,
esta mesma vantagem faz com que haja um espaço vazio não utilizado na parte de cima da impressora, o que faz com
que seja bastate alta. O espaço não é utilizado porque o volume útil da impressora não se traduz em um cubo,
nem mesmo em um cilindro, mas em um cilindro que nas coordenadas mais altas transforma em um cone, que é onde os
braços conseguirão alcançar. Alguns fabricantes utilizam este espaço para prender componentes, como a fonte,
o tracionador ou até o filamento.
* *Lentidão em algumas operações* -- as impressoras reprap são, em sua
maioria, baseadas em um microcontrolador open-source __Arduino Mega__, que embora tenha em seus 16 MHz velocidade
mais que suficiente para guiar os três eixos e temperaturas de uma impressão comum, não tem circuito dedicado
para operações com ponto flutuante - fazendo cada operação matemática de transformação de coordenadas
de forma não muito eficiente, por software. Isso torna-se visível quando a delta tem um display LCD, que com o compartilhamento
de tempo entre os cálculos no momento em que a impressora imprime, fica com respostas visivelmente lentas para
interação com o usuário. Isso é um problema que vem sendo resolvido naturalmente com a substituição do
Arduino Mega por controladores mais potentes.

[[deltasesimpson]]
image::image63.png[image,width=594,height=291]

*XY (Dualwire Gantry)* + O jeito mais intuitivo de pensar em um mecanismo que, em um plano, possa posicionar um
elemento em uma coordenada (X,Y) determinada é haver, assim com os dois eixos, dois mecanismos (motores) fixos,
independentes e perpendiculares. Qualquer um deles, ao girar, move uma correia, que movimenta o elemento em seu
eixo, guiado em torno de uma barra lisa; as correias e barras não se encontram e podem ser posicionadas uma
acima da outra com o suporte do elemento ocupando onde se cruzem. O nome significa algo como "pórtico com
dois cabos".

[[dualwiregantry]]
image::image64.png[image,width=594,height=351]

* *CoreXY*
O sistema batizado
de _CoreXY_ tornou-se popular por um sítio web^3^ que o explica em pormenores e ensina como construí-lo e
controlá-lo. Basicamente é um sistema de eixos que permite controle fino dos eixos X e Y mas economizando em
peças e evitando o cruzamento de eixos rígidos que acontece no __Dualwire Gantry__. É um sistema robusto,
com cinemática paralela e motores fixos na estrutura, controle fácil e permitindo grandes velocidades de
movimentação, tendo sido adotado em várias reprap e impressoras 3D comerciais de estrutura fechada.

[[desenhocorexy]]
image::image65.jpeg[image,width=531,height=406]

Como no caso das deltas, as impressoras 3D com
CoreXY exigem que o firmware tenha conhecimento do sistema de eixos pois transformações de deslocamentos são
necessárias para o acionamento correto dos motores e a localização das coordenadas no espaço. O profissional
André Ruiz colaborou com esta obra com um diagrama elucidativo e bastante útil para aqueles que desejam construir
uma impressora deste tipo, a seguir:

[[corexyandreruiz]]
image::image66.png[image,width=594,height=404]

* *Outras XY e
variantes* + Mais do que popularizar a cinemática do CoreXY, o sítio web de mesmo nome levantou a consciência que
sistemas de eixos e cinemáticas podem ser aperfeiçoados e otimizados para vários tipos de construções. Muitos
outros surgiram ou vieram à tona, alguns sendo variações do próprio CoreXY (__H.Bot__, __cantilevered CoreXY__,
__CoreXZ__, etc.). ^4^
* *Carro X estilo Mendel i2* +
Se por um lado os sistemas de cinemática paralela como
o _dualwire gantry_ e o _CoreXY_ representam a sofisticação de movimentação em impressoras 3D cartesianas,
por outro lado exigem uma estrutura bastante rígida e com muitos pontos de fixação para funcionar adequadamente,
tornando montagem e manutenção caras. A diretiva de economia do projeto reprap acabou levando a um arranjo mecânico
bem distinto; embora inicialmente usassem dualwire gantry no primeiro modelo (darwin / rapman), modelos distintos
de voluntários como a Prusa Mendel facilitaram enormemente o processo de peças e montagem com seu arranjo de
eixos, que se traduz em:
* Uma mesa móvel (eixo Y);
* Duas guias lineares paralelas na horizontal para o eixo X
(o chamado carro X);
* Eixo Z (vertical) representado por barras roscadas subindo e descendo o carro X, com guias
lineares paralelas às barras roscadas garantindo movimento retilíneo. Isso faz o eixo Z ser mais lento que X e Y,
o que é desprezível visto que é o eixo que menos se movimenta durante uma impressão;
* Dois motores para o eixo
Z, para evitar desnível e distribuir a força.

[[prusamendelcomcarrox]]
image::image67.jpeg[image,width=570,height=660]

* *Carro X estilo Prusa i3* +
Com a iteração 3 do design de Josef Prusa, duas alterações foram feitas no arranjo
mecânico e ficaram tão populares que muitas repraps copiaram:

** Os dois motores do eixo Z passaram da parte de
cima do quadro para a parte de baixo. Isso abaixou o ponto de massa da impressora 3D (visto que motores são pesados)
e a deixou mais estável. O ponto negativo disso é que barras roscadas desgastam menos com forças de tração
do que compressão, então no eixo Z perdeu-se um pouco na vida útil dessas vitaminas.

** O carro X teve suas
guias lineares (barras lisas) trocadas de paralelas no plano horizontal para paralelas no plano vertical. Isso
foi uma melhoria na estabilidade da impressora 3D porque o carro X se prende ao eixo Z, que é muito curto na
dimensão Y e portanto não dá tanta estabilidade ao carro; fazendo o carro ser mais longo no eixo Z se aproveita
da linearidade e estabilidade do arranjo de X com Z.

[[prusai3motoresbaixo]]
image::image68.jpeg[image,width=531,height=630]

Muitos outros arranjos mecânicos existem, é claro. Os citados aqui, entretanto, acomodam a grande maioria dos
casos das impressoras 3D FFF de mercado e dão uma boa noção da cinemática das impressoras.

.Movimentação da Mesa

A movimentação da mesa de impressão -- aquecida ou sem aquecimento -- é o complemento à movimentação
dos eixos. Alguns dos sistemas vistos resolvem parte do problema da localização do componente extrusor em um
espaço tridimensional; os arranjos CoreXY e Dualwire Gantry o situam em um plano horizontal; o carro X das prusas
se conjuga com um eixo Z lento para o posicionamento em um plano vertical; em cada um dos casos, só faltou a
análise do eixo remanescente.

* *Mesa fixa* +
Uma impressora 3D com mesa fixa à primeira vista parece ser o caso ideal, afinal, quem quer
uma peça sendo submetida a movimentos que tirem sua estabilidade enquanto é fabricada? Entretanto, isso
traz complicações, a maior delas é poder precisar de motores e um mecanismo que se movam para cima durante a
fabricação. Um conjunto desses é inevitavelmente pesado, e precisará não só de peças robustas como encaixes
precisos para subir em perfeito equilíbrio. Com o peso ascendente, outro problema que surge é o centro de massa
da impressora 3D sofrer deslocamento, e isso ser fonte de vibrações e imprecisões estruturais que afetam a
qualidade da peça e a sobrevida do mecanismo.  + A construção em delta consegue evitar dois desses problemas:
fixa os motores na base e permite que o centro de massa da impressora 3D se desloque relativamente menos, visto
que o conjunto de braços e _effector_ é, por construção, mais leve. No entanto, a altura extra exigida para
essa construção é uma nova fonte de vibrações. Pequenas folgas de encaixe são ampliadas pelo comprimento,
o torque das forças laterais torna-se significativo e fonte de vibrações e a estrutura passa a ter necessidade
de mais e mais reforços. Via de regra, se uma impressora 3D delta passa de 40cm de altura, suas estruturas --
que veremos em seguida -- devem ser trocadas de extrusões 1515 pra 2020 ou maiores.  + As estruturas com mesa
fixa, no entanto, apesar dessas dificuldades, estão entre as melhores para escalas grandes de impressão. Isso
porque os extrusores ou effectors serão ampliados em função da área, enquanto que o peso sustentado pela mesa
cresce mais rápido - de acordo com o volume. Se uma impressora 3D com volume de impressão 10 cm x 10 cm x 10
cm precisa sustentar um peso máximo de 1,04 kg de ABS, uma de volume de impressão 10 vezes maior de cada lado,
ou seja, 1m x 1m x 1m teria um extrusor 100 vezes mais pesado -- para um peso sobre a mesa _mil vezes_ maior
(1.040 kg).

* *Mesa com movimento linear horizontal* +
Usada nas _Prusa_ como eixo Y, o movimento horizontal,
como no eixo Z, é sustentado por guias lineares (barras lisas com rolamentos) mas movido por correias de um motor
para velocidade. Nas escalas em que as impressoras 3D com essa construção são usadas -- cerca de 200x200x200mm
de volume de construção, e 60 mm/s de velocidade máxima nos eixos horizontais -- o movimento de vaivém da
mesa não chega a apresentar artefatos notáveis no processo de impressão 3D. Mas em se aumentando a escala,
e principalmente a velocidade, a estabilidade da peça impressa gradualmente diminuirá. Aceleração e jerk, a
serem explicados na seção sobre firmware, terão grande influência na qualidade da peça neste caso.

* *Mesa com movimento linear vertical (cantilevered)* +
No caso em que a mesa tem movimento vertical (eixo Z), topamos
com um problema de engenharia e arquitetura chamado de _cantilever_ ou __estrutura em consola__. O problema,
que tem desdobramentos e complexidades que fogem ao escopo deste livro, consiste em conseguirmos dar estabilidade
estrutural e dimensional para uma estrutura planar horizontal sustentada por um suporte vertical. Estando a borda
a estrutura horizontal suficientemente distante do ponto de apoio vertical, o _torque_ desta estrutura começa
a ter influência, o coeficiente de elasticidade do material começa a poder apresentar deformações visíveis
e pequenas folgas nos encaixes dos eixos se traduzirão em distâncias discerníveis perto das bordas. Isso traz
uma série de requisitos para a construção das mesas: o suporte delas precisará ser de material o mais rígido
possível (com baixo módulo de Young - "grau de elasticidade"), bem equilibrado (geralmente exigindo pelo
menos duas cantoneiras para sustentação) e com encaixes precisos -- barras roscadas não podem ser usadas,
serão necessários fusos trapezoidas ou de esferas para tracionar este eixo.  * *Mesa com movimento planar ou
tridimensional* + Podendo ser considerada mais uma curiosidade que um caso prático, existem impressoras que usam
o elemento extrusor completamente fixo enquanto a mesa se move, ou aqueles em que o extrusor se move na vertical
enquanto a mesa se move na horizontal. Nesses casos o extrusor sustenta um peso relativamente grande para o
volume da impressora e a velocidade de impressão não é muito grande, não afetando portanto a estabilidade da
impressão. Isso pode acontecer, por exemplo, em impressoras 3D que tenham extrusor intercambiável, com extrusores
de pasta de chocolate e outras peças pesadas podendo ser encaixadas. Pela própria natureza, essas impressoras
3D têm estrutura aberta.

.Mais de 3 eixos

A idéia parece absurda de início -- só existem três dimensões, como se pode ter mais de 3 eixos? O arranjo,
mais usado em CNCs para tentar amenizar as restrições geométricas das técnicas subtrativas, não consiste
em realizar viagens fantásticas para a quarta ou quinta dimensão, e sim em inserir elementos de _rotação_
na estrutura -- no extrusor ou na mesa -- para que o plástico derretido possa ser depositado em ângulos
diferentes. Isso é importante por dois motivos:

* Diminui o "efeito escada" visto na vertical devido à resolução limitada (altura de camada) da impressora 3D,
permitindo a fabricação de estruturas tridimensionais suaves seguindo o contorno da forma, ao invés de aproximando
por camadas; * Minimiza a necessidade de **suportes**, que como veremos adiante, são estruturas de sustentação
necessárias pelo fato de a construção sempre se dar "de baixo para cima" na peça. Se estiver construindo uma
miniatura de Cristo Redentor, você pode primeiro construir todo o corpo, girar a peça e então construir os braços.

Impressoras 3D FFF desse tipo ainda são experimentais e estão aparecendo tanto no mercado mais industrial quanto
no open-source. Na verdade, a construção mecânica de um aparato desses, ainda que seja um desafio considerável
de engenharia, é a parte mais simples. A parte mais complexa é o algoritmo de fatiamento -- traçar a trajetória
destes 5 eixos para ter a forma mais suave e harmônica possível.

[[reprap5eixos]]
image::image69.jpeg[image,width=508,height=627]

=== "Vitaminas" comuns da estrutura de uma impressora 3D

* *Parafusos e derivados* +
*Parafuso* é uma peça que transforma um movimento de rotação em torno de seu eixo
em um movimento de translação segundo esse eixo, servindo assim como um elemento de fixação. Uma *porca* é um
elemento de auxílio à fixação do parafuso, se moldando perfeitamente a ele para realizar a fixação. *Arruela*
ou *anilha* é um disco furado a ser usado em um parafuso como separador ou travamento. Sendo as estruturas
supostamente mais simples de uma impressora 3D, o universo dessas peças e seus relacionados é vasto e variado
e por infelicidade do acaso, os modelos utilizados em impressoras 3D são relativamente raros de se encontrar no
Brasil e quando encontrados, são em pequena variedade. A primeira dificuldade é que apesar de o país adotar
oficialmente o sistema internacional ou métrico, os parafusos métricos (com denominação iniciando por "M"
seguido do diâmetro do corpo em milímetros) são menos numerosos no mercado. Além disso, os parafusos de máquina
(ou seja, com a ponta cega) também são mais raros, especialmente das medidas mais frequentes nas impressoras 3D
domésticas ("M3" a "M5", ou de 3mm de diâmetro a 5mm de diâmetro), agravado por a maioria das receitas
de construção e impressoras comercializadas precisarem de tamanhos bem específicos de parafusos (variando de
6 a 60mm de comprimento).  +
As especificações dos parafusos são geralmente dadas pelo modelo -- e às vezes
o material -- seguido da cabeça (formato e encaixe), o diâmetro e o comprimento, não necessariamente nessa
ordem. Assim, um "parafuso de máquina inox allen com cabeça chata M3x16" ou "parafuso auto-atarraxante de
fenda philips de cabeça panela M4x40 de bronze" são denominações comuns. Arruelas e porcas + Apesar de não ser
do escopo deste livro entrar detalhadamente na logística e tipos dos parafusos, algumas colocações gerais são
úteis para o leitor saber como os escolher para construir sua impressora ou consertar ou aprimorar a sua atual:
** *Existem muitos tipos de sulcos.* Nas impressoras 3D, os três tipos mais usados são __fenda__, _philips_
e _allen_ (hexagonal). Existem ainda os parafusos sem sulco, os usados com chave de boca (cabeça hexagonal),
mas muito pouco usados nas impressoras 3D.

[[sulcosparafusos]]
image::image70.png[image,width=642,height=346]

** **O sulco não necessariamente define a cabeça**. Por exemplo, embora seja comum parafusos allen virem em cabeças
cilíndricas, isso não é sempre verdade. Cabeças cônicas em especial podem vir a trincar ou danificar certos
materiais que são feitas algumas impressoras, como acrílico ou MDF. Na dúvida, compre somente os de cabeças
cilíndricas.
** *Parafusos pretos* são assim por usarem um tipo de aço mais resistente a tração. Aconselhados
para encaixes que precisarão de bastante força de sustentação, mas desaconselhados para encaixes que podem
"espanar" ou danificar o material circundante, como o MDF. Os parafusos mais comuns nesse material são
os tipo __allen__.
** **Porcas auto-travantes (nyloc) podem ser bastante úteis**. Tais porcas são geralmente
hexagonais e com uma "entrada" onde há o sulco de encaixe e uma "saída" onde um anel de nylon exerce
a função de elemento de atrito para impedir que a porca continue deslizando em torno do parafuso. São muitas
vezes usadas como terminadores de parafusos tratores ou para fixar estruturas sujeitas a vibração, pela sua
capacidade de amortecimento.
** *Porcas-borboleta* têm "asas" ou "abas" que permitem rosqueamento com os
dedos em torno do parafuso. São usadas em peças de impressora que podem necessitar de ajuste constante, como a
fixação e nivelamento da mesa ou o aperto do filamento do extrusor.
** *Rebite roscado ou rebite de rosca* é
um tipo de porca especial mais longa e com uma "quina" que permite que seja usada como elemento de suporte de
peso, sendo por isso usado como se fosse uma _castanha_ nas barras roscadas.
** *Porcas quadradas* são difíceis
de encontrar no Brasil e são bastante utilizadas em alguns modelos de impressoras __reprap__, por se encaixar
perfeitamente em pequenos sulcos feitos por cortadoras a laser (facilitando as construções dos encaixes, como no
caso do corte da graber i3).
** **Parafusos-mosca, ou parafusos sem cabeça**, que geralmente têm sulcos _allen_
no próprio corpo, são comumente usados em pinhões de motores e acopladores de alumínio para fixar a peça em
um chanfro do pino e impedir o movimento de rotação relativa. A ausência da cabeça é justamente para que não
reste uma "saliência" na peça. Como são parafusos geralmente bem pequenos, quase sempre são feitos em aço
reforçado preto.

[[tiposparafusos]]
image::image71.png[image,width=618,height=622]

* *Barras lisas* +
São elementos estruturais em que se assentam os eixos (X, Y e/ou Z) da impressora 3D. Geralmente
são conjugadas com _rolamentos lineares_ ou mesmo buchas cujo diâmetro interno concide com o diâmetro da barra;
deste modo, o rolamento linear ou a bucha se tornam um elemento livre para deslizar linearmente por todo o comprimento
da barra. É necessário que a barra seja reta com bastante precisão e sofra o mínimo possível de deformação;
geralmente são usadas barras de 8mm (nas impressoras de tamanho médio, como Prusa i3) até 12mm (nas maiores,
como a Sethi3D BB). É desejável que sejam barras "cromadas" pois o cromo dá resistência e diminui o
atrito da superfície (especialmente importanto se for uma bucha).
* *Polias e correias (GT2 e equivalentes)* +
São estruturas usadas em sistemas de engrenagens de transferência de força e energia cinética. As __**polias**__ são as peças giratórias, presas a um eixo geralmente de metal, e no caso das repraps quase sempre com sulcos para o encaixe das __**correias**__. As __**correias**__, por sua vez, são cintas de material flexível mas inextensível (não sofrem extensão elástica) presas às polias ou engrenagem por atritos ou sulcos. A polia de encaixe ou fricção transforma movimento rotacional para linear para a correia, e a correia transforma movimento linear para rotacional. As polias (e correias) lisas servem como rolamentos, não oferecendo resistência ou tração e tendo papel coadjuvante na movimentação. As correias e polias usadas em impressão 3D têm uma nomenclatura que reflete seu formato de dente ("perfil"), muitas vezes tendo também o espaçamento entre os dentes. Um exemplo é o perfil **Poly Chain GT2**(R), bastante popular, com 2mm de espaço por dente. Geralmente as GT2 de 6mm (de largura) são usadas nas impressoras 3D, com o GT5 sendo uma escolha frequente em modelos maiores. As correias usam fios de aço (chamados de "alma de aço") inseridos no material flexível para garantir a inextensibilidade.
* **Extrusões ou perfis de alumínio** +
Estruturas muito usadas para o arcabouço estrutural das impressoras 3D -- como os pilares de uma
delta ou as colunas de uma cartesiana -- devido à sua uniformidade dimensional, especialmente retidão precisa. A
"Extrusão" se refere ao processo de fabricação do material, em que o alumínio é extrudado por um orifício
de formato bem determinado; o nome "perfil" refere, por sua vez, à forma deste orifício. Uma forma bastante
utilizada de perfis de alumínio é o "**T-Slot**"^2^, nome que se refere ao formato invaginado em cada aresta do
quadrado de perfil da estrutura. Este formato é bastante útil pois permite a inserção de outros elementos que
ficarão firmados à peça, incluindo porcas (comuns ou especiais) que permitem fixar com bastante resistência
e estabilidade conectores e suportes. Perfis de alumínio são referidos por uma numeração técnica que diz,
em mm, o comprimento de cada aresta; assim, um perfil de alumínio T-slot 1515, usado na reprap Kossel Mini,
tem 15mm de cada lado com encaixe T-slot, um perfil de alumínio V-Slot 4060 tem 40mm em um lado e 60mm do lado
perpendicular a ele e os lados têm encaixe V-Slot (que é na verdade uma forma de T-Slot). Uma recomendação,
caso esteja usando este livro para decidir qual T-Slot usar, é usar o perfil *2020* pois é robusto, muito popular
e existem modificações das deltas que usam outros perfis para usá-lo no lugar. Além disso, é mais fácil
achar parafusos especializados em seus encaixes.

[[perfilaluminio]]
image::image72.jpeg[image,width=604,height=353]

* *Barras roscadas (parafusos infinitos)* +
São elementos estruturais por vezes usados como elementos imóveis
(como na estrutura da Prusa Mendel), por outras vezes usados como componentes giratórios que, através da
rotação de seus sulcos, fazem outra peça (uma porca ou "castanha") subir ou descer, transformando assim
o movimento rotatório de um pinhão de motor em movimento linear em uma direção. Barras roscadas não são
fabricadas no entanto com este objetivo e além do mais baixo aproveitamento energético do movimento do motor,
têm baixa precisão comparada ao mecanismo correto, o __fuso__.^1^ Seus filetes bem finos têm um tempo de vida
útil curto limitado pelo desgaste e sua fabricação geralmente não os faz ser completamente retos. No entanto,
são vendidos por metro e seu custo é baixíssimo. +
As barras roscadas são normalmente usadas no eixo Z
(o vertical) que é por isso o eixo mais lento; uma volta completa de 360°C corresponde a uma distância muito
pequena no comprimento da barra, e a uma distância bem maior quando o movimento é feito por correias nos outros
eixos. As barras roscadas mais comuns em impressoras 3D de baixo custo são a M5 (5mm de diâmetro) e M8 (8mm). +
A barra roscada é presa ao pinhão do motor por um elemento com alguma flexibilidade para amortecer folgas e
desvios de imprecisões mecânicas. Este elemento pode ser um _acoplador flexível de alumínio_ ou algum tubo
conector de material resistente, como nylon. +
A distância entre dois fios da rosca no comprimento da barra
é o __passo__, em inglês _pitch_ ou __lead__. Como as barras roscadas são na verdade um tipo de parafuso,
usam a mesma denominação deles -- como "M5" ou "M8" pra designar seu diâmetro.
* *Fusos de rosca* +
Diferentemente das barras roscadas, _fusos_ são elementos industriais especificamente criados para um elemento
deslizante em seu comprimento, transformando movimento rotativo do pinhão do motor em linear. Alguns motores
já vêm mesmo com o fuso fisicamente integrado a eles, como se fosse um pinhão, para evitar qualquer folga no
mecanismo (Figura XX). O fuso pode ser conectado por um acoplador de alumínio como no caso da barra roscada também. +
Fusos são definidos pelo elemento móvel que usam, a __castanha__. Quando usam uma peça deslizante simples,
geralmente de cobre ou poliacetal, são chamados simplesmente de fusos trapezoidais. Quando usam um elemento que
contêm esferas de aço interiores que concedem muito baixo grau de atrito ao movimento, são chamados de __fusos
de esferas recirculantes__. Devido ao seu custo, é raro encontrarmos impressoras 3D de baixo custo usando este
último tipo de fuso, embora o uso do fuso trapezoidal em impressoras 3D comerciais de baixo custo esteja ficando
bastante popular, pela melhoria visível na qualidade de impressão. +
Em relação a barras roscadas, fusos
apresentarão menor "resolução", isto é, uma volta completa do motor equivalerá a uma distância vertical
maior no fuso, visto que os ângulos da rosca são mais acentuados. Isso também significa que o desgaste será
menor e a velocidade maior. +
Outra diferença dos fusos em relação a barras roscadas é a quantidade de roscas
(espirais cavadas) que apresentam. Enquanto uma barra roscada apresenta sempre uma única rosca contínua, fusos
podem apresentar roscas independentes -- por exemplo, um fuso TR8:8 (8mm de diâmetro, passo de 8mm) pode ter
quatro roscas, geralmente discriminadas como quatro __entradas__. +
Embora fusos trapezoidais sejam normalmente
usados em diâmetros de 8mm ou maiores, o uso em 5mm ainda compensa sobre barras roscadas. A grande vantagem deles
é poderem ser simplesmente trocados na estrutura de uma _reprap_ comum sem alteração de outros componentes, e
uma simples reconfiguração do firmware para troca da resolução vertical. A melhora na qualidade de impressão,
especialmente no artefato chamado de __Z wobble__, é instantânea.
* **Rolamentos** +
Rolamentos ou rolimãs (__bearings__ em inglês) são dispositivos que permitem o movimento relativo controlado entre duas
ou mais partes, substituindo o atrito de deslizamento pelo atrito de rolamento, visto que tem elementos denominados
_corpos rolantes_ -- geralmente pequenas esferas de aço cromado -- que intermediam o contato entre o elemento
deslizante e a superfície de deslizamento. São elementos apropriados para alta rotação, alta precisão, baixo
torque e baixa vibração. Há dois tipos principais de rolamentos usados em impressoras 3D, classificados de
acordo com o movimento:
** *Lineares* +
O movimento se dá com o rolamento deslizando ao longo do comprimento do
elemento maior, em linha reta. Como os corpos rolantes têm contato direto com o elemento, o uso contínuo pode
causar desgaste, razão pela qual se deve usar nesse caso materiais bem resistentes como aço. Esses rolamentos
são geralmente utilizados em eixos de impressoras 3D cartesianas ou pilares laterais de impressoras 3D delta.
** *Radiais* +
O movimento se dá com o rolamento tendo dois anéis, o exterior deslizando em torno do anel interior,
com cada anel se prendendo a um elemento de deslizamento. São geralmente utilizados para conduzir a rotação de
uma correia de motor, elementos rotativos de engrenagens de extrusor ou como anteparos (idlers) à roda dentada
de tração do extrusor.
** *Outros tipos* +
Os que mais serão usados em mecanismos de impressoras 3D serão os
lineares e radiais, mas existem inúmeras outras configurações de rolamentos -- por exemplos, as juntas de esferas
para rotação esférica e as dobradiças para articulações. Também existem muitos outros tipos de rolamentos em
relação a outros aspectos da construção -- por exemplo, rolamentos que usam cilindros ao invés de esferas,
ou mesmo fluidos ou campos magnéticos.

[[barraserolamentos]]
image::image73.jpeg[image,width=642,height=380]

[[barraefusocomparados]]
image::image75.png[image,width=642,height=362]

* *Buchas* +
Buchas são peças de material deslizante -- geralmente
bronze ou cobre, mas com -- que cumprem o mesmo papel dos rolamentos lineares, deslizando um elemento ao longo do
comprimento de uma barra. Diferentemente do rolamento que usa corpos rolantes, a bucha depende tão-somente do baixo
atrito entre ele e o elemento deslizante, que deve ser cromado e bem lubrificado. A bucha tem um custo menor que o
rolamento, mas sua maior vantagem em relação a ele é a operação silenciosa. Por outro lado, buchas cujo encaixe
não seja perfeito emperram e não permitirão ao mecanismo funcionar, enquanto que o rolamento absorve as folgas. +
As buchas de plástico no entanto costumam ser auto-lubrificantes, isto é, o próprio material, ao sofrer abrasão,
deposita um lubrificante sólido que a faz ter baixo atrito com o material em contato. A óbvia desvantagem é
que a abrasão acaba desgastando a peça, que acaba ganhando folga com o tempo. Buchas impressas em plásticos
de impressoras 3D também são usadas em algumas impressoras, mas geralmente têm pouca eficiência. A própria
IGUS, fabricante de buchas de plástico, vende filamentos de impressão 3D para tais propósitos (Iglidur I170 e
Iglidur I180).

[[buchasdrylin]]
image::image74.png[image,width=642,height=365]

* *Patins e trilhos* +
Patins e trilhos são outro modo de se ter _guias lineares_ que não usam as barras lisas
com rolamentos. *Patim* ou *carro* é o nome que se dá à peça que desliza, equivalente ao *rolamento linear*
que usamos nas barras lisas; e *trilhos* são extrusões de metal retas com um perfil de encaixe em que o patim
pode deslizar livremente. Patins podem, como os rolamentos, ter corpos rolantes nas partes em que tocam o perfil e
geralmente são vendidos juntamente com os trilhos, já encaixados, e submetidos a um processo chamado de *preload* ou
pré-carga, em que a possibilidade de folga diminui enormemente. Como têm uma usinagem mais complexa e controlada,
têm preços maiores que seus conjuntos equivalentes feitos com rolamentos e barras lisas. Impressoras com foco
mais industrial as preferem, assim como algumas reprap (como a Kossel). Outra vantagem dos trilhos é serem mais
leves.
* **Traxxas rod ends, u-joints, trolley heads, ball joints** -- essas peças, que não têm um único
nome em inglês nem nomenclatura consensual em português (apesar de o nome "juntas de esferas" ser aceitável),
são usadas em impressoras 3D estilo delta como conectores dos braços da delta ao "effector" e ao trilho ou
guia do poste. São peças também usadas por _hobbyistas_ de veículos de controle remoto, e são basicamente
articulações de rotação para fixação de um braço a um eixo (geralmente a rosca de um parafuso). Existem
alternativas a essas juntas feitas por esferas magnéticas deslizantes, mas ainda são pouco usadas.

=== Malha aberta ou fechada?

A _Teoria de Controle_ dada a alunos de Engenharia Mecânica nos ensina que há dois tipos de sistemas de controle,
*malha aberta* e **malha fechada**.

[[malhaabertamalhafechada]]
image::image76.png[image,width=642,height=348]

* *Malha aberta* - é um sistema em que a saída (resultado) não exerce qualquer ação sobre o sinal de
controle, não sendo comparada com uma saída de referência esperada. Em outras palavras, é um sistema em que
o componente apenas exerce certas ações programadas, não verificando se elas aconteceram como previsto. Sua
máquina de lava roupa pode ser programada para ciclos de enxágue, lavagem e centrifugação, mas em cada um
desses ela estará apenas exercendo ações mecânicas, não medindo a roupa está realmente seca, sendo lavada
ou centrifugada.
* *Malha fechada* -- há um ou mais componentes no sistema para verificar (medir) a execução
da ação e realimentar o circuito com esta medida. Uma máquina de lavar roupa que usasse um sensor de umidade no
término da ação de secagem para medir o resultado é uma malha fechada. A malha fechada permite ações como a
correção -- se a roupa não está suficientemente seca, inicia-se novamente a secagem até se ter a saída esperada.

Conhecer o conceito de elementos de controle é essencial para entender a sua impressora 3D: não queremos um
motor que só gire pra um lado ou pra outro, queremos saber as coordenadas! Não queremos um componente que só
aqueça o máximo, queremos algo que aqueça e que, ao chegar na temperatura desejada, estabilize. Se a medição
falha e o componente aquece sem controle, temos resultados como o da Figura XX.

E é como elemento de medição que vamos entender o __endstop__. Em português o termo é "detector" ou
"sensor" de fim de curso, o que dá uma idéia para que serve. Para isso, devemos entender que os motores
usados para posicionar os eixos da impressora 3D são eles mesmos malhas abertas: um comando é enviado para o
motor girar para a frente, ou para trás, ou para permanecer parado. Ele não "sabe" quanto já girou, não
tem informação de posicionamento. O quanto ele gira a cada comando é pré-determinado, então se contarmos
cada comando enviado, poderemos ter essa informação se tivermos a referência inicial. Em um sistema de eixos,
a referência inicial terá a coordenada zero.

O endstop faz esse papel da referência. Funciona do seguinte modo: o endstop é uma "chave" que pode estar
na posição ligada ou desligada. Com um elemento encostado ao endstop, está ligada. Com o elemento distante,
desligada. O motor girando para o sentido "negativo" traz o elemento mais perto do endstop, até encostar
e ligar a chave -- e o controlador imediatamente pára o motor, pois ele não pode ter coordenada negativa;
o motor girando para o sentido positivo distancia o elemento da chave.

[[motorchaveendstop]]
image::image78.png[image,width=642,height=307]

Obviamente, algumas variáveis são importantes aqui. A primeira observação a se notar é que se o motor está
se movendo na direção do endstop, há contato e ele precisa parar, esse tempo de reação entre o contato e
a parada tem que ser mínimo. Geralmente isso não é um problema: mesmo um fraco microcontrolador _Arduino_
consegue executar 16 milhões de instruções por segundo, e o tempo entre detecção do sinal e parada do motor
não dura mais que algumas dezenas de instruções, portanto considerado desprezível.

Outros parâmetros seguem o mesmo padrão; um componente que servirá como endstop tem sua vida útil mensurada
em quantas vezes pode ser acionado e este número para quase todas as tecnologias está na casa de centenas de
milhares de vezes ou até milhões. Como são acionados uma ou duas vezes apenas em uma impressão 3D que pode
demorar horas, não nos preocupamos com a longevidade do componente.

Os três parâmetros críticos de endstops na construção de uma impressora 3D são: distância de acionamento,
precisão e repetibilidade. Tais valores definirão os tipos que podemos encontrar na estrutura de uma impressora.

* **Distância de acionamento**: simplesmente a distância a que o elemento medido (geralmente o extrusor, mas
pode ser outra peça da impressora) está do endstop. Pode ser zero caso o endstop exija contato para fechar
circuito. Geralmente dado em milímetros.
* **Precisão**: um número que diz a resolução da medição gerada,
ou o número de dígitos usados pra expressar o valor. Note o leitor que existe diferença entre _precisão_ e
__acurácia__, mas isto foge do nosso escopo de tratamento; veja bibliografia nas notas para leitura posterior^5^. Se
um endstop tem precisão de 0,01mm, significa que ele pode medir distâncias em múltiplos desse valor, tais como
0,15mm ou 0,27mm, mas não 0,123mm.
* **Repetibilidade**: variação em medidas tomadas nas mesmas condições,
com os mesmos itens, em sequência. Uma repetibilidade de 0,04mm significa que a medida pode variar, digamos,
de 0,08mm até 0,12mm para uma distância real de 0,1mm, mas não sairá deste intervalo.
* *Tipos principais de endstops* +
Os endstops podem ser circuitos _energizados_ ou __não-energizados__. Circuitos
energizados são aqueles que requerem uma tensão positiva -- geralmente 5V -- e um dreno para ativar o
componente, e devolvem em outro fio a resposta. Precisam de três fios. Os não-energizados somente precisam do
sinal, deixando o circuito aberto ou fechado de acordo com o contato, devolvendo portanto dois estados possíveis
(o sinal ou alta impedância) e ocupando apenas dois fios. Os microcontroladores e microcomputadores usados para
controle de impressoras 3D geralmente aceitam ambos os tipos. Dos que listamos, somente os mecânicos podem
ser não-energizados. Endstops são usados em mais do que apenas o limite dos eixos, são importantes para o
autonivelamento de mesa que será tratado mais adiante.
** **Mecânicos**: são os mais simples, precisando
geralmente de apenas dois fios para fechar ou abrir o circuito. São acionados por contato de uma simples chave
mecânica com mola e têm repetibilidade e precisão média pra alta -- em números, geralmente 0,01mm de precisão
e 0,1mm de repetibilidade, embora isso possa variar bastante de acordo com o fabricante.
** **Ópticos**: estão
entre os mais precisos, tendo também boa repetibilidade nas mesmas condições, mas são muito afetados por
fatores externos como mudanças da superfície ou da iluminação. Não funcionam bem com superfície refletoras
ou transparentes.
** **De efeito hall (magnéticos)**: são sensores de dois componentes, um deles magnéticos e
funcionam com o efeito de transdução de tensão em resposta a um campo magnético, de nome Efeito Hall. Como são
dois componentes geralmente pré-calibrados de fábrica e testados com rigor, apresentam precisão e repetibilidade
alta com estruturas bem isoladas mas podem sofrer perturbações de componentes eletrônicos muito próximos. A
precisão pode ser comprometida com o aquecimento por mudança brusca nas propriedades magnéticas, portanto
é melhor ser usado frio quando para autonivelamento de mesa.
** **Indutivos**: podem ter a precisão bem alta
(0,005mm) mas repetibilidade relativamente baixa (0,05mm), piorando bastante de acordo com a montagem na estrutura
e o material usado. Funcionam com o efeito de indução gerado pela proximidade de um metal, preferivelmente um
metal ferrocondutor -- funcionam bem com aço, têm sensibilidade menor para alumínio. Assim como os sensores
de efeito hall, têm melhor precisão se usados frios.
** **Capacitivos**: são sensores de montagem fácil que
podem detectar virtualmente qualquer material a pequenas distâncias, mas têm como desvantagem baixa precisão e
repetibilidade.  + Esta lista não é exaustiva. Existem diversas tecnologias que podem ser usadas para calcular
distâncias, como de costume faz parte da _mentalidade reprap_ entender que se trabalha com um espaço aberto
de possibilidades e que a popularização traz dispositivos antes desconhecidos para os holofotes. Detectores de
distância ultrassônicos ou detectores de pressão poderiam em tese ser utilizados. Projetos inovadores surgem
a cada dia, como o sensor motorizado de pressão BLTouch, submetido a financiamento coletivo.

[[sensorbltouch]]
image::image79.png[image,width=642,height=321]

É importante perceber que embora teoricamente você pudesse se beneficiar de endstops sendo colocados nos dois
extremos de um eixo -- um representando a coordenada zero (mínimo) e outro representando a coordenada máxima
- poucas impressoras usam os dois, normalmente escolhendo apenas os mínimos ou máximos. Nas cartesianas,
os mínimos são quase universais, mas nas deltas, pela própria construção, se usam endstops máximos.

Note-se que o uso de um endstop ajuda no controle de uma malha, mas não torna os circuitos de uma impressora
3D doméstica uma malha fechada; há muitas partes "abertas" do circuito, como o máximo dos eixos nas
cartesianas. E como será visto na parte sobre motores, uma malha fechada propriamente dita usaria _servo motores_
ao invés de motores de passo.

E vimos o uso dos endstops nos eixos, mas não é só para isso que servem; eles também são usados no assim
chamado "autonivelamento de mesa", que será mencionado na parte sobre as plataformas usadas em impressoras 3D.

Por fim, uma excelente mostra das diferenças entre os vários tipos de sensores para endstop foi
feita pelo vlogger Thomas Sanladerer, caso o leitor saiba inglês é um vídeo bastante recomendado:
https://www.youtube.com/watch?v=il9bNWn66BY[_https://www.youtube.com/watch?v=il9bNWn66BY_]

[NOTE]
.Notas:
====
. http://www.protoparadigm.com/news-updates/accuracy-vs-precision-and-threaded-rod-vs-leadscrews-in-3d-printers/[_http://www.protoparadigm.com/news-updates/accuracy-vs-precision-and-threaded-rod-vs-leadscrews-in-3d-printers/_]
. http://www.meccanismocomplesso.org/en/tslot-framing-openbeam-makerbeam-micromax/[_http://www.meccanismocomplesso.org/en/tslot-framing-openbeam-makerbeam-micromax/_]
. http://www.corexy.com/[_http://www.corexy.com_]
. Ainda que fuja ao escopo deste livro elaborar na questão da cinemática das impressoras, o site
_reprap.org_ oferece ótimo material de estudo em inglês, a julgar pela sua própria entrada sobre _CoreXY_
(http://reprap.org/wiki/CoreXY[_http://reprap.org/wiki/CoreXY_]), pela sua lista de _arranjos mecânicos_
(http://reprap.org/wiki/Category:Mechanical_arrangement[_http://reprap.org/wiki/Category:Mechanical_arrangement_])
ou pelos links acadêmicos de referência que cita
(http://www.mesj.ukim.edu.mk/sites/default/files/Mech-Eng-25-1-2006_0.pdf[_http://www.mesj.ukim.edu.mk/sites/default/files/Mech-Eng-25-1-2006_0.pdf_]
- __Parallel Kinematics Machine Tools: History, Present. Future__)
. http://paladintechworks.com/index.php/home/blog/12-tech/14-understanding-the-terms-precision-repeatability-and-accuracy-in-the-cnc-world[_http://paladintechworks.com/index.php/home/blog/12-tech/14-understanding-the-terms-precision-repeatability-and-accuracy-in-the-cnc-world_]
====

=== Extrusor
O extrusor é o conjunto que puxa (traciona) o filamento plástico e o
derrete. Essas duas funções são realizadas por partes diferentes do extrusor: uma, o tracionador ou cold end
("extremidade fria"), é a que tem um motor e engrenagem dentada que dá a força e a velocidade para o
filamento ser alimentado na segunda parte, que é chamada de hot end ou hotend ("extremidade quente").^1^

[[estruturaextrusorfreecad]]
image::image80.png[image,width=618,height=395]

O tracionador e o hotend não necessariamente estarão
juntos ou mesmo próximos. A primeira distinção é justamente essa:

[width="100%",cols="^s,^m,e",frame="topbot",options="header"]
|====
| Tipo | Exemplo | Descrição
| Direct / Monolítico a| image:image81.jpeg[image,width=190,height=190,align="center"] | Tracionador e hotend acoplados
| Bowden / Filamento guiado a| image:image82.png[image,width=215,height=185,align="center"] | tracionador e hotend separados
|====

Em impressoras 3d estilo __delta__, no hotend, você tem ainda a estrutura que une os braços chamada de effector:

[[fotoeffector]]
image::image83.png[image,width=642,height=498]

O bowden, também chamado de configuração com filamento guiado, tem o tracionador geramente fixado na carcaça e
vai usar um tubo de baixo grau de atrito para unir as duas peças e preservar a tração do filamento sendo empurrado
pelo motor. Este tubo, quase sempre de PTFE (teflon), pode no entanto dificultar ou impossibilitar alguns tipos de
uso de filamento, em especial filamentos flexíveis, em que a _histerese elástica_ faz o filamento se comprimir
e expandir com atrasos dentro do tubo, chegando ao hotend com tração pequena ou irregular e levando a travadas
ou entupimentos na impressão.

No entanto, o uso de bowden também traz algumas vantagens. Quase sempre o motor é um dos itens mais pesados do
extrusor e removê-lo da parte móvel faz a impressão ter muito menos inércia pra combater e portanto possibilita
velocidades maiores sem perda de qualidade. Também traz vantagens em deixar a parte livre do filamento fixa,
evitando artefatos de pequenos deslocamentos laterais durante a impressão. E por fim, para impressoras 3D que
usem câmaras aquecidas, deixar um componente sensível como o motor fora da zona de aquecimento diminui chance
de defeitos e permite maior economia na construção.

Os hotends para uso com bowden vêm com um encaixe diferente dos de direct drive. Usam uma rosca de 8mm para o encaixe
de um "conector de engate rápido", também chamado de "conector pneumático" ou "push-fit connector".

Mas essa não é a única variação possível do extrusor nas impressoras 3D de baixo custo. Tanto o tracionador
quanto o hotend também têm seus tipos. Comecemos pelo tracionador, que tem sua classificação dependendo de
como a engrenagem dentada que tem contato com o filamento recebe força do motor:

[width="100%",cols="^1s,^1m,2e",frame="topbot",options="header"]
|====
| Tipo | Exemplo | Descrição
| Engrenado ou _Geared_ a| image:image84.jpeg[image,width=206,height=154,align="center"] | Funciona com a tração transferida por engrenagens
| __Direct Drive__ a| image:image85.jpeg[image,width=203,height=152,align="center"] | O pinhão traciona diretamente o filamento
|====

Um extrusor _engrenado_ tem uma "redução" no movimento, isto é, com o sistema de engrenagens, ele passa
a ter que dar mais voltas para tracionar um mesmo comprimento de filamento; no entanto, com essa redução de
velocidade ele consegue mais força do que se entrasse em contato por um pinhão colocado diretamente no pino do
motor. Essa é a diferença entre os dois: o engrenado consegue mais força e tem a velocidade máxima a que pode
chegar menor que do direct drive.

Note ainda que o tracionador engrenado geralmente usa um parafuso modificado preso à engrenagem para tracionar
o filamento. Esse parafuso é chamado de __parafuso trator__, com a cabeça hexagonal conectada à engrenagem
maior. Tanto o _pinhão_ do motor quanto o parafuso trator podem ter _sulcos_ (fendas cilíndricas com os dentes de
tração circulando o filamento de forma radial) ou _canaletas_ (fendas retas e mais largas com os dentes paralelos
e retos), conforme a Figura <<parafusotratorepinhao>>.

[[parafusotratorepinhao, XX]]
image::image86.jpeg[parafusotratorepinhao,width=642,height=365,title="1. Parafuso trator com sulco; 2. Parafuso trator com canaleta; 3. Pinhão (MK7) com sulco; 4. Pinhão completamente canaletado; 5. Pinhão (MK8) com sulco."]

Os hotends se dividem, por sua vez, em:

[width="100%",cols="^1s,^1m,2e",frame="topbot",options="header"]
|====
| Tipo | Exemplo | Descrição
| PEEK + metal a| image:image87.jpeg[image,width=212,height=157,align="center"] | Plástico resistente a calor e isolante térmico.
| Metal com PTFE interno a| image:image88.jpeg[image,width=211,height=157,align="center"] | O hotend é quase inteiramente de metal, mas tem um pequeno tubo interno de PTFE para o filamento.
| Todo de metal (all-metal) a|  image:image89.png[image,width=212,height=163,align="center"] | O hotend é de metal, sem o tubo de PTFE.
|====

Os hotends do primeiro tipo -- usando um plástico chamado PEEK (polyether ether ketone, poliéter-éter-cetona)
-- foram os usados no começo do projeto RepRap e hoje quase não se os encontra mais. Eles têm o revestimento de
PEEK, um tubo interno de metal e um pedaço de tubo de PTFE interno ao tubo de metal por onde o filamento escorrega
até a zona de aquecimento no bloco aquecedor. Tanto o PEEK quanto o PTFE são isolantes, portanto o calor gerado
no bloco aquecedor não percorre as vias internas ou externas do hotend e isso dá segurança à peça. A grande
desvantagem é a baixa faixa de trabalho térmica: um hotend desses pode ser mantido no máximo a cerca de 250°C,
temperatura acima da qual o PTFE e o PEEK começam a degradar.

Uma melhoria no design dos hotends que permitia maior faixa de temperatura, e portanto maior variedade de materiais
para derretimento, veio logo com os hotends de metal. Como os metais são bons condutores térmicos, entretanto,
tornaram-se necessárias duas mudanças na geometria: colocar _aletas de dissipação_ para que o calor não suba
pelo _pescoço dissipador_ e na transição do _bloco aquecedor_ para o pescoço, colocar uma peça estreita de
aço inoxidável (um metal que não tem alta taxa de condutividade térmica) que é chamada de __heatbreak__, ou
__barreira de calor__. Um hotend desses aguenta bem temperaturas até os 260°C e pode chegar a cerca de 280°C
dependendo de onde termina o PTFE.

Ainda que o PTFE interno ao hotend ("PTFE liner") fique geralmente acima do heatbreak e não muito próximo
do bloco aquecedor, há as limitações de temperatura do material. Alguns fabricantes entretanto quiseram ampliar
ainda mais a faixa de trabalho do hotend e começaram a fabricar hotends __all-metal__, ou todo de metal, em que o
baixo atrito do PTFE que permite ao filamento deslizar sem resistência até a zona de aquecimento é substituído
por um polimento especial no metal que faz com que ele tenha baixo coeficiente de atrito. Não tão baixo quanto
o PTFE, entretanto, e uma dura verdade é que embora os hotends todos de metal possam trabalhar em temperaturas
que superam os 500°C se o componente medidor de temperatura as suportar, o maior atrito gera maior chance de
entupimentos, especialmente com plásticos que têm maior aderência como PLA ou PETG.

Um hotend all-metal de mercado com um "termistor" comum (componente medidor de temperatura mais usado por
repraps) trabalha bem até uns 300°C, propício para filamentos de maior ponto de fusão como policarbonato,
poliacetal e alguns nylons.

[[partesdeumhotend]]
image::image90.jpeg[image,width=642,height=526]

.Revestimento do bloco aquecedor

[[hotendsocks]]
image::image91.jpeg[image,width=642,height=363]

O revestimento de bloco aquecedor (termo em inglês: "hotend silicone socks", ou meias de silicone
para hotend) é uma invenção da empresa E3D que ajuda consideravelmente na eficiência do aquecimento
e isolamento do hotend e, sendo um item barato e descartável, até na limpeza. É feito de silicone
resistente a altas temperaturas (até 500°C). É possível usar a própria impressora 3D para fazer
moldes impressos e silicone de molde de alta temperatura para a partir do molde criar uma réplica para o
seu hotend; o primeiro molde desses foi disponibilizado pelo usuário _thefrog_ no sítio thingiverse em
http://www.thingiverse.com/thing:1432346[_http://www.thingiverse.com/thing:1432346_].

[[colaparasocks]]
image::image92.png[image,width=642,height=367]

.Dissipação

Uma outra característica importante dos hotends é se têm dissipação _passiva_ ou __ativa__. Dissipação
passiva é o calor ser dissipado naturalmente pela geometria do hotend, sem necessidade de interferência externa
-- como pelas aletas, por exemplo. Dissipação ativa é usar uma peça auxiliar, geralmente uma ventoinha,
para auxiliar a expulsão de calor do pescoço dissipador e impedir que a zona de aquecimento suba muito.

[[hotende3dcomventoinha]]
image::image93.png[image,width=559,height=660]

A refrigeração ativa é especialmente importante para materiais com alto calor específico (como o PLA, que
tem 2060 J/Kg°C a 190°C), pois eles demoram mais para dissipar o calor e este tende portanto a subir mais pelo
pescoço dissipador. Quando o calor sobe, aumenta o comprimento da zona de derretimento e, estando no estado
líquido, o filamento vai perdendo a propriedade de funcionar como "êmbolo de si mesmo", com a parte mais
sólida deixando de empurrar a parte mais liquefeita. Hotends sem dissipação ativa portanto tendem a entupir bem
mais frequentemente que os que a têm. Ela é, portanto, recomendada para todos os casos e estar sempre ligada,
inclusive por a ligação ser fácil e gastar muito pouca energia.

.Resfriamento forçado do material

Do mesmo modo que o pescoço dissipador, o material extrudado^2^ do bico pode necessitar de ajuda para sair do
estado líquido para o sólido, o que também é importante para os mesmos materiais com alto calor específico
do parágrafo anterior. O PLA é um bom exemplo, se você extrudar um filete de ABS e um filete de PLA, verá
pelo movimento menos dúctil que o de ABS torna-se sólido bem mais rapidamente, quase imediatamente ao sair
do nozzle, enquanto o PLA sai líquido e ainda sucumbe um pouco após tocar a mesa. Já é possível imaginar a
diferença deste comportamento para as peças impressas: as de PLA tenderão a adquirir um aspecto mais caído,
mais "derretido", por acomodação do filamento ainda não totalmente solidificado.

[[comventoinhaesemventoinha]]
image::image94.png[image,width=642,height=454]

Por outro lado, como veremos mais à frente com o ABS, há materiais que você não quer que esfriem mais rápido
pois sofrem efeitos de empenamento ("warp") e rachaduras. Como lidar com isso? A solução mais frequente
é usar mais uma ventoinha extra, com a diferença que esta _não pode_ estar ligada o tempo todo. Portanto, ao
invés de simplesmente ser ligada junto com a impressora 3D, esta ventoinha deve ser ligada e desligada sob demanda
durante a impressão, o que significa que ela tem que ser microcontrolada, ou comandada pelo mesmo software que
rege o processo de impressão. Esta ventoinha é chamada de _ventoinha do bico_ (nozzle fan), em contraste com
ventoinha do pescoço dissipador.

[[hotendcomduasventoinhas]]
image::image95.jpeg[image,width=642,height=553]

[NOTE]
.Notas:
====
. Há uma grande variação de uso na nomenclatura, o que é esperado em um mercado de massa sem padrões
industriais impostos. Algumas pessoas e empresas usam "extrusora" ao invés de "extrusor"; outras usarm
"extrusor" do modo como definimos "tracionador". Em analogia com impressoras "2D", alguns fabricantes
chamam o extrusor ou o cold end de "cabeça" ou "cabeçote", diluindo o conceito. Outros chamam o hotend de
"bico", criando uma ambiguidade desnecessária com a pequena extremidade da peça, o "nozzle". Um extrusor
estilo "bowden" é algo consensual, mas existe uma grande ambiguidade de uso entre extrusores "direct"
ou "direct drive". Seria um exercício de futilidade e arrogância tentar convencer outros a adotar a nossa
nomenclatura, mas escolhemos uma que minimiza ambiguidades e é relativamente popular. Fique de olho em armadilhas
de interpretação, em especial ao fato de que sempre que quisermos tratar do "nozzle" chamaremos de "bico",
e à peça que derrete o filamento chamamos "hotend".
. Sim, apesar dos termos "extrusão" e "extrusor", o verbo é "extrudar". Idiossincrasias de
nossa língua!
====

.Extrusores duplos, triplos, múltiplos

*Cores versus materiais* -- Uma das críticas que mais se faz à impressão 3D em geral, e à FFF em geral, é a
dificuldade ou falta de _cores_ _diferentes_ para se colocar em um objeto ao imprimi-lo. Ora, o próprio nome da
técnica remete a isto: estamos tão acostumados a _impressão_ (em papel) estar associada a documentos coloridos,
a informação, a aparência que nos esquecemos que estamos tratando de outro escopo de atuação. Particularmente,
enquanto uma impressão em papel quase sempre traz _apenas informação_ -- sem características funcionais
imediatas, como no caso de um origami no papel para ser dobrado em uma forma -, a impressão 3D terá, em seu
mais amplo escopo, objetos que têm utilidade em sua forma, sua geometria. Uma peça mecânica, um encaixe de
equipamento, um utilitário doméstico. Lógico que não é limitado a isto: se você imprime uma estatueta ou um
boneco, você vai querer passar também a aparência da superfície. No entanto, com uma impressora 3D comum de
mercado você terá apenas um bico extrusor de plástico usando um único filamento monocromático, e terá que
recorrer a acabamentos manuais como alisamento e pintura para colocar aquela informação extra em sua superfície,
como cores, reflexividade, contornos, etc.

Embora tratemos de acabamento manual neste documento, e toda técnica de impressão 3D -- inclusive, e principalmente,
as industriais -- tenha estágios complexos de acabamento, toda a idéia da impressão 3D é __deixar a máquina
fazer o serviço__. Se nos resignamos a ter sempre uma etapa "artesã" no processo, acabamos por limitar a
penetração da impressão 3D na fabricação industrial "do mundo real". Portanto, é imperativo que sempre
procuremos automatizar ao máximo esta etapa.

Portanto, se se fazem necessárias cores na peça final, elas têm que ser tratadas. No entanto, cores _ainda_
são uma analogia imperfeita com a impressão em papel. No papel, você não está preocupado com a elasticidade
ou dureza do desenho que imprime; você quer passar algo abstrato que pode corresponder a algo físico mundo real,
mas não precisa ter suas propriedades. E se precisar, encontra muitas limitações -- por exemplo, é quase
impossível você imprimir, em papel, uma área __espelhada__. A reflexividade seria uma propriedade útil, mas
é tão difícil de obter que poucos se dão ao trabalho de potencializá-la.

É necesse contexto que deve ser entendida a ainda atual resistência dos métodos de impressão 3D a incorporar
cores; não é que não é possível, o incentivo é que ainda é relativamente baixo, dada a utilidade derivada
da forma e não informação.

Por outro lado, a analogia serve também no sentido inverso: se em impressoras de papel as propriedades físicas
da tinta não são tão importantes, nas impressoras 3D elas são essenciais. Faz toda a diferença se você usa
um material rígido ou flexível, opaco ou transparente, brilhante ou fosco. Portanto, _também é limitante_
você pensar em impressões 3D "a cores" -- e deve ter percebido que esta expressão foi evitada até agora. Até
mesmo quando se pensa apenas na informação que uma peça colorida deve passar, o material, mais que a cor,
interessa: uma estatueta de santo com túnica será muito mais convincente se a túnica, ao invés de brilhar com a
luz, oferecer uma superfície com aspecto fosco e granulado. Os olhos do mesmo santo, por outro lado, terão muito
mais vida se ao invés de superfície opaca e sem vida tiverem alguma transparência e brilho. E se quisermos tocar
a estatueta, senti-la? Uma túnica que realmente parecesse tecido seria muito mais realista -- e valorizada --
que uma forma rígida que nem mesmo se flexiona com o toque.

Quando voltamos à necessidade de utilidade da forma, então, o material usado se torna ainda mais importante. Com
impressoras 3D FFF, hoje em dia, graças ao projeto RepRap e sua massificação da indústria, temos disponíveis
todo tipo de materiais com propriedades diferentes -- dezenas, provavelmente centenas e novos surgindo a
cada dia de acordo com a criatividade dos pequenos empreendedores. Materiais rígidos, flexíveis, condutores,
isolantes, fosforescentes, translúcidos, transparentes, metálicos, moldáveis, dissolvíveis, biodegradáveis,
compostáveis... Até mesmo comestíveis se você levar em conta as modificações nos extrusores de impressoras
FFF para incorporar uma seringa que extrusa material como chocolate ou massa de macarrão!

A solução em impressoras FFF para enriquecer a gama de cores nas impressões, portanto, expandem muito mais
nossos horizontes que apenas permitir informações extras na superfície do objeto. Poderemos criar designs
criativos e úteis, como uma articulação que tenha partes em filamento flexível e partes rígidas, fundidas uma
na outra sem necessitar de encaixe (imagine isto sendo usado em próteses); podemos criar uma peça opaca mas com
cobertura transparente; podemos usar dois filamentos com propriedades físicas bem diferentes para poder remover
um deles depois. Na seção sobre fatiamento, aprenderemos sobre as estruturas de suporte, que são estruturas
de sustentação para partes pendentes a serem removidas depois da impressão. Fabricar estas estruturas com um
material dissolvível em um solvente que não afete o outro material faz com que fique muito fácil "limpar"
a peça com um simples banho de imersão naquele solvente.

Dito isto, vamos então examinar a solução tradicionalmente usada em impressoras FFF para resolver o problema
de limitação de co... -- não! Limitação de material.

*Vários extrusores, lado a lado.* É essa a solução. É simples: todos os circuitos e estrutura que você tinha
para um extrusor, você multiplica. Um motor tracionador para cada novo extrusor, um termistor para cada um deles,
um cartucho aquecedor, um hotend... E muitas complicações e problemas:

* **Todos os bicos precisam estar perfeitamente alinhados** -- se um bico estiver mais baixo que os outros, ou
este bico arranha na mesa ou os outros extrudam a alturas maiores, fazendo a impressão falhar ou o bico mais
baixo bater no material ao se mover o extrusor. Alguns fabricantes de impressoras 3D adotam um sofisticado
circuito de movimentação que retraem os outros hotends enquanto um está sendo usado; mas além de ser uma
solução bastante encarecedora, ainda não resolve o problema de os outros bicos estarem em nível diferente
de altura da mesa quando não estão retraídos.
* *Insere novos pontos de falha* -- se antes sua impressão
falharia se seu hotend entupisse, agora a impressão falha se o hotend 1 entupir ou se o hotend 2 entupir. Suas
chances de problema aumentam enormemente, ainda mais pela interferência de um extrusor no outro -- você tem
por exemplo que configurar a distância exata de um bico ao outro, com precisão de centésimos de milímetros,
para que a impressão fique boa.
* *Você perde área de impressão* -- olhe para a Figura XXX ou Figura YYY:
o que você percebe na peça do extrusor múltiplo? Ela é grande, até desajeitada, ocupando muito espaço e,
para a mesma carcaça, deixando de permitir que o bico alcance certas coordenadas, diminuindo a área útil.
* *Você perde velocidade do extrusor* -- ser uma impressora 3D FFF não significa que os extrusores têm que se
mover; você pode construir uma impressora em que o extrusor fique mecanicamente fixo e somente a mesa precisasse
se mover. Mas este design tem seus próprios problemas, e a quase totalidade das impressoras de mercado usa um
extrusor móvel. E se o extrusor se move, ele tem inércia, tanto maior quanto for sua massa, o que significa que
mais força é necessária para acelerá-lo para a mesma velocidade. Portanto, colocar vários extrusores que se
movem em conjunto tenderá a deixar a impressão mais lenta. Novamente, existem alguns designs experimentais que
tentam escapar disso, como fazer extrusores "semi-independentes" que se destacam do conjunto quando não estão
sendo usados. Mas é uma solução _bastante_ encarecedora e com muitos desafios técnicos.
* *Você ainda está restrito a usar só um extrusor por vez* -- pense no processo de impressão de uma forma que use dois materiais:
se o bico está, no eixo X, a exatamente 3cm do bico 2, qual é a chance que, naquela forma, um ponto do material 1
esteja exatamente a 3cm à direita do material 2? Muito baixa, e certamente não valerá para todas as coordenadas
daquela camada. Assim sendo, não é possível criar uma trajetória boa de extrusão em que os dois extrusores
fiquem trabalhando ao mesmo tempo. As impressoras portanto usam um único extrusor por vez -- e isso na verdade cria
mais desafios: enquanto um extrusor está ativo, o outro pode estar com plástico liquefeito ainda que "vaza"
sobre a peça ou a mesa (fenômeno conhecido como __oozing__). Se o extrusor inativo se mantiver em temperatura
alta, além do oozing, o material pode sofrer também carbonização ou degradação pelo tempo prolongado de
exposição a alta temperatura, e entupir o hotend. Por outro lado, no mesmo extrusor inativo, se o plástico se
ressolidificar completamente dentro do tubo do hotend, é grande a chance de entupimento. Um jeito de mitigar o
problema é deixar o hotend inativo em uma temperatura alta intermediária, em que ele está em estado pastoso.
* *Você não consegue misturar materiais/cores* -- todo esse trabalho e reveses, por fim, para adicionar apenas
um material ou cor à peça, sem permitir um degradê ou mistura finamente controlado que poderia pintar um rosto
convincente, as sombras de uma escultura, as diferentes partes do corpo. Como você controla apenas um extrusor
por vez, com filamentos diferentes que se solidificam ao sair, você não consegue ter mistura entre eles, embora
possa "fundi-los" imprimindo um sobre o outro. Este último problema, aliás, acabou levando ao design seguinte:
extrusores misturados e combinadores.

[[extrusorduploetriplo]]
image::extrusor-duplo-e-triplo.png[image,width=994,height=384]

É interessante ainda notar que existem alguns designs de extrusores
múltiplos que tentam resolver esses problemas de variadas formas, uma delas sendo extrusores independentes
(em eixos próprios e intercruzados) ou semi-independentes (compartilhando um eixo, ou "destacáveis" para
uma posição de descanso enquanto não são usados). E apesar de patentes da Stratasys, pra variar, bloqueando
certos caminhos de utilização via sua subsidiária Makerbot, com a __US8512024 B2 -- Multi-extruder__, já
existem soluções comerciais, e, melhor ainda, open-source aparecendo, como a BCN3D Sigma. Seus repositórios
de eletrônica, firmware e até fatiador (Cura) especialmente modificado pra tratar com essa cinemática estão
em https://github.com/BCN3D[_https://github.com/BCN3D_].

[[bcn3dsigma]]
image::image98.png[bcn3dsigma,width=582,height=510,title="A Impressora 3D Open-Source BCN3D Sigma, com dois extrusores independentes. Fonte: https://www.bcn3dtechnologies.com/en/3d-printer/bcn3d-sigma/",align="center"]

Além dos extrusores independentes, existem duas outras modalidades que têm se mostrado bastante viáveis e
ganhado suporte nos fatiadores e firmwares, que são os extrusores _combinadores_ e __misturadores__.

.Extrusores combinadores e misturadores

O uso de extrusores múltiplos em impressoras 3D FFF até há pouco tempo era de relativa raridade, restrito a
máquinas bastante caras em relação à média. Foi uma área que demorou a amadurecer, e não só no __hardware__:
os softwares que fazem a preparação da impressão e os formatos de arquivo só estão maduros nos tempos atuais e
ainda há um atraso tecnológico por exemplo na modelagem tridimensional que faça peças propícias a impressão
por múltiplos extrusores. Embora com "truques" se possa contornar isso, até hoje a maioria dos modeladores
não oferece suporte de exportação aos arquivos de impressão 3D com extrusores múltiplos -- 3MF e AMF --
ficando restritos a exportar no formato de malha simples sem material "STL", inventado na década de 80.

Em situação de suporte ainda mais precária encontram-se os designs inovadores de extrusores que _combinam_
ou _misturam_ materiais diferentes para impressão. Para entender melhor, vamos diferenciá-los:

* *Extrusor combinador* é aquele em que um único hotend é alimentado por um canal em Y que reúne dois (ou mais)
filamentos diferentes, no entanto com __um filamento por vez__. A cada momento em que um ou outro filamento for
utilizado, o outro deve ser completamente removido (retraído) da área em comum, pois estão no estado sólido e
não se misturariam. As vantagens desse design são a economia -- o canal em Y para os dois filamentos pode até ser
impresso em plástico (como no caso do extrusor "Flux Capacitor"^1^ ou no kit quádruplo da prusa^2^) ou injetado
("Prometheus System"^3^) - e a simplicidade de operação: para o preparador de impressão, o extrusor combinador
é apenas um extrusor múltiplo com distância zero entre "os bicos" em que a cada vez que ele tiver que fazer a
operação de troca de material, tem que fazer um movimento de retração do filamento grande. Qualquer software que
suporta extrusão múltipla aceitará sem reservas o extrusor combinador. Alguns problemas são aliviados ou resolvidos
por se usar esse tipo de extrusor, como um leve alívio no peso por usar um único hotend e não ter o problema de
desnível de bicos. Ainda acontecerá certo _oozing_ e ainda, ao se mudar de um filamento para outro, o material
derretido remanescente no bico fará com que a impressão apresente um "degradê" do material. Adicionalmente,
pela própria geometria dos dispositivos combinadores, quase sempre eles são exclusivos para __bowden__.
* *Extrusor misturador* é aquele em que a junção dos canais de filamento, ao invés de ocorrer na parte fria,
ocorre em uma câmara de aquecimento conjunta no hotend. Este tipo de extrusor permite mistura real de materiais
ou cores, com tracionamento simultâneo possível para todos os filamentos alimentados. A potência necessária
para aquecer a câmara conjunta será bem maior, assim como o tamanho da parte em metal. Como ainda temos um único
bico e várias entradas, este extrusor pode ser usado com a exata mesma configuração que o extrusor combinador:
extruda-se um único filamento e para trocar para o outro retrai-se completamente o atual da câmara comum. No
entanto, a vantagem -- e dificuldade - estará em se poder utilizar versões mais novas e experimentais tanto
dos firmwares que rodam na impressora 3D quanto dos preparadores de impressão e modelos 3D utilizados para
que tenham a informação de mistura de materiais e o controle dessa mistura. Note-se que materiais diferentes
apresentam propriedades de derretimento e até de combinação diferentes, e esse controle de mistura portanto
será bem grosseiro e propenso a artefatos se os materiais não forem extremamente específicos e controlados
para a tarefa. Mesmo assim, softwares como os firmwares _Marlin_ e _Repetier_ _Firmware_ nas suas versões mais
novas já implementam até os comandos para misturas subtrativas de cores CMY(K), como nas impressoras de jato de
tinta. Um plugin de pós-processamento para o fatiador Cura 15.04 que faz a mistura de acordo com algumas receitas
consta do thingiverse: http://www.thingiverse.com/thing:1664880[_http://www.thingiverse.com/thing:1664880_]

[[fluxcapacitor1]]
image::image99.png[image,width=462,height=400,title="Flux Capacitor - peça combinadora em bowden para um hotend - https://www.thingiverse.com/thing:301982 (Immagina e Crea)",align="center"]

[[cyclopsediamond]]
image::cyclops-e-diamond.png[cyclopsediamond,width=908,height=450,title="Esquerda: hotend misturador duplo estilo e3d cyclops (aliexpress.com), direita: hotend misturador triplo estilo reprap.me Diamond (aliexpress.com)"]

.Enfim, o bico
Chegamos ao extremo do assunto -- o bico. É onde termina o hotend, e você já deve estar se perguntando que material
é esse, de tom amarelo, meio dourado, com que ele geralmente é feito. É __latão__, uma liga não-ferromagnética de metal
feita de cobre e zinco com baixo coeficiente de atrito, alta condutividade térmica e alta durabilidade. Certas ligas
de latão são dopadas com chumbo (cerca de 2%) o que leva a objeções com adequabilidade para contato com alimentos.

Nem sempre o bico é feito de latão, especialmente agora que novos materiais abrasivos (como ABS com fibra de
carbono) estão começando a ser usados em impressoras 3D convencionais. A empresa e3d fez história com seu
estudo^4^ sobre a corrosão que tais filamentos causam em bicos de latão convencionais e usou dele para promover
a venda do seu bico de aço inoxidável, muito mais propício para essas impressões (ao mesmo tempo que é em
tese adequado para contato com comida).

[[e3dlataoeaco]]
image::image102.jpeg[image,width=642,height=547]

Apesar de aço não ter a condutividade térmica tão alta quanto latão (o que poderia, em teoria, aumentar a
probabilidade de entupimentos), materiais avançados para impressoras 3D FFF realmente estão começando a surgir,
inclusive com metais misturados, e para certos usos até mesmo o aço pode se mostrar insuficiente. Uma campanha
de financiamento coletivo no _kickstarter_ financiou com sucesso a fabricação de um bico feito de tungstênio^5^,
o metal mais duro conhecido!

[[screenshottungsten]]
image::image103.png[image,width=642,height=441]

Ainda que não haja um padrão obrigatório de medidas de bicos, a grande maioria dos bicos "genéricos"
usa uma rosca M6 (6mm de diâmetro) para se conectar ao bloco aquecedor de alumínio (Flashforge, Wanhao i3 e
algumas outras usam M7) e tem algo entre 10 e 20mm de comprimento. Bicos grandes são indesejáveis: podem não
estar aquecidos o suficientes quando o plástico está sendo extrudado e acabar contribuindo para um resfriamento
prematuro, evidenciado por um filete de material "enroscando" na saída.

A medida de saída do orifício de um bico tem pouca variação. As impressoras 3D estilo Makerbot costumam sair
com 0,35mm de diâmetro, as repraps com 0,4mm de diâmetro. A medida desse furo é um equilíbrio entre a pressão
interna necessária para tracionar o filamento e o diâmetro máximo desejável do filete de material; diminuir o
orifício para 0,2mm dobra a pressão interna necessária e aumenta a chance de entupimentos, aumentar para 0,8mm
divide pela metade a pressão mas também necessitará de um bloco e cartucho aquecedores com maior capacidade
de entrega de energia térmica -- maior potência. O hotend _volcano_ da e3d, que aparece na Figura 14, tem um
bloco aquecedor maior e por default vem com bicos de orifícios maiores (0,6 a 0,8mm) exatamente por este motivo.

[NOTE]
.Notas:
====
. https://3dprintingindustry.com/news/prometheus-system-kickstarter-95071/[_https://3dprintingindustry.com/news/prometheus-system-kickstarter-95071/_]
. http://prusaprinters.org/original-prusa-i3-mk2-multi-material-upgrade-release/[_http://prusaprinters.org/original-prusa-i3-mk2-multi-material-upgrade-release/_]
. https://immaginaecrea.wordpress.com/2014/04/17/il-flusso-canalizzatore-stampa-3d-a-piu-colori-singolo-ugello/[_https://immaginaecrea.wordpress.com/2014/04/17/il-flusso-canalizzatore-stampa-3d-a-piu-colori-singolo-ugello/_]
. http://e3d-online.com/is-carbon-killing-your-nozzle[_http://e3d-online.com/is-carbon-killing-your-nozzle_]
. https://www.kickstarter.com/projects/dddmaterial/3d-printer-tungsten-premium-nozzle-reloaded[_https://www.kickstarter.com/projects/dddmaterial/3d-printer-tungsten-premium-nozzle-reloaded_]
====

=== Ventoinhas (fans)

As ventoinhas são componentes importantes de uma impressora 3D e não são usadas somente no extrusor; podem servir
também para resfriar a CPU da impressora ou como exaustor dos vapores de plástico em impressoras 3D fechadas ou
até como homogeinizador do ar quente em equipamentos com câmara aquecida.

Os tipos de ventoinhas usados em impressoras 3D apresentam pontos em comum com as usadas em PCs. São basicamente
motores sem escova (__brushless motors__) equipados com pás para gerar um fluxo de ar. As mais simples têm apenas
dois fios (terra e Vcc) e um circuito interno básico que gera as formas de onda para girar as pás. As com três
fios geralmente usam o terceiro para informar a velocidade do rotor ao controlador e se houver um quarto fio ele
serve para controlar a velocidade através de PWM (explicada mais adiante na parte sobre motores) -- o que não
é geralmente necessário pois a variação do Vcc já costuma ter esse efeito.

As medidas mais usadas de ventoinhas são 30mm e 40mm, esta medida sendo da aresta lateral da ventoinha e não
da diagonal. Note que este medida não tem nada a ver com a corrente (energia) consumida pela ventoinha nem pela
vazão de ar, esses dados sendo independentes e variando com o modelo e fabricante. Infelizmente são poucos que
dizem a vazão de seus modelos -- dada geralmente em **cfm**, cubic feet per minutes ou pés cúbicos por segundo;
valores bons seriam por volta de 4 cfm para 30mm e 8 cfm para 40mm. As de 40mm são usadas em componentes mais
genéricos como o microcontrolador e as de 30mm, por seu tamanho mais compacto, em extrusores -- uma tendência
que tem aumentado à medida em que eles se tornam mais compactos. No caso de ventoinhas para câmaras, os tamanhos
mais usados estão entre 80 e 120mm.

Em quase todos os casos, a tensão requerida pela ventoinha acompanha a da fonte de energia da impressora por
conveniência e simplicidade -- uma impressora com fonte de 12V usará ventoinhas de 12V. Exceções acontecem
quando há ventoinhas usadas em série (e.g. uma fonte de 24V energizando duas ventoinhas de 12V) ou a ventoinha
é de um modelo especial de alta vazão ou eficiência (e aí se envolve um conversor de tensão -- por exemplo,
de 12V para 5V).

As ventoinhas mais baratas usam um _mancal_ (bucha) lubrificado em contato com o eixo do rotor e têm vida média
estimada em cerca de 30.000 horas a 40°C e costumam indicar estar no final de sua vida útil por aumentar bastante
o ruído, dado que o lubrificante interno acaba secando. A instalação horizontal deste tipo de ventoinha diminui
sua vida útil por fazer o lubrificante se concentrar emum dos lados do eixo. As mais sofisticadas e caras usam
rolamentos de esferas, algo que lhes garante uma vida útil maior -- cerca de 50.000 horas a 40°C, e não sofrem
de limitações de instalação horizontal. Existem ainda tipos bem mais sofisticados de ventoinhas, com mais
rolamentos, com rolamentos de rifle, rolamentos magnéticos, cerâmicos ou até rolamentos de fluido dinâmico,
que saem do escopo do tratado aqui por virtualmente não serem usadas em impressoras 3D de mercado.

*Funis ou dutos de ventoinha e ventoinhas radiais* -- em determinado momento o leitor pode se tocar que deixar
uma ventoinha de bico virada na ‘direção geral’ da impressão pode não ser a estratégia mais eficaz, visto
que o ponto a ser refrigerado, o plástico saindo do bico, é bem circunscrito; um jeito muito mais eficiente seria
concentrar o fluxo de ar neste ponto, papel que alguns elementos conhecidos como _funis_ ou _dutos de ventoinhas_
tentam fazer (como o da figura XX). No entanto, a dinâmica de fluidos não é algo tão direto assim
e a turbulência interna ao duto é tão grande que efetivamente reduz e muito a eficiência de resfriamento de
uma ventoinha afunilada, pois o vento chega extremamente amortecido ao bico. Para ventoinha de bico, existe um
elemento com eficiência muito maior, que é a ventoinha _radial_ ou __centrífuga__, tratadas em inglês como
"blowfans" ou "blowers". Para a construção de impressoras 3D, a desvantagem dessa ventoinha é seu
tamanho e preço: as variedades encontradas são mais caras que as comuns e geralmente de 40 ou 50mm de lado,
sendo praticamente impossível encontrar uma de 30mm.

[[fotoblowfan1]]
image::image104.png[image,width=546,height=570]

[NOTE]
.Notas:
====
. http://www.nmbtc.com/pdf/engineering/fans_ball_vs_sleeve.pdf[_http://www.nmbtc.com/pdf/engineering/fans_ball_vs_sleeve.pdf_]
====

=== Elementos para aferição da temperatura

Como foi citado quando os endstops foram descritos, é importante haver elementos de mensuração da resposta
aos comandos enviados para a impressora e, assim como aferição do posicionamento é importante, aferição da
temperatura dos componentes aquecidos também é; em uma impressora 3D FFF, ao menos o hotend será aquecido,
opcionais sendo a mesa ou a câmara onde é construído o objeto.

O elemento aferidor, cumprindo a função de __termômetro__, tem vários nomes dependendo da tecnologia que o
embasa. Numa lista não-exaustiva, os principais tipos são:

* **Termorresistor**, *RTD,* *termômetro de resistência* ou *resistor térmico* caso seja um componente passivo
cuja resistência aumente com a temperatura; por esse mesmo motivo também são chamados "**termistores PTC**",
onde PTC vem de Positive Temperature Coefficient, ou Coeficiente de Temperatura Positivo em inglês. Um termorresistor
particularmente eficaz e barato usado em algumas repraps é o _PT100_ (às vezes confundido com termopar). No entanto,
devido à baixa sensibilidade do microcontrolador a esses tipos de circuitos, eles necessitam de amplificação
do sinal (circuito externo) para oferecerem mensurações úteis.
* **Termistores NTC**, às vezes chamados
simplesmente de *termistores* sem qualificativos adicionais, são o tipo mais comum em impressoras 3D domésticas
pela simplicidade de uso e preço, e são componentes passivos cuja resistência diminui com a temperatura. Como
têm maior variação (exponencial) com a temperatura que RTDs, não precisam de amplificação. Um termistor
NTC bem popular em repraps é o EPCOS 100K, sendo vendido a preços muito baixos e aguentando temperaturas até
perto de 300°C. Ultrapassando esta temperatura é virtualmente impossível encontrar termistores NTC no mercado,
excetuando o caso muito específico do termistor do "Pico Hotend", um item exclusivo (ou seja, até o momento
não existem réplicas genéricas) feito com tecnologia de ponta.
* *Termopares* são dispositivos elétricos
formados de dois diferentes condutores (geralmente metais) formando uma _junta elétrica_ e produzindo a partir
dela _tensão elétrica_ que pode ser medida por circuito especializado. Na maioria das impressoras 3D de baixo
custo, termopares não podem ser ligados diretamente ao microcontrolador, necessitando de circuito adicional de
amplificação e compensação da junta que eleva bastante o custo, tamanho e dificuldade de integração. Por
outro lado, termopares são mais diversos que termistores, sendo mais fácil achar aqueles cuja faixa de temperatura
exceda os 300°C (útil para materiais mais avançados).

Cada um desses elementos tem seus proponentes e detratores, com alegações envolvendo preço, disponibilidade,
precisão e faixa de uso. Mas na prática o uso de um ou outro faz pouca diferença, pesando mais quando se ultrapassa
a faixa de 300°C, necessária para alguns materiais "difíceis" ou "industriais" como policarbonato, alguns
nylons, PEEK e PEI, que têm migrado do mundo industrial para o doméstico com a sofisticação das impressoras
3D de baixo custo.

=== *Mesa (Plataforma de Impressão)*

Numa impressora 3D FFF, a plataforma de impressão de uma impressora 3D é a parte do equipamento que sustentará
a peça enquanto está sendo produzida. Além da sustentação, a mesa deve dar ainda suficiente estabilidade e
previsibilidade para o mecanismo envolvido (por exemplo, não deve introduzir ou repassar vibrações, nem permitir
que a peça se volte) e até ajudar na manutenção térmica (caso das mesas aquecidas). A mesa pode ainda ser parte
do mecanismo generalizado de aferição das dimensões, como no caso do autonivelamento. Pode ainda ser rígida ou
flexível dependendo da estratégia em relação ao material, móvel ou estática dependendo do arranjo dos eixos,
de metal, polímero ou outros materiais de acordo com as afinidades químicas. Apesar de o caso mais simples ser
de impressoras sem aquecimento, o default aqui analisado será a mesa _aquecida_ visto que se pode inferir o uso
das mesas sem aquecimento a partir delas.

.Mesa aquecida

Vamos começar por algo que nem sempre é reconhecido: a mesa _aquecida_ é um artefato da estratégia de barateamento
do projeto RepRap. Antes dele, as impressoras FDM não usavam mesas aquecidas; com construção industrial e peças
caras, as impressoras 3D da Stratasys fazem sua impressão dentro de uma câmara fechada com a temperatura elevada
e constante, com isolamento sofisticado para os componentes sensíveis ao calor. E para que serve essa câmara
aquecida? Como veremos com mais detalhes na seção sobre materiais, alguns materiais como ABS e policarbonato
necessitam esfriar o mais lenta e uniformemente possível pra não se soltarem da plataforma nem terem rachaduras
e deformações. Dado um volume pequeno de impressão, entretanto, se apenas a plataforma de impressão tiver
aquecimento e a peça não estiver muito exposta, o efeito é aproximadamente o mesmo de uma câmara.

Embora virtualmente todos os materiais usados em impressão FFF se beneficiem de um resfriamento mais lento e
uniforme, em alguns deles, como PLA e PETG, o efeito é pequeno o suficiente para poder ser ignorado; algumas
impressoras 3D do mercado abdicam de aquecimento da mesa para conseguir barateamento máximo das peças, menor
gasto de energia (já que o circuito de aquecimento da mesa é o mais dispendioso de uma impressora 3D) ou ainda
controle mais restrito dos materiais usados. A Impressora 3D brasileira _Stella_ (derivada da reprap __Smartrap__)
é um exemplo bem conhecido do barateamento das peças e a Makerbot Replicator 2, feita apenas para PLA, é um
bom exemplo do controle restrito.

O mercado também começa a ver suas primeiras impressoras 3D de baixo custo com câmara aquecida. Embora a Stratasys
faça _patent fencing_ da técnica com a patente US-6722872-B1, a patente registrada nos EUA, válida até 2020,
cobre apenas câmaras com motores externos a ela e com barreiras flexíveis.

.Modelos de Mesa Aquecida

Não há um só modelo de mesa aquecida. Há vários tipos e é bom entender essas diferenças, que podem inclusive
afetar a qualidade das peças. Fatores de importância na construção de uma mesa são a condutividade térmica,
a uniformidade da temperatura em toda sua área (especialmente para materiais propensos a __warp__, como ABS),
facilidade de montagem, eficiência de operação. A lista a seguir não é exaustiva:

* *Mesa com resistências* -- foram as primeiras a surgir. Resistências simples são elementos aquecedores fáceis de
construir; a construção consiste de uma mesa geralmente de metal com blocos de resistência igualmente espaçados
colados abaixo. Os blocos fazem a mesa ser grossa na construção e o fato de serem "ilhas" de calor torna
a temperatura da mesa não-uniforme. Dependendo do metal, a mesa pode apresentar empenamento.
* *Mesa de PCB resistiva (MK1, MK2)* -- Josef Průša inventou a primeira versão de mesa resistiva em "PCB" (Printed
Circuit Board), isto é, uma placa de circuito grande com uma trilha que faz o papel de uma longa resistência
em serpentina em toda a área. Deste modo se consegue uma boa uniformidade do aquecimento e o material da placa
(fibra de vidro usada para circuitos) é bastante fino, permitindo fácil montagem. Há também espaço para leds
estilo "SMD" que dão status se a placa está recebendo corrente ou não. Outra versão, MK2 / MK2A -- não
sucessora, mas alternativa - melhora o design tendo uma reentrância para o alojamento da cabeça do termistor
e também aumenta a área disponível para soldar os contatos. Há uma versão chamada de MK2B que tem pinagens
diferentes oferecendo resistências diferentes, de modo que a mesa possa ser usada com fontes de 12V ou 24V. Um
dos maiores problemas do circuito impresso é a tendência a empenar.
* *Mesa de alumínio resistivo (MK3)* -- a
próxima versão da mesa trocou o circuito impresso pelo alumínio (com a mesma trilha resistiva), que é um metal
com alta condutividade térmica; assim a uniformidade de temperatura da mesa fica ainda mais alta. No entanto,
há que se considerar uma desvantagem na segurança que é o fato de o alumínio ser metal e portanto condutor de
eletricidade, e trilhas descobertas ou excesso de alimentação terem potencial maior de gerar faíscas, curtos e
acidentes do que a fibra de vidro isolante.
* *Mesa de metal com manta aquecida de silicone* -- uma solução que
traz maior isolamento da alimentação do que a mesa de alumíno resistivo é a mesa de metal (geralmente aço inox
ou alumínio) com uma manta de silicone colada. A manta de silicone é uma forma de resistência aquecedora segura,
bem isolada e de grande variedade de formas, tamanhos e tensões suportadas. Não é tão fina como uma trilha de
circuito, entretanto, e o volume e peso, ainda que não exagerados, podem ser um ônus em mesas móveis, sendo
mais recomendadas para mesas aquecidas estáticas ou de movimentação em Z.  * *Mesa de metal com resistência
impressa em película de poliimida (kapton)* -- solução semelhante à de manta de silicone, com a vantagem de
a película usada ser extremamente fina. Infelizmente, os preços das películas sobem estratosfericamente para
áreas maiores que 10cm x 10cm, tornando-se superiores aos das próprias mesas com resistências embutidas.
* *Mesa de alumínio acoplada a mesa resistiva* -- consistindo de uma solução "Maker" para medidas de mesa
não-convencionais, consiste de usar uma baratíssima mesa aquecida resistiva como a MK2 e colar em uma placa maior
de alumínio (digamos, de 250x250mm para uma MK2B de 214x214mm) usando um adesivo térmico como a fita dupla-face
de transferência térmica 467MP da 3M.
* **Mesa aquecida (qualquer tipo) com isolante térmico** -- uma ajuda que
costuma impedir que a mesa perca energia por baixo é colar uma placa de isolante térmico na parte de baixo dela,
que não está em contato com a peça. Um dos materiais mais baratos e fáceis de utilizar para esse fim é placa
adesiva de cortiça, encontrável em lojas de ferragens ou materiais de construção.  1.  [[vidro-da-mesa]] ===
Vidro da Mesa

As impressoras 3D da Stratasys nunca usaram vidro e as primeiras impressoras 3D reprap também não. Hoje em dia,
entretanto, o uso de uma placa de vidro removível acima da mesa é tão generalizado que pode ser difícil encontrar
uma que não o use. Algumas fabricantes dispensam o vídro para disponibilizar uma superfície de material próprio
que o substitui.

O uso de uma placa de vidro sobre a mesa tem as seguintes utilidades:

* **Nivela a superfície**. Vidro é um dos materiais com usinagem retilínea mais facilitada, mais do que
metais e PCB que são os materiais usados na mesa. Prender um vidro a elas não só faz com que a impressão
tenha uma superfície mais uniforme, como as "corrige" prevenindo empenamentos e deformações.
* **Evita stress mecânico nas peças da impressora**. Uma impressão 3D finalizada raramente se solta espontaneamente da
mesa; ela pode oferecer resistência ao destaque, que pode ser inclusive danoso às peças da impressora se exigir
muita força. Ter uma superfície facilmente removível, para que a peça possa ser destacada em local apropriado,
ajuda muito na vida útil da máquina.
* **É um material resistente a muitos produtos químicos**. Como é comum
usar métodos de aderência de superfície, o vidro é um material excelente para isso, sendo resistente à grande
maioria dos solventes.
* **É um material com ótima tolerância para plásticos e colas**. A superfície lisa e
a polaridade das moléculas do vidro facilita que a impressão adira à superfície, ao mesmo tempo que dificulta
que essa aderência seja muito forte. E também é um material que aceita com muita facilidade ser revestido com
colas ou fitas que ajudem a aderência.
* **É um material barato e descartável**. Vidraçarias comuns fazem
o serviço de cortar placas retangulares de vidro de quaisquer tamanho por baixo preço. Deste modo, mesmo que
a placa de vidro eventualmente sofra danos pelo manuseamento incorreto ou excesso de pressão mecânica, ela é
facilmente substituível, e costuma ficar bem dentro do orçamento de um profissional de impressão 3D algumas
placas de vidro de reserva para essas eventualidades.
* **Como é removível e barato, permite a substituição imediata e poupa tempo**. Terminou a impressão e precisa
começar outra? Remova o vidro com a peça, coloque  novo vidro e inicie a nova impressão imediatamente. Enquanto
a segunda impressão prossegue, usa-se o tempo para remover a primeira do vidro.

No entanto, nem tudo são vantagens. Usar um vidro sobre a mesa aquecida tem seus próprios reveses:

* **Vidro tem baixa condutividade térmica**. A condutividade térmica do vidro é muito baixa -- 0,8 W/mK, para
efeito de comparação a do alumínio é 204 W/mk -- e isso tem um efeito dramático nas mesas aquecidas. Com as
potências e tamanhos típicos de impressoras 3D modernas, um vidro de 3mm de espessura pode abaixar a temperatura
por uns 15°C. Por causa disso, é sugerido o uso de vidros de baixa espessura, 2 ou 3mm são suficientes para um
bom equilíbrio entre resistência e eficiência térmica.
* *Vidro é um material denso* (2500 kg/m^3^) e portanto
para os modelos de impressoras 3D que usam mesas móveis, seu peso será um ônus para a movimentação. O motor
que movimenta a mesa tem que ser escolhido já levando em conta o peso adicional da mesa na inércia de trabalho.
* *Vidro é cortante quando quebrado* e portanto há perigo em se manuseá-lo.

Se entende, portanto, que alguns fabricantes tentem substituí-los por placas de outros materiais ou até evitá-lo
completamente. Mas é bastante difícil encontrar um material tão prontamente disponível e com propriedades
desejáveis quanto o vidro. Note-se que alguns profissionais costumam mandar cortar placas de vidros reforçados,
como vidro de __borossilicato__, _temperado_ ou __sitall__, mas isso aumenta bastante o custo e costuma não valer
o acréscimo visto que um vidro comum corretamente manuseado não tende a quebrar. Alternativamente algumas pessoas
utilizam espelhos ao invés de vidros, a fina camada de prata reflexiva ajuda um pouco na condutividade térmica
e tem apelo estético para fotografias, também ajudando a aferir visualmente a distância do hotend pra mesa.

.Aderência à mesa

Durante o processo de impressão, é essencial que a peça impressa fique o mais imóvel possível na superfície
plana da mesa. Qualquer balanço imperceptível para os olhos, qualquer deslocamento por mínimo que seja terá
resultados visíveis no acabamento da peça, isso quando não arruína a impressão. Além disso, boa aderência
é indispensável quando se usa mesa aquecida pra se contrapor aos efeitos do _warp_ nos plásticos mais propensos
a isso, como ABS e policarbonato, mantendo as quinas da peça uniformes sem levantar.

Para as técnicas de aderência, ter uma peça destacável como o vidro torna-se ainda mais importante. Pode-se
aplicar um produto químico que, finda a impressão, será simplesmente lavado do vidro, assim como outras impurezas
e resíduos do processo.

Note-se a curiosidade que esse é provavelmente o item mais explorado pela comunidade de __Makers__, curiosos e
interessados por impressão 3D, que aproveita a disponibilidade moderna de produtos industrializados com todo tipo
de composição química para utilizar suas propriedades de aderência e compatibilidade.

Um auxiliar de aderência ideal deve ter as seguintes propriedades:

* **Ter aplicação fácil**, já que cada passo extra no fluxo de trabalho conta negativamente.
* **Ter remoção fácil**, no sentido de não haver muito trabalho de removê-lo, ou a seus resíduos.
* **Ter preço acessível**, especialmente porque será um consumível;
* **Ter compatibilidade com o material de impressão**, pois alguns métodos têm compatibilidade com certos plásticos e não outros;
* **Ter repetibilidade**, ou poderser usado mais de uma vez;
No caso de mesa __aquecida__:
* **Ter poder de aderência constante ou crescente com a temperatura**, pois como a mesa estará aquecida durante a impressão e esfriará ao seu término, compostos cuja aderência se degrada com o aumento de temperatura não serão muito úteis. Existem aqueles cuja aderência
aumenta quanto mais se aumenta a temperatura, esfriando ao terminar com uma diferença tão grande que a peça se
solta espontaneamento com um estalido.
* **Ter resistência ao aquecimento**, pois não adianta um líquido que
evapore ou uma fita que se degrade ou perca a cola quando a mesa se aquece.

Como a aderência é uma "questão em aberto" na Impressão 3D com muitos indivíduos propondo novos meios a cada dia,
é impossível fazer justiça a todos eles ou mesmo listá-los abrangentemente. A abordagem deste livro consiste
somente de listar os métodos e técnicas mais usados no presente momento, advertindo o leitor que isso pode mudar
rapidamente com o advento ou popularização de novas soluções. Como foi dito na introdução, alguns dos métodos
mostrados aqui serão exemplos gritantes de __exaptação__.

Note o leitor, ainda, que embora os métodos de aderência sejam uma _contingência_ eficiente contra o warp _nas
primeiras camadas_ da impressão, eles não são uma __solução__.^1^ Além disso, tais métodos não anulam a
importância de outros fatores na aderência, como *uma primeira camada bem esmagada* (hotend bem próximo à mesa)
como veremos na parte de fatiamento.

Os métodos de aderência se enquadram em três categorias:

* *Fitas*: São colocadas sobre a mesa ou o vidro usualmente por toda sua área, com as tiras em paralelo
sem que uma passe sobre a outra para não causar desnível na superfície. Costumam durar um número pequeno
de impressões, começando a rasgar ou descolar da superfície com o uso. Geralmente os rolos de fita estarão
disponíveis em variedades de 12, 24 e 48mm de largura, com as mais largas (48mm) sendo recomendadas.
** *Fita kapton* -- método muito popular quando do início das impressoras 3D domésticas, *Kapton* é marca registrada de
uma fita colante do material **poliimida**, que aguenta altas temperaturas (500°C) sem deteriorar e sem perder a
aderência. A fita com sua cor característica dourado translúcido tem boa compatibilidade molecular com plásticos
e a aderência pode ser aumentada com colas ou tornando sua superfície lisa mais irregular com massagem com palha
de aço. Tem aderência média e funciona melhor quando aplicada diretamente em uma mesa de alumínio do que
no vidro. Um ponto baixo do kapton é a sua __dificuldade de aplicação__, visto que é uma fita que rasga com
facilidade e que precisa ser aplicada com bastante jeito na superfície para não deixar bolhas. Por outro lado,
tem repetibilidade alta, podem ser usada muitas vezes seguidas até a próxima aplicação. A fita também é usada
em vários componentes de impressora 3D devido à sua resistência à temperatura, como para ajudar a fixação
dos termistores na mesa e hotend. +
Um substituto eficiente da fita kapton que tem basicamente a mesma dinâmica
de aplicação, mas maior aderência quando aquecida, maior resistência a rasgos e ainda maior facilidade de
aplicação sem bolhas é a **fita PET**, infelizmente um insumo quase impossível de se achar no Brasil.
** *Fita azul de pintor / fita crepe azul* -- esta fita, vendida no Brasil principalmente pela 3M (modelo 2090), é
uma fita crepe com adesivo mais forte que a comum e uma *cobertura de acrílico* que tem grande compatibilidade
química com a maioria dos plásticos, e aderência a eles que aumenta com a temperatura. Tem repetibilidade
baixa pra média, com peças grandes favorecendo que a fita descole e rasgue.
* *Superfícies adesivas*: São folhas de materiais especiais cortados na mesma medida que a mesa ou vidro da impressora 3D e
colados sobre elas. Funcionam como materiais adesivos especiais e duráveis cuja aderência aumenta com a temperatura. No
Brasil não são técnicas muito usadas porque geralmente os materiais são caros (muitas vezes tendo que ser importados);
a variedade nacional de tamanhos de mesa de impressora 3D também dificulta um pouco o uso, ainda que um modelo
maior possa ser cortado.
** *PEI (polieterimida)* -- folha de material translúcido nas cores âmbar ou azul com
alta afinidade com plásticos e alta durabilidade. Curiosamente, é também a base da família de filamentos de
alta temperatura da Stratasys, criados pela Sabic e chamados de "Ultem".
** *BuildTak, PrintBite, Fleks3d e semelhantes* -- marcas comerciais que usam a mesma idéia: uma folha flexível
de material plástico adesivo que é grudada na mesa e tem alta afinidade com ABS e PLA, com a aderência aumentando
com a temperatura. Têm dois tipos principais: as que são realmente lâminas flexíveis e finas (BuildTak. PrintBite)
ou grossas e não tão flexíveis (Fleks3D). As primeiras geralmente são coladas na mesa até desgastarem, as segundas são
encaixadas e preparadas para serem removidas e até "flexionadas" ligeiramente para soltarem as peças.
** *Polaseal* -- este plástico é adquirido em papelarias e é o popular "plástico de plastificação". Ele é cortado,
colocado sobre o vidro e aquecido até grudar, para então servir de superfície adesiva para impressões.
* *Colas, sprays e líquidos*: Pode estranhar à primeira vista saber que _colas_ são usadas para fixação
de peças impressas em uma plataforma já que geralmente a palavra é associada à soldagem permanente de uma
parte em outra, mas colas temporárias fazem mais parte do dia-a-dia do que geralmente se admite: papeizinhos de
__post-it__, fita crepe e fita para pintura são alguns dos exemplos.  + Note-se que as colas podem ser usadas em
combinação com as fitas, gastando-se um pouco mais para unir as vantagens de um método ao outro.
** **Cola PVAc (cola branca escolar)^2^**: é usada majoritariamente com PLA, plástico que já tem maior aderência ao vidro por
natureza. Apesar de ser uma **cola fraca**, sua grande vantagem é a facilidade de remoção, deixando resíduos
mínimos e laváveis. É aplicada gotejando sobre o vidro e espalhando.
** **Cola Bastão com PVP**: as colas em
bastão escolares costumam vir em duas variedades, as baseadas em glicerina e as com um composto listado como PVP --
polivinilpirrolidona ou polivinilpirrolideno -- que contém as propriedades desejadas para um auxiliar de aderência,
especialmente a aderência aumentada a altas temperaturas. A aplicação é bem fácil e deixa praticamente zero
resíduos. A aderência é fraca quando fria e média quando quente. Usada geralmente com PLA e ABS. Curiosidade:
álcool em gel também tem PVP k120, uma variedade especialmente adesiva, portanto usado por alguns como auxiliar
de aderência.
** **Cola de PVC**: essa cola na verdade é o plástico PVC diluído em solvente. É um produto
fácil de achar com __aderência média pra alta__ e __aplicação fácil__. Deixa entretanto muitos resíduos ao
final da impressão e não é tão simples de remover. Usa-se principalmente com ABS, por sua força de aderência.
** **Spray de cabelo**: idéia advinda da criatividade dos usuários, mostra bem o conceito de "exaptação"
(adaptar algo para uma finalidade diferente da que foi concebido). Funciona bem, tem __aplicação fácil__ com
__aderência média__ e deixa praticamente zero resíduo. Muitas marcas brasileiras funcionam bem para este
propósito, duas reconhecidas pelo público são Karina e Fixit. Um revés do spray de cabelo é que a aplicação
dele direto na mesa pode atingir partes que devam ficar lubrificadas e sem atrito, como as barras lisas dos
eixos. Por isso se recomenda aplicar no vidro destacado da mesa. Usa-se com ABS e PLA.
** **Gelatina sem sabor**: Consta como idéia brasileira documentada no projeto reprap ("Jello Solution"), com uma parte
de gelatina para 10 partes de água com gotas de própolis para impedir crescimento de bactérias; espalha-se com um algodão
no vidro e tem aderência média, usável com ABS e PLA.
** **"Suco de ABS**": este é o nome informal dado ao
ABS dissolvido em acetona pura. Se sua impressão deixou restos, você pode aproveitá-los dissolvendo em acetona
(não serve a de farmácia/supermercado) na proporção de 1 g de ABS pra cada 10ml de acetona; este composto é
aplicado na mesa que é aquecida, fazendo a acetona evaporar e criando uma camada muito fina de plástico ABS
grudado ao vidro. Este método tem __aderência média__ mas deixa resíduos -- que felizmente são **fáceis 0de remover**.
Não é um método popular no Brasil devido à dificuldade de adquirir a acetona pura - em lojas
de laboratório, com permissão da polícia federal e limite mensal de 2l. Só funciona com ABS, sua aplicação
pode atrapalhar a impressão com outros plásticos.
* **Produtos Profissionais para impressoras 3D**: O mercado
brasileiro já entendeu que as impressoras 3D estão em expansão e precisam de insumos próprios. Por isso,
indivíduos e empreendimentos inovadores criaram e estão criando soluções que ajudam no fluxo de trabalho
e entre estas, estão as soluções para aprimorar a aderência.
** *Spray de aderência (Cliever)*: É um
produto profissional vendido em frascos de spray de 100ml com aplicação fácil, resíduo virtualmente zero e
alta aderência, sendo esta sua principal vantagem e seu único problema: a aderência é tão alta que pode ser
bastante difícil remover a peça no final, necessitando de submersão em água com detergente para diluição e
arriscando a arrancar "lascas" do vidro. Recomendado para todos os materiais, não só PLA e ABS mas também os
difíceis como policarbonato e nylons.
** *A.Bond (líquido adesivo)*: Mais econômico que o Spray da Cliever
e disponível por vários fornecedores, utiliza PVP em sua composição e vem em frascos de 50 ou 100ml, com
aplicação fácil, resíduo virtualmente zero e aderência baixa em temperatura ambiente e alta com temperaturas
acima de 80°C. A aderência menor em temperaturas baixas ajuda bastante a remoção de peças no final, tornando
seu uso praticamente indolor, e com o líquido sendo também facilmente dissolvível em água caso a remoção
não seja imediata. O produto A.Bond funciona muito bem tanto para ABS quanto PLA, PETG e Tritan, mas não parece
funcionar bem para alguns plásticos menos usados, como policarbonato e PEAD.

[[metodosdeaderencia1]]
image::image105.png[image,width=642,height=238]

O leitor se sentirá confuso: com tantas opções, qual usar? É impossível receitar qualquer um desses métodos
sem cometer injustiça com os outros, e o fato de todo serem usados com seus proponentes apaixonados significa que
pelo menos alguns indivíduos encontraram o equilíbrio de uso neles. Mas como um ponto de partida, é possível
citar quatro casos de uso distintos e uma sugestão particular para cada um deles:

* **Somente PLA, sem mesa aquecida**: Neste caso de uso, o usuário da impressora 3D usa apenas o material PLA,
com ou sem mesa aquecida. Este caso inicial é o mais fácil de tratar porque o PLA tem propriedades quase ideais
para fixação: alta aderência entre camadas, alta aderência com o vidro e baixo "warp" (deformação com
resfriamento). Neste caso a *cola PVAc* resolve muito bem o problema: aplicação fácil, pouco resíduo e baixa
aderência. Como o PLA tem alta aderência, há maior probabilidade de haver aderência em excesso do que em falta,
e se a peça grudar com muita força, basta um banho de água morna com uma gota de detergente para dissolver a
camada de cola e soltar a peça. Outros métodos que podem ser usados de maneira quase idêntica: cola em bastão
e fita azul.
* **PLA e ABS, ou majoritariamente ABS, e peças pequenas (< 5cm)**: Neste caso de uso, uma solução
econômica seria o spray de cabelo direto no vidro. Fácil e direta.  * *PLA e ABS, ou majoritariamente ABS, e peças
de qualquer tamanho* + Neste caso de uso, o A.Bond no vidro seria uma opção indicada, por suas características
de economia, facilidade de aplicação e de remoção.
* **PLA, ABS, materiais exóticos e peças muito delicadas**: Sendo este o caso de uso do autor, será dada certa
_licença poética_ para uma opinião mais subjetiva sobre
o melhor método, lembrando sempre ao leitor que a resposta para um indivíduo não é automaticamente aplicável
a outros, tanto pela disponibilidade de materiais quanto pelos modelos de impressora, fluxo de trabalho e outras
variáveis que interferirão. Com isto fora do caminho, detalhamos o uso: o autor usa impressoras 3D como máquinas
de desenvolvimento e experimentação, com porcentagem relativamente baixa de materiais "comuns" - uso de
ABS e PLA estimado em menos de 50% das impressões. Muitos dos materiais obtidos pelo autor são experimentais
inéditos criados em alguma parte do mundo, ou mesmo mandado extrudar sob encomenda para experimentação. Nisso se
incluem metais pulverizados misturados em plástico, fibra de carbono, poliacetal, polietileno de alta densidade,
10 variedades diferentes de filamentos flexíveis, imitação de madeira e muitos outros. As experiências e testes
com adesivos já renderam desde impressões que sequer conseguem que o plástico fique parado na mesa quanto as
que se soldaram com tanta força ao vidro que resultaram em vidros estilhaçados na tentativa de remoção, tanto
quanto lascas desprendidas em muitos casos. Adicione-se o fato que muitas vezes são feitas peças com geometria
experimental ou rebuscada e extremamente delicada, em que **qualquer pressão mecânica pode despedaçá-la**,
em materiais que podem ser *10 vezes mais caros* que os comuns de mercado. Portanto, o __espectro de uso__ aqui é
desproporcionalmente largo, e foi procurada uma solução universal que não necessitasse de muita experimentação
ou tentativas.  + A solução encontrada tirou vantagem de uma propriedade dos tipo de métodos descritos: as *colas*
podem ser usadas com **as fitas**. A estratégia-base, portanto, é usar a **fita azul de pintor**, e as *diversas
colas conforme a necessidade:
* **Fita azul pura**: para PLA, peças pequenas de ABS e filamentos fáceis e
de alta aderência, como flexíveis ou PETG.
** **Fita azul com spray da cliever**: para quase todo o resto,
especialmente os materiais difíceis como policarbonato e nylon. Para ABS pode-se aplicar A.Bond.
** **Fita azul com cola PVAc**: ainda que seja uma cola fraca, a dissolução fácil dela e a grande afinidade com alguns tipos
de materiais dá à cola branca uma série de vantagens; ela interage bem com materiais que têm afinidade com
a celulose, como o PEAD e poliacetal; ela também dá uma aderência sutilmente aumentada a peças que se julga
anteriormente serem mais difíceis no caso de PLA e pequenas de ABS. +
Este workflow tem a vantagem de funcionar
quase sempre. É fácil saber qual dos três casos usar e é praticamente impossível errar por menos, sendo mais
frequente que a peça fique muito aderida ao vidro. O autor já deixa um recipiente com formato próximo ao da
mesa com água morna e uma gota de detergente preparados. A água morna (~35°C) é usada porque essa temperatura
facilita a ação de solvente; a gota de detergente para romper a tensão superficial da água e permitir que ela
adentre pelos poros da fita. Quando a fita absorve a água ela não somente tem sua cola diluída, mas também se
expande; e com a expansão, contribui para o destacamento da peça. Com isso a peça **nunca é submetida a tensão mecânica**,
não terá cantos forçados por instrumentos, e se desprende graciosamente da superfície, junto com
a fita.^3^ +
Outras vantagens da fita azul reconhecidas pelo autor: uniformiza a planicidade do vidro, compensando
pequenos riscos, saliências ou até mesmo buracos de lascas; deixa uma superfície opaca e de cor saturada na mesa,
possibilitando o uso de câmera térmica (que não funciona bem com metais e superfícies reflexivas ou transparentes) e
o uso de endstops ópticos, e ainda dando uma aparência mais colorida, agradável e facilmente distinguível pra visualizações
remotas por câmera e confecção de fotos e vídeos educativos ou promocionais.

[NOTE]
.Notas:
====
. Isso é uma questão bastante delicada, pois certos indivíduos parecem enxergar a contração do plástico
no resfriamento __como algo evitável__, e __não é__. Em cada temperatura e pressão específica, o plástico,
assim como outros materiais, tende a ocupar um determinada volume, e qualquer desvio deste volume gerará forças
que saem facilmente da faixa tratável quando há diferenças significativas de temperatura pelo material. Neste
caso, a base da peça pode até permanecer firmemente aderida à superfície, mas o plástico logo acima sofrerá
warp e se destacará entre as camadas, no que se apelido de "delaminação"; nos casos extremos, as forças
de contração conjugadas com a alta aderência podem inclusive quebrar o vidro. Portanto, a _solução_ para o
warp e delaminação não é o "adesivo perfeito", e sim uma câmara ou componente aquecido que permita ir
resfriando a peça vagarosa e uniformemente, impedindo grandes diferenças de volume de deformá-la.
. Embora a "cola de PVAc" seja mais tratada de "cola de PVA", utilizamos a expressão menos ambígua
para nos referir ao __Acetato de Polivinila__, pois um outro composto que também tem utilidade no meio de impressão
3D usa a mesma sigla, mas é um álcool: __Álcool de Polivinila__. É utilizado como matéria-prima para filamento
dissolvível em água.
. Sempre que se menciona o destacamento da peça por submersão em água, lembre o leitor que diferenças
grandes de temperatura tendem a deformar a peça, portanto não é bom colocá-la ainda "morna" na água. O
ideal é aguardar um tempo para esfriar.
====

.Autonivelamento de Mesa (Bed Auto Leveling ou BAL)

Uma das maiores preocupações para se conseguir uma boa qualidade de impressão é começar com o pé direito. Em
termos mais técnicos, é se preocupar com a primeira camada: é a etapa mais importante de toda a impressão,
pois se o plástico depositado estiver bem rente, terá boa aderência -- se for rente demais, pode entupir o
hotend ou até arranhar o vidro; se a mesa estiver mal nivelada, um canto da peça estará mais "levantado" que
outro. Os processos industriais de construção de impressoras 3D não conseguem garantir precisão de peças de
forma que uma mesa fique perfeitamente nivelada com o plano formado pelos eixos X e Y; esse nivelamento, portanto,
acaba sendo feito na fixação da mesa por ajuste de parafusos de fixação, e quase sempre acaba tendo um desvio
imperceptível a olho nu, ou adquirindo tal desvio com o uso continuado da impressora 3D.

Normalmente esse desvio, ou inclinação relativa, da mesa, permanece dentro de intervalos bem pequenos -- digamos,
uma diferença de 0,2mm entre um canto e outro da mesa na distância ao carro X -- mas ainda suficientes para
prejudicar ou até arruinar uma impressão. A tarefa de renivelamento não é difícil, mas é laboriosa, repetitiva
e enfadonha. O tipo de tarefa que uma máquina faz melhor que um humano. Daí surgiu a idéia no **nivelamento
automático de mesa**.

O nivelamento automático estende a utilidade do **endstop**; por que não utilizar um endstop adicional no _hotend_
antes de ele começar a impressão? Um que ative quando o bico encostar na mesa, repetindo esta operação em
vários pontos pra se inferir a inclinação em relação aos eixos.

Este é o princípio básico do autonivelamento: medir, a partir do hotend, a inclinação da mesa. Se a mesa for
considerada um plano perfeito (apenas inclinado), três pontos no espaço tridimensional definem um único plano
passando por eles, então três medidas de Z em coordenadas (X,Y) bem espaçadas serão suficientes. Um número
maior de medidas ajuda a diminuir imprecisões, mas raramente se usa mais que 6.

Uma vez que se tenha a medida da inclinação deste plano, o _firmware_ -- o software que roda no microcontrolador
que controla a impressora -- passa a fazer transformações geométricas para cada coordenada passada para ele,
compensando a inclinação. "Recebi o comando para ir para o ponto (10,10,5) no espaço, mas dada a inclinação da
mesa, este ponto está na verdade em (10,11,4), então é para esta coordenada que vou me mover." Como estes pontos
serão, dada a inclinação pequena, bastante próximos, a impressão ocorre compensada sem problemas ou distorções.

[[autonivelamentoendstop1]]
image::image106.png[image,width=622,height=500,align="center",title="Autonivelamento de mesa, com um endstop mecânico retrátil encostando na mesa visivelmente inclinada para medir a distância vertical. Créditos: Alex Borro, vídeo completo em https://www.youtube.com/watch?v=3IKMeOYz-1Q"]

Não que não haja desafios e novos problemas criados pelo autonivelamento. Pelo contrário, já nos deparamos com
um, que é a necessidade de dois componentes novos para a impressora: um endstop mecânico para medir a distância
até a mesa e um motor (do tipo servo motor) que levanta e abaixa este endstop -- imagine que se o endstop ficar
sempre abaixado, e abaixo do nível do endstop, ele baterá na mesa na primeira camada, sem contar na própria
peça durante a impressão; a impressão só deverá portanto abaixar o endstop durante a etapa de aferição do
nivelamento da mesa. Ou se integra a chave mecânica ao hotend, de modo que o hotend abaixa até encostar na mesa
e em seu suporte há uma chave com mola, que ativa com um leve levantar do hotend; essa abordagem funciona mas
tem a chance de entortar o bico de latão.

Não pára por aí. O endstop e o servo ocupam espaço que pode diminuir a área de impressão; o servo motor que
levanta e abaixa o endstop tem uma repetibilidade baixa, o que afeta enormemente a inclinação mensurada -- e
faz com que alguns abandonem o endstop mecânico, de contato, para utilizar um de distância para que não precise
ficar abaixo do nível do hotend, como um óptico, indutivo ou capacitivo. E nesse caso novos requisitos surgem em
relação ao material da mesa -- abriu-se uma caixa de Pandora, com fabricantes diferentes oferecendo soluções
diferentes, e muitas receitas diferentes para adaptar impressoras reprap feitas em casa para o autonivelamento.

Uma nota adicional sobre o autonivelamento é que as correções de coordenadas exigirão que a cada camada, diversos
movimentos adicionais no eixo Z sejam realizados, ao invés de um único movimento de subida a cada camada. Para
impressoras 3D que utilizam barras roscadas, que têm grande desgaste com o movimento vertical, isto é um ônus bem
grande, diminuindo bastante a vida útil destas peças. Este também é um campo fértil para soluções criativas;
um exemplo notável é a estratégia da impressora brasileira Sethi S3 que, uma vez medido o desnível da mesa,
usa deslocamentos fixos aos motores para ajustar um novo plano e compensar esse desnível.

=== Motores

Mencionamos muitos elementos que envolvem motores: eixos, malhas abertas e fechadas, extrusores e até mesa,
e só agora chegamos a eles. Há uma razão para isso. A parte da engenharia que trata desses dispositivos é,
como muitos dos tópicos que envolvem impressão 3D, assunto espinhoso para resumir em um único livro. Motores
de todos os tipos e tamanhos estão em toda parte na sociedade moderna e é uma tarefa presunçosa e irrealizável
conseguir resumir tudo em poucas páginas.

Por outro lado, não faltam motivos para se precisar conhecer um mínimo sobre eles, no caso de impressão 3D. É
preciso saber como e quando eles costumam falhar; o que significa a nomenclatura, que tipos são usados, como os
_drivers_ funcionam, e como acontecem as famosas __perdas de passo__. Se uma reprap está sendo montada a partir
de sucata, é preciso saber que tipos e especificações de motores são apropriados para construí-la. Se uma
impressora 3D anuncia usar _servos_ no lugar de motores de passo, é preciso saber quais as vantagens e como funcionam.

Vamos começar então __bem pelo começo__, quase pelo óbvio. Os motores que vamos tratar aqui são motores
elétricos, ou seja, que transformam energia eletromagnética em energia mecânica. É a mesma energia eletromagnética
que age em ímãs. Um ímã permanente comum de mercado, como os de neodímio, tem uma extremidade onde fica seu
"pólo norte magnético" e a outra onde fica o "pólo sul" (não marcados como tal). Se você pega dois
ímãs de pólos iguais de frente e tenta juntá-los, sentirá que eles se repelem. Se virar um dos ímãs de modo
que seu pólo sul fique virado para o norte do outro, eles se atrairão.

[[imasatracaorepulsao]]
image::image107.png[image,width=473,height=437,align="center",title="Atração e repulsão básicas entre forças eletromagnéticas. Pólos iguais se repelem, pólos diferentes se atraem. As linhas de força são bem mais complexas que isso, simplificamos para compreensão."]

Tratamos nesse caso dos ímãs permanentes, mas podemos utilizar de uma conformação de materiais tais que ao
passar uma corrente elétrica em determinado sentido, a indução criada pela corrente cria um eletroímã, um
ímã que pode ser ligado, desligado e até invertido se a corrente elétrica for colocada no sentido inverso. Os
eletroímãs geralmente são feito com uma bobina de fio de cobre em volta de um material ferroso e um exemplo
bem simples é um prego com fio enrolado ligado a uma bateria.

[[eletroimasimples]]
image::image108.png[image,width=480,height=315,align="center",title="Um eletroímã simples, com pólos norte e sul. Desligado da bateria, o prego com fio de cobre deixa de se comportar como ímã."]

*DC* ou **AC**: Repare que a bateria da ilustração é uma fonte de _corrente contínua_ ou _DC_ (do inglês
"direct current"), isto é, o prego permanece imantado com uma corrente que não varia (ainda que somente em
condições ideais -- na prática, a corrente vai diminuindo à medida que a carga da bateria se esgota). Se ao
invés de ligarmos a uma bateria ligássemos a uma fonte de _corrente alternada_ ou _AC_ (do inglês "alternating
current"), como a tomada de sua casa, o comportamento seria bem distinto, com a bobina acumulando algo chamado
de "indutância" e o prego mudando de orientação magnética várias vezes por segundo. A fonte de corrente
alternada basicamente liga e desliga (ou inverte) a corrente várias vezes por segundo, e se colocarmos isso em
um gráfico em relação ao tempo, teremos uma _forma de onda_ recorrente.

[[ondasformasdecorrente]]
image::image109.png[image,width=642,height=298,align="center",title="Duas formas de onda possíveis para correntes elétricas alternadas (AC). A primeira liga e desliga a corrente de 1 Ampére (eixo Y) a cada um segundo e meio (eixo X), é uma onda quadrada. A segunda levanta e abaixa a corrente continuamente de +1 Ampére até -1 Ampére periodicamente em uma 'senóide', 6 vezes a cada 0,1 segundo, equivalendo a uma corrente típica de tomada doméstica (que alterna 60 vezes por segundo, ou 60Hz)."]

Numa impressora 3D, a alimentação dos componentes é quase universalmente **DC**, obtida através de uma fonte
de tensão cujos detalhes veremos na seção de alimentação, e que transforma a corrente alternada da tomada em
corrente contínua. Em princípio, para os motores, a corrente alternada seria melhor porque o truque para fazer
motores girarem sempre gira em torno de alternar a corrente em bobinas, e quando há conversão para corrente
contínua pela fonte há uma perda envolvida. Mas na prática, por questões de controle e complexidade dessa
alternância nos motores, a conversão é obrigatória.

**Existem muitos tipos de motores**. Os mais simples são os motores DC *com escova* (__brushed__), não usado
em impressoras 3D. A escova é um elemento ligado à bobina giratória que entra em contato com a alimentação e
conduz corrente quando isso acontece. Esse contato pode produzir faíscas e como ocorre muitas vezes por segundo,
acaba levando ao desgaste das partes. Por outro lado, esses motores têm uma construção simples e barata, e só
necessitam de dois fios (sinal e terra) para funcionar.

[[diagramamotorescovas]]
image::image110.png[image,width=642,height=443,align="center",title="O diagrama de um motor com escovas. Neste motor, o estator são os fios de energia, a escova e o ímã permanente em volta; o rotor são as bobinas e o comutador. O leitor deve considerar isto como uma curiosidade: útil para projetos 'maker', não para impressão 3D."]

Todos os motores que trataremos são *sem escova* (__brushless__). A escova é a peça condutora de eletricidade
que faz o contato intermitente durante o giro do rotor. Nos motores sem escova, as bobinas serão elementos fixos no
corpo do motor, parte do *estator* (parte estática do motor); a parte móvel, o **rotor**, terá um ímã permanente
ligado a um rolamento, que girará de acordo com as polaridades dadas às bobinas. O movimento deve acontecer sem
contato. Sabendo disso, vamos bolar um motor simples. Antes, é preciso diferenciar um pouco mais: ao invés de
criarmos apenas um __*motor DC sem escova*__, vamos criar um __*motor de passo*__, e começamos assim: Se pusermos
apenas uma bobina ou duas bobinas em 180°, o ímã poderia ir tanto no sentido horário quanto anti-horário para
se alinhar com elas. Vamos usar quatro (seria possível usar três, mas o controle ficaria mais complexo). Vamos
supor ainda que neste caso, vamos deixar as bobinas sempre energizadas com corrente, seja direta, seja invertida.

[[bobinas41bobinas23]]
image::image111.png[image,width=642,height=384,align="center",title="Colocamos as quatro bobinas em torno do ímã permanente e as ligamos com dois pólos norte (bobinas 4,1) e dois pólos sul (bobinas 2,3) consecutivos virados para o centro. As atrações e repulsões assim configuradas só permitem que o ímã (o rotor) gire em uma direção: 90 graus em sentido anti-horário. Assim que completa o giro, o ímã encontra uma situação de equilíbrio e não se move mais. Este movimento é um *passo* de motor. A geometria deste motor de passo simples faz com que cada passo ande 90 graus."]

O motor simples da ilustração exemplifica bem o que se passa nos motores de mercado; a diferença é que os
últimos são bem mais complexos. Um NEMA17 comum de reprap tem este ângulo de passo de 1,8 graus, o que quer
dizer que ele tem o equivalente a 200 dessas bobinas em torno do rotor. Também comum é um torque de retenção
de 4 kgf.cm, uma grandeza que representa a resistência que o motor terá para sair desta posição de "repouso".

Da posição em que está, o motor da ilustração pode continuar girando no sentido anti-horário se fizermos o
seguinte: invertemos _somente_ as bobinas 4 e 2. Veja o que acontece.

[[bobinas90grausdepois]]
image::image112.png[image,width=642,height=273,title="O rotor continua se movendo no sentido horário e estaciona 90 graus (um passo) depois."]

O padrão no entanto muda com esta configuração: se invertemos as bobinas 1 e 3, o motor dará um passo no sentido
__horário__, ou seja, voltará um passo. Para continuarmos girando no sentido anti-horário, precisamos inverter
as 4 bobinas.

[[bobinasmaisumpassoantihorario]]
image::image113.png[image,width=642,height=317,align="center",title="Mais um passo em sentido anti-horário. Já dá pra imaginar qual seja o passo seguinte, inverter as bobinas 2 e 4. Fica como exercício para o leitor visualizar. Após isso, novamente inverter as 4 bobinas para chegar à configuração inicial (completando 360 graus)."]

No final desse exercício, o leitor pode estar pensando: por que deixar todas as bobinas ligadas em algum sentido? É
possível, para qualquer motor, ter as bobinas desligadas. A finalidade foi mostrar que podemos controlar os
elementos dois a dois: perceba que as bobinas *1* e *3* estão _sempre_ invertidas uma com a outra, assim como a *2*
e **4**. Isto é na verdade um princípio de construção dos motores: bobinas alternadas são conectadas de modo
que liguem ou desliguem ao mesmo tempo, constituindo uma **fase**. No nosso motor temos duas fases diferentes:
1 + 3, e 2 + 4. A estratégia que usamos de deixar as bobinas sempre energizadas para cada passo se chama _*modo
de excitação de duas fases*_ e é caracterizada por torque melhorado. Em motores com mais bobinas, as fases se
intercalam: 6 bobinas, e temos 1 + 3 + 5 formando uma fase, 2 + 4 + 6 formando outra (figura XXa). Do mesmo modo,
com 8 bobinas teremos 1+3+5+7 e 2+4+6+8 (figura XXb)

[[bobinasmaisbobinas]]
image::image114.png[image,width=642,height=342,align="center",title="Motores com mais bobinas, sempre intercaladas e com duas fases - aqui mostradas em cores diferentes para melhor entendimento. O rotor central tem sua construção magnética omitida neste momento para simplicidade, pois nesses casos não são usados dois semicírculos."]

**Polaridade**: considerando um motor de duas fases, a fiação que liga as bobinas costuma ser arranjada de dois
jeitos distintos nos motores de passo: nos motores **bipolares**, uma fase corresponde a exatamente um fio de
cobre percorrendo e interligando todas as bobinas. Nos motores **unipolares**, o centro da fase tem um fio extra
de modo que a comutação é facilitada -- uma metade por vez. Para o mesmo número de fases, portanto, um motor
unipolar tem mais fios que um bipolar, ainda que algumas vezes os fios centrais das fases sejam conectados em um
fio único. O diagrama extremamente simplificado a seguir pode ajudar a entender melhor:

[[diagramafiacaomotores]]
image::image115.png[image,width=642,height=320,align="center",title="Diagrama para entender a fiação dos motores (que passa por dentro do motor, mas é mostrado 'por fora' para entendimento). Todos os motores ilustrados têm duas fases (bifásicos). As cores indicadas na ilustração são cores comuns nos fios de motores de mercado, mas não são padronizadas ou universais. Pode-se ainda ter uma configuração não mostrada no diagrama, um 'motor universal' com quatro fios, em que cada uma de 4 bobinas é acionável isoladamente."]

Apesar de o motor bipolar ter uma construção mais "simples" (menos fios), gerar passos nele é mais
complicado. Você pode ter a corrente em *ambos* os sentidos no fio, positivo e negativo (daí o **bi**polar),
enquanto que o motor **uni**polar só é energizado em *um* sentido em cada metade de fase. Isso torna o controle
do motor unipolar _mais simples_ e o do bipolar _mais complexo_ do ponto de vista de elementos de circuito e
programação do microcontrolador.

[[fotomotordesmontado]]
image::image116.jpeg[image,width=642,height=645,align="center",title="Um motor NEMA17 usado em impressoras 3D de mercado aberto, com duas fiações com convenções de cores diferentes: uma preta, vermelha, azul e verde e uma vermelha, amarela, cinza e azul. Perceba que o conector do motor da foto tem 6 pinos, e o cabo que sai dele só tem 4 fios. É porque o motor pode funcionar tanto como motor bipolar quanto como unipolar. Se fosse usado em modo unipolar, o cabo apresentaria 5 ou 6 fios conforme o diagrama anterior. Note outros elementos da construção do motor, como o rotor magnético e as bobinas no estator. Falaremos deles mais à frente."]

Se ainda assim for difícil para que o leitor abstraia o movimento, existem excelentes recursos na internet com
animações detalhadas do que acontece. Alguns exemplos são recomendados:

* Não falamos muito dos motores DC sem escova ("BLDC" - Brushless DC), mas o modo como eles funcionam pode
ser visto em https://www.youtube.com/watch?v=bCEiOnuODac[_https://www.youtube.com/watch?v=bCEiOnuODac_]
do canal "Learn Engineering", em inglês. O BLDC é bastante semelhante ao motor de passo
mas tem como diretiva maximizar o torque e deixá-lo o mais suave possível, sem as paradas do
primeiro -- precisão de posicionamento não é necessária. Diferentemente dos motores de passo,
que costumam usar uma ou duas fases, os BLDCs tipicamente têm três fases.
* O blog brasileiro
_fazedores_ tem algumas GIFs animadas com um motor de passo de acionamento simples (uma fase por vez):
http://blog.fazedores.com/serie-motores-introducao-ao-motor-de-passo/[_http://blog.fazedores.com/serie-motores-introducao-ao-motor-de-passo/_]
* Uma demonstração experimental de motores de passo "caseiros" semelhantes aos diagramas ilustrados aqui,
em português: https://www.youtube.com/watch?v=dS7tI75JczY[_https://www.youtube.com/watch?v=dS7tI75JczY_]
* Uma das
grandes aplicações da impressão 3D é na área educacional, e indivíduos criativos fizeram um motor de passo com
frames impressos em 3D e leds mostrando quais partes estão energizadas. O projeto, com alguns vídeos fáceis de
entender e já com muitas derivações, aparece no thingiverse com o título "3D Printed Stepper Motor v1.1":
http://www.thingiverse.com/thing:986260[_http://www.thingiverse.com/thing:986260_]

[[motordepassoimpressoem3d]]
image::image117.png[image,width=642,height=501,align="center",title="Fica até difícil __não entender__: o 'motor de passo impresso em 3D' mostra quais bobinas são energizadas em cada momento pra que não haja nenhuma dúvida para o aluno."]

==== Micropassos

Nosso motor imaginário tem um posicionamento bastante grosseiro -- cada vez que andamos, é um quarto de
círculo. Acontece que, pelo controle que temos dele, é possível dar um "jeitinho" de ganhar divisões novas
de ângulo puxando o motor "para os dois lados" ao mesmo tempo. Imaginemos que no caso da ilustração anterior
queiramos só andar 45°, ao invés de 90°. Tudo o que precisamos fazer é, ao invés de inverter as 4 bobinas,
inverter só a 2 e 4.

[[bobinasmicropassos45graus]]
image::image118.png[image,width=642,height=317,align="center",title="Começamos a girar no sentido anti-horário, mas o equilíbrio de forças está no meio do caminho. Ao invés de completarmos 90°, conseguimos posicionar o rotor em 45°; para completar 90⁰ bastará inverter 1 e 3."]

Esta estratégia é conhecida como *meio-passo* (__half-step__) e sua extrapolação para maiores divisões se
batizou de *micropassos* (__microsteps__). Alcançamos 45° porque as forças de atração são iguais; mas se
mexermos com a intensidade da corrente que passa em cada conjunto de fios, conseguiremos um ângulo ainda menor. Se
colocarmos *100%* da corrente nas bobinas *1* e *3* e *41,42%* da corrente nas bobinas *2* e **4**, conseguiremos
uma atração que resulta em um ângulo de ¾ de 90° (67,5°) em relação à 4.

[[bobinasumquartodepasso]]
image::image119.png[image,width=642,height=273,align="center",title="Conseguimos avançar apenas 1/4 de passo mexendo na intensidade das correntes para as bobinas."]

Não se preocupe muito com os números para chegar a esses ângulos, o importante é o princípio; mas para
informação, foi usado cálculo de seno e cosseno para chegar aos valores. Se estivermos no caso típico de dirigir
o motor com vários pulsos para uma posição, o gráfico da corrente relativa ao tempo mostrará a aproximação
quadriculada de uma senóide.

[[graficocorrenteabmicrostep]]
image::image120.gif[image,width=517,height=323,align="center",title="Gráfico da corrente de saída nos dois pares de fios (A e B) para micropassos do 'datasheet' de um DRV8825, que consegue até 32 subdivisões de passo."]

Outras proporções de correntes podem nos levar a divisões ainda menores: 1/8, 1/16, 1/32 e em alguns casos
é possível chegar a 1/256 de divisão de passo! __Perceba no entanto que o torque quando se usa micropasso é
menor do que com passo inteiro, menos carga poderá ser movida__. Os componentes que realizam esse controle são
especializados e têm um nome próprio:

==== Drivers de motores de passos

O controle do motor de passo é uma tarefa tão específica que exige um componente específico. Apesar de a maioria
dos microcontroladores terem capacidade para realizar esta tarefa, tê-la separada em um componente específico
para cada motor tem uma série de vantagens:

* **Abstrai o controle dos motores**, simplificando. O microcontrolador não precisa saber se o motor está
usando passo ou micropasso nem fazer os cálculos pra isso, só precisa enviar pulsos. E cada motor tem seu
próprio driver.
* *Coloca proteções adicionais* de circuitos, minimizando as chances de correntes inversas,
sobretensões, picos de corrente, principalmente na alternância de correntes, incluindo uma "__Ponte H__"
(um arranjo eletrônico especializado para comutações rápidas sem corrente de retorno).
* **Ajusta correntes e tensões como necessário**. O driver é um dos poucos componentes de impressora 3D realmente adaptativo por
natureza: ele recebe uma variada gama de tensões e consegue abstraí-la para seu funcionamento. Um dos mais
baratos disponíveis no mercado é o __Allegro A4988__, que aceita de 8 a 35V de entrada, funcionando portanto com
praticamente todas as tensões utilizadas em circuitos de impressoras 3D. Para o motor, o driver funciona como uma
fonte de corrente na forma de enviar o sinal necessário para que ele se mova; é a corrente, e não a tensão, a
grandeza que determina o torque que o motor exerce. Os motores de mercado diferem em que corrente máxima recebem,
ficando geralmente de 1A a 2,5A, e essa corrente máxima é configurável no driver -- por exemplo, no caso
do A4988, fazemos isso mecanicamente, através de um diminuto potenciômetro na peça.
* **Separa fisicamente** o controle do motor do resto da placa, isolando um dos mais frequentes pontos de falha. Se o driver queimar, pode
simplesmente ser trocado: o resto da placa não sofre danos. Torna-se mais fácil ainda nas placas (como a RAMPS)
que têm drivers encaixáveis ao invés de soldados. Nesse caso os drivers ainda representam economia ao não
preencher os slots vagos e poder escolher o driver mais econômico para o modelo de seu motor. Na seção sobre
RAMPS falamos mais sobre esses drivers.

Assim como no caso dos motores de passo, os micropassos podem parecer meio abstratos a princípio, e nesse caso
ver animações pode passar melhor o que está acontecendo. Recomendamos essas referências:

* https://www.youtube.com/watch?v=TWMai3oirnM[_https://www.youtube.com/watch?v=TWMai3oirnM_]
-- em inglês, usa um motor de passo bipolar para ilustrar o movimento.
* https://www.youtube.com/watch?v=Yt96gdpxV2g[_https://www.youtube.com/watch?v=Yt96gdpxV2g_] -- em português,
explica os micropassos.

==== Modos de Decaimento

A presença de bobinas faz os motores serem o que chamamos de __cargas indutivas__. São cargas que usam o fenômeno
eletromagnético da indução para gerar trabalho, e uma característica marcante destas cargas é armazenar energia
em um _campo de indução_ enquanto alimentadas; com a alimentação subitamente cortada, o campo magnético entra
em colapso rapidamente, e isso causa um pulso de alta tensão entre os terminais desconectados, com o potencial de
queimar componentes. É a principal razão para nunca se desconectar um motor em funcionamento -- o arco-voltaico
resultante tem grandes chances de estragar a eletrônica.

Para mitigar o risco de descargas internas prejudiciais, os drivers nunca interrompem as correntes subitamente;
ao invés disso, fazem com que _decaiam_ de modo controlado. Existem três modos de decaimento usados:

* *Decaimento Rápido* (__fast decay mode__): neste modo, a corrente na carga indutiva é rapidamente reduzida
a zero. Isso é feito desligando criteriosamente transistores do circuito numa sequência que drene a corrente
em até cerca de 200 nanossegundos. A contrapartida desse modo é que o rotor não é simplesmente parado no
lugar: ele é "desengrenado" e leva um tempo para parar. Em outras palavras: a corrente zera rapidamente,
o motor pára lentamente. Correntes mudando rapidamente geram maior interferência eletromagnética e ruído,
o uso deste modo é responsável por um motor "barulhento".
* *Decaimento Lento* (__slow decay mode__):
neste modo, uma metade da Ponte H é escolhida e desligada. Isso tem o efeito de criar um loop resistivo em
que a corrente é lentamente drenada. Por outro lado, tal loop cria uma "freagem" no motor que faz com que
pare bruscamente na posição em que está (ocasionando maior precisão de posicionamento). O quão rápido a
corrente pára depende das características técnicas dos transistores (FETs) usados no circuito, em particular
seus "RDSon". Em outras palavras: a corrente zera lentamente, o motor pára rapidamente. Este modo também tem
de forma geral melhor torque que o decaimento rápido. Em contrapartida, não funciona bem em maiores velocidades,
visto que cada pulso é seguido de uma parada brusca.
* *Decaimento Misto* (__mixed decay mode__): Procura unir
o melhor dos modos de decaimento rápido e lento, geralmente começando com o decaimento rápido e trocando para
o decaimento lento em certa proporção do pulso. Diferentes drivers oferecem diferentes opções para esse modo;
por exemplo, os DRV8825 têm uma proporção fixa, os DRV8811 permitem configurar as porcentagens de cada modo.

Os modos de decaimento dos drivers são um fator importante de otimização dos motores e de controle do ruído,
mas são um tema bastante complexo de engenharia elétrica e seu detalhamento fora do escopo deste livro. Como
temas de engenharia, qualquer livro sobre motores trata deste tópico; mas também existem boas fontes na internet
tratando especificamente sobre isso. A seguir (em inglês):

* Uma explicação sobre os modos de decaimento: https://ebldc.com/?p=86[_https://ebldc.com/?p=86_]
* Como diminuir o ruído no seu driver: http://ebldc.com/?p=187[_http://ebldc.com/?p=187_]
* Um exemplo aprofundado de análise de problemas de drivers, com a solução:
http://www.engineerination.com/2015/02/drv8825-missing-steps.html?m=1[_http://www.engineerination.com/2015/02/drv8825-missing-steps.html?m=1_]

==== PWM, ou: você estava sendo enganado!

__Caro leitor, nós mentimos__. Até agora, tratamos de correntes e tensões como grandezas perfeitamente controladas
em intensidade pelos circuitos. Isso não é inteiramente verdade e pra explicar por quê, vamos apresentar o PWM (__Pulse
Width Modulation__), ou __Modulação de Largura de Pulso__. Este é um conceito importante que vai se aplicar
a muitos componentes de uma impressora 3D e é usado extensivamente em diversos tipos de aparelhos eletrônicos,
principalmente os que trabalham com temperatura, carga e movimento.

Na situação "ideal" imaginada, temos total controle sobre a corrente, tensão ou potência que queremos que um
componente eletrônico produza. Se pedimos uma corrente de 0,7812465272 Ampéres, teremos uma corrente exatamente
com este valor. Se queremos ao longo do tempo que a tensão siga a curva de uma senóide, podemos fazer isso com
precisão. Se precisamos de uma potência que siga uma curva arbitrária ao longo do tempo, o ajuste será perfeito.

[[graficocurvaarbitrariapotencia]]
image::image121.png[image,width=478,height=285,align="center",title="Uma curva arbitrária de potência que queremos entregar ao longo do tempo, com subidas e descidas suaves."]

E isso tudo, é claro, só existirá em contos de fadas tecnológicos. Na vida real, há custos e aproximações
e em impressoras de baixo custo como as repraps, um conjunto limitado de dispositivos eletrônicos a usar. O
primeiro a se pensar para fazer controle da potência aplicada seria um __reostato__, ou seu equivalente contínuo
__potenciômetro__, que varia a potência como em um controle de chuveiro usando de resistência variável. Má idéia:
a potência não utilizada é perdida em calor. Outro elemento interessante seria um DAC, ou _Digital-Analog Converter_
(Conversor Analógico-Digital). Este circuito toma como entrada um número binário (cada dígito sendo uma tensão,
ligada ou desligada) e gera uma saída da intensidade desejada. Neste caso teremos um número de saída dependentes
do número de bits da entrada que usamos; se temos 8 bits, teremos 256 saídas possíveis (2^8^); se temos 16 bits,
teremos 65.536 saídas possíveis (2^16^).

[[graficocurvapotenciadac]]
image::image122.png[image,width=478,height=329,align="center",title="A nossa curva de potência desejada quando entregue por um DAC - Conversor Analógico-Digital - de 3 bits (8 intensidades de potência possíveis). Na prática, DACs baratos de mercado costumam ter entre 10 e 12 bits (1024 a 4096 intensidades discretas)."]

Entretanto, ainda que DACs não sejam caros isoladamente, uma impressora 3D tem vários dispositivos a serem
controlados e os microcontroladores baratos como o Arduino Mega não vêm com tais elementos. Se houver uma
solução mais à mão, que inclusive possa usar sinais digitais, é melhor. Essa solução existe e é o PWM.^1^

Nos sinais digitais, temos apenas "zeros" e "uns" à nossa disposição, desligado e ligado. Em um cabo de
tensão, por exemplo, só podemos passar 0 V ou 5 V, e nada no meio. Por outro lado, temos controle fino do tempo
do sinal: podemos ligar e desligar em intervalos de 62,5 nanossegundos em um mero circuito de 16 MHz. A estratégia
é, portanto, trocar a resolução vertical (carga) pela resolução horizontal (tempo); divide-se o sinal em um
conjunto de "pulsos", de digamos 1ms, e nesse milissegundo o tempo que o sinal ficar ligado equivalerá à
intensidade. Um "pulso" que fique 80% do milissegundo em 5V e os 20% restante em 0V equivalerá a 80% de 5V,
ou seja, 4V.

Na nomenclatura convencional, teremos:

* *Ciclo* ou **período**: o tempo de cada pulso; por exemplo, 1 millissegundo.
* **Frequência**: quantos ciclos
por cada unidade de tempo. É o inverso do ciclo; se temos um ciclo de 1 milissegundo (0,001 segundo), a frequência
é 1 ÷ 0,001, ou 1000 ciclos por segundo. "Ciclos por segundo" são Hertz (Hz), a unidade de frequência.  *
*Duty Cycle* ou **Taxa de Ciclo**: para um determinado ciclo, a porcentagem de tempo em que o pulso está ativo;
por exemplo, no nosso pulso equivalente a 4V, o duty cycle é 80%.

Em muitos casos, e no caso específico das impressoras 3D de mercado, o PWM não usa um único pino para mandar o
pulso; tem também um pino de _sinal_ ou _direção_ (positiva ou negativa). Não ficaríamos restritos a 5V ou 0V;
teríamos também -5V.

[[graficocurvatraduzidaprapwm]]
image::image123.png[image,width=478,height=329,align="center",title="A nossa curva quando traduzida para PWM. Perceba como a duração de cada pulso no eixo do tempo corresponde à altura da onda. Nesse caso temos um PWM direcional, pois não nos limitamos a zero e um: também mandamos pulsos negativos."]

*Mas se o sinal é diferente, o resultado também não será diferente?* Ou, já que estamos enviando um sinal _muito
diferente_ do que iríamos mandar, o dispositivo no final desse circuito não vai fazer algo também diferente
do que desejávamos? Para a maior parte dos casos, não. No caso dos motores, tanto a inércia quanto a carga
indutiva (que resiste a mudanças bruscas de corrente) faz com que o resultado seja virtualmente idêntico. Em um
LED, o PWM faz o brilho oscilar tão rápido que o olho humano o percebe como um degradê de intensidade. Em um
componente de aquecimento, a temperatura muda tão vagarosamente que os sinais digitais têm o mesmo efeito dos
analógicos. E alguns circuitos ainda têm um componente/filtro de suavização ou atenuação de sinal -- como
um simples capacitor -- que ao ser colocado no circuito, transforma o PWM no sinal analógico equivalente.

Na "vida real", além da implementação simplificada em circuitos digitais, o PWM tem outras vantagens:

* **Eficiência**: O PWM apresenta muito pouca perda de potência, geralmente ficando acima dos 90% de aproveitamento
da energia^3^. Pelo mesmo motivo, aquece muito menos e roda mais frio que outros circuitos.
* **Maior imunidade ao ruído**. Como o sinal é digital, apenas ligado ou desligado, é muito menos provável que uma interferência
o amplifique ou atenue o suficiente para tirar deste estado.

Por outro lado, ele também tem desvantagens a serem consideradas. A maior delas é **gerar mais ruído
eletromagnético**. Mudanças bruscas de sinal causam esse efeito, o que pode pedir por maior blindagem contra
ruídos no equipamento. Desvantagens menores são efeitos colaterais da escolha de frequência do PWM, como acerto
de fase ou geração de ruído sonoro, que dependerão do circuito.^3^

Nas impressoras 3D, o PWM é gerado de diversas formas. No firmware, geralmente "soft PWM" (PWM controlado
por software) de baixa frequência (7 Hz) é usado para os elementos térmicos (mesa e extrusor) e PWM nativo do
microcontrolador para a ventoinha. No caso dos motores, o firmware envia um instrução "mova um passo" para
o driver, que o transforma em PWMs adequados para o motor. Geralmente a frequência desses PWMs é por volta de
30 KHz (como no driver DRV8825), com o driver A4988 tendo ela variável e apenas o tamanho do pulso fixo^4^. Com
a frequência abaixo de 20 KHz, isso pode resultar em sons audíveis.

Muito do que foi dito aqui foi simplificado para melhor compreensão, tenha o leitor em conta que PWM é um assunto
vasto na engenharia elétrica e existe em diversos "sabores", incluindo formas de onda diversas da quadrada
(como a triangular e senoidal) e com modulações diferentes. O leitor curioso é incentivado a pesquisar mais
sobre isso em livros de engenharia elétrica ou mesmo na internet.^5^

[NOTE]
.Notas:
====
. Curiosamente, a função C++ `analogWrite()` do Arduino é um nome equivocado; o Arduino não envia um sinal
analógico e sim um PWM controlado por hardware.
. Um estudo da perda térmica em PWM pode ser visto em uma página do projeto reprap:
_http://reprap.org/wiki/Gen7_Research#Heat_vs._PWM_Frequency_
. http://hydraraptor.blogspot.com.br/2012/04/stepstuck.html[_http://hydraraptor.blogspot.com.br/2012/04/stepstuck.html_]
. O A4988 não utiliza, estritamente falando, PWM, mas uma técnica bastante semelhante com o nome
de PPM, Pulse Position Modulation, __modulação por posição de pulso__. No caso do PPM o pulso é
sempre do mesmo tamanho, mas a posição em que ocorre dentro da janela do período é o que determina
a "intensidade". Existem outras variações de PWM como o PWC (Pulse Width Coding, descrito na página 5 de
http://www.atmel.com/Images/Atmel-8014-Using-Timer-Capture-to-Measure-PWM-Duty-Cycle_ApplicationNote_AVR135.pdf[_http://www.atmel.com/Images/Atmel-8014-Using-Timer-Capture-to-Measure-PWM-Duty-Cycle_ApplicationNote_AVR135.pdf_]),
PCM, PAM, PPM (esses em
http://www.electronicshub.org/modulation-and-different-types-of-modulation/[_http://www.electronicshub.org/modulation-and-different-types-of-modulation/_])
. Podemos sugerir o excelente texto de Newton C. Braga, disponível no seu site no endereço
http://www.newtoncbraga.com.br/index.php/robotica/5169-mec071a[_http://www.newtoncbraga.com.br/index.php/robotica/5169-mec071a_]
====

==== Motores do Mundo Real

E como tudo que tem uma descrição teórica simplificada, os motores que utilizamos em nossas impressoras 3D são
mais complicados, frutos de décadas de progresso no campo. Mas não _*muito*_ mais complicados: os princípios
básicos permanecem os mesmos, e pra entendermos o que têm, primeiro precisamos falar dos _tipos_ de motores de
passos que são mais frequentes.

* *Motor de ímã permanente* (Ou Motor "PM", de Permanent Magnet) -- é o motor que ilustramos em nossos
gráficos até agora, com um rotor composto por um ímã permanente no centro. É o mais simples de entender e por
isso foi o escolhido para apresentarmos os conceitos.  * *Motor de Relutância Variável* -- diferentemente dos
motores que vimos até agora que trabalham com atração e repulsão eletromagnética, os motores de __relutância
variável__, usando __solenóides__, trabalham com outro tipo de grandeza eletromagnética, _linhas de fluxo_ que
capturam o caminho de __menor relutância__: o motor (que é um núcleo de ferro com extremidades não-magnéticas)
e estator se alinham de modo que a relutância magnética é mínima, através da força magnetomotriz. Os termos
representam palavras-chave de pesquisa para o leitor, visto que tratar deste assunto sairia muito do escopo do
livro^1^. São baratos e usados em motores pequenos como em mesas de microposicionamento.

[[bobinasmotorderelutanciavariavel]]
image::image124.png[image,width=451,height=310,align="center",title="Um motor de relutância variável."]

* *Motores Híbridos* -- são esses os usados nas impressoras 3D "reais", e se aproveitam das duas
estratégias. Ao invés de usarem somente atração eletromagnética, usam o efeito de caminho de menor relutância,
se valendo de imantação permanente axial ao invés de radial, isto é, temos dois cilindros dentados, um imantado
positivo e outro imantado negativo, como na foto e diagrama a seguir.

[[fotomotorhibridocomdiagrama]]
image::image125.png[image,width=642,height=375,align="center",title="Um motor híbrido bipolar NEMA17 de reprap desmontado e seu diagrama, visto de frente, e com uma fase (A) ativada. Perceba que os dois cilindros dentados têm os dentes intercalados, de modo que uma bobina que atraia um pólo repele o outro -- deste modo, há maior aproveitamento e controle da rotação."]

Motores híbridos usam a mesma estratégia para passos e micropassos que o motor simplificado que ilustramos. Para
uma visão animada da polarização e movimento com detalhes desses motores, recomendamos a referência de internet
https://www.youtube.com/watch?v=t-3VnLadIbc[_https://www.youtube.com/watch?v=t-3VnLadIbc_] - "How the Stepper
motors are made and how they operate -- Part 2".

[NOTE]
.Notas:
====
. Uma referência boa sobre solenóides pode ser vista no excelente sítio de Newton Braga:
http://www.newtoncbraga.com.br/index.php/como-funciona/3890-mec095[_http://www.newtoncbraga.com.br/index.php/como-funciona/3890-mec095_].
. Uma apresentação falando sobre relutância magnética, a
relação com solenóides e força magnetomotriz pode ser achada em
https://docente.ifrn.edu.br/odailsoncavalcante/disciplinas/maquinas-eletricas-e-acionamentos/revisao-de-eletromagnetismo[_https://docente.ifrn.edu.br/odailsoncavalcante/disciplinas/maquinas-eletricas-e-acionamentos/revisao-de-eletromagnetismo_].
====

==== Servo Motores

Quando aprendemos endstops, vimos que o posicionamento dos motores na impressora 3D é implementado como uma __*malha
aberta*__, isto é, como um circuito cujo resultado nunca é medido e comparado com o esperado. Assim, quando enviamos
um comando "mova o extrusor 10 mm para a esquerda" e realizamos uma ação de bloqueio, como segurar o pinhão
do motor para que o motor não gire, o sistema simplesmente se perde: ele registra a informação que o extrusor se
moveu 10mm para a esquerda, ignorante do fato de isto ter sido impedido. Essa é a chamada __*perda de passo*__,
um dos maiores problemas enfrentados nas impressoras 3D. Os endstops representam uma mitigação deste problema:
executando-se o procedimento de _homing_ novamente, o microcontrolador da impressora volta a ter referência;
mas isso não é consolo nenhum se a impressora 3D perder passos no meio de uma impressão e extrusar plástico
nas coordenadas erradas (ou em volume insuficiente, se perde passos no tracionador do filamento).

O **servo motor**, ou simplesmente __servo__, é a solução mais sofisticada (e mais cara) para este problema. É
definido como __um dispositivo que produz movimento em resposta a um comando e então regula a velocidade e direção
deste movimento em resposta à realimentação__. Traduzindo em miúdos, é um **motor em malha fechada**, que
continuamente verifica se está se movimentando como deveria e, em caso negativo, toma ações corretivas.

Servos não são desconhecidos no universo _Maker_ -- pelo contrário, em suas encarnações mais baratas, são
bastante populares. Aparecem ubiquamente nos aeromodelos, nas impressoras 3D para subir e baixar sensores de
nivelamento de mesa, e nos projetos impressos de máquinas simples.

[[servomotoressg90]]
image::image126.png[image,width=411,height=491,align="center",title="SG90, um dos servos de baixo custo mais populares do mercado, junto a três braços distintos que são encaixáves no pinhão. Tem 1,8 kgf.cm de torque em 5V e pesa apenas 9g. Devido ao fato de ser translúcido é possível ver sua estrutura interna, usando de engrenagens extras -- redução -- para aumentar o torque às custas da velocidade. Fonte: aliexpress.com"]

Os servos podem usar diversas tecnologias de motores subjacentes, desde motores de passo a motores AC e DC e até
mesmo motores pneumáticos ou hidráulicos. O que o faz ser um servo é a presença de um _encoder rotatório_ ou
simplesmente __encoder__, o sensor de posição, direção e velocidade que fica nas costas do motor. Pode ser um
encoder __absoluto__, que sabe a posição do ângulo de rotação a qualquer momento, ou um encoder __relativo__,
que detecta rotação, velocidade e direção, mas perde a informação de posição a cada vez que o motor for
desligado. Várias tecnologias diferentes podem ser usadas nos sensores, como magnética e ótica.

Além do encoder, o servo usa ainda um __circuito controlador__, eletrônica que interpreta os sinais do encoder
e reage de acordo, acertando posição, velocidade e torque. Os servos baseados em motor de passo incluem nesta
eletrônica a função de __driver__. Este circuito, especialmente nos motores de mais alta potência como os
usados em CNCs, é consideravelmente maior que um driver de impressora 3D doméstica. Nos pequenos, porém, ele
é até incluído no corpo do servo.

[[fotoelementosdeumservo]]
image::image127.png[image,width=545,height=499,align="center",title="Elementos de um servo pequeno. Perceba que apenas 3 fios entram no conjunto - um para neutro, outro para tensão de referência (Vcc) – esses dois energizam o conjunto - e o terceiro é o sinal: um simples PWM para dizer a posição desejada. O circuito de controle faz todo o tratamento do encoder incluindo corrigir o motor e não devolve ao microcontrolador que enviou o sinal nenhum dado. Fonte da foto em https://www.youtube.com/watch?v=v2jpnyKPH64"]

Por causa do encoder em sua construção, servos são mais longos que seus motores equivalentes.

[[servolongodoaliexpress]]
image::image128.png[image,width=501,height=405,align="center",title="Exemplo de um servo motor de passo NEMA23 de torque 20 kgf.cm para CNC com o respectivo controlador/driver. Fonte: aliexpress.com"]

No caso mais comum, o posicionamento de um servo é feito enviando ao seu driver um sinal PWM. Atipicamente,
no entanto, a posição máxima não compreende a um duty cycle de 100%; nos pequenos servos como o SG90, um PWM
de 20ms de pulso ("taxa de repetição" de 50Hz) tem sua posição mínima (-90°) com pulso de 1ms (ou seja,
duty cycle de 5%) e posição máxima (+90°) com pulso de 2ms, com a posição central sendo alcançada com PWM de
1,5ms. Os servos pequenos mais comuns de mercado funcionam desse modo, incluindo a amplitude de 180° dos ângulos
alcançados -- não completam uma revolução. Servos com encoders de revolução completa (360°) ou até maiores
existem mas são bem mais raros, usados para aplicações industriais.

Voltando ao caso considerado, velocidade percorrida de um pulso de PWM para outro varia de acordo com a diferença
dos ângulos. Se o motor estiver posicionado em 0° e for mandado um pulso para 20°, ele o fará em determinada
velocidade. Se ao invés disso for mandado um pulso para 60°, ele o fará mais rápido. Quão mais rápido,
depende das características do motor e driver. Por outro lado, pode não haver diferença de velocidade entre
mandar um comando para 60° e um para 80°. Novamente, isso será particular ao motor em questão.

Para uma leitura complementar sobre servos em português, recomendamos o site da Citisystems:
https://www.citisystems.com.br/servo-motor/[_https://www.citisystems.com.br/servo-motor/_].

.Servos de rotação contínua
os servos pequenos são baratos e incluem vários elementos úteis no conjunto:
não só o encoder, mas também o circuito de controle, as engrenagens de redução e ainda costumam vir com diferentes
braços. Devido a essa facilidade de aquisição, e à necessidade de motores estritamente controláveis que possam
girar livremente (mais de 180°) em projetos de __hobbyistas__, existe um procedimento muito comum de _remoção_
de elementos desse tipo de motor para que ele funcione em rotação contínua. Tal procedimento costuma consistir
de 3 etapas:

* Remoção dos obstáculos físicos, como pinos de segurança ou obstruções na rotação, que impeçam as
engrenagens de girar além dos 180°;
* Remoção ou desativação do encoder;
* Substituição da conexão do encoder por um elemento que retorne sempre o mesmo sinal, equivalente a uma posição
da rotação do motor (geralmente a de 0°).

Muitos profissionais consideram que tal conjunto nem mesmo pode ser denominado "servo", visto que a principal
característica de um servo, o uso do encoder, é removida. Além disso, existem certos elementos que minam a
precisão de tal dispositivo: replicar o sinal equivalente à posição central torna-se um trabalho de tentativa
e erro, geralmente com resistores ou potenciômetros; e devido à já mencionada variação de velocidades para
atingir o grau desejado em diferentes servo motores, a relação entre o sinal enviado e velocidade atingida não
será linear. Existem ainda "servos de rotação contínua" de mercado que mitigam tais problemas e podem ser
preferidos por sua previsibilidade.

Uma leitura complementar em inglês sobre servos de rotação
contínua, incluindo uma receita para implementá-los, está em
https://www.pololu.com/blog/24/continuous-rotation-servos-and-multi-turn-servos[_https://www.pololu.com/blog/24/continuous-rotation-servos-and-multi-turn-servos_].

==== Servos na impressão 3D

[NOTE]
.Antes, uma nota sobre os firmwares
====
alguns firmwares de impressora 3D, como o __Marlin__, têm suporte a
servos. Mas essa informação pode ser interpretada equivocadamente: o firmware não tem suporte a servos __no
lugar dos motores de passo__.
====

A utilização de motores de passo nas impressoras 3D FFF é praticamente universal; pouco se ouve falar
em impressoras que os usem e os microcontroladores de mercado não são preparados pra lidar com eles -- os
conectores enviam passos através dos _drivers_ para motores bipolares, não pulsos de PWM representando ângulos
de posicionamento. Até mesmo os firmwares podem levar a uma leitura errada do suporte a eles: o Marlin firmware
por exemplo suporta servos, __mas não no lugar dos motores de passo__. O suporte dele é de servos para elementos
extras de controle, como o que levanta e abaixa o sensor de nivelamento de mesa.

__Servos também não são milagrosos__: se os motores de uma impressora 3D são subdimensionados para a carga
que recebem, mesmo o mais sofisticado controlador de servo não será capaz de corrigir. E servos que tratam de
posicionamento preciso em atuadores lineadores são vendidos em tamanhos pré-fabricados para aquele comprimento, com
"endstops" internos; além de excessivamente caros, limitam bastante as dimensões possíveis de uma impressora 3D.

E, claro, tudo isso são desafios superáveis. Uma impressora 3D bem dimensionada que normalmente perderia
passos somente em ocasiões raras pode muito bem se beneficiar de um motor que consiga perceber e corrigir tais
casos automaticamente "em tempo real", e permanecer nas coordenadas certas dos eixos durante uma impressão
que geralmente demora horas. Na verdade, o mercado _maker_ novamente mostra que a criatividade que lhe é tão
característica não decepcionou; existem não uma, mas _*duas*_ soluções para o problema; adicionalmente,
ambas as soluções são open source! E ambas as soluções, ao invés de vender servos prontos, modificam os
baratíssimos NEMA17 de mercado utilizados em impressoras 3D, permitindo a economia do mercado de massa.

* *ustepper* +
mistura um driver _stepstick_ para dirigir o motor a um encoder rotatório de 12 bits com um
microcontrolador AVR, sendo parafusado ou imantado nas costas de um motor de passo NEMA17 comum. Pode ser ligado
diretamente a uma RAMPS ou microcontrolador equivalente por três fios de controle no soquete para drivers da placa. +
O sítio web do ustepper é http://www.ustepper.com/[_http://www.ustepper.com_] e o vídeo de introdução pode ser
visto no youtube: https://www.youtube.com/watch?v=1ebjdsye-PE[_https://www.youtube.com/watch?v=1ebjdsye-PE_]. No
momento da publicação deste livro, o preço do dispositivo, sem frete, é de 48 euros sem motor e 58 euros com motor.
* *mechaduino* +
equivalente ao ustepper porém com controle de torque e velocidade e microcontrolador mais poderoso,
podendo por isso funcionar em modo de malha fechada "verdadeira" e até dispensar os endstops. A instalação é
semelhante ao ustepper mas ele exige um procedimento de calibração bem detalhado nas instruções que acompanham
o produto. +
O sítio web do mechaduino é http://www.tropical-labs.com/[_http://www.tropical-labs.com_]
e a instalação, calibração e uso dele com RAMPS pode ser visto
em https://www.youtube.com/watch?v=T-pY4OZzvaU[_https://www.youtube.com/watch?v=T-pY4OZzvaU_]. No momento da
publicação, o dispositivo custa, sem frete, 49 dólares e com motor, 65 dólares.

[[desmontracaoustepper]]
image::image129.png[image,width=642,height=464,align="center",title="Mesmo depois de um empurrão desses, o ustepper consegue fazer com que o motor de passo recupere o lugar onde estava e continue a impressão normalmente. Vídeo em https://www.youtube.com/watch?v=oidiMjSqiBU"]

=== Microcontrolador

Já foi falado que o projeto _reprap_ que deu início às impressoras 3D FFF modernas nasceu junto com o Arduino. Os
primeiros rascunhos de impressoras 3D do projeto reprap em 2006 mostram projetos envolvendo microcontroladores PIC
com placas de expansão para o controle dos motores, sensores e temperaturas, dirigidas por um computador de mesa
(Generation 1 Electronics, ou Gen1). Em seguida, já se vê o planejamento do uso de um Arduino Uno, a Gen2, ainda
com uma série de placas de expansão. A geração 3^1^, de fevereiro de 2009, aproveita a natureza open-source
do arduino e cria o projeto de uma placa única com o microcontrolador ATMEGA644P e as _saídas de potência_
necessárias; essa placa já representa o começo da interação com a Makerbot (é a placa que iria ser usada em
sua primeira impressora, a CupCake) mas sofre do problema de ser uma placa microcontroladora sofisticada, difícil
de colocar para vender na época em que foi concebida e mesmo difícil de montar por _hobbyistas_ em eletrônica por
envolver soldagens industriais. Em 2010 já aparecia a Gen4, e abreviando a história, em 2011 tivemos a última
iteração oficial desta linha de placas microcontroladoras: a Geração 7, feita com o intuito de facilitar ao
máximo ao hobbyista de eletrônica montar em casa ou na garagem, com PCB de um lado e conectores soldáveis a mão.

[[eletronicagen7pitoresca]]
image::image130.jpeg[image,width=622,height=486,align="center",title="Eletrônica Gen7, com o pitoresco fundo escolhido para passar a idéia de poder ser montada nos lugares mais remotos. Fonte: http://reprap.org/wiki/Generation_7_Electronics"]

Um fato digno de nota é que a versão brasileira da Gen7 (Gen7BR2), com componentes mais fáceis de encontrar no
mercado brasileiro, feitas pelo grupo ReprapBR, constam no site oficial, e as primeiras versões das impressoras
3D de alguns fabricantes como a Sethi3D foram baseada nessa eletrônica, por ser uma placa "all-in-one",
tudo em uma, isto é, sem a acumulação de diversas placas de circuito interconectadas.

O que nos leva ao tópico seguinte: a Gen3 e suas sucessoras foram ótimas idéias tecnicamente -- concentrar toda a
eletrônica em uma única placa facilita a montagem, a manutenção e a modificação, mas para indivíduos e empresas
com maior know-how, ferramentas mais caras e sofisticadas e acesso a mercados de componentes eletrônicos. Para
interessados e hobbyistas, especialmente fora dos EUA, tal empreendimento era complexo e dispendioso, e é sempre bom
lembrar que os sites chineses de eletrônicos em 2010-2011 ainda não tinham pegado a tração que têm hoje. Essa
tração veio, inclusive, do outro projeto open-source de sucesso.

==== O Arduino Salvou a Impressão 3D Open-Source

Em outubro de 2010, o projeto Arduino lançou o __Arduino Mega__. Com o mesmo poder computacional do Arduino Uno,
mas mais memória e pinos (8 kiB de RAM ao invés de 2, 128 KiB de flash ao invés de 32, 54 pinos digitais ao
invés de 14 e 16 pinos de entrada analógica ao invés de 6), ele era _ideal_ para ser o cérebro de uma impressora
3D. Poder-se-ia pensar até em ser uma placa dedicada, que não dependesse da conexão ativa de um computador para
gerir a impressão e a pudesse conduzir desconectado dele.

O porém é que Arduino Mega resolve completamente o problema dos pinos e memória, mas continua sendo uma placa
microcontroladora de baixa potência. Em miúdos, isso quer dizer que os sinais em seu barramentos não excedem
40mA e ela não tem elementos de circuitos (FETs, relés, triacs, fusíveis e capacitores de alta potência)
que gerenciam as correntes típicas de uma impressora 3D -- que podem chegar a dezenas de ampères.

No entanto, a solução pra isso também é relativamente simples. Ao invés das várias placas de expansão
que se colocavam em um Arduino Uno ou um PIC (basicamente porque os pinos eram insuficientes e precisavam de
multiplexação para os diversos componentes de impressora 3D), uma única placa que pudesse controlar as correntes
para aquecimento de mesa e extrusor, correntes enviadas para os motores e ventoinhas e até organizar os pinos de
entrada para _endstops_ e sensores de temperaturas era suficiente.

E foi assim que nasceu, em 2011, a placa que, tendo se escorado no sucesso retumbante do Arduino Mega, até hoje
é a mais usada em impressoras open-source, e também em algumas em impressoras fechadas de mercado, a *RAMPS* --
sigla de **R**eprap **A**rduino **M**ega **P**ololu **S**hield. O nome especifica que é um "shield" (placa
adicional, encaixável nos pinos) para o _Arduino Mega_ especificamente e com componentes __Pololu__. Pololu é
a marca dos drivers de motores de passo acopláveis -- do tipo **A4988**.

[[kitrampsaliexpress]]
image::image131.jpeg[image,width=549,height=539,align="center",title="Um típico 'kit RAMPS' da China, que já vem com um clone chinês do Arduino Mega, 5 drivers de alta potência 'DRV8825', a RAMPS versão 1.4 e até um LCD grande com controles e entrada para cartão SD, tudo por menos de 30 (trinta) dólares incluindo o frete. Hoje em dia as placas 'tudo-em-um' começam lentamente a se tornar viáveis, mas ainda custam pelo menos o dobro do preço de um kit desses. Fonte: aliexpress.com"]

A placa RAMPS e os _drivers_ são open-source, e a página da RAMPS 1.4 do projeto reprap se destaca por ser uma
das páginas mais bem documentadas de projeto de hardware open-source até hoje^2^, com não só todos os diagramas
e arquivos necessários em formato __Eagle__, mas também com instruções detalhadas e comentadas que serviriam
de guia pedagógico para um curso de introdução à microeletrônica.

Na página também se encontra em formato vetorial o desenho que é referência para todos os _hobbyistas_ que vão
montar a sua primeira impressora 3D. Ele mostra, espacialmente, todas as conexões dos componentes da impressora 3D à
RAMPS, e como a RAMPS se conecta à energia (e em duas conexões de 12 V, uma que leva até 11A para a mesa, e outra
que leva até 5A para todo o resto da impressora). Um detalhe importante é que como é a RAMPS que vai gerenciar
a alta potência do conjunto, é ela que se liga à fonte, não o Arduino Mega em que está conectada. Através de
um diodo no meio do slot de driver do eixo X, o diodo D1, a alimentação é repassado para o Arduino, de modo que
ele é ligado em conjunto com o resto da impressora. Se a tensão[[FEITO_ramps]] a ser usada pelo conjunto não
for 12V, ou se a corrente for sujeita a interferências, esse diodo deve ser removido e a conexão deixada em aberto.

[[diagramadasligacoesdaramps]]
image::image132.png[image,width=586,height=836,align="center",title="Esquema de ligação dos fios da RAMPS 1.4 do site da reprap, traduzido para português. O 'SDRAMPS' na figura (um leitor de cartão SD) raramente é utilizado; normalmente se colocam nesses conectores e na fileira logo em frente um adaptador para ligação a um display LCD que já vem com leitor de SD embutido. Fonte da figura: reprap.org"]

==== O que um controlador de impressão 3D deve ter

Baseado no desenho esquemático das conexões da RAMPS, essa é uma informação que já podemos inferir. Basicamente,
os seguintes componentes são necessários (a lista não é exaustiva):

* **O microcontrolador ou microprocessador**. Este é o "cérebro" do controlador de impressão, onde roda o
código (__firmware__) que lê a entrada (o arquivo a imprimir), aciona os diversos dispositivos e permite o controle
interativo. No caso da RAMPS, é o _chip_ central do arduino em que ela está ligada que faz esse papel. Tal _chip_
é de 8 bits, mas existem dispositivos de 32 bits.
* **A entrada de potência**. É onde entra a energia que irá
para os elementos que serão energizados -- motores de passo, servo motores, cartuchos aquecedores. Geralmente
12V DC ou 24 V DC. A RAMPS tem duas entradas simultâneas para 12V, uma que aceita até 5A de corrente e uma que
aceita até 11A (essa vai para a mesa).
* **A entrada de energia dos componentes**. É onde entra a energia de
baixa potência que permite ao controlador ser ligado, assim como a energia de sinais digitais e dos elementos
passivos como termistores e endstops. Ela pode ser derivada da entrada de potência. No caso da RAMPS, ela tem
um regulador de tensão ligada à entrada de potência de 12V que liga o arduino conectado a ela. Em outros
__setups__, pode-se ter a entrada de energia ligada primeiro e energizando o microcontrolador; e este decidindo
se liga a entrada de potência ou não. Este modo proporciona economia e segurança: a fonte só é ligada quando
necessário. Quando se usa uma fonte de PC ATX para energizar a impressora, pode-se ligar um cabo da RAMPS até
uma entrada denominada "PSON" (Power Supply ON, ou "ligar fonte") para que o microcontrolador tenha o
poder de ligá-la ou desligá-la. Obviamente neste cenário o microcontrolador tem que ser energizado por uma
fonte de energia independente!
* **As saídas de energia dos componentes de aquecimento**. Cartuchos aquecedores
dos extrusores. Mesa e câmara aquecida, como são componentes que exigem potência muito maior, costumam estar
em trilhas separadas. São saídas reguladas por transistores (FETs). Na RAMPS, as saídas denominadas D9 e D10
são destinadas aos extrusores, e a D8 (de potência maior a transistor com dissipador maior), ligada à trilha
de 11A, para a mesa. Outros elementos de aquecimento possível são câmara de impressora e ventoinha aquecedora.
* *As saídas de energia das ventoinhas.* No caso a RAMPS a saída D9 pode ser usada para ventoinha ao invés
de um segundo extrusor, em outros controladores de impressão -- como a _RUMBA_ -- trilhas especiais de média
potência são reservadas para isso, permitindo a cada extrusor ter sua própria ventoinha controlada.
* **Saídas para os motores**. A RAMPS pode controlar até 5 motores independentes. Tipicamente os motores dos eixos X, Y e
Z mais dois extrusores, E0 e E1. A saída do eixo Z tem dois conectores para que se possam controlar dois motores
de forma idêntica, levando a contagem total a 6 motores. Outros microcontroladores podem ter mais saídas, como a
_Azteeg X3 Pro_ que tem 8 saídas de motores.  * *Pinos de entrada para sensores eletrônicos* como __endstops__,
__termistores__, _sensores de diâmetro de filamento_ e outros componentes.  * *Pinos de saída para dispositivos
microcontroláveis extras* como servo motor de sonda Z, bloqueador de filamento e outros componentes.
* **Drivers de motores, ou slots para drivers**. Os motores de passos precisam de drivers e eles podem estar soldados na placa
controladora ou, como na RAMPS, encaixáveis em slots. Como são entradas para drivers configuráveis, têm também
uma fileira de três pares de pinos para configuração dos drivers através de __jumpers__.
* **Entrada USB ou algum outro meio de comunicação com computadores de mesa**. Embora algumas impressoras tenham outros meios
como rede sem fio ou ethernet, a USB continua sendo o jeito mais popular por ser um dispositivo robusto, barato
e compatível com qualquer computador moderno. Esta comunicação pode ser usada de vários modos: impressão em
tempo real, transmissão do arquivo para imprimir, atualização de firmware, controle da impressora ou mudaça
de configurações.
* **Dispositivo de armazenamento (opcional)**: já é comum que as impressoras 3D de hoje em
dia venham com um slot para cartão SD ou pendrive USB. São geralmente usados para armazenar o "gcode" criado
pelos fatiadores de impressão e no caso dos microcontroladores ARM também usados para armazenar configurações.
* **Tela**. Podendo ser de uma simples tela LCD de caracteres a uma _touchscreen_ colorida, geralmente é mais
que apenas para apresentar informações, também permitindo entrada de dados. É o caso da _touchscreen_ (que
permite a interação através do toque) e também dos LCDs comuns disponíveis para a RAMPS, que vêm com um
botão giratório pressionável para interações com menus, um pequeno alto-falante para "bipes" e até
mesmo uma entrada para cartão SD embutida. Dois modelos especialmente populares são o _Reprapdiscount Smart
Controller_ (display de caracteres com 20 colunas × 4 linhas) e o _Reprapdiscount Full Graphics Smart Controller_
(display gráfico monocromático). Como são open-source, têm várias derivações compatíveis.  + Vale notar
que a maioria dos microcontroladores de impressão 3D, até mesmo os ARM de 100-120 MHz, não têm capacidade
suficiente para controlar uma tela gráfica colorida de alta resolução, por falta de memória para mapeamento
dos pontos e velocidade para gerenciá-la a contento. Existem no mercado, no entanto, telas "inteligentes"
(com processador próprio) que se comunicam de forma simplificada com o microcontrolador, fazendo elas mesmas o
gerenciamento de memória, gráficos e animações. Assim, mesmo o microcontrolador mais simples pode ter saída
gráfica elegante e até controles por toque.

[[controladoresdelcd]]
image::image133.png[image,width=642,height=375,align="center",title="Controladores de LCD comumente encontrados em repraps. À esquerda, o Smart Controller, que tem ainda um 'buzzer' para bipes, um botão giratório pressionável e um minibotão para reset. Perceba ainda que a ligação à RAMPS é feita através de um adaptador. À direita o 'Full Graphics' Smart Controller, maior e mais ‘quadrado’. Fonte: reprap.org"]

==== Um pouco mais sobre os drivers da RAMPS

Passamos sobre o funcionamento dos _drivers_ ao explicarmos motores de passo, mas é necessário também aprender a
lidar com eles na prática, inclusive torná-los prontos pra uso. Drivers que já são integrados na própria placa
microcontroladora são fáceis de configurar e usualmente o fato de serem configurados por software já faz com que
pelo menos parte da tarefa seja automática. Mas a RAMPS popularizou o padrão de drivers acopláveis e como isso
criou um mercado à parte, muitos outros microcontroladores de impressão 3D se preocupam em terem slots compatíveis.

Um dos primeiros drivers acopláveis foi o __Pololu stepper driver board__, modelo "A4983", rapidamente sucedido
pelo modelo "A4988" que adiciona proteção de corrente excessiva. Apesar de terem licença proprietária,
são um design simples de circuito e foram rapidamente sucedidas pela marca _Stepstick_ que produziu também um
modelo A4988 mas open-source, com o design em formato "Eagle".

Um driver terá certas características importantes que o definem. As mais importantes são:

* **Número de micropassos máximo**. Por exemplo, 16 micropassos no caso da A4988. O número de micropassos é
configurado pelo arranjo de três jumpers abaixo do encaixe do driver. Geralmente os três jumpers no estado
"conectado" equivalem ao número máximo de micropassos do driver, e outros arranjos a número menor de
micropassos.

[[jumpersdaramps]]
image::image134.png[image,width=642,height=469,align="center",title="Slots de extrusor (E0 e E1) em uma RAMPS e seus pinos de jumpers. Nos pinos para E1 (círculo 1), os jumpers estão todos desconectados, significando que não haverá micropassos - 1:1. Nos pinos para E0 (círculo 2), todos os jumpers estão conectados, configurando o driver para divisão de micropassos 1:16 se for um modelo A4988. Foto do autor."]

* **Corrente máxima que suporta**. É importante que o driver seja "compatível" com o motor usado. Alguns
motores podem exigir alta corrente como 1,8A para funcionamento (aparece nas especificações como corrente
máxima), e usar um driver que gerencie bem menos que isso -- como o TMC2100 cujo máximo é 1,2A -- pode levar a
componentes queimados. Mesmo quando o driver aguenta, ficar perto do limite pode fazer com que esquente bastante;
um A4988 aguenta até 2,0A, mas esquentará demais se ficar muito tempo entregando corrente alta (e no mínimo
terá que usar dissipadores de alumínio). Geralmente os drivers variam de capacidade de 1,2A a 2,5A de entrega.
* **Fórmula da corrente em função da Tensão de Referência**. Para encontrar o "ponto ótimo" de operação
de um driver com o motor ligado a ele, é bastante recomendado um procedimento de "afinação" que evite que o
driver entregue corrente demais para o motor, sobrecarregando e esquentando todo o conjunto, ou entregue corrente
de menos, perdendo passos. O procedimento tem que ser feito com a eletrônica energizada e conectada e, idealmente,
a corrente deveria ser medida.  +
Medir uma corrente em um circuito é um procedimento difícil. Envolve interromper
o circuito por onde a corrente passa e inserir um elemento medidor de baixa resistência elétrica para que ela
seja forçada a passar por ele.  +
No entanto, no caso do driver, existe um procedimento mais fácil. Uma tensão
que lhe é característica, ou *Tensão de Referência* ("**V~ref~**" - reference voltage), pode ser medida
com facilidade, e a corrente que nos interessa calculada a partir de uma __fórmula__. Esta fórmula aparece no
_datasheet_ do driver, mas quando se compra drivers de lugares baratos como a China, ele pode não ser facilmente
encontrável, e mesmo a marca do driver não facilmente identificável. +
Neste caso, ainda é possível saber a
fórmula para a tensão de referência. Os drivers do mesmo tipo (A4988, DRV8825, etc.) usam a mesma fórmula, só
variando um componente que é o **Sense Resistor**, ou **R~S~**. É um resistor SMD que aparece em dobro na pequena
plaquinha do driver, mas como os designs variam (até para o mesmo tipo), sua localização é variável. O valor
do R~S~ é indicado no __datasheet__, mas já estamos assumindo que não o temos em mão: portanto, o primeiro passo
é saber localizar, no driver, os componentes de interesse. O primeiro ponto de interesse é saber onde ficam os
"terras" do driver. É indicado na própria placa, na parte de baixo:

[[fotoa4988edrv8825_1]]
image::image135.png[image,width=642,height=332,align="center",title="Os terras dos drivers estão indicados em azul claro."]

Virando os drivers, podemos identificar o resto dos componentes nas placas:

[[fotodrv8825ea4988_1]]
image::image136.png[image,width=601,height=616,align="center",title="Os drivers mais populares usados em RAMPS, o A4988 (em verde, mas encontrado também em vermelho) e o DRV8825 (em roxo). Os pontos de 'terra' são os que achamos na foto anterior. O potenciômetro é o disquinho de metal giratório, indicado em laranja. E o R~S~ são os 'sense resistor"'' com uma lupa, conseguimos ler tanto para o DRV8825 quanto o A4988 o valor 'R100' que indica 100mΩ, ou seja, 0,1Ω. **Nota**: perceba que para a mesma orientação, o potenciômetro do DRV8825 aparece na parte superior e o do A4988 na parte inferior."]

No caso do DRV8825, implementações dele que usam _R~S~_ diferente de 0,1Ω são virtualmente inexistentes, mas
para o A4988 os valores de 0,05Ω e 0,2Ω são comumentes encontrados.

Vamos então, consultar os respectivos datasheets e encontrar as fórmulas para saber a _V~ref~_ desejada em função
da corrente máxima.

.DRV8825
O datasheet do driver pode ser encontrado na página da Texas Instruments:
http://www.ti.com/lit/ds/symlink/drv8825.pdf[_http://www.ti.com/lit/ds/symlink/drv8825.pdf_]

A fórmula da corrente -- chamaremos de __I~max~__ -- em função da _V~ref~_ e de _R~S~_ é: +
latexmath:[I_{max}=\frac{V_{ref}}{5 \times R_s}] +
Como sabemos que R~S~ é sempre 0,1Ω, substituímos: +
latexmath:[I_{max}=\frac{V_{ref}}{5 \times 0,1}=\frac{V_{ref}}{0,5}=V_{ref} \times 2] +
ou, colocando _V~ref~_ em função de _I~max~_: +
latexmath:[V_{ref}=\frac{I_{max}}{2}] +
Em outras palavras: se o DRV8825 está ligado a um motor que aceita corrente máxima de 1,5A,
a tensão medida em V~ref~ deve ser: +
latexmath:[V_{ref}=\frac{1,5}{2}=0,75V]

.A4988
O datasheet do driver é encontrado na página da Allegro:
http://www.allegromicro.com/\~/media/Files/Datasheets/A4988-Datasheet.ashx[__http://__www.allegromicro.com/~/media/Files/Datasheets/A4988-Datasheet.ashx]. O que procuramos é: +
latexmath:[I_{max}=\frac{V_{ref}}{8 \times R_{S}}] +
O que equivale a latexmath:[V_{ref}=I_{max} \times 8 \times R_{S}]. +
No caso de usarmos um motor com corrente máxima de 1,2A e o nosso driver acima com R~S~ de 0,1Ω, a fórmula fica: +
latexmath:[V_{ref}=1,2 \times 8 \times 0,1 = 0,96V]

Como colaboração de _André Ruiz_ do grupo ReprapBR, temos a seguinte tabela para consulta rápida de DRV8825
e A4988:

[[tabeladriverspng]]
image::tabela-drivers.png[width=1260,height=154,align="center"]

* Outros drivers: o A4988 e o DRV8825 são de longe os mais usados nas impressoras 3D atuais. Outros drivers existem
-- e com certeza mais aparecerão -- mas têm uso muito confinado. Por outro lado, isso facilita na fórmula de
__V~ref~__, visto que seu _R~S~_ não varia com a pouca disponibilidade. Uma tabelinha de alguns drivers de mercado
mais usados, e suas respectivas vantagens e desvantagens segue:

[cols=">1s,^1s,^3m,^1e,^5",options="header"]
|=================================================================================================================================================================================================================================================
|Driver		|Corr. máx.		|Fórmula		|Máx. Micropassos	|Uso
|A4988		|2,0A			|V~ref~ = I~max~ × 8 × R~S~	|16			|[small]##Driver mais popular e mais barato, facilmente encontrado nas lojas chinesas. Esquenta bastante quando perto da corrente máxima.##
|DRV8825	|2,5A			|V~ref~ = I~max~ / 2	|32			|[small]##Preço um pouco maior que A4988, mas consegue mais micropassos, roda um pouco mais frio e aguenta maior corrente.##
|LV8729		|2,0A			|V~ref~ = I~max~ / 2	|128			|[small]##Mais difícil de obter e mais caro que o DRV8825, tem como vantagens o silêncio e movimento extremamente suave, com 128 divisões de micropassos.##
|TMC2100	|1,2A			|V~ref~ = I~max~ / 1,9	|256			|[small]##A maior vantagem deste driver é a subdivisão extrema em 256 micropassos e o silêncio, mas a corrente máxima baixa limita bastante seu uso.##
|TMC2130	|2,0A			|V~ref~ = I~max~		|256			|[small]##Aceita picos breves de 2,5A. É altamente configurável e silenciosa.##
|RAPS128	|2,2A			|V~ref~ = I~max~ / 2	|128			|[small]##Criado junto à placa RADDS para Arduino de 32 bits, tem uso popular em placas ARM e se destaca por um potenciômetro extra para configuração manual do decaimento e também por vir com um dissipador gigante.##
|SD6128		|2,2A			|V~ref~ = I~max~ / 2	|128			|[small]##Semelhante à RAPS128 sem o potenciômetro extra.##
|=================================================================================================================================================================================================================================================

Vale notar que quando a divisão de micropassos é 128 ou superior, somente microcontroladores mais poderosos
que os usados em Arduinos de 8 bits conseguirão aproveitar tais vantagens. Uma curiosidade sobre os drivers é o
recurso frequentemente anunciado de ser "silencioso"; isso é algo que se obtém deixando as frequências de
trabalho fora do espectro audível (maior que 20 kHz, embora acima de 17 KHz já seja normalmente suficiente).

===== Ajustando manualmente a V~ref~ dos drivers

Uma vez que a RAMPS esteja montada, com os motores ligados, os drivers encaixados e o firmware carregado, deve-se
ligá-la e pelo LCD ou por algum print host, tentar fazer os motores girarem. Os motores não precisam estar ligados
nos eixos; pode ser até melhor testá-los sem estarem montados. Tome especial cuidado no encaixe de drivers A4988
e DRV8825, pois eles têm o potenciômetro em sentido contrário. Veja a foto abaixo para ter a referência.

Se já sabemos a _V~ref~_ que precisamos, devemos procurar chegar o mais próximo dela __girando o potenciômetro__. Deve
ser usada uma chave de fenda ou philips **de plástico ou cerâmica** para isso, pois uma que conduza pode gerar
faísas ou contatos inesperados. Para o sentido **horário**, a tensão medida __*aumenta*__; para o sentido
**anti-horário**, ela __*diminui*__. Girar demais o potenciômetro faz ele cair numa "zona morta" em que a
tensão medida flutua aleatoriamente, basta continuar girando até a zona em que ela volta a mudar linearmente.

Um multímetro será usado. É necessário colocar no ajuste de tensão direta mais próximo de 1V. A ponta de
prova positiva -- *vermelha* -- deve ser encostada no **parafuso do potenciômetro**. A ponta de prova negativa
-- *negra* -- deve ser encostada em *algum Terra (GND)* conforme visto em foto anterior. O melhor é escolher o
terra mais distante do potenciômetro, para evitar curtos acidentais. Alternativamente, a ponta de prova negativa
pode ser usada no *negativo da fonte* ou das *entradas da RAMPS* também.

[[ajustandovref1]]
image::image138.png[image,width=642,height=398,title="Procedimento de ajuste de tensão dos drivers em uma RAMPS. Para simplicidade ela é mostrada desconectada e desligada, mas o procedimento deve ser feito a quente com os motores ligados. Usam-se multímetros com as pontas de prova nos lugares indicados e um instrumento de plástico ou cerâmica para girar o potenciômetro e ajustar a tensão. Os valores mostrados nos multímetros correspondem aos exemplos ilustrados anteriormente. Durante o procedimento de ajuste, é aconselhado não deixar a regulação alta por muito tempo pois há perigo de sobreaquecer e queimar os drivers."]

*A chave de fenda ou philips de plástico* ("ceramic screwdriver" nos sites de compra) pode ser difícil de
adquirir. Uma alternativa é imprimir em PLA uma substituta.

[[driveralignerpatola]]
image::image139.png[image,width=642,height=475,title="Ferramenta plástica impressa para alinhamento do potenciômetro (trimpot) -- versões em fenda e em philips, com cabo fino ou cabo grosso para maior firmeza, disponibilizado pelo autor deste livro. Baixável em https://www.thingiverse.com/thing:1080946"]

===== Modo de decaimento: quando e como ajustar

**Modos de decaimento** de passos são os mesmos que vimos ao tratar de motores de passo: modo rápido (__fast
decay mode__), modo lento (__slow decay mode__) e modo misto (__mixed decay mode__).

Para contextualizar a dificuldade de mudá-los, é bom lembrar que o início do movimento reprap foi marcado
pela adesão de _hobbyistas_ e estudantes de eletrônica à tarefa de combinação e experimentos com motores
e dispositivos diversos de mercado, com até mesmo os drivers vindo desmontados, devendo terem os componentes
soldados na minúscula plaquinha de circuitos. Ao mesmo tempo, os revendedores e produtores interessados no mercado
se preocupavam em expandir o mercado exigindo cada vez menos conhecimento para se colocar uma impressora 3D em
funcionamento, exigindo menos experimentos e tentativas.

Componentes hiper-especializados como os drivers, portanto, deveriam ser vendidos de fábrica com ajustes
consideravelmente universais e perfeccionados para os componentes com os quais se conectam. A mudança desses
_defaults_ seria tão rara que não valeria a pena mantê-los configuráveis. E os hobbyistas interessados nisso
sempre poderiam comprar seus próprios componentes desmontados para soldar e decidir por outros defaults.

Os modos de decaimento dos drivers passaram por esse processo. A maioria dos drivers hoje em dia funciona por
default com um algoritmo de "auto-seleção", uma heurística que analisa sinais atuais e passados e reajusta
o modo de decaimento de acordo.

Mesmo assim, pode haver ocasiões em que seja preferível mudar o _default_ dos drivers para algo que funcione
mais de acordo com o que se deseja. Algumas situações possíveis -- que são as que fogem do usual -- são:

* Tensão da fonte diferente de 12V- com uma fonte de maior tensão, como 24V ou 35V, para a entrega da mesma
potência é necessário menos corrente no circuito. Isso pode fazer com que o decaimento precise de ajustes,
especialmente no que concerne à entrega de corrente. Um exemplo é com o driver DRV8825 em máxima divisão de
micropassos (1:32) e motor de baixa corrente; ele pode perder passos no modo default de auto-ajuste, e pode se
beneficiar de ser colocado em modo de decaimento rápido.
* Microcontrolador ARM -- tanto por trabalharem em
tensão nominal default de 3,3V quanto por comumente usarem drivers mais raros com maior divisão de micropassos,
tais microcontroladores podem precisar de ajustes finos para as potências, correntes, frequências e tensões
com que trabalham.
* Grande volume de impressão -- maior volume de impressão implica em motores percorrendo
distâncias contínuas maiores, com a aceleração sendo considerável. A suavidade do movimento, assim como a ação
de contraposição à inércia sofrem considerável influência do decaimento.
* Grande carga (como um extrusor
pesado) ou alta velocidade -- o decaimento poderá favorecer um caso ou outro, raramente os dois. Decaimento
inadequado em ambos os casos causa o efeito de __ringing__, ou "ziguezagues" nas linhas de impressão.

Dito isto, mudar esse __default__, na maioria dos drivers, exige mexer nas soldas do circuito, geralmente criar
uma ligação (direta ou com resistor) entre um pino de configuração e uma tensão de referência (Terra/GND ou
Vcc/5V). É fora do escopo entrar nas configurações de cada driver (e isto pode ser encontrado em seus respectivos
datasheets), mas é possível citar dois exemplos:

* A4988. O driver funciona por padrão em auto-seleção (misto ou lento). A mudança desta configuração
se obtém com o pino ROSC -- Region Orthogonal Signal Correction, normalmente colocado em Vcc. Com o pino
soldado diretamente com o Terra, o modo misto é usado quando há divisões de micropassos e o modo lento é
usado quanto há passos inteiros (1:1). Com o pino ligado a um resistor ao terra, auto-seleção com o tempo
desligado (off-time) variável de acordo com o resistor. Há uma variante do A4988 que tem o off-time regulável
por um segundo potenciômetro: http://reprap.org/wiki/G3D_driver[_http://reprap.org/wiki/G3D_driver_]. Um
dos posts referenciais sobre o assunto, do usuário __nophead__, trata desta configuração do A4988:
http://hydraraptor.blogspot.com.br/2012/04/stepstuck.html[_http://hydraraptor.blogspot.com.br/2012/04/stepstuck.html_]
* DRV8825. O driver tem um pino "DECAY" especialmente pra isso, geralmente em GND (terra) para modo
misto. Ligando-se o pino a Vcc, ele passa a atuar em modo de decaimento rápido.

[[gambiarrapinodecay]]
image::image140.jpeg[image,width=509,height=417,align="center",title="Pino 'DECAY' de um driver DRV8825 ligado ao pino M2 para receber 5V e deixar selecionado o modo de decaimento rápido ('fast decay'). Fonte: http://www.morgan3dp.com/stepstuck-revisited-drv8825/"]

==== Visão retroativa é 20/20: os defeitos da RAMPS

Não há dúvidas que para sua época a RAMPS solucionou um bocado de problemas de forma genial, de custo a formas
de controle. No entanto, olhar para o passado de forma crítica sempre é mais fácil que, no presente, prever o
que pode dar errado no futuro. Hoje, os defeitos de projeto da RAMPS estão mais visíveis que nunca e ela parece
cada vez menos adequada para novos projetos de impressora 3D. Alguns desses defeitos são:

* *Os _termofusíveis amarelos_* -- para proteção contra superaquecimento, a RAMPS tem um termofusível menor
MFR500 para a via de 5A e outro termofusível maior MFR1100 para a via de 11A. Esses fusíveis, no entanto,
são tremendamente problemáticos: são grandes e frágeis, frequentemente atrapalhando a fiação e quebrando na
perninha de conexão; são propensos eles próprios a superaquecimento e até combustão, especialmente o MFR1100
que só aguenta até 16V; são difíceis de encontrar no mercado brasileiro. Muitos _hobbyistas_ compram RAMPS
prontas pelo preço e simplesmente removem esses termofusíveis, trocando por fusíveis comuns de corrente ou até
mesmo fazendo simplesmente a conexão direta. A versão 1.4.2 da RAMPS os troca por fusíveis de automóveis.
* *Incapacidade para 24V* -- a ausência de um componente que possa energizar o arduino em 24V, o projeto original
com capacitores eletrolíticos de 16V e o já citado termofusível MFR 1100 são grandes impeditivos para se usar
sem modificações a RAMPS em 24V, uma opção de fonte cada vez mais popular devido ao melhor aproveitamento
de potência. O problema dos capacitores tem sido resolvido com a maioria dos vendedores, mesmo os chineses de
baixo custo, já vendendo a placa com capacitores de 35V, mas ainda é preciso ter tal critério para escolher
o produto.
* *A orientação dos drivers* -- a RAMPS carece de conectores direcionados para conexão dos drivers
de motores de passos. É muito fácil conectá-los ao contrário, o que leva a que queimem. O problema é agravado
por os drivers mais populares, A4988 e DRV8825, terem o potenciômetro em lados diferentes da placa e parecerem
"invertidos".
* *A orientação dos conectores de endstop* -- um conector de endstop colocado ao contrário
pode fazer a placa queimar.
* *O conector de energia é subdimensionado* -- a RAMPS tem uma trilha de até 5A e
outra de até 11A; o conector MODU verde de 4 vias onde a energia delas é ligada, no entanto, é projetado para um
máximo de **10A**. Ainda que geralmente 11A esteja dentro da "margem de erro" do conector, não são raros os
casos em que este conector "derrete" por superaquecimento.
* *Pinos de conexão dos motores muito estreitos* -- existem variações de diferentes espessuras dos conectores de motores bipolares. Com o estreito espaçamento
e disposição dos conectores na placa, alguns conectores simplesmente não se encaixam se não forem lixados ou
cortados. Esse problema é especialmente contundente nas duas conexões em paralelo para os motores do eixo Z.
* *Conector superdimensionado para ventoinha* -- a RAMPS tem apenas um conector para ventoinha microcontrolável
e o usuário tem que escolher entre usar tal conector para o aquecedor de um segundo _hotend_ ou a ventoinha. Isso
quer dizer que extrusores duplos em RAMPS não terão ventilação controlada no bico. A potência necessária para
acionar uma ventoinha é menor que a necessária para esquentar um hotend; outras placas têm saídas de baixa
potência extras para ventoinhas.
* *Versão "congelada" na 1.4* -- embora não seja inteiramente verdade
(a versão mais nova "oficial" no momento da publicação deste livro é a 1.4.2, com pequenas melhorias),
a versão 1.4, de 2011, é a quase universalmente vendida a preços baixos.
* *Dependente do Arduino* -- ao
mesmo tempo uma vantagem -- por usar um componente facilmente encontrável -, é também uma desvantagem por
envolver montagens e por ter dois componentes diversos que podem acarretar problemas. Existem placas que juntam a
funcionalidade de um shield ao microcontrolador arduino, como a RUMBA e a Sethi3D CPU.
* *Subdimensionada para os tempos atuais* -- microcontrolador de 8 bits lento (16 MHz), saída para apenas dois extrusores, falta de ethernet
ou wifi e outros problemas semelhantes são decorrentes do baixo custo e da ṕoca em que foi concebida. Hoje já
temos controladores muito mais sofisticados, com telas coloridas e capacidade até de fatiar diretamente peças 3D.

[[problemasramps1]]
image::image141.png[image,width=642,height=448,align="center",title="Alguns dos problemas descritos. *1* - conector de ventoinha ou extrusor (D9); *2* - termofusíveis; *3* - conectores simétricos, sem indicação de orientação; *4* - pinos de motores estreitos; *5* - pinos de endstops sem orientação clara e sem proteção contra inversão."]

==== Outros controladores de impressão: a ascensão dos ARM

Apesar de todos defeitos da RAMPS, sua popularidade continua alta e o preço de um conjunto completo com arduino,
LCD e drivers é quase imbatível comparado a outras eletrônicas. E pra sedimentar ainda mais essa dominação
de mercado, como foi uma das primeiras eletrônicas a surgir para repraps, a quase totalidade dos _firmwares_
open-source disponíveis, isto é, o software que controla a eletrônica, foi feita para ela. Este tipo de
software, conceitualmente simples a princípio, é no entanto extremamente crítico: ele controla eletronicamente
elementos de temperatura, mecânica, velocidade e torque de um dispositivo mecatrônico em um trabalho que dura
horas. Qualquer pequeno deslize no código pode ser responsável pela falha (e consequente perda financeira) de
todo este trabalho, sem contar os riscos reais de estragar fisicamente o equipamento ou até causar incêndios
e outros acidentes. A escolha de um _firmware_ maduro, estável e extensivamente testado não é, portanto, um
luxo, mas uma necessidade. Acrescente-se a isso que, apesar da baixa capacidade de processamento de um arduino,
tais firmwares ganharam recursos sofisticados e complexos que não são fáceis de reproduzir em controladores de
impressão mais avançados mesmo tendo o código-fonte (em grande parte por haver muito código de baixo nível).

A maioria dos controladores de impressão realmente viáveis como alternativa à RAMPS, portanto, são compatíveis
com os firmwares desenvolvidos pra ela, tendo pouco mais a oferecer que proteções eletrônicas, número maior
de saídas ou a comodidade de um controlador unitário. Nomes como __Melzi__, __Gen7__, __Azteeg X3__, __RaMBo__,
__RUMBA__, _Sanguinololu_ são placas "tudo-em-um" baseadas em arduino de 8 bits preparadas para receber os
mesmos firmwares do Arduino com RAMPS. Certamente que têm suas vantagens e seus fãs -- mas não representam um
salto tecnológico necessário para o "próximo nível" das impressoras 3D. Em especial, para impressoras 3D
estilo delta, o cálculo de transformação dos eixos nesses processadores de 8 bit é tão lento que efetivamente
limita a velocidade máxima que os motores podem ter.

A situação tem mudado mais recentemente, porém, com a crescente popularização dos microcontroladores baseados
na arquitetura ARM de 32 bits. Os ARMs são baratos, poderosos, eficientes e fáceis de encontrar no mercado,
mas sua eficiência vem em parte de funcionar em baixas voltagens, especialmente 3,3V. O Arduino Mega usa 5V como
tensão de referência, e muitos dos dispositivos que funcionam em 5V teriam que ser adaptados ou substituídos
para funcionar a contento em controladoras baseadas em ARM.

E isto já havia sido tentado desde 2013, começando com shield estilo RAMPS open-source RAMPS-FD para o Arduino Due,
um Arduino com microcontrolador ARM Cortex-M3 de 84 MHz, e mais tarde a open-source SMART RAMPS e a proprietária
RADDS. Nunca tiveram muita tração de mercado no entanto porque os designs tinham falhas e o firmware que as suporta
(repetier firmware) era relativamente bugado para ARM. A placa Duet com o mesmo microcontrolador, suportada pelo
_Firmware Reprap_ de Adrian Bowyer e pela respeitada _Think3DPrint3D_ chegou a ter alguma tração e tem opções
que realmente a diferenciam, como expansões e rede.

Muitos outras tentativas de mercado apareceram no período entre 2012 a 2014, com algumas sendo até baseada
em ARMs de maior potência, como os shields _BeBopR_ e __Replicape__, feitos para a placa open-source da Texas
__Beaglebone Black__, que roda Linux em um ARM poderoso com 512 MB de RAM.

A mudança, no entanto, veio mesmo com o firmware _Smoothie_ e a placa para o qual foi feita, a __Smoothieboard__,
que leva um processador ARM Cortex-M3 de 120 MHz. Ambos open-source, com a Smoothieboard tendo de fábrica
ethernet e cartão SD e o Smoothie (às vezes chamado de __Smoothieware__) tendo nascido no projeto reprap,
respeitando os padrões e recomendações de gcode deste. Sendo um firmware fácil de obter, de entender e de
configurar, ele garantiu o sucesso da eletrônica, e o que cristalizou o projeto viável mundialmente foram os
clones de baixo preço que surgiram. Nomes como **AZSMZ**, **MKS SBASE**, *Azteeg X5 Mini* e *Sunbeam 2.0* já
têm ganhado notoriedade pela compatibilidade com o Smoothieware e muitas impressoras -- especialmente deltas
-- sendo construídas em cima deles. Infelizmente, as chinesas (AZSMZ e MKS SBASE) têm sido bastante criticadas
porque apesar de baseadas em design open-source não liberaram os fontes de seus designs e se encontram, atualmente,
em uma situação de antagonismo com a comunidade e revendedores da Smoothieboard.

[[smoothieboardemkssbase]]
image::image142.png[image,width=642,height=326,align="center",title="À esquerda, a Smoothieboard original, open source. À direita, a clone chinesa compatível e proprietária MKS Sbase v1.3. A smoothieboard usa drivers soldados à placa do tipo A5984, a MK Sbase usa DRV8825; ambos têm divisões de até 32 micropassos"]

[NOTE]
.Maiores referências sobre outros controladores, especialmente os baseados em ARM, podem ser encontradas nos seguintes endereços online:
====
* http://reprap.org/wiki/List_of_electronics[_http://reprap.org/wiki/List_of_electronics_]
-- a lista básica dos microcontroladores do projeto reprap e suas características.
* http://reprap.org/wiki/Comparison_of_Electronics[_http://reprap.org/wiki/Comparison_of_Electronics_]
-- uma tabela comparativa de tais controladores.
* Controlador open-source Duet:
http://www.reprap.org/wiki/Duet[_http://www.reprap.org/wiki/Duet_] e https://www.duet3d.com/[_https://www.duet3d.com/_]
* Smoothieboard e Smoothie: http://reprap.org/wiki/Smoothieboard[_http://reprap.org/wiki/Smoothieboard_]
e http://smoothieware.org/[_http://smoothieware.org/_]
* Comparação entre _Duet_ e __Smoothieboard__:
http://forum.seemecnc.com/viewtopic.php?f=111&t=9205[_http://forum.seemecnc.com/viewtopic.php?f=111&t=9205_]
* AZSMZ e MKS SBASE podem ser encontradas nos sites chineses para venda.
* Muitas dessas marcas têm também
placas baseadas em arduino de 8 bits, como a Azteeg X3 e MKS Gen. Verifique cuidadosamente para não comprar
gato por lebre.
* Muitas vezes é difícil mudar uma impressora totalmente conectada e funcional para um novo
controlador de impressão. Soluções de mercado para facilitar essa transição existem, como as réplicas da
RAMPS que funcionam com Arduino Due ao invés de Arduino Mega. No entanto, se a dificuldade de transição se
encontra não no firmware mas nas conexões físicas e drivers, uma boa maneira de fazer a transição pode
ser trocar o Arduino -- e colocar um microcontrolador que encaixe perfeitamente na RAMPS comum, reusando
as conexões. Essa é a idéia do controlador "Re-ARM" da Panucatt, que roda o _Smoothieware_ e oferece
pinos compatíveis com 5V, um microcontrolador de 32 bits de 100 MHz e várias opções de conectividade.
====

[[screenshotrearm]]
image::image143.png[image,width=642,height=421,title="O &quot;Re-ARM&quot;, um microcontrolador que pode substituir o Arduino Mega do seu conjunto RAMPS + Arduino. Disponível em http://www.panucatt.com/Re_ARM_for_RAMPS_p/ra1768.htm"]

* Muita confusão vem do fato que um embarcado ARM popular de hobbyistas, o __Raspberry Pi__, é comumente visto
conectado ao hardware de impressoras. A confusão vem de supor que ele está servindo como o controlador de impressão
acionando motores, aquecedores, etc., quando na verdade ele está agindo como se fosse um computador comum, enviando o
trabalho de impressão pela USB ao controlador da impressora. Existem diversos softwares para o Linux do Raspberry Pi
(print hosts) que permitem isso, como o octoprint, o astroprint e o repetier server. O Raspberry Pi é um embarcado
potente mas com limitações eletrônicas que dificultam seu uso como controlador de impressão, como a falta de
um relógio de hardware, de entradas analógicas e de PWM de hardware. Ainda assim, existe um _firmware_ feito
especialmente para este embarcado que utiliza de diversos truques de software para contornar estas limitações, o
__Printipi__, disponível em https://github.com/Wallacoloo/printipi/[_https://github.com/Wallacoloo/printipi/_]. No
momento da publicação deste livro, o software ainda se encontra em estado experimental e está há mais de um
ano sem atualizações.

==== Firmware

Já conhecemos a eletrônica, mas o que roda nela? No Universo Maker, o *Arduino* já é velho conhecido, assim como
o seu ambiente de desenvolvimento que leva o mesmo nome: um IDE simples feito em Java inicialmente para a extensão
também em Java chamada "Processing", mas readaptada para funcionar com um dialeto de C++ que compila para o
código de máquina do chip microcontrolador que roda nos arduinos de 8 bits, o "Atmel AVR". A instalação
padrão do IDE Arduino vem com uma série de bibliotecas que encapsulam funções como ajustar sinais de pinos,
receber sinais, gerar frequências, enviar e receber dados simples, escrever em um LCD e outras tarefas. O IDE
também é adaptado para usar de forma transparente o compilador C++ e enviar de forma fácil o código compilado
para a placa Arduino. Esta, por sua vez, vem preparada com uma conexão USB que simula uma porta "serial"
(envio e recepção simples de dados), e é pré-gravada de fábrica com um firmware mínimo, chamado bootloader,
que fica escutando nesta porta serial simulada por envios de programas de usuários, e quando a porta não está
sendo usada deixa tais programas sendo executados.

Esse modo de funcionamento simples e direto, que elimina quase todos os obstáculos ao aprendizado e à "mão
na massa" para que mesmo o usuário mais leigo simplesmente ligue a placa na USB de seu computador, chame o IDE
Arduino e escreva o código que quer ver funcionar, sem nenhuma das complexidades tradicionalmente envolvidas em
programação de microcontroladores. Para fazer um led piscar, nada de usar um JTAG em pinos especiais, configurar
flags e fusos de um IDE pesado e cheio de menus, de ficar o dia inteiro lendo o manual da plaquinha. Ao invés
disso, basta apertar um botão:

[[screenshotarduino1]]
image::image144.png[image,width=642,height=509,align="center",title="A IDE Arduino com um programa para piscar o LED embutido da plaquinha microcontroladora. Pressionando o botão da setinha (em amarelo), o programa é enviado pela USB e imediatamente começa a executar."]

Já dissemos que a história da reprap é entremeada com a do Arduino, e isso se estende ao IDE. IDE que foi e
continua sendo um alvo predileto de reclamação por profissionais que mexem com embarcados, dada sua simplicidade:
dizem não ter recursos avançados de edição, de não oferecer completação de código, de esconder detalhes
de implementação e, sobretudo, de não ser propícia para programas complexos de vários módulos e cabeçalhos,
capotando sob seus próprios defeitos após as primeiras centenas de linhas de código.

[[screenshotarduino2]]
image::image145.png[image,width=642,height=475,align="center",title="O firmware Marlin no momento da publicação, com 231 arquivos e 88 mil linhas de código. Algo impossível de acontecer, segundo os detratores da IDE e do microcontrolador Arduino."]

Tais acusações não são totalmente desprovidas de mérito: a simplicidade do IDE Arduino realmente pesa contra a
escrita de código muito complexo. O fator faltante aqui foi considerar o peso do ecossistema open-source: muitas
mentes criativas trabalhando em paralelo conseguem tratar grandes complexidades. A popularidade do Arduino trouxe
o público, e dentre esse público muitos eram desenvolvedores.

No Início do projeto reprap, o software que rodava no Arduino ("firmware") nem mesmo tinha um nome muito definido:
era chamado de "Reprap Gcode Interpreter" ou "Reprap Firmware", e tratava-se de um executador online de
comandos de controle numérico recebidos pela USB do arduino para movimentações da impressora. Naturalmente, com a
diversificação característica de projetos open-source, ficar mexendo em uma dúzia de arquivos de código-fonte para
montar uma impressora levemente diferente começou a tornar-se aborrecido e limitante, e os projetos mais elaborados
começaram a surgir, sendo mais fáceis de configurar e também agregando mais recursos como o suporte a LCD.

Como na história do extrusor AJGW, o aparecimento e evolução desses softwares envolveu muitas instituições
e mentes brilhantes, cada uma dando suas colaborações. Pode-se dizer que a história começou no controlador
genérico de máquinas CNC __*grbl*__, cujo código foi disponibilizado a partir de 2009, com o desenvolvimento
comunitário acontecendo a partir de 2011. Em paralelo a isso, em 2010 uma equipe de 6 pessoas na Universidade de
Purdue desenvolveu o conjunto __*Hydra-MMM*__, consistendo de um firmware pra Arduino e um Print Host em java. No
mesmo ano, o reprapper _Tonokip_ adaptou o código do firmware do Hydra-MMM para se adequar melhor ao padrão reprap
e criou o __*tonokip firmware*__, que no ano seguinte deu origem ao _*Sprinter*_ de Kliment e logo em seguida
o código foi reutilizado pela empresa alemã Hot-World GmbH com a marca _Repetier_ (__*Repetier firmware*__),
que também é usada em um servidor de impressão (Repetier Server) e um print host (Repetier Host). Até hoje,
o _Repetier Firmware_ é um dos dois firmwares mais utilizados em controladores de impressão baseados em arduinos
de 8 bits, com uma versão funcional em Arduino Due (32 bits).

O outro firmware mais utilizado, o __*Marlin Firmare*__, surgiu de uma combinação do _grbl_ com o __Sprinter__,
tendo sido criado em agosto de 2011 com suporte financeiro da empresa Ultimaker. Tendo o desenvolvimento mais
distribuído que o Repetier, também tem mais forks (derivações), como o cada vez mais conhecido __*Marlin
Kimbra*__. Todos os softwares citados usam a licença de software livre GPL (GNU Public License) versão 3, da
Free Software Foundation, e ocorre troca de idéias e até de código entre eles.

Digno de menção ainda é o firmware original __*Teacup*__, ainda desenvolvido (desde 2010) mas bem menos utilizado
que os anteriores. É licenciado sob a GPL versão 2 e também tem uma versão para ARM.

O __*Smoothieware*__, firmware mais utilizado em ARM, foi criado em 2012 a partir também do _grbl_ e, como o Repetier,
é mantido por uma empresa com desenvolvedores contratados, mas aceitando contribuição comunitária. Licenciado
sob a versão 3 da GPL.

===== Configuração do firmware: o legado de desenvolvedores

O firmware vai carregar consigo a informação de toda a parte mecânica da máquina, que peças funcionam e como,
e quais recursos estão ativados. Por exemplo, é no firmware que se configura quantos extrusores a impressora tem,
se ela tem mesa aquecida, quais são as dimensões máximas, que sistema de eixos usa (delta, cartesiana, etc.),
se terá autonivelamento e com que tipo de sensor, quantas voltas de motor equivalem a quantos milímetros de
movimento, qual a velocidade máxima que ela aceita e muito mais. Por isso, o firmware tem que ser configurado.

Os procedimentos de configuração do _Repetier firmware_ e do _Marlin_ foram bastante simplificados se
comparados ao reprap firmware original: ao invés de editar uma dúzia de arquivos do código-fonte, eles
centralizam a configuração em um único arquivo de cabeçalho, que passa a funcionar como um arquivo-texto de
configuração, e com comentários dizendo o que significa cada uma das configurações. Este arquivo tem o nome de
**Configuration.h**. Por exemplo, no Marlin, para definir a linguagem mostrada nos LCDs, você tem uma seção assim:

[source,cpp]
----------
//
// LCD LANGUAGE
//
// Here you may choose the language used by Marlin on the LCD menus, the following
// list of languages are available:
// en, an, bg, ca, cn, cz, de, el, el-gr, es, eu, fi, fr, gl, hr, it,
// kana, kana_utf8, nl, pl, pt, pt_utf8, pt-br, pt-br_utf8, ru, tr, uk, test
//
// :\{ 'en':'English', 'an':'Aragonese', 'bg':'Bulgarian', 'ca':'Catalan', 'cn':'Chinese', 'cz':'Czech', 'de':'German', 'el':'Greek', 'el-gr':'Greek (Greece)', 'es':'Spanish', 'eu':'Basque-Euskera', 'fi':'Finnish', 'fr':'French', 'gl':'Galician', 'hr':'Croatian', 'it':'Italian', 'kana':'Japanese', 'kana_utf8':'Japanese (UTF8)', 'nl':'Dutch', 'pl':'Polish', 'pt':'Portuguese', 'pt-br':'Portuguese (Brazilian)', 'pt-br_utf8':'Portuguese (Brazilian UTF8)', 'pt_utf8':'Portuguese (UTF8)', 'ru':'Russian', 'tr':'Turkish', 'uk':'Ukrainian', 'test':'TEST' }
//
#define LCD_LANGUAGE en
----------

As linhas em cinza são "comentários" de código em inglês dizendo os valores possíveis para as configurações e
a linha colorida é a definição (#define) de um valor - a linguagem usada no LCD. Se quisermos mudar o valor de "en" (inglês) para pt-br (português brasileiro), basta mudar a linha para:

[source,cpp]
----------
#define LCD_LANGUAGE pt-br
----------

Até aí, não parece muito difícil. No entanto, algumas configurações serão bem difíceis de entender para
o usuário novato e o fato de serem em inglês também não ajuda; algumas descrições pedem que sejam vistas
referências em outros arquivos e, por fim, para mudar esses valores o usuário deve abrir o arquivo de projeto
do firmware no IDE Arduino e, depois de mudar o que precisa, compilar e subir para o microcontrolador ligado à USB.

[scrreenshotconfighmarlin1]
image::image146.png[image,width=642,height=490,align="center",title="A configuração do Marlin. Ela é feita editando dois arquivos: o `Configuration.h` para o básico e o `Configuration_adv.h` para ajustes mais avançados. O manual de configuração fica em http://marlinfw.org/docs/configuration/configuration.html"]

O _Repetier Firmware_ funciona de forma semelhante ao Marlin: ele usa um único arquivo `Configuration.h` que o usuário
deve editar para configurar a sua impressora. No entanto, a Hot-World GmbH procurou atingir um público mais leigo
e tem, na página oficial do firmware, um configurador web que permite que ao invés de editar o cabeçalho, o
usuário configure toda a placa usando o navegador, e no fim baixe o IDE Arduino inteiro com o projeto incluído
e configurado. Ele ainda tem que conectar a placa da USB, mandar compilar e subir o firmware para a placa, mas de
forma bem menos propensa a erros.

[screenshotrepetierconfigweb1]
image::image147.png[image,width=642,height=569,align="center",title="A interface web para configurar a versão 0.92 do Repetier Firmware, disponível em https://www.repetier.com/firmware/v092/. Note que cada campo tem seleções e ajuda sobre o significado da configuração."]

Outros firmwares tratam a questão da dificuldade de mexer com estes ajustes de máquina com estratégias diversas. O
__Teacup__, por exemplo, vem com um programa configurador gráfico em python; o _Smoothieware_ permite que a
configuração seja toda feita colocando um arquivo-texto de nome `config` no cartão SD do microcontrolador com
os ajustes.

===== A EEPROM

Um dos recursos disponíveis nos controladores baseados em arduino e que também se pode ativar ou desativar pela
configuração do firmware é a __*EEPROM*__. Este é um tipo de memória não-volátil (isto é, não é perdida
com o desligamento) que funciona como se fosse um minúsculo disco rígido, e guarda as configurações mais
importantes do firmware. Quando o firmware é executado pela primeira vez com a configuração para EEPROM ligada,
formata a área se não tiver sido usada anteriormente e popula com os valores com que foi configurado. Quando é
executado outras vezes, automaticamente obtém os valores da EEPROM, ao invés de usar os internos. Se por um lado
isso ajuda a não ter que recompilar o firmware a cada vez que se muda a configuração, confunde os usuários
por os valores de uma compilação nova não estarem sendo usados.

Os _defaults_ mudam de acordo com o firmware. No Marlin, a configuração default tem a EEPROM desativada, e ela
é ativada mudando a linha

[source,cpp]
----------
//#define EEPROM_SETTINGS
----------
para
[source,cpp]
----------
#define EEPROM_SETTINGS
----------

ou, em outras palavras, tirar o "//" do começo da linha. A isso se chama _descomentar_ uma linha de código,
isto é, deixá-la ativa. No IDE arduino, as cores da linha mudam entre comentada e descomentada.

No Repetier firmware, o default é EEPROM ativada. Para desativá-la, deve-se mudar a linha

[source,cpp]
----------
#define EEPROM_MODE 2
----------
para
[source,cpp]
----------
#define EEPROM_MODE 0
----------

Quando se quiser habilitá-la de novo, pode-se mudar o EEPROM_MODE para um número diferente de zero; colocando-se
um número não usado anteriormente, o firmware na primeira execução re-popula a EEPROM com os valores internos.

=== Alimentação

A impressora 3D, como todos os dispositivos eletrônicos microcontrolados, precisa ser alimentada com uma fonte
de tensão constante para o seu funcionamento. As tomadas domésticas oferecem tensão alternada (127V AC ou 220V
AC); é preciso o uso de um dispositivo que converta a tensão alternada em constante e esta é a função da
__*fonte de tensão*__. A fonte se caracteriza ainda pela corrente máxima que pode entregar de forma segura. O
cenário mais comum é a impressora 3D usar uma fonte de tensão de *12V* com corrente máxima de **30A**. Isso
também caracteriza a _potência_ máxima entregue pela fonte de tensão, que é obtida multiplicando-se a tensão
constante pela corrente máxima: 12V × 30A = **360W**.

A fonte de tensão que mais se vê sendo usada em impressoras é aquela reconhecível por sua forma de paralelepípedo
de metal e chamada de "fonte industrial", sendo uma fonte chaveada que tem três parafusos de conexão para
a tomada AC (fase, neutro e terra -- ou, em inglês, *L* (line), *N* (neutral) e *G* (ground)), e dois conjuntos
de parafusos de saída, um para o terra e outro para a fase (a tensão positiva, como 12V). Geralmente a fonte tem
ainda um parafuso de ajuste de tensão (**V ADJ**), ventoinha interna com aberturas para refrigeração e seletor
lateral 127V/220V de entrada.

[[diagramafontetensao1]]
image::image148.png[image,width=642,height=409,align="center",title="Uma fonte de tensão industrial de mercado e o tipo de ligações que geralmente apresenta. A fonte ilustrada tem duas saídas de tensão positiva (vermelhas) e duas de tensão negativa (negras), mas é comum fontes com três ou até quatro de cada tipo. A conexão à impressora 3D geralmente é direta no controlador - na RAMPS, por exemplo, ligaríamos os quatro cabos nas vias de 5A e 11A pelo conector MODU verde. As cores mostradas nos fios de terra, neutro e fase da figura correspondem às cores mais usadas em fios de tomadas brasileiras."]

O nome de fonte "industrial" se deve à sua utilização como componente genérico de equipamentos da indústria
(compare com as fontes de tensão como as de laptop, que também são fontes chaveadas mas "fechadas" e com
cabo e conectores montados) e por apresentarem certas proteções importantes, como a carcaça metálica contra
eletricidade estática, refrigeração e circuitos contra surtos e inversões.^1^

A fonte industrial não é a única usada em impressoras 3D. Devido à sua disponibilidade no mercado a preços
baixos e ao frequente descarte de tais fontes como "sucata", fontes de PC também são chaveadas e disponibilizam
12V DC na saída. No entanto, o modo como funcionam é diferente: a fonte industrial disponibiliza 2 a 4 trilhas
para alta corrente em 12V e a 2 a 4 trilhas com neutro (0V); a fonte de PC disponibiliza vários conectores para
a placa-mãe e os periféricos do computador, com cada conector tendo vários fios finos (de baixa corrente) em
diferentes tensões, inclusive negativas: -12V, -5V, 0V, 3,3V, 5V e 12V. É necessário portanto adaptar a fonte
de PC, abrindo-lhe a carcaça e juntando todos os fios de 12V em um ou dois cabos de alta corrente para a RAMPS
e o mesmo com os fios de neutro; e cortar e isolar todos os fios com outras tensões.^2^

Fontes de PC podem ter ainda uma facilidade que geralmente falta às fontes industriais. PCs mais antigos usavam fontes
estilo *AT* ("Advanced Technology), os atuais usam fontes estilo *ATX* ("Advanced Technology eXtended"), que
entre outros recursos têm um pino de entrada de nome "PS_ON" ou "PSON" (Power Supply ON). Este pino quando
colocado em zero volts permite energizar as saídas de potência da fonte, e quando deixado em aberto ou em tensão
positiva impede que elas sejam energizadas. Na prática, ele serve como se fosse um interruptor ligado/desligado
para a fonte, de modo que um trabalho de impressão pode ligar a impressora antes de iniciar e desligá-la no final,
tendo grande economia de energia. E de bônus, a fonte ainda disponibiliza uma trilha de sinal de 5VSb (+5V Standby,
ou +5V de repouso) que pode ser usada para energizar um raspberry pi mesmo com o resto desligado.^3^

[[fonteindustrialeatx]]
image::image149.png[image,width=642,height=360,align="center",title="Uma fonte industrial de 12V e 30A (1) e uma fonte ATX de PC (2), as opções mais frequentes para prover a energia para impressoras 3D."]

[NOTE]
.Notas:
====
. Novamente, o professor Newton C. Braga reitera seu papel como uma das maiores
autoridades brasileiras sobre eletrônica com seu curto porém abrangente artigo sobre fontes industriais:
http://www.newtoncbraga.com.br/index.php/automacao-industrial/6354-art1140[_http://www.newtoncbraga.com.br/index.php/automacao-industrial/6354-art1140_]
e ainda o artigo sobre como funcionam fontes chaveadas:
http://www.newtoncbraga.com.br/index.php/como-funciona/8397-como-funcionam-as-fontes-chaveadas-art1448[_http://www.newtoncbraga.com.br/index.php/como-funciona/8397-como-funcionam-as-fontes-chaveadas-art1448_]
.  A parte de modificação de fonte de PC é perigosa para amadores em eletrônica. Muitos tutoriais
mostram a modificação feita de qualquer modo e sem as proteções necessárias ou até usando cabos finos
e expondo o dispositivo a superaquecimento. Além disso, a não ser que se tenham realmente fontes de PC
sobrando sem uso ou se necessite da facilidade do PS_ON, economicamente não compensa: uma fonte industrial
de 12V já é mais barata que uma fonte de PC equivalente. Outra observação é que como somente parte
de toda a potência da fonte é colocada nas trilhas de 12V, é necessário escolher uma fonte de maior
potência -- por exemplo, para substituir a fonte industrial de 360W é recomendado usar uma fonte de
PC de pelo menos 600W de pico ou 500W contínua e eficiência de pelo menos 80 Plus Bronze. Dito isto, um
tutorial que mostra de forma correta como fazer essa modificação pode ser visto no youtube, em inglês:
https://www.youtube.com/watch?v=3X7pJOU4RiA[_https://www.youtube.com/watch?v=3X7pJOU4RiA_]
. O __Octoprint__, um print host controlável pela web que roda bem até em raspberry pis, tem nas
instruções de seu wiki o procedimento para tornar a energia da impressora controlável pelo software:
https://github.com/foosel/OctoPrint/wiki/Control-your-printer's-ATX-PSU-through-a-RAMPS-board-using-OctoPrint[_https://github.com/foosel/OctoPrint/wiki/Control-your-printer%27s-ATX-PSU-through-a-RAMPS-board-using-OctoPrint_]
. Um artigo escrito em inglês pelo brasileiro Ítalo Soares faz considerações sobre o
consumo de energia das fontes chaveadas e tem recomendações para fontes industriais e de PC:
https://3dprinterchat.com/2017/03/3d-printer-power-supply/[_https://3dprinterchat.com/2017/03/3d-printer-power-supply/_]
====

==== Fitas de Led

O que pode parecer meramente um capricho ou ornamento à primeira vista, as cada vez mais populares _fitas de led_
colocadas nas carcaças das impressoras 3D podem ser importantes, e até essenciais, não só para iluminar a
peça sendo impressa e permitir melhor inspeção visual do trabalho, como para reagir a condições de trabalho e
indicar pela cor ou padrão uma mudança de status, uma entrada em faixas perigosas de temperatura, ou um início
e final de uma série de etapas da impressão.

O problema? As fitas de led são o periférico mais despadronizado de todo o universo reprap. Existem vários tipos
de fita -- elas podem ser monocromáticas ou RGB, de intensidade regulável (__dimmable__/"dimerizável")
ou discretas (só acendem e apagam), de alta e baixa potência, e cada uma dessas tem controle e idiossincrasias
diferentes. Além disso, mesmo as de baixa potência extrapolam a carga de sinal do microcontrolador^1^ (uma fita LED
5050 requer 7,36 W/m), precisando de alimentação separada como com a mesa e extrusores -- e os microcontroladores
de mercado não oferecem saídas específicas para elas. Finalmente, se faz o controle com gcodes que acionam
pinos do microcontrolador diretamente^2^, não podendo se usar do status interno dos sensores da impressora 3D para
configurar os padrões e cores dos leds por não ter testes de condição (__if__-__then__-__else__); em outras
palavras, um uso limitado.

Ditas essas reservas, a receita apresentada aqui será de um dos casos mais genéricos e mais úteis, que é
a utilização de uma fita RGB de intensidade regulável 5050 com 12V de alimentação. Essa fita tem 4 pinos:
três pinos R, G e B que receberão uma tensão variável de 0 a 12V para a intensidade de vermelho, verde e azul
e um de Vcc (tensão de referência -- 12V). Lembrando que esses pinos terão que receber potência, então um
circuito adicional será necessário.

[[fitasdeled1]]
image::image150.jpeg[image,width=642,height=388,align="center",title="Esquerda: uma das inúmeras soluções para iluminação com LEDs de uma impressora 3D - uma prusa i3, no caso. Direita: uma das fitas de LED que se encontram no mercado. Fonte: http://www.instructables.com/id/How-to-light-up-your-3D-Printer/"]

O próximo passo é escolher os pinos da RAMPS (ou do seu controlador) que controlarão cada uma das
cores. Escolheremos pinos "analógicos" do Arduino (lembrando que não são analógicos "de verdade" mas
PWM). Uma das fileiras pouco utilizadas do Arduino é a dos __servos__: podemos escolher o três pinos D4, D5 e
D6 em seguida para ser R, G e B, conforme o usuário _LVMJohnson_ do Instructables fez.

[[esqeletricofitasdeled1]]
image::image151.png[image,width=642,height=556,align="center",title="Esquema elétrico dos pinos da RAMPS, com transistores NPN para amplificar o sinal do microcontrolador para baixa potência. Fosse um led de maior potência, usaríamos outros componentes como MOSFETs, relés ou até placas de controle dedicadas. Os 12V da figura devem ser conectados à fonte. Fonte do esquema e do tutorial em inglês: http://www.instructables.com/id/3D-Printer-RGB-LED-Feedback/"]

Somente estas ligações já seriam suficientes para ter os LEDs controláveis por g-code: o comando M42 envia um
PWM de intensidade no parâmetro S para o pino no parâmetro P:

[source,gcode]
----------
M42 P4 S128 ; liga o pino vermelho (4) com intensidade 50% (128 -- de 0 a 255)
M42 P5 S255 ; liga o pino verde (5) com intensidade 100%
----------

E podemos criar g-codes de início e finalização com mudanças de cores em cada etapa: aquecimento do extrusor,
aquecimento da mesa, priming, troca de extrusor, final da impressão. Uma dica útil é antes de mudar a cor,
usar o comando M400 que serve para terminar qualquer movimento que a impressora esteja fazendo, antes de mudar a
cor. Exemplo de um G-Code inicial, baseado no tutorial de Tom Sanladerer^3^:

[source,gcode]
----------
M42 P4 S255 ; pino vermelho em máxima intensidade
M42 P5 S255 ; pino verde em máxima intensidade; a luz resultará amarela.
M42 P6 S0 ; pino azul desligado
G28 W ; faz o procedimento de _homing_ sem autonivelamento
M400 ; espera o _homing_ acabar.
M42 P5 S0 ; desliga o led verde; a luz ficará vermelha.
M190 S120 ; ajusta a temperatura da mesa para 120 e espera chegar nesse valor.
M42 P6 S255 ; liga o led azul; púrpura indica que a mesa terminou o aquecimento.
M109 S240 ; ajusta a temperatura do _hotend_ em 240 e espera chegar nesse valor.
M42 P5 S255 ; liga o led verde; luz branca indica que a impressão iniciará.
----------

No Smoothieware, as fitas de led podem também serem controladas com pinos arbitrários da placa. Por exemplo,
os pinos PWM de designação P1.23, P1.24 e P1.26 estão geralmente disponíveis^4^, então podemos utilizá-los
para os componentes R, G e B. O módulo __**Switch**__ do smoothie, que permite definir comandos G-Code arbitrários
para pinos específicos, será usado para isso. Por exemplo, para definir o vermelho, podemos colocar isso no
arquivo de configuração:

[source,conf]
----------
switch.red.enable # o nome ("red") depois do comando _switch_
                  # é criado no momento, não pré-definido.
switch.red.output_pin 1.23 # Pino P1.23 para led vermelho
switch.red.output_type pwm # poderia ser hwpwm (pwm de hardware)
                           # também -- mais apropriado para servos
switch.red.startup_value 127 # 0 a 255
switch.red.input_on_command M151 # comando inexistente na especificação
                                 # reprap, pontos vamos usar para controlar
                                 # esse led
----------

Depois de definido isso na configuração, o seguinte G-Code poderá ser usado para ajustar a intensidade de vermelho:

[source,gcode]
M151 S255 ; ajusta para a intensidade máxima

[NOTE]
.Notas:
====
. Isso não é totalmente verdade; algumas placas tudo-em-um, como a __Azteeg X3__, oferecem saídas de baixa
potência que podem ser usadas para controlar e energizar LEDs, mas normalmente usadas para leds de status de displays.
. O Marlin permite definir, no Configuration.h, os pinos usados para R, G e B, para que ao invés de se usar
o comando M42 para acionamento direto, se use o comando específico para cor RGB do padrão reprap, o M150. Basta
descomentar e mudar as linhas do Configuration.h. Onde se encontra:
+
[source,cpp]
----------
// Support for an RGB LED using 3 separate pins with optional PWM
//#define RGB_LED
#if ENABLED(RGB_LED)
  #define RGB_LED_R_PIN 34
  #define RGB_LED_G_PIN 43
  #define RGB_LED_B_PIN 35
#endif
----------
+
Descomente-se o #define e se confiure os pinos. No nosso caso, pinos 4, 5 e 6:
+
[source,cpp]
----------
// Support for an RGB LED using 3 separate pins with optional PWM
#define RGB_LED
#if ENABLED(RGB_LED)
  #define RGB_LED_R_PIN 4
  #define RGB_LED_G_PIN 5
  #define RGB_LED_B_PIN 6
#endif
----------
+
E aí a cor do led se acertaria desse modo:
+
[source,gcode]
----------
M150 R255 U255 B0 ; R é o led vermelho, U é o verde e B é o azul
----------
+
. Cada um dos tutoriais aqui listados faz a iluminação de forma diferente. Pode ser
interessante ver todos caso deseje escolher bem. O tutorial do Tom pode ser visto em
https://www.youtube.com/watch?v=fb3hrjEiE3s[_https://www.youtube.com/watch?v=fb3hrjEiE3s_]
. Lista de pinos PWM da smoothieboard: http://smoothieware.org/pwm-capable[_http://smoothieware.org/pwm-capable_]
. Mais detalhes na documentação do módulo _switch_ do smoothieware, um jeito extremamente
poderoso de mudar o comportamento do firmware sem ter que mexer em seu código-fonte:
http://smoothieware.org/switch[_http://smoothieware.org/switch_]
====

==== A insaciável mesa aquecida

A RAMPS tem um trilho para 5A e um trilho para 11A exclusivo para a saída D8, usada pela mesa aquecida, e
apesar de não ser o único controlador de impressão, esse é um padrão frequente das eletrônicas. E embora
geralmente os 12V e até 5A sejam suficientes para gerir toda a parte eletrônica da impressora incluindo motores
e os cartuchos aquecedores dos extrusores, muito frequentemente a trilha de 11A não aquece a mesa suficientemente
para plásticos de maior temperatura como o ABS, realizando a operação de forma lenta (mais de 10 minutos para
chegar à temperatura-alvo) ou simplesmente estagnando em uma temperatura menor que o ideal de **120°C**. Os
fatores que causam isso dependem também do material da mesa, da resistência e capacidade de dissipação e
principalmente do tamanho -- uma mesa de PCB ou alumínio que ultrapasse o tamanho de 214x214mm de uma MK2B já
oferecerá dificuldades e o requerimento de potência aumenta exponencialmente com a seção lateral.

Se a mesa não aquece bem e o equipamento está todo em ordem, existem algumas providências que podem ser tomadas,
listadas aqui em ordem de facilidade. Essas são eletrônicas e podem ser usadas em conjuntos com outras estratégias,
como colocar uma placa de cortiça adesível por baixo da mesa para impedir perda de calor.

. *Mexer no potenciômetro de ajuste de tensão da fonte industrial* +
O parafuso de ajuste de tensão das
fontes industriais de 12V é um grande quebra-galho nesses momentos. As fontes de mercado costumam vir reguladas
com uma tensão que quando medida por um multímetro mostra-se próxima de 12,4V; girando o parafuso para a
direita e medindo com um multímetro, essa tensão aumenta. Uma tensão de até cerca de *15V* é segura para
os componentes da RAMPS e da maioria dos controladores de impressão. Aumentar a tensão causa uma maior entrega
de potência à mesa e muitas vezes esse pequeno incremento é suficiente para resolver o aquecimento baixo.
. *Trocar a fonte para uma de maior potência* +
Essa solução pode ser mais segura para quem não deseja correr
o risco de aumentar a tensão de trabalho de sua controladora de impressão. Perdas ou variações de qualidade
no processo de fabricação da fonte podem fazer com que ela não consiga entregar toda a potência necessária,
o que se sente mais intensamente na trilha de maior potência da mesa.
. *Usar fonte de 24V* +
Essa solução é indicada __apenas para controladoras e elementos que explicitamente funcionam com a tensão de 24V__; a RAMPS
precisa de várias adaptações e mesmo assim não raramente superaquece com 24V. A mesa idealmente deve suportar
24V; aplicar essa tensão em uma mesa de 12V típica como a MK2 (com resistência entre 0,8 a 1,2 Ω) faz passar
corrente excessiva nas trilhas, queimando o conjunto. As mesas MK2B vêm com contatos diferentes para serem usadas
em 12V ou 24V: os contatos para 24V fazem a resistência ficar entre 3 e 3,4Ω, permitindo que uma corrente ainda
dentro das especificações passe pela mesa.
+
[[mesamk2bpontossoldagem]]
image::image152.png[image,width=618,height=317,align="center",title="Contatos e pontos de soldagem de uma mesa aquecida MK2B. Na configuração de 12V, que tem resistência por volta de 1Ω, o ponto "1" recebe o positivo e pontos 2 e 3 estão unidados no negativo. Na configuração para 24V, que tem resistência próxima a 3Ω, o ponto 1 fica isolado, a tensão positiva é soldada no ponto 2 e a negativa no ponto 3. Fonte: http://reprap.org/wiki/PCB_Heatbed"]
+
. *Usar um SSR na mesa* +
Essa é uma solução que pode ser considerada "radical" por expor o operador a certos
riscos de acidente, especialmente por trabalhar com correntes muito altas. Não é recomendada, portanto, para
iniciantes em eletrônica ou instalações sem proteções elétricas, com cabos expostos ou itens inflamáveis. No
entanto, especialmente para o uso de mesas aquecidas de tamanhos grandes ou câmaras aquecidas, que exigem grande
potência de trabalho, são praticamente a solução universal. +
Antes, vale uma explicação sobre as fontes
chaveadas. Como é sabido pelos entusiastas de PC, uma fonte chaveada de 1000W custa bem mais que o dobro de uma
de 500W. Isso ocorre tanto pelos custos dos componentes de potência quanto pela maior raridade no mercado de
massa. Como as demandas energéticas de uma impressora 3D crescem de acordo com o quadrado ou cubo das dimensões,
usar uma fonte DC para o componente mais exigente pode ser economicamente inviável. +
A solução passa por
permitir que a tensão AC possa ser aplicada diretamente na mesa (ou câmara). Ou nem tão diretamente: ela precisa
ser microcontrolada, pois simplesmente "ligar uma resistência na tomada" a faz aquecer sem controle. O mesmo
termistor que já leria a temperatura da mesa ligada em fonte DC, portanto, continuará nela, para poder ter a medida
de controle. +
E se a mesma saída do microcontrolador que normalmente é usada para aquecer a mesa diretamente
pudesse controlar a corrente da tomada? Com a saída de 12V ligada, a corrente passa no máximo. Com ela desligada,
não passa nada. +
Existe um tipo de dispositivo eletrônico que faz exatamente esta tarefa: o relé, em inglês
"relay". Mas não um relé como os da energia de sua casa, que são mecânicos, fazem o som de clique quando
desarmados e reagem com relativa lentidão: é preciso um tipo de relé especial, o _*relé de estado sólido*_
ou _*SSR*_ (Solid-State Relay). O relé é um interruptor controlado eletronicamente. Ele tem duas entradas e duas
saídas. Quando as entradas estão no mesmo potencial ou em aberto (desligada), ele _abre o circuito_ e impede que
passe corrente na saída. Quando as entradas recebem uma diferença de potencial positiva (ligadas), ele _fecha
o circuito_ e coloca as saídas em contato.
+
[[ssroperacaobasica]]
image::image153.png[image,width=618,height=398,align="center",title="A operação básica do SSR, que funciona como um interruptor controlado: com a tensão nos pinos de entrada em 0V ou aberto, corrente não passa entre os pinos de saída; com uma diferença de potencial - digamos, 12V - entre os pinos de entrada, o circuito fecha e corrente consegue passar."]
+
Existem SSRs DC e AC, mas a denominação diz respeito aos pinos de saída; a entrada sempre será uma diferença
de potencial constante. Como a saída que nos interessa ligar a desligar é a energia da tomada -- 127V AC ou
220V AC -- o SSR a ser usado em nosso caso é o SSR AC, como ilustrado.
+
image::image154.png[image,width=642,height=409,align="center",title="Fazendo a mudança do cenário comum em que a RAMPS alimenta diretamente a mesa para o cenário em que a mesa é alimentada pela tomada através de um SSR controlado pela RAMPS."]
+
**Um SSR bem ajustado melhora muito o tempo de aquecimento**, mas representa também um **enorme risco**. Pra
começar, ele exige alimentação independente pela rede elétrica e por ele passa alta corrente, que é o que
faz a mesa esquentar mais rápido mas pode causar incêndios, explosões e eletrocuções. O SSR, quando falha, ao
invés de ficar _em aberto_ (sem passar corrente), fecha o circuito, alimentando continuamente a resistência sem
controle. As mais seguras instalações com SSR são as impressoras 3D que já vêm com ele de fábrica, alojado
em casulo com proteções elétricas necessárias e carcaça de aço ou algum outro material que se contraponha
a eletricidade estática, além de uma mesa dimensionada e estudada para tal operação.
+
Dito isto bem claramente, __é possível__, embora não recomendável, usar uma mesa de 12 ou 24V comum deste
modo. Grosso modo, o que o microcontrolador faria seria ligar e desligar continuamente a alimentação para manter
a mesa em volta de certa temperatura. Passou da temperatura, ele desliga. Ficou abaixo dela, ele liga. Mas com
uma corrente tão alta, isso não funciona muito bem; o _overshoot_ e __undershoot__, ou seja, a "inércia" de
o componente continuar aquecendo ou esfriando faz a temperatura variar enormemente em volta da temperatura-alvo,
o que traz grande instabilidade para o processo de impressão.
+
[[graficobangbang]]
image::image155.png[image,width=642,height=578,align="center",title="Como é a estratégia de estabilização de temperatura, no modo mais básico, chamado de &quot;bang-bang&quot;. O aquecimento é ligado, e quando a temperatura passa da desejada (100°C na ilustração), desligado. A temperatura sobe mais um pouco e decresce, até que fica abaixo da desejada, e o sinal é novamente ligado (corrente &quot;I&quot;, em 100%). O overshoot é o quanto a temperatura ultrapassa a desejada, o undershoot o quanto ela fica abaixo. É desejável deixar ambos o menor possível, para que a curva se assemelhe a uma reta."]
+
Outros problemas se acumulam nessa abordagem, como os efeitos indutivos do campo eletromagnético gerado, então
não é uma boa idéia. Uma abordagem mais fina é preferida e vamos explicar como funciona.

==== Alimentação no firmware -- PWM e PID

Tanto a mesa quanto qualquer outro elemento aquecedor da impressora 3D, nos firmwares, irá funcionar com modulação
de pulso por largura ou PWM, que já vimos como funciona. Então teremos na verdade a opção de não só ligar
e desligar o elemento, mas de lhe atribuir uma "intensidade" que é na verdade o _duty cycle_ do pulso. No
gráfico anterior, colocávamos 100% de intensidade e por isso o elemento aquecedor rapidamente ultrapassava a
temperatura desejada, **ainda mais por colocarmos muita potência de uma vez**. Em uma situação como uma mesa
preparada para baixas tensões (12V, 24V) recebendo altas tensões (127V, 220V), os _overshoots_ especialmente
serão muito maiores e terão grande risco de literalmente queimar as trilhas condutoras.

Um meio de mitigar isto é __limitando o PWM__, configurando um _duty cycle_ máximo que ele pode obter. Assim,
na prática controlamos a potência que a mesa (ou outro elemento) recebe.

No Repetier firmware, isso é obtido com os defines __PID_MAX__, um para cada elemento aquecedor. No entanto,
para funcionar, o *modo PID* precisa estar ligado. São esses ajustes:

[source,cpp]
----------
/** Type of heat manager for this extruder.
- 0 = Simply switch on/off if temperature is reached. Works always.
- 1 = PID Temperature control. Is better but needs good PID values. Defaults are a good start for most extruder.
Overridden if EEPROM activated.
*/
#define HEATED_BED_HEAT_MANAGER 1 // desabilita bang-bang, habilita PID
#define EXT0_HEAT_MANAGER 1
#define EXT1_HEAT_MANAGER 1
// maximum time the heater can be switched on. Max = 255. Overridden if EEPROM activated.
#define HEATED_BED_PID_MAX 255
#define EXT0_PID_MAX 255
#define EXT1_PID_MAX 255
----------

Bastando mudar o valor máximo **255**, equivalente a 100% do duty cycle, para um valor intermediário. Por exemplo,
se mesmo conhecendo os perigos resolvermos usar uma mesa de 12V ligada na rede de 127V AC por um SSR, poderíamos
limitar em 25%:

[source,cpp]
#define HEATED_BED_PID_MAX 64

E regravar o firmware com esses valores. Ou, ainda, mudá-los na EEPROM se ela estiver ativada, lembrando que os
valores dela sobrepujam os valores de fábrica.

No Marlin, o ajuste equivalente é dividido em dois, um para o modo __bang-bang__, outro para o modo
__PID__. Exemplificando com o mesmo valor de 64 para a mesa que colocamos no repetier:

*Se você vai usar bang-bang:*

[source,cpp]
----------
//#define PIDTEMP // comentado, desabilita PID e habilita bang-bang para os extrusores
#define BANG_MAX 255 // vale para os extrusores
//#define PIDTEMPBED // comentado, desabilita PID e habilita bang-bang para a mesa
#define MAX_BED_POWER 64
----------

*Se você vai usar PID:*

[source,cpp]
----------
#define PIDTEMP
#define PID_MAX 255
#define PIDTEMPBED
#define MAX_BED_POWER 64
----------

*E, afinal de contas, que diabos é PID?* Imagine o seguinte: já que controlamos a "intensidade" por pulso,
e se chegando perto da temperatura-alvo fôssemos colocando um pulso cada vez menor, de modo que a curva não
crescesse tão rápido e se estabilizasse mais rapidamente na temperatura-alvo? E ainda, não desligamos totalmente
quando ela ultrapassar, simplesmente mandamos pulsos mais fracos. Seria um jeito de amortizar os _overshoots_
e _undershoots_ e nos mantermos perto de uma temperatura estável.

Esse raciocínio de ir "suavizando" os pulsos prevendo a resposta da curva de temperatura de modo a
conseguir o menor "erro" possível é o que deu origem ao algoritmo chamado de **PID**, sigla que descreve
as três operações que usa, cada uma contribuindo e sendo somada às outras: **P**roporcional, **I**ntegral e
**D**erivada. Um "controlador PID" continuamente calcula um valor de erro _*e*_ que é a diferença entre
uma medida-alvo (a temperatura desejada) e um valor medido (a temperatura atual) e a partir delas aplica uma
correção baseada no histórico recente desta curva, levando em conta, com pesos específicos, a proporcional,
a integral e a derivada deste erro.

Em fórmula, o conceito de PID, onde u(t) é o sinal de saída, é expresso como:

latexmath:[u(t)=K_pe(t)+K_i\int _0^te(\tau )\mathit{d\tau }+K_d\frac{\mathit{de}(t)}{\mathit{dt}}]

com *K~p~* sendo o ganho proporcional, *K~i~* o ganho integral e *K~d~* o ganho da derivada -- essas sendo as três
**constantes de proporção**. __**e**__ é o erro, __**t**__ o tempo e __**τ**__ o tempo de integração considerado. Se para
o leitor a simbologia matemática pareceu complicar desnecessariamente, o PID é uma "__mágica matemática__"
que nos permite achar uma sequência de sinais que, se mandarmos para o nosso controlador, consegue um resultado bem
mais "macio" que o bang-bang. Tudo o que precisaremos serão os números **K~p~**, *K~i~* e **K~d~** (lembre-se
do P, I, D). Podemos reescrever a fórmula de modo mais descritivo:

__SINAL = K~p~ × (proporcional) + K~i~ × (integral) + K~d~ × (derivada)__

As fórmulas de (proporcional), (integral) e (derivada) de acordo com o tempo são calculadas automaticamente pra
nós (Ufa! Ainda bem que existem computadores!), mas ainda precisamos saber como achar esses três números.

[[sinalpidmagico]]
image::image156.png[image,width=642,height=490,align="center",title="O sinal PID é uma curva mágica que vai permitir que a nossa temperatura chegue à temperatura-alvo da forma mais suave possível, e fique sempre bem próxima a ela."]

Na "vida real", o algoritmo PID é uma solução otimizada aplicável em diversos tipos de situação,
especialmente as que envolvem equilíbrio contínuo, e regulando grandezas como fluxo, temperatura, pressão,
nível e deslocamento. Os números K~p~, K~i~ e K~d~ são empíricos, isto é, obtidos por experimentação,
e muito dependentes das características dos elementos aquecedores, da potência aplicada e outros fatores.

==== PID TUNING

Os firmwares de mercado já vêm com valores default para K~p~, K~i~ e K~d~ que funcionam razoavelmente, mas não
são ótimos. O ideal é que possamos descobrir os valores mais apropriados para o nosso hardware. Felizmente,
quase todos têm também o mecanismo de **PID Tuning**, ou **Afinação do PID**, que é justamente o que o nome
diz: um procedimento automatizado que,, começando com os valores configurados das três constantes, faz vários
ciclos de aquecimento e resfriamento e vai reconfigurando os valores para gerarem curvas mais suaves. Depois de
um default de 8 ciclos de aquecimento e resfriamento, ele devolve os valores sugeridos para Kp, Ki e Kd, que podem
ser então gravados na EEPROM, colocados no firmware ou no arquivo de configuração.

O comando do autotune, **M303**, leva três parâmetros:

* O elemento aquecedor. Se não for dado, supõe ser o primeiro extrusor, E0. O segundo extrusor é denominado E1
e a mesa E-1. No Smoothie, a mesa é E1.  * A temperatura-alvo para ele calcular as constantes. Não precisa ser
uma temperatura tão alta quanto as de trabalho, mas é bom que seja próxima. Bons números são 100 graus para
a mesa aquecida e 180 graus para o extrusor. É dada pelo parâmetro S, como em S100.  * Quantas iterações no
máximo até acabar o procedimento. O default é 8, parâmetro C8.

[[pidtuningrepetier]]
image::image157.png[image,width=642,height=599,align="center",title="Exemplo da execução da afinação de PID usando `M303 E-1 S100 C8`, para afinar uma mesa aquecida ligada a SSR. A cada iteração, o firmware vai mostrando as constantes estimadas (abaixo)."]

O final do procedimento de auto-afinação de PID vai devolver algo como:

[source]
----------
08:35:57.416 : Ku: 84.99 Tu: 10.75
08:35:57.418 : Classic PID
08:35:57.418 : Kp: 51.00
08:35:57.418 : Ki: 9.49
08:35:57.422 : Kd: 68.51
08:35:57.431 : PID Autotune finished! Put the last Kp, Ki and Kd constants from above into Configuration.h
----------

Veja que o firmware só mostra os números. Cabe ao operador realizar o resto da configuração, seja acertando na
EEPROM, mudando no firmware (Configuration.h) ou editando o arquivo de configuração (caso do Smoothieware). No
caso do Marlin e Repetier, as constantes podem ser gravadas na EEPROM ainda pelo terminal de operação. Para a
mesa aquecida:

[source,gcode]
----------
M304 P51.00 I9.49 D68.51 ; ajusta P, I e D para a mesa na memória transiente
M500 ; salva na EEPROM
----------

Se pedimos o PID do extrusor, o comando a ser usado é o M301, especificando o número do extrusor iniciando de
"1" com o parâmetro H:

[source,gcode]
M301 H1 P51.00 I9.49 D68.51 ; ajusta P, I e D para a extrusor 1

No caso do Smoothieware, após a auto-afinação os valores são automaticamente configurados na memória para o
elemento aquecedor em questão, logo basta salvar no arquivo de configuração com *M500* (lembrando que ARM não
tem EEPROM, então não se grava nela).

Note que apesar de especialmente importante para mesas com SSR pelos perigos de superaquecimento envolvidos, a
auto-afinação de PID é altamente recomendada para todos os casos. Além de resolver flutuações de temperatura como
_overshoots_ e __undershoots__, minimiza demoras de reação e torna a qualidade de impressão mais consistente. Para
fazer o procedimento de auto-afinação, é recomendado estar na situação mais parecida com o cenário de
trabalho possível, com todos os componentes aquecedores frios no início. Também é recomendável reexecutar o
procedimento a cada vez que as condições mudarem, como a mudança da impressora para um ambiente climaticamente
distinto ou a troca de um componente. Se o procedimento é executado constantemente e a impressora 3D tem LCD,
é recomendável editar o firmware e descomentar `#define PID_AUTOTUNE_MENU` no Marlin para a opção aparecer no menu.

Por último, a auto-afinação pode por vezes falhar, tanto por _timeout_ (tempo esgotado, a temperatura não
muda dentro do intervalo de tempo esperado) quanto por _overshoot_ (a temperatura sai dos índices razoáveis de
flutuação). Nesse caso, editar o `Configuration.h` ou arquivo de configuração do firmware pode ser conveniente
para aumentar a tolerância temporariamente para o processo completar. No Marlin, por exemplo, a variável
`PID_FUNCTIONAL_RANGE`, por default em 10 graus, pode ser aumentada para o processo completar mesmo com overshoots
grandes (o que costuma acontecer ao se usar SSR).

==== Prevenindo acidentes: a proteção contra descontrole térmico

O perigo de superaquecimento sempre existe nas impressoras 3D, então é útil pensar em todos os cenários que
podem acontecer para tentar evitá-los ao máximo. É o termistor que nos dá a temperatura para sabermos se ainda
estamos na faixa segura, e quando ele falha eletronicamente um tipo de sinal específico como "circuito aberto"
ou "circuito fechado" é fácil de detectar; o firmware interpreta isso como abaixo da *temperatura mínima*
ou acima da *temperatura máxima* e interrompe a impressão e *desliga todo o conjunto* para evitar acidentes
(melhor um trabalho perdido que uma impressora arruinada).

Mas existe uma situação que também tem boa chance de ocorrer e que representa especial perigo com fontes
potentes ou alimentação externa como o SSR: o *descontrole térmico* -- em inglês, _thermal runaway_ --
que é quando o componente de mensuração de temperatura **mede uma temperatura "falsa", ainda dentro do
intervalo de tolerância**. É o caso quando um termistor se *solta do casulo* da mesa ou do hotend, por exemplo:
ele medirá a temperatura ambiente ao invés da alta temperatura do componente por não estar mais em contato,
então o microcontrolador enviará instruções para *aumentar a potência do aquecimento* continuamente. O hotend
ou mesa receberão sempre o máximo de potência até a hora em que a temperatura fica tão alta que o componente ou
as peças conectadas simplesmente entram em combustão ou derretem. Isso pode resultar em incêndios ou explosões
e, de fato, aconteceu tal acidente no laboratório deste autor, com pesadas perdas financeiras.

Mas felizmente existe um método para detectar esse tipo de ocorrência, que é o __*thermal runaway protection*__. O
mais comum é auferir o tempo que a resposta de aquecimento leva. Por __default__, o Marlin usa o tempo de _20
segundos_ de resposta para o extrusor e _60 segundos_ de resposta para a mesa, isto é, se a temperatura medida no
hotend não subir em 20 segundos depois do comando de aquecimento, ou se a temperatura medida na mesa não subir em
60 segundos depois do comando de aquecimento, o firmware considera que está acontecendo o descontrole térmico,
pára a impressão e desliga todas as saídas de potência. O Smoothieware tem um ajuste mais conservador, _120
segundos_ para a resposta de qualquer elemento aquecedor. O Repetier, no momento da publicação deste livro,
ainda não tem o recurso.

O recurso para hotends já vem ativado no Marlin, mas não para a mesa aquecida. Para deixar os dois ativados,
basta descomentar os dois ajustes no `Configuration.h`:

[source,cpp]
----------
/**
* Thermal Protection protects your printer from damage and fire if a
* thermistor falls out or temperature sensors fail in any way.
*
* The issue: If a thermistor falls out or a temperature sensor fails,
* Marlin can no longer sense the actual temperature. Since a disconnected
* thermistor reads as a low temperature, the firmware will keep the heater on.
*
* If you get "Thermal Runaway" or "Heating failed" errors the
* details can be tuned in Configuration_adv.h
*/
#define THERMAL_PROTECTION_HOTENDS // Enable thermal protection for all extruders
#define THERMAL_PROTECTION_BED // Enable thermal protection for the heated bed
----------

Os ajustes de tempo de espera, faixa de temperatura e histerese tanto para mesa quanto hotend são considerados
avançados e ficam no arquivo `Configuration_adv.h`. São bons defaults, não se aconselha mudá-los a não ser que
estejam acontecendo falsos positivos -- e se for o caso, vale a pena dar uma revisada na eletrônica.

No smoothie, basta colocar um valor de tempo de espera diferente zero no ajuste
temperature_control.__module_name__.runaway_heating_range, onde _module_name_ é o nome do módulo do aquecedor,
como _hotend_ ou __bed__.

[NOTE]
.Para saber mais sobre PID, PWM e aquecimento:
====
* Para saber sobre a teoria de PID, o site brasileiro _embarcados_
apresenta uma série de artigos interessantes e profundos, a começar por esse:
https://www.embarcados.com.br/controle-pid-em-sistemas-embarcados/[_https://www.embarcados.com.br/controle-pid-em-sistemas-embarcados/_]
* A referência do site _reprap_ sobre afinação de PID é a mais conhecida:
http://reprap.org/wiki/PID_Tuning[_http://reprap.org/wiki/PID_Tuning_] * O
wiki do Repetier Firmware explica em profundidade os ajustes de controle de temperatura:
https://github.com/repetier/Repetier-Firmware/wiki/Temperature-control[_https://github.com/repetier/Repetier-Firmware/wiki/Temperature-control_]
* O manual do Smoothieware também tem uma explicação ricamente ilustrada
sobre o assunto, incluindo como lida com o descontrole térmico e como calibrá-lo:
http://smoothieware.org/temperaturecontrol[_http://smoothieware.org/temperaturecontrol_]
* Se realmente não for
desejável ou possível usar PWM/PID, como no caso de uso de um relé mecânico na mesa, existe nos firmwares um
ajuste de _histerese_ para o modo bang-bang que adiciona um atraso que pode tornar a curva mais suave.
* O blog
da _Prusa Research_ tem dicas de o que fazer para evitar descontrole térmico por causas eletrônicas e mecânicas:
http://help.prusa3d.com/mk2-electronics/thermal-runaway-and-temperature-drops[_http://help.prusa3d.com/mk2-electronics/thermal-runaway-and-temperature-drops_].
====

=== Extensões e derivações da tecnologia FFF

A este ponto o leitor já deve ter percebido que graças aos firmwares, eletrônicas e projetos disponibilizados
pelo projeto reprap e seus voluntários, a tecnologia de impressão 3D é bem adaptável. Devido a seus componentes
substituíveis, aos firmwares flexíveis, profundamente configuráveis e lotados de recursos e aos protocolos
praticamente universais utilizados, trocar ou fazer sua versão de qualquer parte da e uma impressora 3D é uma
tarefa fácil até mesmo pra amadores. Na verdade, até parte do próprio processo de configuração da impressora
pode envolver isso, como na calibração de uma delta em que muitas vezes se usa uma caneta ou lápis no extrusor
antes de inserir o hotend, já que fica mais fácil achar desníveis microscópicos pela força dos traços no papel.

[[calibrarostockcaneta]]
image::image158.png[image,width=642,height=451,align="center",title="Processo de calibração de uma delta (Rostock) usando uma caneta para achar o problema. https://www.youtube.com/watch?v=zElA76ncTfc"]

Esse ecossistema open-source e "lego", que encoraja a criatividade e expressão, gera as mais variadas formas
de reprap. Outros exemplos criativos são a delta de 5 metros de altura da SeeMeCNC -- que é uma reprap enorme
usando a placa _RaMBo_ - e a impressora portátil "pendurável" de volume infinito, a HangPrinter.

[[deltagiganteehangprinter]]
image::image159.png[image,width=642,height=409,align="center",title="Processo de calibração de uma delta (Rostock) usando uma caneta para achar o problema. https://www.youtube.com/watch?v=zElA76ncTfc"]

Tais curiosidades são demonstrativas do poder de mentes criativas e nem são realmente excepcionais -- acompanhar
notícias relacionadas a impressão 3D passa a nítida noção que a cada dia existe uma excentricidade nova ou um
jeito de usar a tecnologia que ninguém havia explorado antes. Não é pretensão desta obra, e nem conseguiríamos,
fazer um bom resumo de todo o potencial deste ecossistema. Ainda assim, há um tipo de modificação de impressoras
FFF que enseja variados tipos de impressora e que pode ser explorada mesmo gastando muito pouco: a troca do extrusor
de tração de plástico por um _extrusor de pasta_ - "paste extruder" em inglês. _Pasta_ é exatamente isto:
qualquer massa semi-sólida, geralmente formada pela mistura de ingredientes sólidos com um líquido. Um dos
primeiros extrusores de pasta _universais_ usados em maior escala foi criado em 2012 pelo reprapper _RichRap_
(Richard Horne) e chamado de "Universal Paste Extruder".

[[universalpasteextruder]]
image::image160.png[image,width=642,height=319,align="center",title="O extrusor de pasta universal de RichRap. Ele é demonstrado imprimindo com água com açúcar, chocolate e cerâmica em sua página: https://www.thingiverse.com/thing:20733. A montagem é fácil e o extrusor é compatível com a guia do carro X de prusa e graber. O extrusor funciona com o motor governando um atuador linear que vai pressionando o êmbolo de uma seringa comum de 10ml."]

A idéia é boa, mas a primeira pergunta que vem à mente do leitor atento é o baixo volume da seringa -- apenas
10ml; se a "impressão" levar mais que isso, é preciso parar todo o conjunto, desmontar e reabastecer a seringa,
e montar novamente, tornando o processo bastante manual e propenso a falhas. Uma solução cara seria usar uma
mangueira peristáltica no extrusor. Existem outros problemas ainda, como pastas que solidificam tornando a extrusão
mais difícil ou parando; pastas que _não_ solidificam resultando em peças que colapsam na mesa de impressão;
limpeza do conjunto quando usar com comida; entupimento quando se usam pastas grossas (como cerâmica); falta de
aquecimento, limitando os materiais que se pode utilizar. E por aí vai... Uma alternativa ao extrusor do RichRap
que consegue trabalhar com aquecimento e controle de pressão -- mas tem montagem mais difícil - é o __Baricuda Extruder__,
o extrusor dos pesquisadores da universidade da Pensilvânia que permitiu criar vasos sanguíneos com
trilhas tridimensionais de açúcar: https://www.thingiverse.com/thing:26343[_https://www.thingiverse.com/thing:26343_]

Mas, ainda assim, a idéia é promissora, e não faltam iniciativas comerciais que as exploram de uma forma ou
outra. Um exemplo é a impressora multi-extrusores Tytan 3D, que tem uma versão de extrusor de pasta em bowden
com tanque para até 10l de cerâmica.

[[tyttan3dceramica]]
image::image161.png[image,width=642,height=373,align="center",title="Impressora Tyttan 3D com o extrusor de cerâmica. Fonte: http://www.3ders.org/articles/20150630-poland-tytan-3d-unveils-the-gaia-multitool-maxx-3d-printer-with-10-interchangeable-heads.html"]

Outro exemplo notável, este mais prático para o hobbyista, é a empresa italiana Open Electronics, que comercializa
um extrusor aquecido com seringa de 60ml que pode ser montado em qualquer reprap:

[[extrusor3dchoco]]
image::image162.jpeg[image,width=642,height=389,align="center",title="O 3DChoco, extrusor open-source aquecido (chega até 60°) para pastas como chocolate quente e outras pastas de baixa temperatura. https://store.open-electronics.org/3DCHOCO"]

Do mesmo modo que encontramos empreendimentos comerciais que usam essa criatividade para contribuir com o
ecossistema aberto, entanto, também existem os parasitas que desejam achar nela um ponto de vantagem para
fechamento, delimitação e controle de mercado, principalmente através do mecanismo de patentes -- aprendizes
de Stratasys, por assim dizer. Um exemplo notável é a impressora __MarkForged Mark Two__, que imprime em nylon
entremeado com uma linha de fibra de carbono^1^. Outro modo frequente é tentar seduzir o usuário menos técnico
com uma "facilidade" que envolve sequestro do controle, com um exemplo famoso sendo a linha de impressoras FFF
_Cube_ da 3D Systems que usa cartuchos de filamento plástico proprietário, que permite a troca de modo fácil e
automático e até com previsão de término do material. Felizmente foi uma estratégia que falhou pateticamente,
tanto por saudável concorrência do mercado de outros fabricantes de impressoras 3D quanto pelo surgimento de
dispositivos, como o brasileiro __Cube3DFree__^2^, que permitiam evadir o chip detector e usar filamentos comuns
de mercado. Isso é um lembrete que o risco de perdas de liberdade, controle e progresso tecnológico está sempre
presente, e por isso é essencial sempre buscar conscientizar __maker__s, usuários e consumidores de tecnologia.

Essa liberdade de criação não deixou de ser aproveitada por outros ramos do conhecimento científico, em especial
os ramos da biologia e medicina. O extrusor open-source _Baricuda_ mencionado, usado em aplicações biomédicas,
é um exemplo incipiente do surgimento um campo ainda experimental mas em rápido progresso: as __bioimpressoras__.

[NOTE]
.Notas:
====
. https://www.youtube.com/watch?v=ClLW4Ti5kQ4[_https://www.youtube.com/watch?v=ClLW4Ti5kQ4_] tem a avaliação
de Thomas Sanladerer da impressora 3D da MarkForged. Sem dúvida, essa impressora 3D seria muito útil para ajudar
no problema de impressão de próteses de membros inferiores, por exemplo, razão pela qual o GPMA do Instituto
Tecnológico da Aeronáutica brasileiro a adquiriu. No entanto, sua patente impede que alternativas surjam e o
preço fique acessível, e a tecnologia fica novamente aprisionado por 20 anos antes que possa ser utilizada pelas
massas e se beneficiar da _frictionless innovation_ e da criatividade de muitas mentes pensantes. A situação
é tão grave que aos 12min30s do vídeo, Tom, uma pessoa contida e normalmente estritamente técnica, reclama da
impossibilidade de melhorar e popularizar a impressora devido às patentes sobre sua tecnologia e dá um educativo
sermão contra as patentes e outros bloqueios em geral.
. https://www.cube3dfree.com/[_https://www.cube3dfree.com/_]. Parabéns aos empreendedores que trabalham para
melhorar a vida das pessoas!
====

==== A BioImpressão 3D

A impressora 3D FFF nada mais é que um braço robótico que movimenta um cursor em coordenadas arbitrárias de
um volume tridimensional, este cursor tendo o extrusor que conhecemos, seja o extrusor de plástico, a seringa
de pasta ou qualquer outro dispositivo. Já vimos a mecânica e a eletrônica dessa parte e sabemos que não é
exatamente _simples_ -- mas também está longe de ser tecnologia de ponta: todo o material pra construí-la está
prontamente disponível no site reprap, a teoria que a sustenta é convencional e lecionada em universidades nos
cursos de mecatrônica, engenharia elétrica, computação, física e outros.

Uma das extensões e aplicações mais promissoras da idéia de impressão 3D, no entanto, tem muito maior relação
com o realmente novo e inexplorado. É a assim batizada __bioimpressão 3D__, ou simplesmente __bioimpressão__:
a idéia de utilizar __material vivo__, na forma de tecidos biológicos ou culturas de células, para criar ou
alterar órgãos, sistemas e estruturas tridimensionais.

[[umabioimpressora]]
image::image163.png[image,width=602,height=551,align="center",title="Uma bioimpressora 3D. Fonte: https://en.wikipedia.org/wiki/3D_bioprinting"]

E é __aí__, no **extrusor**, que reside a maior dificuldade. Em como conter, tracionar, conservar e encapsular esse
material biológico, incluindo células e biomoléculas. Não é qualquer matéria-prima: não se pode simplesmente
espirrar um jato de células em cima de uma mesa como se faz com o plástico derretido e esperar que dê certo. Mesmo
envoltas por um gel de sustentação, não formarão estrutura, colapsando sobre seu peso; mesmo formando estrutura,
não terão condições fisiológicas que as permitam sobreviver, nem os vasos e as estruturas intracelulares que
possibilitem tais condições; e mesmo tendo vasos e capilares para as trocas gasosas, alimentação e excreção
e uma matriz extracelular de sustentação e ligação, não terão os complexos e diversos gradientes químicos
e mensageiros moleculares que lhes dão as sinalizações que lhes permitem definir a posição que ocupam e
portanto como devem se desenvolver; e até a orientação que terão, como no caso de fibras musculares, faz
diferença. E além disso, muitos fatores ambientais têm que ser estritamente controlados como esterilização,
biocompatibilidade dos componentes, vedação, pressão, temperatura, umidade, gases dissolvidos, etc., com sensores
para medir e componentes ativos como aquecedores e desumidificadores para tornar os índices adequados. Não só
no extrusor: a "mesa" ou recipiente em que a forma é lentamente traçada também. As preocupações não
param por aí: material vivo está em constante "movimento", com metabolismo e deslocamentos físicos sendo
parte de seu funcionamento. Uma bioimpressão que usasse de camadas superpostas como as FFF, demorando horas pra
completar, teria que conter o movimento, ou lidar com ele de alguma forma, para a viabilidade da peça final. As
complexidades disso são grandes e envolvem também o modo pelos quais as células se movem na direção de outras
com aderência similar para criar estruturas estáveis; este resultado deve ser simulado para assegurar que o
procedimento computadorizado se adequará ao desejado.

Ainda existe o problema de criar modelos biológicos adequados -- seja por meio de escaneamento, biópsia, tomografia
computadorizada, ressonância magnética, modelagem ou uma combinação de métodos. Então, a partir disso e
com estimativas dos materiais, separar os tipos de células a serem utilizados e preparar o agregado com o gel ou
biomateriais, para disponibilizar para o extrusor. Essa etapa é a __pré-bioimpressão__. A _pós-bioimpressão_
trata do processo de manter a forma biológica viva, em desenvolvimento e com integridade, possivelmente com
estimulações químicas e mecânicas.

Claro, raramente será necessário resolver todos esse problemas de uma vez -- o extrusor _baricuda_ tendo apenas
aquecimento e trabalhando com água e açúcar constrói um arcabouço biodegradável que é naturalmente utilizado
pelos processos celulares da cultura com que é envolto para a formação e desenvolvimento de vasos e capilares,
e só isso já representa um salto de possibilidades em relação ao que se tinha antes.

===== Biotinta

O material que se usa em uma bioimpressora 3D tem o nome em inglês de **BioInk**, ou *Biotinta* em português. Não
somente por analogia com a tinta utilizada em impressoras 2D de escritório, mas pode-se dizer que o nome "pegou"
também por seu histórico: as microscópicas gotas de tinta de impressoras a jato de tinta são aproximadamente
do tamanho de células -- em especial, de células humanas (perto de 10 µm). E o método de entrega de tinta de
impressoras como as __Canon__, "Thermal DoD" (gotícula sob demanda térmica) cria uma corrente que aquece
uma unidade, gerando uma bolha que propele a "tinta" de células no substrato. Este método, iniciado pelo
cientista Makoto Nakamura^1^, foi tão efetivo que hoje já existem tutoriais de internet ensinando a transformar
sua impressora de jato de tinta em bioimpressora.^2^

Uma estratégia básica de lidar com biotintas é ter dois materiais: um de estruturação e proteção e o outro
com as células vivas. Um extrusor especial despeja as gotículas celulares por um bico enquanto extrusa o material
protetor (geralmente um hidrogel compósito, como alginato misturado com gelatina) em volta.

[[biotintagraf1]]
image::image164.png[image,width=606,height=463,align="center"title="Exemplo de um tipo de extrusor usado em bioimpressão. As células são dispensadas por **Thermal DoD** enquanto o hidrogel de sustentação é extrusado em volta."]

No estágio atual da bioimpressão 3D, temos iniciativas open-source como a bioimpressora 3D __**Renegade**__ da
empresa Ourobotics, assim como alguns projetos menores de equipamentos semelhantes de cunho biológico^3^. No
campo mais industrial, a empresa *Organovo* tem feito bastante incursões na bioimpressão 3D com tecnologias de
tecidos e impressão de órgãos, como rins e fígado, além da impressão de tumores sob demanda, para testes
farmacológicos ágeis. É difícil limitar as possíveis aplicações da bioimpressão 3D. Christopher Barnatt
mostra em seu vídeo possibilidades verossímeis que assustam^4^, como a utilização em cirurgias plásticas:
bioimpressoras acopladas ao rosto rapidamente evaporariam pele antiga para imprimir pele nova no formato desejado,
como um rosto baixado da internet, ou o escaneamento 3D do rosto da mesma pessoa quando mais jovem. Outras
bioimpressoras poderiam ter extrusores cirúrgicos que penetram o corpo e poderiam imprimir órgãos __in situ__,
fazendo as conexões nervosas e sanguíneas durante o próprio processo de impressão. É muito fácil ser perder
na imaginação, e para o leitor curioso, separamos alguns links que certamente serão úteis, incluindo um curso
completo de bioimpressão com diploma (em inglês) pela net^5^.

[NOTE]
.Notas:
====
. O professor Makoto Nakamura é conhecido por ter dado a "ignição" em toda a idéia de
bioimpressão, com vários artigos científicos publicados sobre o assunto. Para facilitar o acesso, o texto
completo de um de seus artigos de alto impacto que melhor resumem as técnicas está disponível neste endereço,
http://ijb.whioce.com/index.php/int-j-bioprinting/article/view/01007[_http://ijb.whioce.com/index.php/int-j-bioprinting/article/view/01007_].
O artigo também é valioso por ter em suas referências vários outros artigos seminais para a compreensão do
problema, incluindo outros do próprio Nakamura. Em padrão APA de citação: Nakamura, M., Mir, T. A., Arai, K.,
Ito, S., Yoshida, T., Iwanaga, S., ... & Nikaido, T. (2015). Bioprinting with pre-cultured cellular constructs
towards tissue engineering of hierarchical tissues. __International Journal of Bioprinting__, __1__(1).
. http://www.instructables.com/id/DIY-BioPrinter/[_http://www.instructables.com/id/DIY-BioPrinter/_]
. Notícia com explicações e links da Renegade:
http://www.3ders.org/articles/20160204-ourobotics-releases-completely-open-source-renegade-3d-bioprinter.html[_http://www.3ders.org/articles/20160204-ourobotics-releases-completely-open-source-renegade-3d-bioprinter.html_].
Além dela, um projeto com bastante abertura e API para comunicação com um _robô de pipetagem_ que pode ser
transformado em bioimpressora é o opentrons, https://opentrons.com/[_https://opentrons.com/_] com código no
github em https://github.com/OpenTrons[_https://github.com/OpenTrons_]. Na parte de monitoramento e manutenção de
variáveis biológicas, o Farmbot é outro exemplo open-source: https://farmbot.io/[_https://farmbot.io/_]. Não são
bioimpressoras 3D completas mas são projetos de cunho biológico que têm os elementos necessários para formarem.
. http://explainingthefuture.com/video_bioprinting.html[_http://explainingthefuture.com/video_bioprinting.html_]
e https://3dprint.com/93097/bioprinting-3d/[_https://3dprint.com/93097/bioprinting-3d/_]
. o curso de bioimpressão fala também sobre materiais biológicos e biocompatíveis em impressoras 3D
comuns, é gratuito se o aluno fizer no tempo reservado e não precisar de diploma. E é barato se quiser não
só o diploma, mas que fique acessível a qualquer momento. É dado pelo famoso site educacional __FutureLearn__:
https://www.futurelearn.com/courses/bioprinting/[_https://www.futurelearn.com/courses/bioprinting/_]..
====

== Os Materiais de Impressão 3D FFF

=== Introdução: polímeros e plásticos

De todos os materiais que encontramos no dia-a-dia, os _polímeros_ são os que nos interessam. O que é um
polímero? Muitos dos materiais que conhecemos, como a água (H₂O), o sal (NaCl) e acetona (C₃H₆O) são
moléculas simples, mantidas coesas por forças moleculares de atração mas sem "ligações" facilmente
discerníveis. Os **polímeros**, no entanto, são diferentes: ao invés de uma molécula do material permanecer
sozinha, ela estabelece uma ligação molecular do tipo covalente com uma molécula do mesmo tipo. Com duas
moléculas compondo uma **macromolécula**, essa composição de dois elementos é chamada de um **dímero**,
e cada componente do dímero um **monômero**. Mas os polímeros tendem a continuarem a escalada: a molécula de
um extremo se liga a outro monômero, a do outro também, e por aí se estendem, até formarem filetes moleculares
extremamente longos e de números variáveis de monômeros.

image::image165.png[image,width=618,height=566,align="center",title="O plástico PVC, um polímero (e plástico) bastante usado para canos, lacres e laminados para embalagens. O polímero da fórmula tem 7 monômeros (heptâmero), o da figura tridimensional 10 monômeros (decâmero), mas são o mesmo material. Tipicamente as cadeias poliméricas têm número de monômeros ordens de grandeza maior. Este polímero se estende linearmente mas existem polímeros que podem se estender em várias direções ao mesmo tempo em 3 dimensões."]

Muitos fenômenos e reações diferentes podem fazer as moléculas se unirem de forma polimérica, desde reações
químicas "convencionais" usando catalisadores até processos físicos e químicos mais elaborados como
a incidência de luz -- princípio da estereolitografia, que vimos nas técnicas de impressão 3D; a cura da
substância nada mais é que a união dos monômeros. Essa reação geralmente confere ao material uma rigidez
e resistência aumentadas. Quando o arranjo polimérico é formado não apenas de um tipo de polímero, mas um
número discreto de monômeros básicos, é chamado de um copolímero. O plástico ABS, que veremos mais adiante,
é um desses arranjos, formadas dos monômeros Acrilonitrila, Butadieno e Estireno (Styrene, em inglês). Note
ainda que a polimerização pode mudar consideravelmente as propriedades das moléculas individuais -- o estireno,
em sua forma monomérica, é bastante tóxico ao ser humano, mas na forma polimérica é basicamente inerte.

Embora as características variem de acordo com o material, os polímeros costumam apresentar as seguintes
propriedades:

* *Resistência a produtos químicos* -- o arranjo em cadeia confere proteção a muitos reagentes comuns.
* *Isolamento* térmico e elétrico -- a estrutura do polímero favorece espaços vazios e costuma ter indisponibilidade
de elétrons móveis, o que facilita o isolamento térmico e elétrico.
* *Leveza* -- os mesmos espaços vazios
costumam fazer dos polímeros materiais relativamente leves.
* Facilidade de processamento e *usinagem* -- o fato
de serem facilmente arranjados em fibras e de as cadeias poliméricas serem bastante manuseáveis por processos
mecânicos e térmicos confere a eles posição predominante na indústria.
* **Têm uma variedade muito grande de propriedades e cores**, derivando tanto das propriedades dos monômeros quanto das cadeias poliméricas e suas formas.

De todos os polímeros naturais ou artificiais, os plásticos são os que mais nos interessam. São uma categoria
de polímeros extremamente numerosa e variada e útil, e são definidos como materiais poliméricos orgânicos
sintéticos com grande maleabilidade. A maioria dos plásticos vem do petróleo, com a indústria procurando
descobrir novos bioplásticos para não exaurir totalmente esse recurso finito. O bioplástico mais conhecido
e utilizado é o **PLA**, ácido polilático. Apesar de não os enxergarmos como "plásticos", muitos dos
materiais do nosso dia-a-dia o são, como nylon (poliamida), isopor e teflon (PTFE).

Na era do surgimento da Stratasys, a indústria de plásticos já era bem estabelecida, e o ABS já era bastante
utilizado em todo tipo de item doméstico, comercial e industrial. Ainda hoje ele está entre os mais utilizados
nas impressoras 3D. Seu baixo preço e facilidade de ser moldado em forma de um carretel de filamento contribuíram
bastante para a universalidade de sua adoção. Entretanto, com a diversificação de materiais disponíveis para
impressão 3D, o ABS tem sofrido lenta queda de utilização, especialmente na Europa.

Os filamentos no início eram fabricados com o diâmetro de aproximadamente 3mm (na prática, algo entre 2,75 a
2,95mm), principalmente por limitações do processo de "extrusão" do início da indústria. Após a abertura
do mercado em 2009, uma outra variedade apareceu com diâmetro de 1,75mm (na prática, de 1,6mm a 1,75mm). Hoje, os
filamentos de 1,75mm já são dominantes no mercado, principalmente porque precisam de menor torque no tracionamento
e têm menos pressão na câmara de derretimento, permitindo grande simplificação das peças de impressoras. Para
a impressora 3D funcionar com o filamento, precisa somente de um extrusor fabricado para aquele diâmetro; todas
as outras peças são independentes disso.

Pra entender melhor os materiais, antes precisamos aprender sobre as propriedades que nos interessam. Este
conhecimento é necessário não só para saber critérios para escolher o material para dada aplicação, como
também para resolver problemas relacionados a essas propriedades.

=== Propriedades Térmicas

Os plásticos podem ser moldados em determinada forma e após a moldagem, permanecerem fixos nesta forma. Se dividem
em dois tipos principais quanto ao comportamento térmico: termofixos (ou thermosets, em inglês) e termoplásticos.

* Os _*termofixos*_ ou _*termorrígidos*_ são os plásticos que após a solidificação não podem retornar ao
estado moldável; como um pão que, depois de assado, não pode retornar ao estado flexível de sua massa crua. Isso
acontece porque com este aquecimento, ligações cruzadas acontecem nas cadeias poliméricas formando novas ligações,
essas irreversíveis. Tentativas de reaquecimento somente levarão à degradação e desintegração do plástico.
* Os _*termoplásticos*_ são os plásticos que podem ser novamente derretidos para um estado moldável, pois
nenhuma nova ligação química acontece na transição de estado, e são eles que utilizamos na impressão
3D FFF.  * Alternativamente, algumas vezes se encontram como um terceiro tipo os plásticos _*elastômeros*_ (ou
borrachas). São plásticos com estruturas similares aos termorrígidos, mas com número bem menor de ligações
cruzadas e alta elasticidade.

A propriedade térmica mais importante dos termoplásticos para nossos propósitos é a __transição
vítrea__. Diferentemente de uma substância simples como a água, que tem transições de fase de maneira
abrupta e instantânea -- abaixo de zero graus está em estado sólido, acima está em estado líquido -, os
termoplásticos têm uma "pseudo-transição de fase" suave e relacionada à estrutura de suas moléculas
(amorfa ou semicristalina com regiões amorfas). Este tipo de transição é chamada de __transição vítrea__,
"glass transition" em inglês (índice "Tg"), e é dada por uma faixa de temperaturas em que a consistência
do material fica em forma pastosa, "em transição" de sólida para líquida. A temperatura de transição
vítrea é sempre menor que a temperatura de derretimento.

==== *O "Warp"*

O maior problema de todos na impressão 3D está relacionado à temperatura: __warping__. Como a grande maioria dos
materiais, os plásticos têm coeficiente de expansão térmica positiva, isto é, à medida que sua temperatura
aumenta, devido ao aumento de energia cinética, seu volume também aumenta, e igualmente, com a temperatura
diminuindo, o volume diminui, numa razão de proporcionalidade. Embora a pressão atmosférica também influencie
nesse volume (quanto maior a pressão, menor o volume), a expansão térmica é um fenômeno determinístico e
não pode ser impedido.

No processo de impressão 3D FFF, o material é submetido a uma intensa mudança de temperatura em pouco tempo:
é rapidamente passado da temperatura ambiente para uma temperatura de estado líquido, extrudado e então deixado
esfriar de maneira mais lenta para haver a aderência entre camadas e endurecimento. Isso quer dizer que ele
sai de um volume expandido para um volume mais contraído logo após a extrusão. Como a impressão de uma peça
tipicamente leva horas, isso significa que algumas partes dela terão tido mais tempo pra esfriar do que outras,
e estando em temperaturas diferentes, terão também volumes diferentes.

Esta diferença de volume, ainda que nas diferenças de temperaturas típicas da impressão 3D do plástico
mais comum seja da ordem de décimos de milímetros em uma peça de vários centímetros, não acontece sem
consequências. Embora no final do processo todo o plástico depositado inevitavelmente entra em equilíbrio térmico,
ficando na temperatura ambiente e portanto no mesmo volume relativo, as diferenças durante o processo podem gerar
deformações que permanecem na peça (afinal, as coordenadas para a deposição do plástico não mudam), de modo
que até a peça pode ser inutilizada. Por exemplo: como as quinas de um objeto quadrado estão mais expostas à
temperatura que as laterais, é comum que em uma impressão essas partes se contraiam mais rápido e levantem,
deixando a peça empenada. Outro exemplo: como a parte do plástico em contato com a mesa contrai, isso pode levar
ao descolamento da peça da superfície. Ainda outro exemplo: duas áreas contínuas podem acabar "rasgando"
espontaneamente por as duas esfriarem de tal modo que a força de contração nelas "puxa" os átomos para
seus respectivos centros de massa. Esse último fenômeno ganhou o apelido de __delaminação__.

image::image166.jpeg[image,width=572,height=378]

Para arrematar, plásticos mais resistentes ao calor (como policarbonato e ABS) terão temperatura de transição
vítrea maior, o que quer dizer que têm um intervalo maior de temperaturas em que ficam no estado sólido. É o
encolhimento quando o material está no estado sólido que gera os maiores problemas, pois se estiver no estado
pastoso da transição vítrea, o material não cria tensões no resto do objeto.

A *umidade* também afeta como o warp se manifesta. Moléculas de água facilitam com que o polímero em alta
temperatura sofra __hidrólise__, o que faz com que seus filetes poliméricos se rompam e fiquei mais curtos,
deixando o material mais fraco e com menor aderência. Além disso, bolhas de ar formadas pela rápida expansão
em alta temperatura também criam poros que enfraquecem a estrutura.

==== A Solução?

Como dito, a mudança de volume com a temperatura é um fenômeno inevitável. E é mais grave com alguns
materiais do que em outros; índices como o coeficiente de calor específico e a condutividade térmica farão
grande diferença. Quanto mais calor o material conduzir, mais rapidamente as temperaturas se equilibram, e menor
a diferença de temperatura que causa os problemas. Por isso um material como o ABS, isolante térmico e com alto
coeficiente de expansão térmico, apresenta este problema de forma muito mais grave que um como o PLA, que tem
maior condutividade térmica e baixo coeficiente de expansão térmica.

Nas impressoras 3D da Stratasys, o problema é mitigado com o uso de câmaras aquecidas. A idéia não é manter
o material em uma temperatura excessivamente alta: é deixá-lo temporariamente exposto a uma temperatura em que
ainda esteja sólido mas em que o volume não tenha se contraído tanto que prejudique a peça. Para o ABS, que
tem temperatura de transição vítrea começando em 105°C, por exemplo, 85°C na câmara é suficiente. Assim
a diferença de temperaturas entre várias da peça fica sempre mínimo, e uma vez a impressão termine, basta
abaixar a temperatura vagarosamente para a peça estabilizar.

image::image167.png[image,width=642,height=352]

Nas impressoras RepRap, em que o baixo custo é um imperativo, a câmara aquecida, um componente que é tipicamente
dispendioso para construir e consumidor de muita energia, foi substituído pela __mesa aquecida__. Além de gastar
muito menos energia, o calor se concentra na parte da impressão 3D mais crítica para a qualidade da peça --
as primeiras camadas. Para peças baixas - digamos, até 5 cm -, ela é tão efetiva quanto a câmara, e pode ser
usada em impressoras 3D abertas.

A estratégia recomendada para a mesa aquecida é colocá-la em uma temperatura em que o plástico fique pouco
acima de seu ponto de transição vítrea. No estado pastoso que a caracteriza, a viscosidade do plástico torna
sua aderência bem alta, o que garante estabilidade na mesa. Assim, para o ABS, por exemplo, coloca-se uma mesa em
contato direto com o plástico a 110°C, ou 120°C se o vidro for usado pra compensar o decréscimo de temperatura
que ele causa.

=== *Propriedades Químicas*

Uma característica dos plásticos em geral que os faz tão apropriados à civilização moderna é a estabilidade
química, que ocorre quando um sistema está no seu nível mais baixo de energia. Comparados a outras classes de
compostos, os plásticos são relativamente resistentes a reações e degradação. Ao mesmo tempo em que isso é
uma vantagem, também é um revés pois é esta mesma estabilidade dos plásticos que os torna difíceis de serem
digeridos por bactérias e outros microorganismos e voltarem à natureza; isso os torna um problema ecológico e
ambiental. Tal resistência não é completa, no entanto, e varia de acordo com o plástico específico. Os assim
chamados "__plásticos de engenharia__" são um grupo que tem propriedades térmicas, mecânicas e químicas
consideradas mais desejáveis que os mais baratos "plásticos commodity" (poliestireno, PVC, polipropileno
e polietileno, princopalmente). Muitos desse grupo serão os termoplásticos usados em impressão 3D (como ABS,
policarbonato, PETG, nylon).

Não há tanto em comum entre eles; de forma geral, o máximo que se pode dizer é que a maioria, incluindo os
"de engenharia", é lentamente afetada por radiação ultravioleta, se degradando (perdendo a polimerização
e portanto a estrutura) após longa exposição. Mais do que isso depende do polímero específico, pois tais
características variam bastante.

Mais genericamente, no entanto, começa a ficar interessante quando abordamos as propriedades _biológicas_
dos plásticos. Essas têm especial significado para nós, seres vivos baseados em carbono, pois remetem à nossa
interação direta com eles. Na verdade, é mesmo difícil de separá-las das propriedades químicas: a estabilidade
química não é também ambiental?

=== Propriedades Biológicas

Para falar destas propriedades, optamos por dividi-las em 3 categorias. Uma de potenciais danos à saúde, de
forma mais genérica; outra, de reciclagem e biodegradação. E por mim, vamos falar sobre seu uso alimentar e médico.

==== Potenciais danos à saúde

Todos os termoplásticos usados em impressão 3D são já conhecidos da indústria e usados na manufatura
industrial há décadas -- excetuando talvez o PLA que é mais recente e tem uso mais tímido, mas mesmo assim
não desprezível. Com todo um setor produtivo dedicado inteiramente aos plásticos por tanto tempo, era de se
esperar que exista uma vasta literatura sobre o assunto -- e existe, de modo que fica impossível listar realmente
toda e qualquer consequência biológica nociva. Mas, de modo geral, os maiores problemas diretos dos plásticos
ocorrem quando são queimados, liberando compostos orgânicos voláteis (**VOCs**), principalmente tóxicos da
classe conhecida como __dioxinas__^1^_,_ mas também os __ftalatos__, muitos desses dos aditivos que lhes são
adicionados para conferir determinadas propriedades. Os ftalatos e um aditivo usado para endurecer plástico,
o Bisfenol A ou BPA, também podem "vazar" dos plásticos que o contém por aquecimento simples ou stress
mecânico. Dioxinas, alquilfenóis, ftalatos (especialmente o bis (2-etil-hexil) ftalato, ou DEHP) e o BPA são
_perturbadores_ ou __interferentes endócrinos__, substâncias que se assemelham a hormônios naturais e se ligam
a receptores destes no corpo humano, causando desequilíbrio do sistema endócrino e tendo efeitos de alteração
das funções reprodutivas, mentais e de desenvolvimento do corpo. A extensão do efeito desses perturbadores
endócrinos, especialmente nas doses encontradas em plásticos, ainda é bastante disputada, com o BPA especialmente
ganhando avisos de advertência de uso pelo Instituto Nacional de Saúde dos EUA^2^, ao mesmo tempo em que o Centro
de Controle de Doenças diz não ser tão perigoso assim^3^. E mesmo os plásticos explicitamente vendidos como
"livres de BPA", como o __Tritan__, têm compostos como o BHPF (fluoreno-9-bisfenol) e TPP (trifenil fosfato)
que também causam perturbação endócrina^4^.

De todos os plásticos, o PLA parece ser o mais inofensivo por ser um bioplástico e queimar liberando componentes
orgânicos de pouca toxicidade, como o ácido láctico. Ainda assim, até o PLA padece de um problema que complica o
cenário porque depois que o mercado de impressão 3D FFF se abriu e surgiram os pequenos revendedores e fabricantes
de filamentos, o que antes era uma cadeia de produção única e estritamente controlada se transformou em um caos
de diferentes produtores, misturas diversas e principalmente falta de controle e informação dos materiais. Isso
ainda é reforçado pela velha prática comercial de guardar a formulação e componentes do material como segredo
para impedir a concorrência; quando foi a última vez que você viu discriminados todos os aditivos, dopantes e
corantes do seu carretel de filamento? Isso é especialmente preocupante quando muito da matéria-prima comprada
vem da China, que tem padrões frouxos de controle de material. Quando até corantes podem conter metais pesados
e venenos para obter sua tonalidade, esse não é um perigo desprezível para um plástico derretido a mais de
200°C em uma sala pequena. Então, até o seu carretel de "PLA natural" pode ter substâncias que você
não imaginaria, e não desejaria, que estivessem lá. Isso não seria um problema tão grande se os filamentos
tivessem a sua própria receita publicada em regime __open-source__, o que soa absurdo a um mercado tão secretivo
-- ainda assim, há quem tente^5^.

Um estudo recente (2016) montou um aparato para poder medir as emissões de VOCs de vários filamentos^6^ e com
várias impressoras, com e sem cobertura. Os emitidos em maior quantidade foram caprolactama de filamentos de nylon
e imitação de madeira (de 2 a 180 µg/min), estireno do ABS e HiPS (de 10 a 110µg/min) e lactida (um derivado
irritante do ácido lático) do PLA (de 4 a 5 µg/min),

image::image168.png[image,width=611,height=372]

**Poeira do plástico**: plásticos soltam partículas como a maioria dos materiais e um perigo normalmente
negligenciado por operadores de impressoras 3D é o perigo de partículas sólidas com potencial irritante flutuando
livremente no ar, ainda mais com procedimentos de dia-a-dia como destaque de suportes e _raft_ e lixamento de
superfícies. Nesse caso, como o tamanho do particulado dessas operações fica mais ou menos na mesma faixa
da serragem e pó de madeira da indústria madeireira, entre 10 µm e 1000 µm, precauções dessa indústria
podem ser tomadas como uso de máscara de poeira, mangas longas e luvas e óculos de proteção e operação em
um ambiente arejado ou com exaustão de partículas.^7^

**Partículas ultrafinas**: Há uma diferença significativa, no entanto, entre o pó de madeira (ou a poeira em
geral) e o particulado da impressão 3D: enquanto no caso geral se considera a poeira _muito_ pequena (menor que
10 µm) inofensiva por ser inalada e exalada igualmente, descobriu-se em estudos sobre a possível toxicidade dos
termoplásticos de impressão que eles liberam grande quantidade das assim chamadas __partículas ultrafinas__,
um particulado de menos de 100nm (0,1µm) de diâmetro que, inaladas, podem causar inflamação nos pulmões ou
entrar na corrente sanguínea e interagir com nossas células, ou serem depositados em áreas sensíveis como a
medula espinhal, nódulos linfáticos, baço e coração, em alguns casos podendo até chegar ao cérebro. Estudos
epidemiológicos recentes mostram que há correlação entre essas partículas e relatos de problemas de saúde,
incluindo mortalidade cardiorrespiratória, AVCs e asma^8^. ABS, em particular, libera uma quantidade de partículas
ultrafinas 10 vezes maior que PLA, além de ser mais irritante.

Esse problema é tão mais grave por não ser tão fácil resolver este problema: pra começar, a Stratasys tem
a patente US 6722871 B1^9^, que ainda vai demorar alguns anos para expirar e que efetivamente proíbe fabricantes
que desejam vender impressoras 3D nos EUA de terem uma impressora completamente vedada. Para tornar o problema mais
difícil de resolver, os meios de filtragem convencional como filtros de carbono só funcionam com partículas de no
mínimo 500nm, não servindo para as partículas ultrafinas (a maioria das coberturas anti-emissões de impressoras 3D
do mercado^1^⁰ e mesmo alguns projetos "faça você mesmo" não levam isso em consideração^1^^1^). É certamente
uma demanda de mercado que está custando a ser atendida até no exterior, que dizer então do Brasil... No momento,
as únicas mitigações parecem ser imprimir em local arejado e não permanecer muito tempo perto da impressora 3D,
e talvez fazer uma cobertura com adaptador para sugar o ar da impressora (e ainda fica a dúvida de como capturar
as partículas ultrafinas para evitar que voltem ao ambiente).

Notas:

1 -
http://www.ecycle.com.br/component/content/article/35-atitude/1073-conheca-os-perigos-da-dioxina-e-como-preveni-los.html[_http://www.ecycle.com.br/component/content/article/35-atitude/1073-conheca-os-perigos-da-dioxina-e-como-preveni-los.html_]

2 -
https://www.niehs.nih.gov/health/topics/agents/sya-bpa/index.cfm[_https://www.niehs.nih.gov/health/topics/agents/sya-bpa/index.cfm_]

3 -
http://factsaboutbpa.org/what-does-us-government-research-tell-us-about-bpa[_http://factsaboutbpa.org/what-does-us-government-research-tell-us-about-bpa_]
-- a página é na verdade um apanhado de fatos sobre o BPA com links para órgãos do governo estadunidense. O
leitor nos perdoe pela falta de estudos nacionais.

4 -- __http://www.popsci.com/bpa-free-plastic-bad-for-human-health#page-2__. É interessante também
ler a reportagem que trata das batalhas jurídicas envoltas nas acusações de danos do Tritan:
http://www.npr.org/sections/health-shots/2015/02/16/385747786/beyond-bpa-court-battle-reveals-a-shift-in-debate-over-plastic-safety[_http://www.npr.org/sections/health-shots/2015/02/16/385747786/beyond-bpa-court-battle-reveals-a-shift-in-debate-over-plastic-safety_]

5 -
https://opensource.com/article/17/5/open-source-3d-printing-filament[_https://opensource.com/article/17/5/open-source-3d-printing-filament_]
-- tais iniciativas devem sempre ser incentivadas através de escolha de consumo consciente e contínua cobrança
dos produtores por transparência.

6 - Azimi, P., Zhao, D., Pouzet, C., Crain, N. E., & Stephens, B. (2016). Emissions of ultrafine
particles and volatile organic compounds from commercially available desktop three-dimensional printers
with multiple filaments. __Environmental science & technology__, __50__(3), 1260-1268. Disponível em
http://pubs.acs.org/doi/full/10.1021/acs.est.5b04983[_http://pubs.acs.org/doi/full/10.1021/acs.est.5b04983_],
A informação de suporte está em
http://pubs.acs.org/doi/suppl/10.1021/acs.est.5b04983/suppl_file/es5b04983_si_001.pdf[_http://pubs.acs.org/doi/suppl/10.1021/acs.est.5b04983/suppl_file/es5b04983_si_001.pdf_].

7 -- Embora haja referências breves na internet em português sobre perigos da poeira como
http://www.ehow.com.br/perigos-particulas-madeira-sobre_125562/[_http://www.ehow.com.br/perigos-particulas-madeira-sobre_125562/_],
as mais completas e informativas estão em inglês, como esta australiana de uma associação madeireira:
http://www.fwwa.org.au/Art005_WoodDust_c1.pdf[_http://www.fwwa.org.au/Art005_WoodDust_c1.pdf_]

8 -
http://built-envi.com/portfolio/ultrafine-particle-emissions-from-3d-printers/[_http://built-envi.com/portfolio/ultrafine-particle-emissions-from-3d-printers/_]
tem uma apresentação amigável do artigo, que é: Stephens, B., Azimi, P., Orch, Z. E., & Ramos,
T. (2013). Ultrafine particle emissions from desktop 3D printers. _Atmospheric Environment,_ __79__,
334-339. doi:10.1016/j.atmosenv.2013.06.050 e uma nova análise com recomendações foi feita recentemente em
http://ulchemicalsafety.org/initiative/3d-safety-science-proceedings/[_http://ulchemicalsafety.org/initiative/3d-safety-science-proceedings/_]
(PDF em inglês, 24 páginas)

9 - http://www.google.co.uk/patents/US6722872[_http://www.google.co.uk/patents/US6722872_]

10 -- No momento da publicação deste livro, a única solução comercial
que achamos que leva em consideração as partículas ultrafinas é esta:
http://www.bofaamericas.com/3D-printing-fume-extraction.asp[_http://www.bofaamericas.com/3D-printing-fume-extraction.asp_]

11 - apenas como referência, o site _3d printing industry_ mostra projetos para ligar um exaustor à impressora:
https://3dprintingindustry.com/news/3d-printer-exhaust-redirect-noxious-fumes-21300/[_https://3dprintingindustry.com/news/3d-printer-exhaust-redirect-noxious-fumes-21300/_]

==== Reciclagem e Biodegradação

As palavras _reciclar_ e _biodegradável_ aparecem tanto na linguagem informal que podem parecer significar a mesma
coisa, ou pelo menos algo muito próximo. Mas não são, e em um certo sentido podem ser vistas até como opostos, ou
pelo menos dois lados da mesma moeda -- a moeda de minimizar o nosso impacto ambiental. Grosso modo, _biodegradável_
é aquilo que naturalmente se desintegra e volta a fazer parte do ambiente, enquanto que _reciclamos_ o material
não-biodegradável para que volte a fazer parte de objetos úteis e não tenhamos que extrair mais da natureza.

Mas _grosso modo_ não é suficiente para esse assunto. Ele tem definições precisas, padronizadas internacionalmente,
alguns exemplos são a norma brasileira para ensaio de plásticos biodegradáveis e compostáveis -- NBR 15448-1
(nomenclatura) e NBR 15448-2 (requisitos e métodos), a norma estadunidense ASTM D6400 e a europeia EN 12432^1^. Saber
pelo menos algumas dessas definições já nos dá guia para entender o cenário em que navegamos.

* **Reciclável**: todo material que após transformações físicas ou químicas podem ser reutilizados no mercado,
seja sob a forma original ou como matéria-prima para outros objetos de finalidades diversas.
* **Retornável**:
objetos que podem ser reutilizados na mesma função sem passar pela reciclagem do material, como garrafas
de cerveja.
* **Reutilizável**: objetos que podem ser reutilizados na mesma função ou em novas funções
após seu uso inicial, como potes de alimentos que podem ser usados como copos ou como pequenas caixinhas para
pertences pessoais.
* **Renovável**: designação usada também para energia, um recurso renovável é aquele
que pode ser restaurado por processos naturais a uma velocidade superior a seu consumo por humanos. O exemplo
canônico de recursos __não-__renováveis é o petróleo, um composto fóssil que ainda dá origem à maioria
dos plásticos de impressão 3D e surgiu a partir de transformação química sob alta pressão e temperatura de
restos orgânicos de fauna e flora microscópica por milhões de anos.
* **Degradável**: um material que seja
_degradável_ submete-se a uma mudança significativa em sua estrutura química sob circunstâncias ambientais
específicas, tendo por resultado a perda de algumas propriedades químicas e/ou físicas.  * *Oxidegradável* ou
**Oxibiodegradável**: o segundo termo é usado informalmente como sinônimo do primeiro, embora não signifique
estritamente o mesmo. É o material que pode sofrer degradação por ação do oxigênio, geralmente com um aditivo
para acelerar o processo. Essa degradação não é completa, levando somente à fragmentação do plástico,
sem facilitar seu retorno a cadeias naturais e deixando mais difícil de tratar, visto que é perdido como poeira.
* **Hidrodegradável**: material que pode ser degradado por ação da água (hidrólise).
* **Fotodegradável**:
material que pode ser degradado por ação da luz.
* **Termodegradável**: material que pode ser degradado por ação
do calor.
* **Biodegradável**: material que pode sofrer degradação por atividade biológica de ocorrência natural
através de ação enzimática. Pode ser *aeróbica* quando é em presença de oxigênio, *anaeróbica* na ausência
deste. A degradação anaeróbica costuma ter como subproduto o metano, e os dois tipos geram também dióxido de
carbono e matéria orgânica estabilizada.
* **Compostável**: material que pode sofrer revalorização de seus
resíduos orgânicos via biodegradação aeróbica controlada. A compostagem é verificável com certificação --
por exemplo, para ser compostável o material tem que biodegrada obrigatoriamente em até 180 dias. Intuitivamente,
a compostabilidade significa que o material biodegrada facilmente e pode ser também reutilizado facilmente.  *
**Repolpável**: adjetivo usado geralmente para fitas e adesivos que são naturalmente absorvidos pela superfície
de aderência.
* **Bioplásticos**: a palavra é usada para designar os plásticos de duas categorias distintas^2^:
** Polímeros feitos ao todo ou em parte de **fontes renováveis**, sejam biodegradáveis ou não; ou ** Polímeros
**biodegradáveis**, seja de fonte renovável ou fonte fóssil.

A riqueza de termos do assunto mostra a diversidade de conceitos com o que lidar. Fica mais fácil citar
exemplos. O ABS não é de fonte renovável (vem do petróleo) e também não é biodegradável, ou seja, não é um
bioplástico. Por outro lado, o PLA é um "bioplástico do bem": é de fonte renovável (milho, cana-de-açúcar
e outros), é biodegradável, compostável e até repolpável. Ambos, porém, são recicláveis, isto é: as
impressões 3D feitas com eles podem ser moídas e o plástico reutilizado no mercado -- e um desses usos, é
claro, é ser novamente derretido e virar filamento para impressão. O processo passa pelas seguintes etapas^3^:

* *Coleta* e **separação**: a separação dos resíduos de acordo com o seu material.
* **Revalorização**:
é a fase na qual o material já separado passa por um processo que faz com que ele volte a ser matéria-prima,
envolvendo também limpeza e eliminação de resíduos.
* **Transformação**: fase em que o material transformado
em matéria-prima volte a ser produto. Pode ser **química**, *energética* ou **mecânica**, no caso dos filamentos
de impressão 3D ela é mecânica (trituração do plástico para pequenos flocos), e necessita ainda de mistura
com uma porcentagem (geralmente entre 10 a 60%) de plástico não-reciclado do mesmo tipo para assegurar a qualidade
do filamento resultante.

Nesse processo, empresas com fins lucrativo são essenciais, pois permitem que essas etapas adquiram economia
de escala e sejam sustentáveis. Além de empresas especializadas em reciclagem de plásticos, estão surgindo
também empresas especializadas em reaproveitamento para impressão 3D, no Brasil a pioneira sendo a PrintGreen3D,
que comercializa filamentos reciclados e no futuro pretende expandir suas operações com pontos de arrecadação
para partes de impressão 3D descartadas.

image::image169.png[image,width=642,height=189]

Existe, entretanto, um porém. Em todas essas etapas, existe uma crítica, que é a de separação. Esse processo pode
ser bem complexo e caro, ainda mais se forem usados muitos tipos diferentes. Em um mundo ideal, esses plásticos
já viriam separados. De fato, a separação prévia dos plásticos por tipo é tão importante que já existe
há anos a classificação de reciclagem de plásticos, que você já deve ter reparado em utensílios que tenha usado:

image::image170.jpeg[image,width=642,height=487]

A separação de plásticos é uma necessidade no Brasil, essencial para a viabilidade da reciclagem visto que
o processo de separação automatizado é caríssimo^5^. O problema é que classificação ilustrada é usada em
utensílios industrializados convencionais, mas embora alguns plásticos até possam ser usados na impressão 3D
(como PEAD e PP), os principais ficam de fora, agrupados genericamente. Esse é um campo em que órgãos normativos
privados, que tenham maior agilidade de processo que entidades industriais e ligadas ao governo como a ABNT com
suas normas cobradas, poderiam criar recomendações que seriam mais do que bem-vindas. Evitariam o desperdício,
permitiriam baratear os insumos e até a substituir outros processos de fabricação onde a vantagem ecológica
se faça necessária (ainda mais considerando que o relativamente baixo desperdício de material já faz da FFF
ecologicamente superior em relação a outros processos de fabricação^6^).

==== Extrusoras / Filamentadoras Maker: são práticas?

Uma das surpresas de quem começa a comprar carretéis de impressão 3D é um preço: um quilo de plástico de
impressão 3D que custa 120 reais, por exemplo, pode ser encontrado por 15 reais ou até menos em sua forma bruta de
indústria em _pellets_ (grãos) de plástico. Exploração? Ágio? Ganância? Cartel? Nada disso, a explicação
é muito mais prosaica: o filamento em carretéis preparado para impressão 3D realmente _custa bastante_ para
ser industrializado e envolve uma quantidade de passos realmente muito grande.

Mas como isso é possível, se existem no mercado máquinas chamadas de _filamentadoras_ ou __extrusoras de
filamento__, de preço aproximadamente igual ao de uma impressora 3D, que basicamente fazem o mesmo que as plantas
de grandes fabricantes, isto é, derretem os grãos de plástico e devolvem um carretel prontinho pra ser usado
em uma impressora FFF?

Pra visualizar um pouco melhor, vamos ver como é o plano básico de uma extrusora de filamento.

image::image171.png[image,width=642,height=445]

A maioria das filamentadoras domésticas comercializadas hoje em dia seguem tal esquema: têm um funil ou cuba em
que os grãos de plástico são colocados. Os grãos entram no tambor, que tem um parafuso de rosca movimentado
pelo motor. Quando o motor gira, os grãos são conduzidos até a área de aquecimento, derretem e saem pelo bocal.

Simples, não? Não! Até mesmo o extrusor mais barato precisa de mais elementos do que isso. O aquecedor tem que ser
controlado para ficar na temperatura correta -- geralmente se consegue isso com um circuito chamado __controlador de
PID__, não mostrado na figura. Quando sai do bocal, o filamento tende a se deformar e enroscar, e é necessário pelo
menos um resfriamento básico com ventoinha para ele ficar utilizável. Na verdade, os primeiros metros de filamento
de uma sessão de extrusão costumam ser inutilizáveis -- a solução sendo jogar fora ou moer para reutilizar.

A ventoinha não costuma ser uma solução boa também, pois é lenta para esfriar. Para ser viável, a filamentadora
precisa ter um resfriamento a água -- uma cuba com água sendo renovada é ligada ao bocal, para esfriar rapidamente
o filamento sendo extrudado. Isso adiciona a necessidade de mais tarde submeter o filamento a um período de secagem,
pois umidade no plástico pode gerar bolhas. Geralmente isso é feito com um dispositivo de secagem mais à frente.

Na figura já dá pra ver que o filamento saindo do bocal simplesmente tende a desabar no chão -- e existe ainda
o problema que o filamento não tende a ter um diâmetro uniforme, ao invés de seguir o diâmetro do bocal ele
sai mais grosso ou mais fino conforme a velocidade. Para remediar essa situação, é colocado perto do bocal
um tracionador do filamento, tanto para assegurar uma velocidade e diâmetro constantes quanto para evitar que
o filamento desabe. E como não há muito sentido em permitir que o tracionador jogue o filamento no chão, ele
ainda vai ser ligado -- talvez depois do dispositivo de secagem - a um bobinador, pra enrolar o filamento em carretel.

Mas não é só isso, qualquer uma dessas etapas pode falhar e é preciso interromper o processo pois o carretel não
pode simplesmente ter uma falha no meio. E a cada carretel completo é preciso trocar -- como uma filamentadora
doméstica não costuma nem ter velocidade muito grande -- digamos, uns 3m por minuto -- isso não vira um
problema tão grande e seu operador pode trocá-lo manualmente cada vez que completar um rolo.

E sensores, são desejáveis vários sensores para controlar o processo. Não há garantias mesmo com o tracionador
que o diâmetro fique uniforme, e existem medidores de diâmetro que podem dizer se está dentro do intervalo
de tolerância.

image::image172.png[image,width=642,height=384]

E as etapas que dizemos ainda estão no âmbito __Maker__. No industrial, com suas complexas estruturas de controle
e necessidade de volume e velocidade de extrusão, a situação é proporcionalmente mais cara e complicada^7^.

Além do mais, o ilustrado foi somente o necessário no processo de extrusão padrão com material virgem,
possivelmente já preparado num misturador com os aditivos necessários (para adicionar cor, melhorar propriedades
como dureza ou elasticidade, etc.). Para o processo de reciclagem é preciso incorporar etapas de uma planta de
reciclagem de plástico, que podem ser também bem caras. Lembrando: considerando que o plástico já esteja
separado por material, é preciso ainda limpá-lo (livrá-lo de resíduos e poeira que poderiam prejudicar a
extrusão) e fragmentá-lo em pedaços processáveis pela filamentadora. A parte de fragmentação ainda costuma
envolver dois processos distintos: um para quebrar as peças em partes, e outro para pulverizar as partes em flocos
pequenos e razoavelmente homogêneos de até 2mm de diâmetro (tamanho que as filamentadoras caseiras suportam;
as industriais de maior capacidade aguentam até 8mm). Esta última parte é por vezes feita com um triturador de
papel dedicado para a tarefa.

Por fim, se o leitor deseja fazer a reciclagem de filamentos em casa, existem vários guias passo-a-passo na
internet em inglês. Um dos mais bem completos e fáceis, feito em etapas com muitas fotos, usa a filamentadora
open-source _Filabot_ e é parte do material educativo da tradicional loja _Maker_ Adafruit. Existem também
extrusores modificados de impressoras 3D que aceitam grãos de plástico ao invés do filamento em carretel,
mas se o uso da filamentadora doméstica já é contingente, imagine uma pesada mini-filamentadora no carro da
impressora que nem a operação de retração do filamento poderá executar^8^.

image::image173.png[image,width=642,height=320]

Existem outros recursos interessantes online, em especial a __appropedia__, a enciclopédia de ecologia e
sustentabilidade que faz parte das recomendações do Dr. Joshua Pearce e muitos modelos de filamentadoras,
a maioria open-source: Recyclebot^9^, Extrusionbot, Felfil, Lyman Extruder e outros. É muito interessante ver
o trabalho de tais pessoas interessadas não só em preservar o ambiente como em disseminar informação sem
fronteiras ou controles^1^⁰. No mercado brasileiro, as principais empresas de impressoras 3D não parecem ainda
estarem interessadas em vender estes equipamentos, mas é questão de tempo; pode-se achá-los em sítios de compra
como _mercadolivre_ ou classificados como __olx__. Não costuma compensar encomendá-los da China, visto que são
equipamentos pesados, de frete caro.

Notas:

1 -- Um dos cenários mais interessantes onde ocorre conflitos de métodos e tradições entre o meio _maker_ e o
industrial é o das normas. No meio industrial, devido à economia de escala, muito dinheiro costuma estar envolvido e
poucos participantes, de modo que as normas são criadas por comitês únicos que não veem problemas em cobrar para
o acesso a elas mesmo quando é muita pouca informação que oferecem. No meio _maker_ há participantes de todos os
tamanhos e tipos, do indivíduo hobbyista de garagem à indústria bilionária, e também há massa suficiente para
a criação de vários padrões concorrentes; uma comissão que redija um padrão que tenha acesso restringido de
alguma maneira -- seja por preço, seja por publicação fora da internet, seja por burocracia, seja por obscuridade
-- acaba por passar a mensagem errada: "se você não tem suficiente interesse comercial no nosso padrão para
pagar esta quantia ou vencer estes obstáculos, você não poderá utilizá-lo". E esta mensagem se transforma
em uma derrota; por isso mesmo o padrão 3MF que é completamente gratuito e disponível pela web com exemplos
de implementação está ganhando todo o mercado e mindshare do concorrente de especificação AMF, que depois da
versão 0.47 passou a ser cobrado (US$ 50). O software livre Cura abandonou o suporte a arquivos AMF e implementou a
3MF na transição da versão 15.04 para a seguinte, por exemplo. Contraste com a fonte única e _sempre_ cobrada
dos padrões industriais: €44,00 pela EN 12432 em http://www.en-standard.eu/[_http://www.en-standard.eu_],
US$ 40,00 pela ASTM D6400-12 em http://www.astm.org/[_http://www.astm.org_] e R$ 24,75 pela NBR
15448-1 e mais R$ 24,75 pela NBR 15448-2, sendo que a NBR15448-1 é um PDF com apenas duas páginas
de informação útil -- e essa informação é apenas de __terminologia__, um pequeno dicionário de termos usados:
https://www.target.com.br/produtos/normas-tecnicas/40321/nbr15448-1-embalagens-plasticas-degradaveis-e-ou-renovaveis-parte-1-terminologia[_https://www.target.com.br/produtos/normas-tecnicas/40321/nbr15448-1-embalagens-plasticas-degradaveis-e-ou-renovaveis-parte-1-terminologia_].
Esperemos que esse mercado sofra uma abertura necessária que permita a indivíduos e organizações trazerem
padrões concorrentes para diminuir as barreiras ao conhecimento.

2 -- Apresentação da BASF sobre plásticos biodegradáveis e compostáveis:
http://www.simpesc.org.br/wp-content/uploads/arquivos/472518185f.pdf[_http://www.simpesc.org.br/wp-content/uploads/arquivos/472518185f.pdf_]

3 -
http://www.ecycle.com.br/component/content/article/35/711-plasticos-como-se-da-a-reciclagem-e-no-que-se-transformam.html[_http://www.ecycle.com.br/component/content/article/35/711-plasticos-como-se-da-a-reciclagem-e-no-que-se-transformam.html_]

4 -
https://www.greenme.com.br/consumir/reutilizacao-e-reciclagem/917-entenda-o-que-significam-os-codigos-de-reciclagem[_https://www.greenme.com.br/consumir/reutilizacao-e-reciclagem/917-entenda-o-que-significam-os-codigos-de-reciclagem_]

5 - CETEA, I. (2008). Reciclagem de materiais plásticos: a importância da identificação
correta. __Polímeros: Ciência e Tecnologia__, __18__(2), 119-125. Disponível em
http://www.scielo.br/pdf/po/v18n2/a08v18n2.pdf[_http://www.scielo.br/pdf/po/v18n2/a08v18n2.pdf_]

6 -- A questão da superioridade ecológica das variadas tecnologias de impressão 3D é
controversa, mas pelo menos em determinados pontos e técnicas a vantagem é clara. Um artigo
bastante abrangente do site _engineering_ explora esse tema, citando inclusive trabalhos do Dr. Joshua
Pearce, e também falando do problema da classificação "outros" (número 7) para plásticos de impressão 3D:
http://www.engineering.com/3DPrinting/3DPrintingArticles/ArticleID/13224/How-Green-Is-3D-Printing.aspx[_http://www.engineering.com/3DPrinting/3DPrintingArticles/ArticleID/13224/How-Green-Is-3D-Printing.aspx_].
É de se notar também que a reutilização de plástico para impressão 3D
é um método _mais_ ecológico que a reciclagem de plástico convencional!
http://www.3ders.org/articles/20140304-turning-old-plastic-into-3d-printer-filament-is-greener-than-conventional-recycling.html[_http://www.3ders.org/articles/20140304-turning-old-plastic-into-3d-printer-filament-is-greener-than-conventional-recycling.html_]

7 -- A filamentos3dbrasil fez um "tour" de suas instalações mostrando a planta e os equipamentos que produzem
os filamentos no Youtube: https://www.youtube.com/watch?v=3vKU-bmJECY[_https://www.youtube.com/watch?v=3vKU-bmJECY_]

8 -- Fica a cargo do leitor decidir se confia na viabilidade de tal dispositivo. Seu
uso pode ser ilustrado no vídeo de youtube (que tem as fontes e informações listadas):
https://www.youtube.com/watch?v=tGnBIMADotA[_https://www.youtube.com/watch?v=tGnBIMADotA_]

9 -- http://www.appropedia.org/Recyclebot[_http://www.appropedia.org/Recyclebot_]. O leitor é encorajado a buscar
a receita de outras filamentadoras open-source na internet, pois existem muitas e não é possível fazer justiça
a todas.

10 -- Um texto bastante elaborado e reflexivo sobre o assunto da reciclagem de plástico
de impressão 3D e sua relação com o Open-Source pode ser lido na __TechRepublic__:
http://www.techrepublic.com/article/how-recycled-plastic-for-3d-printing-will-drive-sustainability-and-raise-the-social-conscious-of-business/[_http://www.techrepublic.com/article/how-recycled-plastic-for-3d-printing-will-drive-sustainability-and-raise-the-social-conscious-of-business/_].

==== Uso alimentício e médico de impressões 3D

A julgar pela quantidade de designs de copos, pratos, talheres, tampas de garrafas, espremedores, raladores,
moldes de massas, cubas de gelo, dispensadores e funis de líquido, seaparadores de clara de ovos, fatiadores,
descaroçadores, suportes de facas, copinhos de medida e demais itens alimentícios em sítios web como o thingiverse,
parece não haver nada mais seguro para ter contato com comida do que impressões 3D domésticas. Essa tendência
é bastante preocupante e não parece estar diminuindo -- afinal, todo dia vemos manchetes nos jornais de gente
se intoxicando e morrendo por impressões 3D, não?

Pois é... Não vemos.

Esse é um dos fatores que dificultam o aparentemente prosaico, mas multifacetado conceito de _seguro para fins
alimentícios_ ou, em inglês, __food-safe__. Toda vez que se levanta o assunto, as preocupações sobre ele agridem
a intuição, soam alarmistas. Pra que se preocupar e gastar tempo e recursos com um problema que mal parece existir?

Parte da culpa dessa invisibilidade é realmente nossa - ou, mais precisamente, de nossos organismos, moldados
por eras de evolução biológica pra serem resilientes, principalmente aos microorganismos que mais são causa de
problemas, como a __Escherichia coli__, _Clostridium difficile_ e a __Salmonella enterica__; nos EUA, por exemplo,
uma em cada 6 pessoas tem intoxicação alimentar __por ano__! A impressão que não é um problema tão grande vem
de dois fatores: o primeiro é que embora até aconteçam muitas mortes e hospitalizações graves, a maioria das
infecções fica no intervalo de severidade de uma dor de estômago aguda ou até apenas um desconforto alimentar,
não aparecendo nos noticiários e nem mesmo nas estatísticas, e não pesa estatisticamente contra impressão 3D
pelo despreparo dos hospitais de contabilizar _peças impressas_ como fontes de contaminação, já que a tecnologia
é tão nova. O segundo é que a proliferação é lenta e os sintomas só se percebem horas ou até dias depois
da infecção, sendo difícil determinar a causa. Uma peça impressa com potencial de infecção dificilmente o
fará em seus primeiros usos, e sim quando já é tão comum que mal se a percebe.

Também é muito difícil perceber, sem estudo prévio, como um material complexo como o plástico de impressão pode
devagar mas cumulativamente levar ao envenenamento por partículas como metais pesados ou toxinas vazando. Não por
acaso, apresentamos os perigos dos plásticos à saúde, o conceito de biodegradabilidade e as etapas de extrusão
antes de falar sobre o uso alimentício e médico, pois precisaremos de tudo isso para esclarecer, afinal, até
que ponto a impressão 3D FFF serve para esse fim.

O assunto tem 9 aspectos a considerar: __Material__, __Composição__, __Temperatura__, __Interstícios__,
__Maquinário__, __Grau e Tipo__, _Protocolos_ e __Lei__. Vamos analisar cada um desses separadamente.

===== Material

Comecemos pela parte fácil: já tivemos uma noção de que há tipos de plásticos diferentes classificados por
número de reciclagem (são os mais usados industrialmente) e sabemos ainda que alguns desses tipos têm perigos
conhecidos, como subprodutos tóxicos de utilização. Muitas vezes não naturalmente, mas por contato com alguma
substância -- ABS se dissolve em várias cetonas e poliestireno dissolve em um dos óleos do limão, e ambos
são compostos orgânicos comuns em alimentos. Por outro lado, os tipos de plástico "seguros" para itens
alimentícios, além de resistência química, também têm décadas de produção sem incidentes; mais produtivo
do que listar os plásticos perigoso é providenciarmos uma lista dos propícios ao uso. Na classificação de
plásticos descartáveis são eles, conforme a figura XX: tipo 2 (PEAD -- polietlieno de alta densidade), tipo 4
(PEBD -- polietileno de baixa densidade) e tipo 5 (polipropileno). E embora sejam todos termoplásticos e possam
ser usados como filamento de impressão 3D, são notoriamente difíceis para esse fim, com baixa aderência de
camada e bastante deformação.

O plástico de tipo 1 -- PET (polietileno tereftalato), tão usado em garrafas de refrigerante de 2l, pode parecer
seguro para alimentos, mas existe possibilidade de vazamento de trióxido de antimônio a longo prazo, uma substâcia
moderadamente tóxica^1^. Sua variedade de impressão 3D, o PET Glicol ou PETG, goza das mesmas propriedades. Não é
uma escolha tão boa quando os três primeiros e tem o agravante de ser um plástico permeável, com a permeabilidade
especialmente evidente nos vãos de camadas.

Saindo das categorias de reciclagem e entrando nos plásticos tradicionais de impressão 3D, PLA tem um status
semelhante ao PET: é "geralmente reconhecido como seguro", liberando no máximo uma pequena quantidade de
seu monômero (ácido lático) em contato com a comida. Como o ácido lático é um composto alimentar comum,
não chega a expressar toxicidade. Por outro lado, o PLA é biodegradável e compostável, e sua facilidade em
perder estrutura com radiação ultravioleta e outros fatores ambientais é um fator que pesa contra seu uso.

Outro plástico candidato é o __Tritan__, um copoliéster concorrente do policarbonato, cristalino e resistente. Como
é relativamente novo no mercado, poucos testes foram feitos. A Eastman o vende dizendo ser seguro para fins
alimentícios^2^, mas já vimos nas referências sobre perturbadores endócrinos que isso pode ser tão somente
por falta de estudos conclusivos sobre o material.

Nylon 6 e 6/6 sem aditivos são inertes e seguros. A fabricante Taulman é famosa por ter entre seus nylons os
certificados para fim alimentício pela FDA (agência de certificação de drogas e comidas dos EUA), como o
_T-Glase_ e o __Nylon 680__.

Por fim, dois plásticos raramente usados em impressoras domésticas por serem de alta temperatura, o PEEK
(poliéter-éter-cetona) e Ultem (polieterimida), também são materiais geralmente considerados seguros.

Essa lista tem virtualmente todas as iterações recentes de materiais de filamentos de impressão 3D tidos como de
uso alimentício. No entanto, ela conta somente parte da história. Mesmo com a matéria-prima adequada, a venda
em filamentos pode não ser.

===== Composição

E a razão disso é que, dadas as propriedades do material, para poder ser extrusado em impressora 3D sem falhas
frequentes, com a consistência necessária e na temperatura correta suas propriedades têm que ser "afinadas"
com o uso de dopantes e aditivos^3^. Adicionalmente, os filamentos adquirem cor e textura com corantes e compostos
que lhes conferem brilho ou aparência agradável. Com cada material tendo suas propriedades e dopantes adequados,
a segurança para fins alimentares pode acabar sendo sacrificada com o compósito resultante. Um bom exemplo é
o __poliuretano__, substância segura mas que com dopagem para poder ser usada em impressoras 3D deixa de valer
para este fim. É o material mais usado nos filamentos flexíveis emborrachados.

Se quisermos então um material adequado, temos que pedir um sem aditivos, certo? Mas isso é virtualmente impossível:
os plásticos não vêm "puros" do processo de fabricação e preparação, e mesmo aquele "PLA natural" que
você compra pensando em usar pra vasilhas pros seus gatos pode ter substâncias venenosas -- ou nem tão venenosas,
mas que simplesmente não teve testes suficientes nesse escopo e pode acabar gerando reações adversas em um punhado
de pessoas. O melhor é comprar de um fabricante que especifique que o filamento comprado é "food-safe". Como
ele tem controle do processo de fabricação, pode usar somente aditivos, dopantes, corantes e processos que
deem segurança alimentícia ao material -- se possível listando todos os componentes nas informações sobre
o material. Nesse sentido é também prestar atenção à reputação do vendedor: uma fonte que providencie
muitas informações com seu produto, com maior proximidade e mais a perder caso minta, como uma grande empresa
com sítio web bem informativo ou uma empresa local que te permita visitas pro processo tem mais chance de estar
vendendo um produto confiável do que, digamos, um vendedor do outro lado do mundo com conta do aliexpress criada
há dois meses que diga que seu filamento é "food grade" sem quase nenhum dado sobre a composição.

Por fim, os aditivos e dopantes também determinam se o plástico pode ser usado em fornos de
microondas. Principalmente polipropileno, mas às vezes PEBD e até PET _quando têm formulações específicas
para esse fim_ são adequados. É preciso que os próprios aditivos não interajam com a radiação ionizante e
não gerem calor; um exemplo de uso proibido seria filamento com o corante bastante comum "negro-de-fumo",
usado para tonalidades negras e acinzentadas.^4^

===== Temperatura

À primeira vista, falar sobre a _temperatura_ que o plástico aguenta pode parecer uma restrição que se aplica
somente àqueles que servirão para acondicionar comida ou bebida quentes, mas essa é uma impressão errada. O
uso alimentício _contínuo_ exige a limpeza do item, e os meios mais efetivo de realizar tal limpeza envolvem
alguma forma de aquecimento, tanto para amolecer e soltar partículas aderidas quanto para matar microorganismos,
como por exemplo colocar em lava-louças.

Nesse quesito plásticos como PLA ou certas variedades de baixa temperatura de PETG falham fragorosamente, com
sua transição vítrea começando em 65°C. Uma xícara de café impressa nesses plásticos desabaria no primeiro
uso com café quente, além de causar a liberação de ácido lático do composto.

A resistência a temperatura também é importante para uma margem de segurança em relação a liberação de
subprodutos, que fica tão mais provável quanto mais se aproxima da temperatura de derretimento. Considerando
esse e outros fatores como intervalo ótimo de crescimento e reprodução de microorganismos que fica entre 5°C
e 60°C, a mínima temperatura de transição vítrea recomendada para um plástico de uso alimentício é *80°C*
e quanto maior melhor.

===== Interstícios

Chegamos ao ponto mais crítica, na verdade o Calcanhar de Aquiles da impressão FFF e o fator mais difícil de
mitigar. Os vãos entre os filamentos, ou seja, as seções recedidas da superfície do plástico onde os filetes
depositados se encontram, são basicamente um problema não resolvido no que concerne a impressão 3D FFF. Eles
são daninhos de três maneiras

* Acumulam e até facilitam aderência dos restos do alimento que a peça acondicionou, que irá apodrecer.
* São hábitats ideais para microorganismos que se alimentam desses mesmos restos.  * Tornam mais difícil a
limpeza ou lavagem do item. O resultado serão fungos, bactérias e outros organismos patológicos que oferecem
alto risco de contaminação em usos posteriores da peça.

image::image174.png[image,width=642,height=466]

Os banhos alisadores com vapores solventes -- que funcionam razoavelmente bem para eliminar esses vãos e selar
a peça quando são controlados -- não são seguros para usar nos plásticos para fins alimentícios pois podem
deixar resíduos tóxicos (embora se possa imaginar que tendo um método com exames laboratoriais para medição
destes resíduos, se chegue a um patamar aceitável). Lixamento da peça para eliminar vãos requer trabalho manual
e só funciona com geometria mais grossas e menos rebuscadas de peças.

image::image175.png[image,width=642,height=609]

===== Maquinário

E outro problema que pesa -- embora tenha solução bem mais fácil -- é que as impressoras e suas peças e
insumos não são _projetadas_ para ter segurança alimentícia. Adesivos para mesa com substâncias tóxicas,
peças sem assepsia ou geometria adequada para limpeza, possibilidade de contaminação por microorganismos em
vãos e reentrâncias e até materiais que em contato com o plástico podem contaminá-lo. O exemplo mais repetido
é o hotend, feito de metais não seguros para contato com alimento, em especial o bico do hotend que quase sempre
é feito de latão, uma liga que é composta de cobre e zinco mas chega a ter até 2% de chumbo, um metal pesado
altamente tóxico, em sua composição^5^. Claro que o _filamento_ não é alimento, mas a preocupação consiste
em o metal contaminar o plástico que por sua vez contaminará o alimento. Algumas empresas, como a _e3d-online,_
vendem bicos especiais de aço inoxidável que além de funcionarem melhor com filamentos abrasivos, são feitos
de um material considerado seguro para fins alimentícios.

Note que mesmo que o modelo de impressora 3D seja projetado com peças que permitam a impressão com a devida
assepsia e sem contaminantes, o uso de outros filamentos no dia-a-dia além dos propícios a uso alimentício
certamente deixará contaminantes nas seções de derretimento e stress mecânico. Então é importante que a
impressora seja dedicada somente ao uso com os plásticos adequados.

===== Grau e Tipo

Nem todo contato com alimento é igual. Algumas peças impressas são feitas para ter contato com líquidos,
outras com sólidos e outras com pastas. Algumas terão contato breve, outras mais longo e outras servirão para
acondicionamento por dias ou semanas. Cortadores de biscoito, por exemplo, podem ser feitos até em ABS colorido
sem muito risco de problemas, mas não seria sensato imprimir uma garrafa para leite feito deste plástico.

Ou o grau pode ser em relação ao aditivo usado. O bórax (borato de sódio / tetraborato de sódio), por exemplo,
é usado como fluxo e detergente na polimerização de alguns filamentos. A presença dele invalida o uso do
plástico para comida? A resposta não é simplesmente "sim" ou "não", é __depende__. A toxicidade dele
é muito baixa^6^, e se você não ficar esfregando incessantemente o alimento no plástico, provavelmente não
sentirá nenhum efeito.

A questão pode ser ainda de __tipo__. Você pode ter um molde de doces que desinfeta depois de cada uso, então
o crescimento de microorganismos é improvável, mas a contaminação por aditivos é importante, ou o contrário,
pode ter um pote de bolo que sempre terá guardanapos e pouco contato com o material pra ser afetado pelos aditivos,
mas fungos e bactérias são preocupantes.

Na ciência da segurança alimentícia, os tipos de contaminação que pode haver são três:

* **Contaminação química**. Produtos químicos prejudiciais à saúde que acabam no alimento, como aditivos
do plástico.
* **Contaminação mecânica**. Pêlos, unhas, sujeira, tecidos, farpas de madeira, plástico ou
metal que acabam no alimento. Não há diferença nesse sentido da impressão 3D para outros meios, e o máximo
com que devemos preocupar é a geometria do objeto não facilitar este tipo de ocorrência.
* **Contaminação
biológica**. Microorganismos daninhos passados para a comida, como protozoários, vírus, parasitas nematóides
e fungos.

O uso específico determina muito quanto de investimento, e que tipo de investimento, você deve fazer em assegurar
a segurança do plástico. O que nos leva ao próximo tópico, os _protocolos clínicos_ para os testes que você
pode querer executar nas peças.

===== Protocolos

Dependendo do investimento que se queira fazer na impressão 3D de peças para uso alimentício, até mesmo para
conseguir garantias e por boa vontade para com os clientes, pode ser importante conhecer os _protocolos clínicos_
que serão necessários para auferir e comprovar a segurança do produto -- e isso vale até mais do que para a
questão alimentícia. Mas o que são eles?

_Protocolo_ é um conjunto formal de normas ou procedimentos. Protocolos clínicos são condutas e procedimentos
formais, acompanhados de quantidades, dosagens, etapas e durações precisas e inequívocas, desenvolvidos com
suporte em evidências atualizadas e consistente que objetivam encontrar um diagnóstico que possa ser generalizado
para determinado caso de uso. São geralmente documentos breves -- digamos, com 10 ou 20 páginas -- com estrutura
tabular e termos técnicos.

Protocolos não precisam ser clínicos, podem até mesmo ser de outras áreas. Como exemplo, suponhamos que queiramos
comercializar um modelo de copo impresso -- apenas um copo, um dos objetos mais simples. Escolhemos imprimir em
PLA natural por sua disponibilidade. Como temos o problema dos vãos entre camadas que tanto pode fazer o líquido
vazar pelos interstícios quanto acumular microorganismos e sujeira, vamos testar um tipo de alisamento químico
para o PLA: o tetraidrofurano^7^ tem a toxicidade tão baixa quanto a acetona e é um solvente que funciona nesse
plástico. Dar um banho de PLA no copo deixa sua superfície lisa! No entanto:

* Por razões comerciais e de funcionalidade, teremos que testar se o copo não vaza. Para isso, terá que ser
feito um protocolo de testes simples com líquidos e condições diversas. Primeiros, decidimos exatamente em que
temperatura o vapor de tetraidrofurano deve ser colocado e por quanto tempo de exposição e de secagem e em que
condições a peça fica, podendo adicionar uma etapa de verificação com microscópio da superfície. Depois disso,
podemos testar 10 peças impressas com refrigerante até o topo em temperatura ambiente por até 8h, com leite quente
até 40°C no mesmo período, com água gelada, com sumo de limão pelo seu pH baixo (ácido) e com uma solução
de bicarbonato de sódio pelo seu pH alto (básico). Se nenhum líquido escapar de nenhuma das peças testadas
na execução do protocolo, podemos ter boa segurança que não acontecerá no uso comum.  * Mas ainda precisamos
testar a *contaminação química* através de um protocolo clínico. Pode ser que o tetraidrofurano deixe resíduos
tóxicos que não previmos. Isso é um problema, pois protocolos são altamente específicos; é bem difícil achar
um que sirva para muitas situações. Precisaremos de acompanhamento de um profissional da área química para fazer
protocolos distintos para tais testes, como verificação de mudança do pH e detecção de resíduos de reação
do tetraidrofurano como hidratos de clatratos e compostos organometálicos.  * E a *contaminação biológica*
também precisará ser verificada. Protocolos com meios de cultura coletados do copo depois do uso, com limpeza
e sem limpeza, com líquidos específicos e deixados em tempos variáveis em repouso e exposição mostrarão
o potencial de crescimento e reprodução de microorganismos e a chance de que sejam focos de patologias. Tais
protocolos envolvem ambientes controlados com temperaturas exatas e tempos distintos de incubação. Esta etapa
precisará de um profissional de engenharia de alimentos ou biologia clínica para redação e execução.

Os resultados desses protocolos são igualmente tabelados e guardados para consulta posterior. Pode ser difícil
visualizar como é um protocolo clínico apenas pela descrição, mas é algo a que profissionais dos ramos citados
são treinados para fazer. De qualquer jeito, mesmo não sendo da área, o leitor pode ter referências sobre meios
de cultura^8^ ou até baixar exemplos de protocolos utilizados por universidades e empresas^9^. Não é uma tarefa
simples; não é raro vermos curiosos _Makers_ tentando executá-los e falhando, sem entender a causa.^1^⁰

É interessante notar que esta lista não é exaustiva. Existem mais procedimentos para garantir o uso saudável
do objeto, e pra complicar a questão o plástico escolhido (PLA) não pode ser lavado em lava-louças (pois
sua temperatura de transição vítrea é baixa demais) nem em microondas, e essas são complicações a
lidar. Complicações que mostram a principal função desse protocolos: cumprir as regulações para comércio
de produtos plásticos. Vamos falar da _lei_ envolvendo esses objetos agora.

===== Lei

Para se poder comercializar qualquer produto que tenha uso alimentício, é necessário seguir as regras da ANVISA
-- e portanto fazer os protocolos clínicos do produto de acordo com elas. E é aqui que o inchaço da legislação
brasileira se faz sentir mais: para fazer embalagens plásticas de acondicionamento de alimentos -- um dos mais
exigentes usos alimentício dos plásticos -, aplicam-se:

* Um *guia geral* de 31 páginas pode ser encontrado no portal da ANVISA,
com perguntas e respostas sobre materiais em contato com alimentos. Disponível em PDF em
http://portal.anvisa.gov.br/duvidas-frequentes-materiais-em-contato-com-alimentos[_http://portal.anvisa.gov.br/duvidas-frequentes-materiais-em-contato-com-alimentos_].
* Outro documento com *perguntas e respostas* frequentes para embalagens encontra-se em
http://portal.anvisa.gov.br/registros-e-autorizacoes/alimentos/produtos/embalagem[_http://portal.anvisa.gov.br/registros-e-autorizacoes/alimentos/produtos/embalagem_].
A resposta à pergunta 8 parece indicar que toda nova embalagem impressa em 3D precisaria ser
registrada na ANVISA: "P: As embalagens de alimento precisam ser registradas na ANVISA? R: (...)
Já as embalagens obtidas por *novas tecnologias* (...) têm *obrigatoriedade de registro* previamente
à sua comercialização.".  * As **disposições gerais**, Resolução 105/99, uma série de regras
tratando das composições dos plásticos, da porcentagem máxima dos vários tipos de impurezas e dos
índices de migração, viscosidade, etc. permitidos. O documento está inteiramente disponível em PDF em
http://www.camara.gov.br/sileg/integras/713686.pdf[_http://www.camara.gov.br/sileg/integras/713686.pdf_] (9
páginas). Perceba que esse documento ainda se refere a *27 outros documentos* com maior detalhamento das regras,
resoluções GMC números 30/92, 36/92, 56/92, 16/93, 28/93, 47/93, 86/93, 87/93, 95/94, 05/95, 10/95, 11/95, 13/97,
14/97, 15/97, 32/97, 33/97,34/97, 36/97, 52/97 e 53/97, 9/99, 10/99, 11/99, 12/99, 13/99 e 14/99. Essas resoluções
podem ser encontradas a partir do portal MercoSul, http://www.mercosur.int/[_http://www.mercosur.int_].  * A **lista
positiva de monômeros**, resolução RDC 56/12, lista os materiais permitidos para os polímeros plásticos a partir
de suas unidades constituintes. Assim, deve-se procurar por "etileno" na parte I do documento se se deseja utilizar
"polietileno", por exemplo. Polímeros específicos também são indicados na parte II. A resolução foi publicada
no Diário Oficial da União em 21 de novembro de 2012, páginas 66 a 77 e está disponível em PDF por página:
http://pesquisa.in.gov.br/imprensa/jsp/visualiza/index.jsp?jornal=1&pagina=66&data=21/11/2012[_http://pesquisa.in.gov.br/imprensa/jsp/visualiza/index.jsp?jornal=1&pagina=66&data=21/11/2012_].
Como exemplo, o ácido lático, monômero do PLA, aparece na página 70 como "ácido láctico" e "sem
restrições".  * De particular interesse ainda são: ** A resolução RDC 17/08 - *aditivos* para materiais
plásticos, uma lista positiva como a da RDC 56/12 mas para aditivos com seus limites, disponível como HTML e PDF em:
https://www.diariodasleis.com.br/busca/exibelink.php?numlink=1-9-34-2008-03-17-17[_https://www.diariodasleis.com.br/busca/exibelink.php?numlink=1-9-34-2008-03-17-17_]
** A resolução RDC 52/10 dá as
regras para as substâncias usadas nos *corantes* dos plásticos. Disponível em formato PDF no portal da ANVISA,
http://portal.anvisa.gov.br/documents/33916/390501/ALIMENTOS%2BRESOLU%25C3%2587%25C3%2583O%2BRDC%2BN%25C2%25BA%2B52%252C%2BDE%2B26%2BDE%2BNOVEMBRO%2BDE%2B2010%2B-%2BCorantes.pdf/41737873-d73e-4bc9-b018-90ba2e628246[_http://portal.anvisa.gov.br/documents/33916/390501/ALIMENTOS%2BRESOLU%25C3%2587%25C3%2583O%2BRDC%2BN%25C2%25BA%2B52%252C%2BDE%2B26%2BDE%2BNOVEMBRO%2BDE%2B2010%2B-%2BCorantes.pdf/41737873-d73e-4bc9-b018-90ba2e628246_]
** A resolução RDC 51/10 dá as regras de *migração* de substâncias, com detalhamento
dos ensaios e protocolos necessários para sua verificação. Disponível em formato PDF em
https://www.diariodasleis.com.br/busca/exibelink.php?numlink=215704[_https://www.diariodasleis.com.br/busca/exibelink.php?numlink=215704_].

Existem ainda padrões internacionais que podem ajudar a navegar nessas águas complexas da legislação
para alimentos. Uma delas é a **ISO 22000**, um sistema de gerenciamento de segurança alimentícia
que cobre toda a operação de companhias -- com o manual e gabaritos sendo vendidos a 549 dólares e
também com treinamentos disponíveis em português do Brasil por firmas especializadas. Outro é o **Codex
Alimentarius**, padrões alimentícios de segurança da WHO (Organização Mundial de Saúde) abrangendo
praticamente todos os campos industriais e com documentos baixáveis gratuitamente em formato PDF em
http://www.fao.org/fao-who-codexalimentarius/standards/list-standards/en/[_http://www.fao.org/fao-who-codexalimentarius/standards/list-standards/en/_].

É importante ressaltar que esta obra pretende oferece apenas um guia geral para o interessado nesta área sem o
suficiente para ser aconselhamento legal. O leitor deve utilizar essas informações por sua conta e risco.

===== A incompatibilidade com o Mundo Maker

Ser brasileiro envolve muitos quinhões, um deles é ter que lidar com uma legislação inchada que decide até
mesmo quanto de sal pode ser servido em bares -- e isso vale para as nossas versões de legislação internacional,
como as de "propriedade" intelectual e segurança alimentícia. Leis que demoram também muito tempo para
terem mudanças, principalmente quando são corpos de legislação destinados a indústrias específicas. Quando
há uma mudança de paradigma de produção -- e a impressão 3D de baixo custo é exatamente isto -- e você
coloca pequenos artesãos em competição direta com indústrias milionárias de escala, se a lei não acompanha
ela cria um abismo de problemas sociais e econômicos. O profissional de impressão 3D vai querer produzir, mas
a legislação feita pra plantas de fábricas não permite. A situação cria pontos de stress como os pedidos
de itens de contato alimentício em sites de impressão sob demanda como 3dhubs ou cammada, com profissonais e
clientes que acabam ignorando a legislação por ser impraticável, fora da realidade. Teremos então produtos
completamente inseguros sendo consumidos, uma solução sendo os serviços sob demanda implementarem proibições
e limitações impopulares para os produtores, ameaçando assim seu próprio negócio e introduzindo controle e
censura em um meio que deveria oferecer liberdade de formas.

Qual é a solução pra isso? Por um lado, ninguém deseja produzir itens que possam fazer mal à saúde de quem
os adquire. Isso abre espaço para litigações e, como acabamos de ver, não faltam leis para condenar quem se
aventure por esse caminho. Por outro, a legislação excessiva e redundante _tem_ que ser simplificada. No meio
industrial, isso é resolvido se fazendo contratos de longa duração com empresas especializadas em cumprir essas
legislações, que inclusivem têm seu próprio _portfolio_ de protocolos prontos para os testes e fazem novos à
medida que surge a necessidade. Tais empresas não têm, geralmente, provisões para itens singulares de pequenos
produtores, e mesmo quando têm, são com preços estratosféricos.

Algumas possibilidades de compensações ao problema podem ser contempladas.

===== Soluções e Mitigações

É importante reiterar que o apresentado aqui são sugestões sem compromisso. Sendo um campo ainda em movimento,
é possível até que algumas delas já tenham tido sucesso ou falhado.

* *Empresa de microcertificações alimentícias* -- as empresas atuais que já atuam no treinamento e certificação
industriais para plásticos no ramo alimentício poderiam explorar o mercado de massa com certificações pontuais
para produtos, até talvez uma parceria com os _sites_ de impressão sob demanda. Com preços populares, poderiam
intermediar a impressão 3D de itens alimentícios e ganhar pelo volume, ao invés da margem de um serviço de
longa duração. Poderiam ter protocolos padronizados e até um catálogo de formas prontas para o cliente que
desejasse um preço menor de um design e material já certificados.  * *Base de dados pública de protocolos*
-- pessoas, entidades e empresas que já precisaram fazer testes relacionados ao uso alimentício poderiam deixar
disponíveis seus protocolos e documentação das situações em que foram usados, para evitar retrabalho de outros.
* *Revestimentos no item* -- embora em objetos que necessitem de encaixe ou dimensões precisas a espessura de um
revestimento típico possa ter que ser compensada, existem no mercado diversas soluções que podem ser usadas com
objetos comum e que funcionam para impressões 3D. Revestimento de poliuretano é uma dessas soluções, e existem
resinas específicas para contato alimentício para impressão 3D. Óleo mineral é um revestimento comum usado
com tábuas de corte que se entranha no material, e pode ser que tenha compatibilidade com alguns dos plásticos
de impressão 3D mais porosos que o possam absorver. Um problema dos revestimentos é a resistência mecânica e
aderência ao material, se seu uso compreender fricção ou outros tipos de stress mecânico o revestimento pode
se soltar e deixar exposto o material original.

image::image176.jpeg[image,width=612,height=508]

* *Materiais especiais* -- embora somente o material de impressão 3D ser compatível com o contato alimentício
não seja suficiente para garantir o uso alimentício do objeto impresso, existe uma estratégia que é promissora
como solução neste campo, que é um plástico alimentício com antimicrobianos. Essa é, por exemplo, a abordagem
usada por um grupo de estudos da Universidade de Waterloo, que foi testada com sucesso usando PEAD extrudado com
nanopartículas de prata, processo que inclusive não prejudica a reciclabilidade do PEAD.

image::image177.png[image,width=642,height=443]

1 -- Efeitos do Trióxido de Antimônio: - Cooper, R. G., & Harrison, A. P. (2009). The exposure to and
health effects of antimony. __Indian Journal of Occupational and Environmental Medicine__, __13__(1),
3--10. http://doi.org/10.4103/0019-5278.50716 Disponível para leitura online (texto completo) em
https://www.ncbi.nlm.nih.gov/pmc/articles/PMC2822166/[_https://www.ncbi.nlm.nih.gov/pmc/articles/PMC2822166/_].

1 - Eastman/Tritan:
http://www.innovationlab.eastman.com/stories/home-is-where-your-housewares-are[_http://www.innovationlab.eastman.com/stories/home-is-where-your-housewares-are_]

3 -- Ao leitor curioso, existe uma referência muito boa sobre
os aditivos usados em plásticos no portal "Tudo Sobre Plásticos":
http://www.tudosobreplasticos.com/aditivos/aditivos.asp[_http://www.tudosobreplasticos.com/aditivos/aditivos.asp_]
A complexidade e variedade do assunto são amplas demais para tratarmos nessa obra.

4 -- O negro-de-fumo é um aditivo/corante interessante para ter uma noção do que é adicionado aos
plásticos, visto que é basicamente carbono / fuligem. Um bom texto sobre esse composto pode ser lido em
http://www.tudosobreplasticos.com/pigmentos/negrodefumo.asp[_http://www.tudosobreplasticos.com/pigmentos/negrodefumo.asp_].

5 -- Muitas vezes a preocupação com os metais da impressora 3D é tida como excessiva. Existem máquinas usadas
na indústria e comércio que usam alumínio como o hotend e até latão e têm contato direto com alimentos,
como dispensadores de pastas, sem efeitos nocivos.

6 -- Bórax:
https://crunchybetty.com/getting-to-the-bottom-of-borax-is-it-safe-or-not/[_https://crunchybetty.com/getting-to-the-bottom-of-borax-is-it-safe-or-not/_]

7 -- Falaremos do tetraidrofurano mais à frente, mas é um composto de laboratório que, como a acetona, deve
ser lidado da maneira correta, com equipamento de proteção e em condições adequadas. Um dos perigos deste
composto é ser altamente explosivo. Não entenda o leitor como sugestão para que faça o teste sem preparações.

8 -
http://www.splabor.com.br/blog/meio-de-cultura-2/meio-de-cultura-identificacao-e-cultivo-de-microorganismos/[_http://www.splabor.com.br/blog/meio-de-cultura-2/meio-de-cultura-identificacao-e-cultivo-de-microorganismos/_]

9 -- O exemplo é da Universidade de Cornell, nos EUA; não serve para a legislação brasileira -
https://confluence.cornell.edu/display/FOODSAFETY/Cornell+Food+Safety+and+MQIP+Lab+Protocols[_https://confluence.cornell.edu/display/FOODSAFETY/Cornell+Food+Safety+and+MQIP+Lab+Protocols_]

10 -- Um exemplo pode ser visto no canal __3D Printing Professor__, em inglês. O apresentador tenta executar
um procedimento bem simples com quatro culturas de bactérias em ágar usando uma impressão em ABS, uma outra
em ABS suavizado com acetona e duas de controle, mas tem resultados totalmente inconsistentes. Pode ser visto em
https://www.youtube.com/watch?v=kuyys1YpAVw[_https://www.youtube.com/watch?v=kuyys1YpAVw_].

===== Uso médico e veterinário

A primeira observação pertinente a dizer da impressão 3D _de baixo custo_ é que seu uso em medicina é limitado
-- e isso não deveria ser uma surpresa, já que até para confecção de objetos para uso alimentício existe
tanta dificuldade. A medicina é uma área que comumente exige objetos com tecnologia de ponta, com superfícies
antibacterianas, resistências extraordinárias e durabilidade extrema. Os materiais usados em impressão 3D FFF são
limitados e frágeis; não se imprime uma prótese de titânio para o joelho numa reprap, não se cria uma máscara
realista para vítima de queimadura no rosto com plástico extrudado, não se consegue precisão e transparência
para uma lente para os olhos, não se faz uma prótese de membro inferior com anisotropia de camadas (propriedade
explicada na seção sobre problemas de malhas). Para esses fins a impressão 3D é usada, mas do tipo industrial,
com tecnologias sob patentes e estritamente controladas. Torna-se até um dos pontos mais difíceis de explicar
ao leigo, que enxergar "impressão 3D" como uma coisa só, em vez de dezenas de tecnologias bem diferentes.

Tornado isto bem claro, portanto, é também necessário falar de uma das propriedades mais importantes para objetos
no campo de medicina e veterinária, a __biocompatibilidade__. Com pelo menos 5 definições formais distintas^1^, o
entendimento intuitivo do conceito diz respeito a um material não ter efeitos deletérios aos materiais ou sistemas
biológicos com que interage. Na maior parte das utilizações que nos interessam, o plástico ser _biocompatível_
significa que não causará irritações na pele, e existe uma boa sobreposição entre os materiais que são
biocompatíveis e os que são seguros para fins alimentícios, como PLA e polipropileno. Existe uma escala de
biocompatibilidade: limitada (menos de 24h de exposição), prolongada (de 24h a 30 dias) e permanente (mais de
30 dias), padronizada pela ISO 10993^2^ com testes parametrizados.

Com todos esses poréns em mente, podemos explorar o uso dos objetos de plástico impressos na medicina. Além do
óbvio uso genérico como em suportes de itens médicos, invólucros de aparelhos, caixas, decorações e objetos
educacionais, um dos casos que se vale do baixo custo e disponibilidade da impressão 3D FFF, quando a complexidade
não é microscópica, é usar escaneamentos de tomografia ou ressonância de um paciente para criar modelos 3D
de seus órgãos e imprimi-los, para que os médicos que vão fazer uma cirurgia possam avaliar a forma e definir
suas estratégias de operação com eles em mãos.^3^ Ou em operações que necessitam de modelos impressos em 3D
como implantes ou órteses, pode-se utilizar a FFF para prototipagem em impressões candidatas, com a tecnologia
mais cara sendo usada com a versão final.^4^ Tais aplicações ocorrem em ambientes de hospitais e clínicas e
seu uso tem crescido.^5^

No entanto, o uso _criativo_ fora do ambiente, feito por indivíduos fora do ambiente especializado de um hospital,
também tem rendido frutos. Exemplos já foram mencionados, mas vale lembrá-los: Mão3D e sua inspiração
internacional "Enable the Future" com suas próteses open-source; as diversas próteses (veterinárias e
odontológicas) e trabalhos de Cícero Moraes, Paulo Miamoto Dias e seus associados. É claro que a disponibilidade
de softwares para ajudar nessas tarefas também é importante, e além do brasileiro _Invesalius_ já mencionado,
existe ainda o também open-source e multiplataforma _Slicer_ de reconstrução digital.

image::image178.png[image,width=615,height=419]

E tais fronteiras se expandem a cada dia, em garagens e universidades, procurando aprimorar a saúde e qualidade
de vida das pessoas através da tecnologia e pensamento "fora da caixa". Por exemplo, por que não aproveitar
a propriedade do PLA de baixo ponto de transição vítrea, aquela mesmo que o torna inapropriado para contato com
alimentos devido a deformar no lava-louças? Mas desta vez para fazer com que o plástico mole possa ser adaptado
em forma de tala no braço de um paciente. Esta foi a idéia de Ana Paula Cano, integrante do grupo Mão3D em seu
Trabalho de Conclusão de Curso^6^.

Lembre-se ainda que cada uso especializado de impressão 3D tem sua legislação específica, que pode ser tão
complexa quanto a que já vimos relacionada a alimentos. Em especial, o grupo de estudos de que Ana faz parte,
__Biomecânica e Forense UNIFESP__, procura dialogar com os setores da sociedade que regulam tais dispositivos,
colocando tal material público em seu canal de youtube^7^.

image::image179.png[image,width=642,height=637]

===== Outros usos biológicos

Como máquina de uso genérico, é difícil descrever todos os usos de uma impressora 3D, mesmo de uma técnica
com limitações como a FFF. Itens para laboratório como tubos de ensaio e centrífugas, para cultivo de plantas,
hidropônica e jardinagem, moldes e suportes odontológicos, modelos educativos de órgãos e corpo humano, sapinhos
de plástico para "dissecação" simulada, armadilhas para mosquito da dengue, modelos de vírus, bactérias,
DNA e proteínas, alimentadores automáticos de espécimes... Uma passeada nos sítios web de compartilhamento de
design mostram centenas de milhares de idéias brilhantes, a grande maioria não só gratuita mas também livre
para modificar. Qualquer delimitação que puséssemos aqui seria uma injustiça com o campo abordado. O mais
importante é ter em mente as propriedades dos plásticos, sua biocompatibilidade com a função em questão e a
legislação que pode ser necessária para sua produção comercial.

Notas:

1 -- Ainda que a _wikipedia_ seja às vezes contestada como fonte oficial de referências, ela se mostra excelente
para reunir definições distintas de áreas diferentes de forma harmoniosa. Em nosso caso, a wikipedia em inglês
serviu de fonte: https://en.wikipedia.org/wiki/Biocompatibility[_https://en.wikipedia.org/wiki/Biocompatibility_]

2 -
https://www.fda.gov/downloads/medicaldevices/deviceregulationandguidance/guidancedocuments/ucm348890.pdf[_https://www.fda.gov/downloads/medicaldevices/deviceregulationandguidance/­guidancedocuments/ucm348890.pdf_]

3 -
http://3dprintingindustry.com/news/widespread-use-3d-printed-models-keeps-lowering-barriers-complex-surgeries-31987/[_http://3dprintingindustry.com/news/widespread-use-3d-printed-models-keeps-lowering-barriers-complex-surgeries-31987/_]

4 - Bogu, V. P., Ravi Kumar, Y., & Asit Kumar, K. (2016). 3D Printed, Customized Cranial
Implant for Surgical Planning. __Journal of The Institution of Engineers (India): Series C__. -
https://www.researchgate.net/publication/303975801_3D_Printed_Customized_Cranial_Implant_for_Surgical_Planning[_https://www.researchgate.net/publication/303975801_3D_Printed_Customized_Cranial_­Implant_for_Surgical_Planning_]

5 - Ventola, C. L. (2014). Medical applications for 3D printing: current
and projected uses. __Pharmacy and Therapeutics__, __39__(10), 704. -
_https://www.ncbi.nlm.nih.gov/pmc/articles/https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4189697/[­PMC4189697/]_

6 - Cano, A. P. D. __Parametrização e Produção de Órtese Termomoldável para Imobilização de Punho Produzida
por Manufatura Aditiva__. São José dos Campos: Universidade Federal de São Paulo, 2017. 94 p.

7 -- Um dos vídeos mais representativo dessa busca é o que fala explicitamente sobre desafios de
regulação: "ANVISA -- Regulação de dispositivos médicos produzidos por manufatura aditiva no Brasil",
https://www.youtube.com/watch?v=B6N_A1VEqy8[_https://www.youtube.com/watch?v=B6N_A1VEqy8_]

=== Propriedades Físicas

A FDM/FFF esteve restrita ao ABS no início e embora a Stratasys, antes do fim de sua patente, oferecesse certa
gama e "grades" (graduações de propriedades) de materiais, foi com a abertura do mercado de Impressão 3D
que o mercado realmente explodiu em alternativas. As propriedades mecânicas do ABS não são ruins: é um material
rígido com alguma flexibilidade e moderada resistência à tração. Mas há aplicações para muitos outros tipos
de propriedades, e felizmente, os termoplásticos permitem uma variada gama de propriedades mecânicas: plásticos
com maior resistência à tração (PLA), maior resistência à compressão (policarbonato), maior flexibilidade
(termoplásticos elastômeros), mais derretíveis para processos de molde (MoldLay e outras imitações de cera) e
muitas outras. Quando se adiciona a possibilidade de fazer misturas/compósitos com diferentes materiais, a variedade
aumenta ainda mais: superfícies rugosas (filamento de imitação de madeira -- com serragem misturada), metálicas
(imitação de metal, com pó metálico), extra-rígidas (com fibra de carbono), até mesmo condutoras ou moldáveis.

Há no entanto um enorme "porém" a notar: o processo de fused filament fabrication não tem perfeita
aderência/mistura entre camadas. Quando se deposita o filete derretido em cima da camada anterior, a idéia é que
a temperatura deste filete derreta e amoleça o de baixo, fundindo-se o melhor possível com ele. Por isso mesmo,
a temperatura do filamento na impressão é colocada bem acima da temperatura de derretimento, para maior aderência
entre camadas (quanto maior a temperatura do filete, e em quanto menos tempo o plástico logo abaixo foi depositado,
maior a força de aderência). Mas esse processo nunca é completo, e não somente vãos consideráveis permanecem
entre as camadas, como o processo de fusão deixa falhas. Deste modo, as forças verticais em um objeto impresso
por FFF, por não trabalharem com um _continuum_ sólido do material, e sim por camadas com aderência imperfeita,
enfrentarão muito menos resistência.

Na física, um objeto que tem as mesmas propriedades independente da direção em que se o considera é chamado de
__isotrópico__. Quando essas propriedades são distintas de acordo com a direção, ele é __anisotrópico__. A
_anisotropia_ da impressão 3D FFF é possivelmente o maior problema da tecnologia: a orientação da peça
impressa vai influenciar enormemente em sua eficiência mecânica, e praticamente impossibilitar seu uso, mesmo
com os materiais mais fortes, para aplicações sérias com muita carga necessária, especialmente as que exploram
a resistência à tração. Outras técnicas de impressão 3D, como a estereolitografia, não padecem do mesmo
problema de fundição imperfeita de camadas, e são isotrópicas.

==== Higroscopia e Hidrofilia

A _água_ é bastante relevante na ciências dos plásticos visto que pode ajudar ou atrapalhar no processo, pode
proibir ou autorizar o contato com outros compostos, pode adentrar e degradar o plástico, e determinar aderência ou
descolamento de tintas e vernizes. Há propriedades associadas a ela que costumam confundir, que são os conceitos
de __hidrofobia__, _hidrofilia_ e __higroscopia__. Para explicá-los, vamos tentar primeiro entender a polaridade
da molécula de água (H₂O).

==== A natureza polar da água

image::image180.png[image,width=642,height=529]

Essa aparente inócua propriedade da água, associada com sua geometria peculiar de polaridade em forma de V, gera
toda uma variedade de propriedades macroscópicas interessantes. A primeira é a disposição que as moléculas
de água tendem a adquirir juntas: com um pólo negativo amplo e dois pólos positivos, uma ligação fraca de
_ponte de hidrogênio_ tende a ser formada entre os hidrogênios das moléculas com os oxigênios. Em especial,
cada molécula de água tende a atrair e orientar em posições específicas quatro outras moléculas de água
em torno de si (duas com o hidrogênio virado para seu oxigênio, e mais uma para cada um dos dois hidrogênios,
com o oxigênio orientado na direção deles). O arranjo resultante pode ser visto na figura seguinte.

image::image181.png[image,width=642,height=353]

A polaridade peculiar da água e o fato de suas moléculas se atraírem e estruturarem dessa maneira colabora
em uma série de propriedades interessantes, desde ser líquida em temperaturas mais altas até sua tensão
superficial. Mas a mais interessante é em como ela faz com que a água interaja com outros materiais.

Quando a água atrai *mais a si mesma* que ao material em questão, ela tende a ficar separada deste. Quando a
água atrai **mais o material**, ela tende a se unir ou espalhar por ele. No primeiro caso, se diz que o material
é _*hidrofóbico*_ (tem "medo de água"). No segundo caso o material é _*hidrofílico*_ (tem "afinidade
com água").

image::image182.png[image,width=642,height=331]

Os detergentes usados em sua cozinha utilizam uma propriedade chamada _anfipatia_ ou _anfifilia_ que consiste
em ter uma extremidade polar (como a água) e uma extremidade apolar (como o óleo) e portanto conseguir mediar
atração com ambos os tipos, permitindo à àgua deslocar os óleos.

==== Higroscopia

Muitas vezes um material _hidrofílico_ é também __higroscópico__, por isso os dois termos costumam ser confundidos,
mas não são a mesma coisa. A higroscopia (também conhecida como __higroscopicidade__), que acontece somente
com materiais hidrofílicos e nunca com hidrofóbicos, é a capacidade do material de puxar vapor d’água do
ar (não somente por causa da composição; porosidade também ajuda) para sua __superfície__. Esse fenômeno
de fazer moléculas (de água, no caso) aderirem na superfície é chamado de _*adsorção*_ (com "d"), e
costuma ser confundindo com a __absorção__, um fenômeno distinto em que o fluido é dissolvido "dentro" do
material. Reiterando: tanto a higroscopia quanto a adsorção tratam somente da __superfície__.

image::image183.png[image,width=642,height=345]

Muitos materiais de impressão 3D como PLA e Nylon são bastante higroscópicos, e como o contato com água acaba
contribuindo para a degradação do polímero, torna-se necessário acondicionamento adequado do carretel em lugar
seco (baixa umidade) e de temperatura não muito baixa (a baixa temperatura favorece a adsorção). Ajuda também
posicionar perto dos carretéis materiais ainda mais higroscópicos, como saquinhos de sílica gel, para que a
umidade seja adsorvida por estes e não pelos plásticos. Quando o material não somente adsorve, mas também
absorve (dilui) a água que atrai, como no caso do sal de cozinha, essa propriedade é chamada deliquescência.

Alguns materiais de impressão 3D como _nylon_ e _PETG_ podem não aparentar, mas além de serem higroscópicos
são porosos. A porosidade potencializa a higroscopia, por isso especial cuidado deve ser tomado com eles.

Referências:

- Vídeos educativos com materiais hidrofóbicos, hidrofílicos e higroscópicos:
http://www.energyvanguard.com/blog/cool-videos-hydrophilic-hydrophobic-hygroscopic-materials[_http://www.energyvanguard.com/blog/cool-videos-hydrophilic-hydrophobic-hygroscopic-materials_]

- Introdução à física da água em materiais porosos, em
inglês. Fala sobre hidrofilia, hidrofobia e hidroscopia também:
http://www.energyvanguard.com/blog/78016/Introduction-to-the-Physics-of-Water-in-Porous-Materials[_http://www.energyvanguard.com/blog/78016/Introduction-to-the-Physics-of-Water-in-Porous-Materials_]

== Filamentos de impressão 3D

Apresenta-se aqui uma lista não-extensiva de materiais diferentes usados como filamentos de impressão 3D com
suas principais características, procurando destacar vantagens e desvantagens no uso prático.

Uma nota é necessária sobre os filamentos de "alta temperatura": Impressoras 3D domésticas trabalham com
segurança na faixa de temperaturas até cerca de 250-260°C. Muitas delas são limitadas no firmware para não
passar dessa faixa. No entanto, a potência do cartucho aquecedor é mais que suficiente para ultrapassá-la,
e isso não é feito em parte porque muitas têm PTFE interno ao hotend para que o filamento deslize com o mínimo
de atrito; e com sua proximidade ao bloco aquecedor e a temperatura inicial em que começa a sofrer deformação em
torno de 242°C, há risco de obstrução com o calor. Para os hotends "all-metal" não há esse risco. Além
desse problema, materiais de alta temperatura comumente têm warp suficiente para que uma câmara fechada e com
aquecimento ativo seja não somente recomendável, mas em alguns casos exigida. Aquecimento na câmara dispensa
o aquecimento na mesa, mas exige muito maior potência.

Todos os dados que colocamos aqui são uma simplificação de toda a ciência que há por trás. Já tratamos da
temperatura de transição vítrea, mas alguns materiais têm outras temperaturas notáveis como a temperatura de
degradação (temperatura além do derretimento onde a estrutura básica do material é destruída, alterando suas
propriedades) ou temperatura de ignição (quando o elemento entra em combustão sem faísca externa, puramente
pelo calor).

Há ainda a lembrança que as temperaturas e sugestões que damos aqui podem não valer para todos os casos,
devendo ser encaradas apenas como um guia genérico. As construções e características das impressoras 3D variam
bastante e mesmo os dopantes e maneiras de se fabricar um material podem levar a características bem distintas. Ao
se adquirir qualquer material para impressão 3D devem-se consultar as informações do fabricante, que incluem
as temperaturas de extrusão e mesa adequadas.

=== ABS

ABS é o primeiro e principal material usado em impressão 3D, e embora historicamente seu uso apresente uma tendência
à diminuição pelo aumento da oferta de outros materiais com propriedades mais desejáveis, ele continua forte
no mercado pelo seu baixo preço de obtenção (em forma crua e em grandes quantidades, podendo chegar a US$ 5 por
quilo), leveza (1,04 g/cm^3^, ligeiramente mais pesado que a água), boa resistência mecânica (alta resistência
a compressão) e flexibilidade. A aparência de superfície do ABS costuma ser fosca ou "mate", sem muito brilho.

Quimicamente, é um derivado do petróleo, sendo o entrelaçamento de três copolímeros: Acrilonitrila, Butadieno
e Estireno ("Styrene"). As variações nas porcentagens dos copolímeros, junto com alguns dopantes, permitem
que os fabricantes façam vários "grades" de ABS com propriedades diferentes, como maior elasticidade ou
maior temperatura de derretimento.

Uma propriedade bastante explorada do ABS é sua grande solubilidade em acetona pura, um solvente químico
relativamente fácil de conseguir. Tratar a superfície de uma peça de ABS com pinceladas de acetona ou a expor
a vapor de acetona faz com que o plástico ceda à ação da gravidade e "combine" as camadas, deixando a
superfície lisa e lustrosa. Do mesmo jeito, é comum se dissolver restos do ABS de impressão em acetona de modo
que se tenha um líquido que funciona como uma "cola" - a acetona é extremamente volátil e evapora rapidamente,
e minutos ou até segundos depois de se aplicar este líquido em uma superfície, ele solidifica inteiramente. Isso
é uma prática tão frequente que a solução ganhou o nome de "suco de ABS".

image::image184.jpeg[image,width=528,height=319]

Na impressão cotidiana, as temperaturas mais comuns para o ABS ficam entre 230 a 240°C no extrusor com alguns
_grades_ industriais como MG94 sendo impressos a 270°C (o que lhe confere maior força de aderência entre
camadas). Na mesa, o recomendado é 120°C mas algumas receitas na net passam (incorretamente) temperaturas que não
levam à viscosidade aderente da transição vítrea, dizendo que se deve usar 110°C ou menor. O encolhimento por
resfriamento do ABS variará bastante de acordo com ajustes de fatiamento usados na peça (paredes, preenchimento,
sobreposições), a geometria dela e o _grade_ de ABS utilizado. O índice "oficial" dado para esses casos,
a contração de molde (molding shrinkage) varia entre 0,4% a 0,7%, ou 0,004 a 0,007 polegada/polegada. Na
prática, de acordo com dados do website de impressão 3D __Fabballoo__, entre a temperatura de deposição e a
temperatura ambiente, o ABS (variando bastante de acordo com o fabricante) pode encolher em até 2% de seu volume
- uma seção transversal inicialmente de 100x100mm poderia chegar a 98x98mm, em seus testes. Na necessidade de
se fabricar peças e encaixes precisos, pode ser interessante fazer uma impressão de calibração para levar em
conta o encolhimento do material e "corrigir" a peça aumentando os eixos X e Y de acordo com esse índice
(o Z sofrerá muito menos distorção, então não precisa ser corrigido).

O ABS "natural", sem pigmentos, tem uma cor bege clara, quase branca, e é opaco. Apresenta toxicidade se
queimado, liberando monóxido de carbono, cianeto de hidrogênio e em altas temperaturas (acima de 400°C) pode
liberar butadieno e acrilonitrila (carcinogênicos) e estireno (tóxico).

=== PLA

Ácido Polilático, PLA. Mais que uma alternativa ao ABS, o PLA é bastante comparado a ele por quatro razões:
ele foi o primeiro plástico de mercado a aparecer como alternativa; tem o preço no varejo quais igual ao do
ABS (geralmente 10 a 20% maior); ele é praticamente um contraponto perfeito ao ABS, com seus pontos fracos e
fortes sendo inversos; e PLA e ABS são ambos representativos das duas "categorias" principais de materiais
de impressão 3D, os de baixa e alta temperatura/warp.

Esmiuçando: o PLA tem menor resistência à compressão que o ABS, mas tem maior resistência à tração e também
maior aderência entre camadas; é mais rígido (menos flexível) que o ABS, mas por isso também mais quebradiço;
tem maior resistência química que o ABS e não dissolve em acetona, e sua superfície impressa oferece um aspecto
de melhor acabamento que o ABS, mais brilhante; é um bioplástico, compostável, reciclável e "ecológico",
produzido a partir do bagaço de cana-de-açúcar ou do milho, enquanto o ABS vem de combustíveis fósseis. Tem
baixa resistência ao calor, com temperatura de transição vítrea iniciando em 65°C, enquanto o ABS só aos
105°C; tem muito menor propensão ao warp, com contração de molde indo de 0,0037 a 0,0041* e peças grandes e
largas sendo impressas com boa precisão dimensional até mesmo sem o uso de mesa aquecida -- em parte porque por
sua baixa temperatura de transição vítrea, a contração do PLA se dá no estado pastoso, não gerando tensões
na forma final.

O PLA "natural" é translúcido. Note que na questão do acabamento, existem pigmentos que podem deixar tanto ABS
quanto PLA mais brilhantes ou foscos, portanto nem sempre a superfície do PLA sairá visivelmente melhor que a do
ABS. O PLA tem mais variações de "grades" do que o ABS disponíveis no mercado, inclusive as que incrementam
suas propriedades físicas como "HiPLA" (PLA de alta resistência) e PLA com maior resistência ao calor. Um
filamento raro no Brasil, mas "primo" químico do PLA com propriedades próximas é o PHA, poliidroxialcanoato.

O PLA é geralmente impresso com temperaturas que vão de 190°C a 220°C dependendo do _grade_ e quando se tem
mesa aquecida, se usa 60°C para aderência. Não é necessário ficar acima da temperatura de transição vítrea
porque o PLA tem naturalmente uma aderência muito grande à plataforma e também porque ele se torna pouco viscoso
muito rapidamente, podendo sofrer deformações se em contato com temperaturas altas.

Apesar de sua alta resistência química, o PLA pode ser tratado de maneira semelhante ao ABS com compostos bem
mais tóxicos que a acetona: tetraidrofurano, diclorometano e clorofórmio.

O PLA não tem boa compatibilidade com colas de cianoacrilato (como "Super Bonder"), perdendo a aderência
posteriormente. Para colar peças com o material colas baseadas em silicone, xileno e poliuretano funcionam melhor,
como o "Adesivo Flexível Multiuso 3M Scotch® Flex".

image::image185.jpeg[image,width=494,height=422]

O sítio web _ecycle_ tem uma bela caracterização do PLA do
ponto de vista de plásticos de engenharia, mercado e ecologia:
http://www.ecycle.com.br/component/content/article/37/738-pla-o-plastico-compostavel.html[_http://www.ecycle.com.br/component/content/article/37/738-pla-o-plastico-compostavel.html_]

=== PETG

Era de se esperar que um dos plásticos mais presentes na nossa civilização, o conhecido e barato plástico
"PET" (polietileno tereftalato) das garrafas de refrigerantes, constasse imediatamente na lista de materiais
disponíveis pra impressão 3D, mas há um problema logístico: o material derretido, quando começa a solidificar,
cristaliza muito facilmente, tornando-se quebradiço a ponto de desmanchar. Nos processos de produção industrial
dele, a cristalização é evitada através de uma refrigeração muito rápida na fase de solidificação, mantendo a
característica amorfa do material e suas propriedades desejáveis. Na impressão 3D, tal refrigeração seria muito
difícil e cara de implementar, mas há um outro expediente que preserva a maioria das propriedades do plástico:
adicionar um radical "glicol" extra durante o processo de polimerização faz com que o material continue
amorfo ao solidificar, evitando a cristalização. Essa formulação alterada do PET é chamada de PET-Glicol ou
simplesmente PETG. É um plástico flexível, translúcido, com excelente resistência química, semipermeável, e
curiosamente tem no mercado duas variedades, uma com transição vítrea em 60°C que usa temperaturas semelhantes
ao PLA (60°C de mesa, 220°C no extrusor) e tem baixíssimo warp, e uma com certo grau de warp e temperaturas
próximas do ABS (100-110°C de mesa, 240°C no extrusor).

image::image186.jpeg[image,width=495,height=457]

=== Tritan

_Tritan_ é um copoliéster de engenharia com alta clareza e transparência, resistência química e a impacto
e com estabilidade hidrolítica que concorre nos mesmos mercados do PET e policarbonato, inicialmente extrudado
em formato de impressão 3D pela empresa _Taulman3D_ mas logo em seguida por outros fabricantes de filamento. Tem
contração de molde entre 0,5 a 0,7% e moderada resistência térmica, com o ponto de transição vítrea estando
em 100°C e pode, em princípio, ser utilizado para contato com alimentos e bebidas, consideradas as reservas já
ditas sobre esse tema. É extrudado em temperaturas altas, a recomendada pela Taulman sendo de 275°C no extrusor
e 90°C na mesa, mas temperaturas maiores dão melhor acabamento e aderência entre camadas. Assim como o PLA,
dissolve em tetraidrofurano. Costuma estar disponível na maior parte das vezes na forma natural sem corantes.

=== ASA

Abreviação de Acrilonitrila Estireno Acrilato (__**A**crilonitrile **S**tyrene **A**crylate__), é um plástico
de composição e mercado semelhante ao ABS, tendo como principais diferenciais menor contração de molde (0,4
a 0,7%) que o ABS, alta resistência a raios ultravioleta, sendo ideal para impressões expostas ao ambiente,
maior resistência mecânica e até menos tendência a amarelar com o tempo. Assim como o ABS, é dissolvível
em acetona. É levemente higroscópico, sendo recomendável secá-lo antes de extrudar. É também um pouco mais
denso -- 1,07 g/cm^3^ ao invés de 1,04 do ABS.

Geralmente extrudado em temperaturas próximas ao ABS, com um mínimo de 240°C no extrusor e 120°C na mesa. Antes
usado somente em impressoras industriais, já existem vendedores de filamentos do mercado de massa que o fabricam.

=== Nylon

Nylons, ou poliamidas alifáticas ou semi-aromáticas, são um conjunto de termoplásticos tão presentes na vida
moderna que seria inevitável sua utilização em impressora 3D. De fato, a utilização é tão universal que
por felicidade do acaso existem carretéis baratos vendidos com "filamentos" de nylon nos tamanhos ideais
para impressoras 3D... Mas com finalidade inteiramente diferentes, serem colocada nas hélices de roçadeiras
(cortadora de grama) para funcionarem como lâminas. _Hobbyistas_ interessados usaram -- em uma exaptação de
sucesso! - estes carretéis em suas impressoras 3D e em alguns casos tiveram bons resultados, ainda que com uma
superfície um tanto rugosa. Apesar de curioso, este uso do material é desaconselhado, pois como a finalidade
não é a impressão 3D e os carretéis não são projetados para derretimento, é relevante a possibilidade de
dopantes e resíduos que liberem gases tóxicos durante a impressão.

Dito isto, e à parte da curiosidade, Nylons são materiais com propriedades tão desejáveis -- especialmente
de resistência -- que uma hora os fabricantes começaram a fazer seus filamentos imprimíveis seguros com
eles. Veja que nos referimos a _nylons_ no plural; a variedade de propriedades deste tipo de filamento é tão
grande que fica difícil elaborar suas propriedades. A comum a todos eles é a grande resistência, mas há
desde os mais flexíveis e elásticos até os bem rígidos apropriados para peças de máquinas (especialmente
engrenagens). Três variedades são especialmente frequentes: Nylon 6, Nylon 6/6 e Nylon 6/12 (geralmente referido
como Nylon 12). A fabricante dos EUA Taulman 3D é uma empresa que se especializou em nylons para impressão 3D,
fazendo desde filamentos "fáceis de usar" até os mais resistentes a temperatura e propensos a _warp_ e tendo
diferentes versões do Grade 6, como 618 e 645, com contrações de molde por volta de 0,6 (próximas à do ABS),
mas não oferecendo ainda o 6/12 (sendo este comercializado, por exemplo, pela rigid-ink). O 6/12 mantém sua
forma mais consistentemente por uma grande faixa de temperaturas e ainda é menos sensível a absorção de água
que outros nylons (5% de sua densidade em água em 24h, metade dos outros).

image::image187.jpeg[image,width=471,height=427]

Uma vantagem da alta higroscopia do Nylon é ser bastante compatível com tintas e pigmentos, mas por outro
lado é muito comum impressões com nylon serem arruinadas por causa disso. Uma receita para secar nylons (e que
funciona também para saquinhos de sílica) é deixar no forno a 85°C por 5 a 6h (sem deixar de vigiar e seguir
procedimentos de segurança). Nylon é bem compatível com cola PVA, fita azul de pintor e revestimento de PEI na
mesa. Recentemente compósitos com nylon (por exemplo, com fibra de carbono) começaram a se tornar populares pela
reunião das propriedades desejáveis que adquirem, especialmente em resistência mecânica.

=== PMMA (acrílico)

Em termos de propriedades mecânicas o PMMA -- polymethyl metacrylate / polimetil-metacrilato - lembra o PLA por sua
rigidez, mas é mais resistente a temperatura, sofre mais warp e apresenta geralmente transparência ou translucidez
(cujo efeito é dificultado pela deposição em camadas da impressão). Tem resistência à tração quase duas vezes
maior que a do ABS e resistência à compressão quase 3 vezes maior, com densidade próxima à do PLA (1,20 g/cm^3^
contra ~1,24 deste último). Como o ABS, é solúvel em acetona. É extrudado em temperaturas entre 240 a 260°C
e por sofrer warp, necessita de mesa aquecida a pelo menos 100°C. É bastante difícil de encontrar no Brasil e
tem a importação bem cara, o que é lamentável pois é um dos poucos filamentos realmente rígidos disponíveis.

=== ABS MG94

Ainda que o ABS "comum", de mercado, seja extrudável em temperaturas compatíveis com os elementos aquecedores
de impressoras 3D comuns, a variedade _MG94_ do polímero, sendo considerada de maior qualidade, é uma exceção
notável. Ao mesmo tempo que sofre um warp quase na mesma faixa (0.5 a 0.8 do MG94 contra 0.4 a 0.7 do comum),
as altas temperaturas desse _grade_ de ABS permitem uma aderência entre camadas muito maior, e a qualidade de
superfície com a preservação de detalhes também é notável. É impresso com extrusor em 270°C e temperaturas
de mesa a 110-120°C.

1.  [[section-8]] == + [[policarbonato]] == Policarbonato

É um plástico translúcido rígido bastante usado em objetos industriais e até em vidros à prova de bala. É
extremamente resistente mecanicamente -- principalmente a impacto - e tem também moderada resistência química. Tem
boa resistência ao calor com transição vítrea em 147°C e é impresso com o extrusor a 260-300°C e a mesa a
120-130°C. Não tem boa aderência entre camadas especialmente se a temperatura de impressão estiver na faixa mais
baixa, por isso a orientação com que a peça é impressa interfere bastante nas suas propriedades mecânicas. É
um filamento geralmente vendido na forma natural ou translúcida, embora o mercado esteja começando a oferecer
variantes mais coloridas e opacas. O policarbonato industrial tem grande variedade de contrações de molde de
0,1 a 1,5% dependendo da formulação, com o policarbonato usando na impressão 3D girando por volta de 1,0%.

É conhecido como um dos plásticos que mais libera BPA, como descrito na seção sobre potenciais danos à saúde
dos plásticos.

=== HDPE / PEAD

Polietileno de alta densidade, HDPE, é um plástico frequentemente usado para itens alimentícios como garrafas de
leite e outros potes de líquido e é conhecido por ser bastante reciclável, podendo ser derretido e solidificável
muitas vezes. É bastante raro seu uso como filamento de impressão 3D, por ser um material difícil para imprimir:
tem coeficiente de expansão térmica alto e sofre warp excessivo, e além disso não tem boa aderência ao vidro,
precisando de superfícies "diferentes" com celulose como papelão ou cortiça. É extrudado a 250°C, com
mesa a no mínimo 100°C.

=== POM (Poliacetal)

O **P**oli**O**xi**M**etileno, também conhecido como poliacetal ou pela marca __Delrin__, é um plástico rígido,
resistente ao desgaste e de baixo coeficiente de atrito, sendo bastante usado em peças de máquinas. Tem ótima
aderência entre camadas, mas baixa afinidade ao vidro, e para ser impresso com aderência geralmente se usam
de materiais com celulose como cortiça, MDF ou papelão na mesa. Em forma cru tem coloração branca. Devido
à forma como é produzido, à alta cristalinidade e ao comportamento atípico durante a transição vítrea,
os filamentos de mercado têm alta variação de temperaturas de extrusão, e as variedades de baixa temperatura
(menos de 230°C, assim formuladas para sofrer menos warp) não devem ser extrudadas acima de 250°C pois degradam
com resíduos de formaldeído (formol). Por outro lado, a mesa deve ter a temperatura mais alta possível, acima
de 120°C se a impressora chegar a isso, e com câmara fechada.

=== Ultem 9085 e 1010

A marca _Ultem_ da Sabic, usada para designar filamentos de polieterimida (PEI) de altíssima temperatura de
extrusão -- entre 330° e 350°C -- e câmara aquecida a 195°C -, e que têm temperatura de transição vítrea
igualmente alta (por volta de 186°C) e propriedades de retardamento de chamas. Formam superfícies bem lisas,
têm maior resistência ao impacto e química que o ABS, são bastante resistentes a fadiga e atrito, e constante
dielétrica e fator de dissipação estáveis numa grande faixa de temperaturas e frequências. O Ultem 1010 se
diferencia do 9085 principalmente por a propriedade de descarga de eletricidade estática ("ESD-Safe"). Ultem
1000 é a polieterimida pura.

Uma impressora 3D doméstica não alcança tais temperaturas, nem mesmo os termistores comuns são feitos para
lidar com elas (embora os termorresistores e termopares sim). Somente recentemente têm aparecido componentes _de
mercado_ que chegam a 500°C, como termistores _Shibaura*_ ou __Dyze Design__.

O mais interessante dos filamentos _Ultem_ de impressão 3D é eles serem vistos como um "super-material" com
resistência próxima à de metais, e permanecerem como uma meta e _benchmark_ (teste de bancada) popular para as
impressoras de baixo custo que pretendem adquirir desempenho industrial.

Outros _grades_ de Ultem existem, e outros materiais de altíssima temperatura (PEEK e PPSF/PPSU são alguns
deles) também, mas são materiais cujo preço em formato de carretel se situa muito além dos filamentos comuns
e constam mais como materiais experimentais para o pequeno empreendedor do que realmente algo de mercado para suas
fabricações. Isso é complicado pelo fato que por causa da alta temperatura, eles podem requerer uma etapa extra
de "recozimento" da peça para diminuir os interstícios e tensões remanescentes entre camadas e chegar à
sua resistência final.

=== Flexíveis

Um tipo especialmente "infame" de filamento que surgiu com o mercado de massa foram os filamentos
__flexíveis__. _Infame_ porque são provavelmente o tipo mais difícil de filamento para se usar em uma impressora. O
que os torna problemáticos é exatamente sua flexibilidade: o mecanismo de tracionamento tem que lidar com o que
se chama de _histerese elástica_ (entenda como a resistência à compressão de uma ponta do filamento chegar
na outra), e com a tendência de o filamento sair das "guias" do mecanismo e embolar, podendo até causar
danos físicos à estrutura da impressora. A maioria dos mecanismos extrusores têm folgas e vãos que os tornam
inapropriados para material flexível e geralmente são necessárias pesadas modificações e baixas velocidades
de impressão para que funcione a contento. Por exemplo, um extrusor que use filamento guiado terá uma histerese
elástica gigantesca por causa da maior distância entre o tracionador e a área de derretimento, quase sempre a
ponto de inviabilizar o uso do flexível.

==== TPE

TPE, ou TermoPlástico Elastômero, é o nome dado para a classe de copolímeros ou mistura de polímeros
(como um plástico e uma borracha) que consistem de materiais com propriedades tanto termoplásticas quanto
elastoméricas. Marcas como Ninjaflex (EUA) e Flex3DBR (brasileira) são exemplos. São substâncias geralmente
não-tóxicas, com excelente aderência entre camadas e não necessitando nem mesmo de mesa aquecida para a impressão
(ou temperaturas entre 40 a 60°C), com temperaturas de extrusor entre 210 a 230°C em geral. Geralmente têm
composição bem suave e elástica, lembrando um balão de soprar de criança. Costumam ter densidade parecida
com a do PLA, entre 1,20 a 1,25 g/cm^3^.

Existem variedades de PLA que são fabricadas como termoplásticos elastômeros, costumando ter uma pouco menos
de elasticidade e flexibilidade que outros TPEs.

A impressão de todos os TPEs, dados os efeitos de histerese elástica, como apresentar "fiapos" - o efeito
denominado de "stringing" - durante a impressão, que são removidos no final.

==== TPU

image::image188.png[image,width=642,height=607]

A sigla significa **T**ermoPlástico **P**oli**u**retano, e embora tecnicamente se enquadrem na categoria de "TPE",
têm propriedades distintas que os fazem ser tratados de maneira diferente. Semelhantes à borracha -- a própria
borracha não poderia ser utilizada, pois é termofixa -, com constituição visivelmente menos flexível que os
outros TPEs incluindo os PLAs flexíveis, apresentam grande resistência de quebra e enorme resistência química a
solventes e a abrasão. Servem para peças como pneus de carro de controle remoto e peças de articulação. Outra
diferença que torna os TPUs distinguíveis de outros TPEs é a aparência geralmente mais fosca e menos lisa.

=== Imitações de materiais

Certamente é muito importante ter controle sobre a aparência dos objetos impressos especialmente quando têm
finalidade decorativa. Fabricantes criativos, geralmente se utilizando da receita da mistura de um pó muito fino
da substância imitada em um termoplástico convencional como PLA ou ABS, têm brindado o mercado com imitações
diversas de materiais. Os três tipos mais famosos são imitação de madeira, imitação de metal e um terceiro
tipo que não tem função estética, mas funcional: mistura de fibra de carbono.

Geralmente essas imitações, por conter partículas que não derretem, são abrasivas e podem necessitar, se não
um bico (nozzle) de material mais resistente que o latão, pelo menos um com orifício mais largo que o convencional
para minimizar a abrasão. Se recomenda um bico de 0,6 a 0,8mm para o uso desses materiais.

Note-se também que costumam ser ao mesmo tempo mais densas (ou seja, menos rendimento pelo mesmo peso) e mais
caras que materiais convencionais.

==== Imitação de Metal

Marca mais conhecida: Colorfabb (Copperfill, Bronzefill e outros). Além de pioneiros, estabeleceram o "padrão"
para outros fabricantes que fazem os desse tipo. O filamento é PLA com partículas de metal (~30%), tornando-se assim
3 vezes mais denso que o PLA puro, e sendo impresso nas mesmas temperaturas que o PLA. Ao imprimir, a peça sai fosca
e para adquirir o tom metálico característico deve ser bastante polida, preferencialmente com uma tamboreadeira.

image::image189.jpeg[image,width=516,height=397]

==== De metal para fundição / sinterização

São uma extrapolação dos filamentos de metal. Ao invés de ter uma porcentagem menor de metal, o filamento é
quase todo metal (88%), com uma minoria de plástico. A empresa _Virtual Foundry_ tem os filamentos Filamet Copper™
e Filamet Bronze™, que além de poderem ser utilizados como Copperfill e Bronzefill podem também, pelo seu alto
conteúdo de metal, serem colocados em fornos de mufla microcontrolados para se transformarem em peças 99,9% de metal.

O processo é complexo e caro, não só por necessitar de equipamentos de fundição e cutelaria profissionais, mas
também pelo próprio preço do filamento de 85 dólares por 500g, sem contar impostos e frete na importação para
o Brasil. E para arrematar, são 500g de um material 5 vezes mais pesado que o plástico ABS, isto é, equivalentes
em volume a 100g de plástico. E o filamento, por ter tanto metal, precisa de bico reforçado e tem a impressão
difícil, gerando muitas peças falhas.

O resultado final, no entanto, impressiona. Afinal, vê-se uma impressora 3D caseira gerando peças que depois de
processadas, equivalem a uma peça de impressão 3D industrial SLM, caríssima. Mas como muita coisa na impressão
3D, essa ainda é uma das tecnologias que precisa provar seu valor para proliferar em massa.

image::image190.jpeg[image,width=642,height=426]

==== Imitação de madeira

Também uma mistura de serragem (40%) bem fina em PLA com agentes ligantes, a imitação de madeira com sua mais
famosa encarnação sendo a "Laywoo-D3" tem a curiosa propriedade de ter sua cor final variando de acordo
com a temperatura de impressão, que pode ir de 180°C até 240°C. Truques no fatiamento se aproveitando disso
(iterando temperaturas) podem dar um aspecto bem verossímil de madeira no produto final.

image::image191.jpeg[image,width=385,height=296]

==== Fibra de Carbono

A Fibra de Carbono é uma estrutura super-resistente usada em carros e aviões. Pó de fibra de carbono é
misturado a ABS (~20%, existem variedades com PLA) pra lhe conferir maior estabilidade dimensional e resistência
a compressão, embora com o possível efeito de prejudicar levemente a resistência a tração por interferir na
aderência entre camadas. Impressa com a mesa entre 60 a 70°C e o extrusor entre 240 e 260°C, não deve ser usada
com bicos de latão comum pois os destrói rapidamente, devendo ser usados bicos especiais de aço inoxidável ou
até titânio. Devido à própria fibra de carbono, esse filamento é encontrado somente na cor preta e depois de
impresso tem uma superfície fosca e ligeiramente rugosa.

image::image192.png[image,width=336,height=347]

=== Condutivos

Os filamentos que por projeto conduzem eletricidade pertencem a duas categorias principais: filamentos que
apresentam uma condutividade mínima para poder servirem para peças "anti-estáticas" que descarregam a carga
de um componente de potência e os filamentos que apresentam condutividade realmente alta (baixa resistência ou
impedância) para servirem como substitutos das trilhas condutoras de circuitos impressos. Ambos são feitos de
compósitos de plástico e partículas condutoras, com os filamentos anti-estáticos se situando na faixa de preço
de ABS e PLA e os de circuitos custando 2 a 4 vezes o preço. Os de circuitos costumam ser, além de mais caros,
mais pesados pelo maior grau de partículas condutoras (metais, grafeno e equivalentes) e também mais difíceis
de imprimir por serem flexíveis e abrasivos, podendo exigir um bico de aço para suportar a abrasividade das
partículas condutoras e modificações no extrusor para serem tracionados sem falhas..

Um jeito de diferenciar um tipo de filamento do outro é averiguar nas especificações a resistência linear ou
volumétrica do filamento. Se as especificações não informam tal resistência, o filamento é certamente apenas
anti-estático. Via de regra, um filamento cuja resistência linear seja maior que 50Ω/cm não é adequado para
circuitos -- e mesmo assim se sugere fazer consultas de testemunhos na internet se a resistência anunciada
do fabricante coresponde à informada. Mesmo esse filamento de baixa resistência somente é adequado para
condução de baixa potência, altas correntes passando por ele o derreterão quase imediatamente. Na impressão
deste tipo de filamento as partes de conexão com componentes são tipicamente as de maior resistência e para
esses casos se aconselham fortemente conectores condutivos como parafusos, arruelas e porcas de fixação. Outra
dificuldade desses filamentos é que eles não são usados __sozinhos__, não se imprime a trilha diretamente na
mesa de impressão. Geralmente são usados ou com dupla extrusão, conjugados a um plástico pra servir como a
parte isolante, ou impressos em cima de uma "placa" grudada na mesa de impressão, com a configuração de
uma altura adicional para o bico não raspar na placa.

Como essa categoria de filamentos não é definida por uma formulação comum, cada fabricante terá suas
temperaturas recomendadas.

image::image193.png[image,width=564,height=445]

=== Solúveis

Filamentos de material _solúvel_ têm a finalidade específica de serem usados em extrusores duplos ou triplos. A
idéia é o filamento servir para as estruturas de suporte que permitem formas complexas, e uma vez impresso,
ao invés da remoção mecânica desses suportes, o simples banho no solvente adequado permite que ele saia de
peça de modo limpo e sem stress mecânico.

==== HiPS

A sigla significa "poliestireno de alto impacto" e é um filamento relativamente barato que funciona medianamente
bem com ABS e muito bem com PLA. Imprime em temperaturas de 230 a 250°C. O solvente que remove o HiPS da peça,
no entanto, é um pouco difícil de achar no Brasil: D-Limoneno, ou Limoneno R+. É um produto da casca de laranjas
limas e encontrado em produtos de limpeza. Para funcionar bem, a concentração precisa ser de 90% ou mais. O
Limoneno L- vem de limões e não funciona tão bem.

==== PVA

A sigla "PVA" é dúbia e na verdade usada para duas substâncias diferentes, a base da cola branca ("acetato
de polivinila", às vezes colocada como "PVAc" para evitar a ambiguidade) e o usado no filamento solúvel
em água (álcool de polivinila). Impresso a 190°C, tem boa afinidade química com o PLA, mas não adere bem ao
ABS. Devido à sua enorme higroscopia e deliquescência, o filamento PVA precisa de acondicionamento bem controlado
e sem umidade para não inchar e degradar depois de aberto.

Outra dificuldade de uso do PVA é que é um filamento extremamente flexível, sofrendo das mesmas limitações
e propensão à histerese elástica que os TPEs.

image::image194.png[image,width=642,height=435]

==== Infinity Rinse-Away

É um filamento usado exclusivamente em cartuchos proprietários das impressoras da série Cube da 3D Systems. Como o
PVA, é solúvel em água, mas diferente dele, é feito a partir de polímeros de milho e "compatível" apenas
com PLA e Nylon.

[NOTE]
.Referências:
====
. (PLA) -
https://plastics.ulprospector.com/generics/34/c/t/polylactic-acid-pla-properties-processing[_https://plastics.ulprospector.com/generics/34/c/t/polylactic-acid-pla-properties-processing_]
. https://pt.aliexpress.com/item/shibaura-U1-382-Y1-NTC-thermistor-temperature-sensor-up-to-500-Centigrade-made-in-Japan/32770571400.html?spm=2114.16010208.99999999.262.KOPnDJ[_https://pt.aliexpress.com/item/shibaura-U1-382-Y1-NTC-thermistor-temperature-sensor-up-to-500-Centigrade-made-in-Japan/32770571400.html?spm=2114.16010208.99999999.262.KOPnDJ_]
====

== Acabamento

Se as impressoras 3D fossem construtores perfeitos como os replicadores de __Jornada nas Estrelas__, não haveria nem
sentido em mencionar __acabamento__: afinal, as peças teriam saído prontas, __acabadas__, da máquina. Praticamente
toda tecnologia de fabricação humana tem sua etapa de processamento final e preparação para uso, e todas as
diferentes técnicas de impressão 3D também seguem essa regra. O problema se encontra quando este acabamento
consiste de tarefas manuais, laboriosas e não automatizáveis -- o que acaba acontecendo, visto que o que é
automatizável acaba entrando para o fluxo de trabalho da impressão 3D.

=== Acabamento é arte -- no pior sentido possível da palavra "arte"

Em suma, quando mencionamos _acabamento_ neste contexto, tratamos desta parte avessa à automatização. Seu
caráter manual e dependente de talento individual tira o caráter tecnológico da tarefa e o coloca mais próximo
de "arte"; e como arte, acaba sendo algo que necessita não só da teoria, mas de muito refinamento pela
experiência e prática, além de talento, vocação, paciência, bom senso e outras virtudes. O livro "O
Artesão" de Richard Sennett propõe que para se tornar habilidoso em qualquer área são necessárias 10 mil
horas de prática, ou 8 horas por dia, todos os dias, por 4 anos. Muitos dos recém-chegados na impressão 3D podem
acabar caindo na armadilha de autoconfiança que a tecnologia traz, e ignorar completamente que suas máquinas caras
e refinadas não dispensam a finalização manual e o talento individual (e isso vale inclusive para o fatiamento,
que veremos mais adiante), fabricando peças muito aquém do que poderiam fazer e se frustrando com a área.

Ainda, não existe um conjunto fechado e bem estabelecido de técnicas e ferramentas para finalizar as peças. O
tratamento de plástico impresso vai herdar práticas do plastimodelismo, da carpintaria, do tratamento industrial de
injetados, do artesanato e escultura e de tantos outros campos, e adicionar na mistura suas próprias descobertas
e variações do universo __Maker__, como o já estabelecido tratamento químico por acetona, explicado mais
adiante. As instruções aqui devem ser tratadas, portanto, como um guia geral incompleto e resumido, com dicas
que podem nem mesmo servir para todos os casos.

Adicionalmente, outro problema da necessidade de acabamento das peças é que os riscos da impressão 3D se
estendem a essa etapa, não se resumindo aos já conhecidos das altas temperaturas da impressora, às suas
conexões elétricas, aos seus resíduos ou às forças mecânicas; o acabamento traz seus próprios reveses,
muitos dos quais, em seus campos especializados, exigem cursos de proteção e cuidados que podem durar semanas
(os vapores solventes são um exemplo). Fique portanto explícita a advertência que, por mais que esta obra dê
direções gerais de precauções, o leitor deve consultar as referências externas para melhor segurança.

=== Ferramentas básicas

Cada técnica diferente de acabamento pode exigir ferramentas diferentes, mas existe um conjunto básico e comum
a muitas delas que vale ser sugerido. É importante perceber que não é necessário ter todas as ferramentas
descritas para conseguir um bom acabamento; no entanto, quanto maior a variedade, mais fácil se tratarão os
casos difíceis. As mais importantes de todas são as que mitigam o risco dando maior segurança às operações:

==== Proteções

Na indústria, tais proteções são tratas como "EPI" (Equipamentos de Proteção Individual). Os mais
importantes para nossos casos:

* *Máscara de poeira* -- usada por profissionais de marcenaria, útil para quando se removem suportes e lascas
das peças impressas e também nas ocasiões em que se faz desbastamento e lixamento. As poeiras de plástico
são quimicamente resistentes e podem trazer obstruções do trato respiratório. Note-se que a máscara precisa
estar justa e sem vãos e não protege contra vapores químicos nem nanopartículas.
* *Luva de kevlar* / *de aço com 4 fios* -- ainda que aja variados tipos de luvas protetoras para o trabalho com ferramentas cortantes
ou desbastamento, essas são as que sugerimos baseadas no equilíbrio entre sensibilidade e proteção. Ajudam a
evitar os cortes por partes pontiagudas ou afiadas. São vendidas em tamanhos diferentes, é importante comprar
do tamanho certo porque luvas largas demais podem deixar os instrumentos escaparem e prejudicar a sensibilidade, e
luvas muito pequenas podem simplesmente não caber, visto que os materiais de que são feitos não são elásticos.
* *Máscara de gás* -- ainda que inicialmente a sugestão do uso de _máscara de gás_ para a impressão 3D
pareça um exagero, ela não é um insumo muito caro (algumas dezenas de reais) e serve para variadas situações
de acabamento, como pintura e revestimento das peças e, claro, o acabamento químico com vapores solventes. Os
melhores modelos são os que ao invés de terem óculos de proteção separado são uma peça só que cobre o
rosto, como se fosse um capacete de astronauta: dão ótima visibilidade. Os filtros usados são filtros comuns
contra vapores orgânicos usados por pintores, que devem ser trocados a cada 6 meses.
* *Exaustor / ventilador* -- para ajudar a remover ou arejar os vapores químicos, solventes e nanopartículas; evitar ar parado.
* *Óculos de segurança* -- óculos de plástico resistente próprios para evitar que os olhos sejam afetados pelos vapores
e líquidos. Os mais recomendados são o que vedam a entrada de vapores.
* *Luvas de nitrilo descartáveis* -- as conhecidas "luvas azuis" que aparecem em seriados médicos são luvas de borracha resistentes a punção e a
vapores e solventes como os tipicamente usados em pintura e acabamento químico. Após o uso, devem ser embaladas
para descarte^1^. As luvas de látex comuns são mais baratas mas oferecem maior risco.
* *Jaleco* ou *Macacão de proteção química* complementam o conjunto quando se usa a máscara de gás, junto a protetores de cabelo ou
capacetes que evitam que os líquidos e gases contaminem o corpo. Essas roupas devem idealmente ser confortáveis e
folgadas para minimizar rasgões e puxões do tecido. Após o uso, devem ser imediatamente colocadas para limpeza.
* *Sapatos ou botas* com sola de borracha ou outro material antiderrapante.

Cada proteção tem seu escopo e método correto de uso, com algumas diretivas como não reutilizar embalagens de
produtos químicos, descarte adequados dos itens e resíduos, realizar a operação em ambiente ventilado e longe
de fontes de combustão ou elétricas, crianças e animais. É aconselhado também ter um procedimento de limpeza
para antes e depois das operações e principalmente um procedimento de emergência com atendimento médico e
hospitalar caso as proteções falhem. Para empresas, tais medidas são obrigatórias sob a legislação vigente.

Notas:

1 -- Ainda que seja inviável tratar todos os usos de insumos químicos na impressão 3D,
geralmente eles têm muito em comum com a indústria de tintas e solventes, e um documento
especialmente útil para entender políticas de descarte é o "Manual de preparação de
tintas e vernizes, limpeza e descarte de embalagens" da WEG Tinta e Vernizes, disponível em
http://ecatalog.weg.net/files/wegnet/WEG-manual-de-preparacao-de-tintas-e-vernizes-e-limpeza-de-embalagens-manual-portugues-br.pdf[_http://ecatalog.weg.net/files/wegnet/WEG-manual-de-preparacao-de-tintas-e-vernizes-e-limpeza-de-embalagens-manual-portugues-br.pdf_].

==== Cortantes

As ferramentas de corte são primordialmente usadas de duas maneiras: para remover arestas, fiapos e imperfeições,
e para remover estruturas de suporte e __raft__, isto é, partes do plástico que foram impressas apenas para
apoiar seções da peça (mais detalhes sobre o suporte você terá na seção de fatiamento). Não abordamos
ferramentas elétricas e industriais de corte porque além do excesso de opções, fogem ao escopo do livro.

* *Alicate de corte diagonal* -- serve para tirar fiapos, cortar seções finas e aparar arestas. Tem uma seção
mais chata de bico que pode ser encostada na peça para cortar com segurança as imperfeições.
* *Alicate para cutículas* -- é equivalente ao alicate de corte diagonal, mas bem menor. Serve para seções mais frágeis da
peça ou trabalho de detalhes. Aconselha-se comprar os modelos com haste de plástico por serem mais resistentes.
* *Alicate de corte rente* -- tem o bico chato, sem seção funda, e tamanho geralmente menor que o de corte
diagonal. Consegue penetrar mais nos detalhes.
* *Alicate de corte turquesa* -- a seção cortante deste alicate é
frontal e não lateral. É usado quando a geometria da seção a ser aparada dificulta o cabo no sentido do corte.
* *Navalha* / *estilete* -- tanto um quanto o outro são úteis na retirada de fiapos, bolhas e imperfeições
do plástico, mas são instrumentos de uso mais perigoso que alicates por seu fio afiado. Não se deve usá-los
"puxando", sempre com um movimento de fora para dentro. Sugere-se usar tais instrumentos com luva anticortes.
* *Rebarbadora manual* -- é um substituto seguro e muito mais ágil do estilete para alguns casos particulares,
como apara rápida de cantos. Tem um fio da lâmina que gira no eixo da manopla do instrumento acompanhando o
contorno do corte, podendo ser guiado pelo dedão pelo lado rotundo; geralmente é comprado com várias lâminas
facilmente substituíveis.

==== Alicates

* *Alicate universal* -- o alicate de bico grosso serrilhado e meia-lua de corte que é comum em todo lugar. Não
é especialmente útil na impressão 3D, mas dado que é facílimo de encontrar e tem várias utilidades, pode
servir para firmar peça, arrancar suportes de seção maiores e até cortar arestas.
* *Alicate de bico fino ou meia-cana* -- disponível em modelos diferentes, o alicate de bico fino costuma ser mais útil na impressão 3D por
entrar facilmente nas reentrâncias, permitindo o alcance fácil das partes mais bloqueadas e a aplicação de força
localizada com um leve girar do instrumento. Pode ainda fazer as vezes de pinça para puxar filamento quente do bico
ou remover sujeiras do início de impressão.
* *Alicate de bico curvo* -- é um modelo especial de alicate de
bico fino em que o bico começa reto mas faz uma curva de 90°. Utíl para reentrâncias mais difíceis em que os
alicates finos comuns não conseguem penetrar.
* *Alicate de pressão* -- é um tipo de alicate regulável que
pode ser _fixado_ numa mordedura específica de modo que, com a ajuda de uma mola que faz pressão na abertura,
prenda a peça com firmeza para ser trabalhada.

image::image195.png[image,width=642,height=726]

==== De lixamento ou desbastamento

O lixamento de peças é talvez o tipo de acabamento _de aparência_ mais básico e representativo da esfera de
impressão 3D. Básico porque representa um mínimo que se espera de pós-processamento das peças para exposição,
e representativo porque representa um trabalho não exatamente de alto cunho artístico, mas laborioso, demorado e
que aumenta desproporcionalmente com a complexidade da peça, sendo candidato a ser um dos "custos escondidos"
de um serviço de impressão 3D. Além disso, o resíduo desse acabamento -- o pó de plástico -- é um potencial
perigo à saúde que não raramente é ignorado pelos seus executores. Use sempre a máscara de poeira.

* *Lixas* -- que podem ser em barras, em palitos, em folhas (de tecido, papel etc.) ou ainda em outras disposições
-- têm um _tipo_ e um _número_ associado. O _tipo_ é de acordo com o material abrasivo que usa para lixar (e
portanto que materiais são afetados por ele: uma lixa __para madeira__, por exemplo, provavelmente usará cristais
de granada ou outro silicato vítreo) e o _número_ designa a granulometria ou _grana_ da lixa, quanto menor o
número, maior o grão, indo de 16 a 3000 e sendo padronizado pela ISO 6344. Uma lixa de número menor -- 60, por
exemplo -- é mais grossa, servindo pra fazer desbastamento inicial da peça; uma de número maior, como 400, serve
para detalhes mais finos ou polimento. Esse é o intervalo sugerido por esta obra. Como o plástico é um material
geralmente fácil de tratar, os tipos de lixas comerciais comuns -- para madeira, massa e metal -- não farão
diferença. As lixas geralmente são itens descartáveis, que se inutilizam gradualmente com o uso. +
Um tipo de lixa
especial e recomendado é a __**lixa d’água**__. É uma lixa com papel, grão e cola resistentes a água para que o
processo de desbastamento possa ser feito embaixo de um jato d’água ou até submerso, fazendo com que o líquido
ajude a carregar a poeira e detritos e impeça que o material aqueça demasiadamente. É especialmente útil para
o PLA que é um plástico de baixa transição vítrea, e portanto propenso a se tornar pastoso por aquecimento
com a fricção quando se usa lixa comum. A contrapartida da lixa d’água é que se desgasta mais rapidamente. +
Uma dica de artesãos para o trabalho com lixas é começar pela de menor grana e ir aumentando em não mais que
50% a cada iteração do trabalho. Por exemplo, começando com uma de 60, não utilizar logo depois uma de 100,
mas de 90 ou 80. Esse é um jeito de o grão mais fino conseguir remover o risco deixado pelo grão mais grosso.
* *Limas* -- por vezes confundidas com as lixas, as limas são ferramentas formadas por uma haste dura de aço
com ranhuras ao invés de um granulado desbastante. Sua constituição permite que sejam instrumentos permamentes
pois não costumam perder o poder de desbastamento. Por serem encontradas em formatos diversos mas especialmente
de bastões longos abrasivos, são essenciais e quase insubstituíveis para o tratamento de seções interiores
de peças de plástico impressas em 3D. Geralmente são classificadas como "bastardas" (maior abrasividade,
destinada a remoção de grande quantidade de material), "de segundo corte" (aplainamento ou ajuste de
superfícies para a forma desejada) e "murças" (mais finas, para detalhes e polimento). Recomenda-se para o
trabalho de impressão 3D uma lima bastarda e um conjunto de murças de 14cm de diferentes formatos, tudo isto
facilmente encontrável em lojas de ferramentas.
* **Escovas de aço (e outros metais)** -- são instrumentos semelhantes a uma escova de dentes mas com cerdas de metal. Sua abrasividade é grande e correspondem a uma lixa
com grana baixa. Podem ser usada também para remover poeira e detritos de seções rebuscadas, pois suas cerdas
penetram onde outros instrumentos não conseguem.

==== Rotatórias

Ferramentas motorizadas são um alívio de produtividade à tarefa cansativa de desbastamento. É o caso das
ferramentas rotatórias de desbastamento e polimento. São indispensáveis para trabalhos intensos, repetitivos ou
que precisam de desbastamento localizado. São duas as ferramentas mais utilizadas para isso, _e não se esqueça
das luvas de proteção e da máscara de poeira!_

* *Furadeira* -- é a que a maioria das pessoas tem em casa, usada para trabalhos domésticos, paredes e madeiras. Usa
basicamente 3 tipos de brocas^1^: para metais, paredes e madeira, essa última geralmente com uma adaga no meio que
serve de guia. A mais adequada para se usar para fazer furos em plástico é a para madeira, mas nosso interesse é
desbastamento. Nesse caso existem hastes especiais para polimento que encaixam no mandril da furadeira e permitem
várias conjuntos de lixas e escovas^2^.
* *Microrretífica* -- também conhecida pelo nome da marca mais famosa no
exterior, __Dremel__, a microrretífica é um instrumento rotatório menor que a furadeira que já costuma vir com
uma maleta de acessórios, incluindo várias pontas para polimento^3^. Tem rotação mais rápida que a furadeira,
mas menor torque. Uma modificação que se aconselha usar na microrretífica que a faz muito mais útil para
impressão 3D é a colocação de uma haste flexível extensora que permite à ponta giratória entrar em lugares
difíceis da peça e o corpo da microrretífica não atrapalhar o acabamento.

image::image196.png[image,width=642,height=504]

Qual usar, a furadeira ou a microrretífica? Em geral a microrretífica se mostra uma melhor opção pro trabalho em
peças de impressora 3D, pois já vem com grande variedade de pontas e, sendo menor, é mais facilmente manipulada
no ambiente típico de acabamento. Uma precaução a se tomar que vale para as duas ferramentas é que alguns
plásticos, como o PLA, como já foi dito, amolecem com a fricção; colocar as ferramentas em rotação menor (e
dar pausas no contato com a peça por alguns instantes) é essencial para trabalhar bem com eles -- e portanto é
importante escolher modelo de furadeira ou microrretífica que tenha controle de rotação. E ainda que não seja um
uso indicado, algumas pessoas usam a haste flexível para tratar o plástico submerso ou sujeito a um jato d’água.

Cabe notar que a microrretífica tem também pontas cortantes e de perfuração, servindo para outras tarefas
de acabamento.

[NOTE]
.Notas:
====
. O blog _fazedores_ tem um guia explicando os diferentes tipos de broca e quando usá-las:
http://blog.fazedores.com/como-escolher-a-broca-certa-para-cada-trabalho/[_http://blog.fazedores.com/como-escolher-a-broca-certa-para-cada-trabalho/_]
. Incidentalmente, furadeiras e microrretíficas são dois dos alvos preferidos de _makers_ criativos
que adoram explorar o potencial de uma ferramenta rotatória de alto torque. Existem adaptadores que a
transformam em vários outros instrumentos: centrífuga de laboratório, misturador de bebidas, moedor de
café, enrolador de barbante e até, claro, existem adaptadores impressos para polimento com a furadeira:
https://www.thingiverse.com/thing:2115708[_https://www.thingiverse.com/thing:2115708_]. Ou este gigante aqui,
para trabalhos pesados: https://www.thingiverse.com/thing:99091[_https://www.thingiverse.com/thing:99091_]
. O blog fazedores - de novo - tem ótimas dicas sobre como trabalhar com a microrretífica:
http://blog.fazedores.com/dremel-uma-ferramenta-que-todo-fazedor-precisa-conhecer/[_http://blog.fazedores.com/dremel-uma-ferramenta-que-todo-fazedor-precisa-conhecer/_]
====

==== Térmicas

Não poderiam faltar as ferramentas térmicas, visto que como o próprio processo de impressão 3D usa temperaturas
altas, o acabamento também as acaba exigindo.

* *Soprador de ar quente* ou *pistola de sopro térmico* -- essa pistola (chamado por vários nomes) é bastante
útil no acabamento. As mais fracas têm um sopro que passa dos 400°C, as mais fortes alcançam o dobro disso
-- portanto é preciso também usá-la com cautela, pois pode gerar queimaduras graves se atingir a pele. Alguns
dos usos que se dão a ela:
** **Eliminar fiapos**. Os fios mais finos de filamento plástico derretem bem mais
rápido que outras partes quando o ar quente os atinge.  ** *Alisar a superfície.* Usada com habilidade, o sopro
quente pode reduzir ou até eliminar as linhas de camadas das peças; mas é uma tarefa consideravelmente difícil
especialmente porque o sopro pode acabar gerando deformação no plástico quente e destruir detalhes mais frágeis.
** **Facilitar insertos e encaixes**. Quando se imprime uma peça que deve receber um inserto (como um parafuso)
e foi impressa bem justa, aquecê-la com a pistola pode amaciar o plástico o suficiente para encaixá-lo no lugar
e deixar firme.
** *Dobrar ou remodelar peças impressas.* Como a tala impressa que vimos nos usos biológicos, o
calor pode ser usado em partes grandes da peça para deixar o plástico mole e mudar seus ângulos e conformação;
por exemplo, uma mão pode ser impressa aberta mas aquecida e colocada manualmente com os dedos fazendo sinal de
"vitória".
** *Escrever uma assinatura ou logotipo.* Com o plástico aquecido, uma ferramenta de punção
ou corte pode deixar um sulco característico na peça.  +
É preciso "pegar o jeito" com a pistola, portanto
é aconselhado ao leitor que pratique com peças velhas ou falhas. O ABS quando aquecido tem uma consistência
pastosa bem moldável, e permanece assim por cerca de um minuto até endurecer. O PLA muda de consistência mais
rapidamente, ficando bem menos viscoso e também retendo a temperatura por mais tempo por seu alto calor específico.+
Pode não ser muito intuitivo perceber que usar a pistola para colar partes de plástico não costuma dar muito
certo. Quando se torna quente o suficiente pra ter poder adesivo, o plástico (seja ABS, PLA ou qualquer outro)
já se liquefez e deformou.
* *Retouch3D* -- Este item foi colocado aqui não porque se espera que o leitor
tenha ou adquira a ferramenta específica, e sim porque ele passa uma idéia muito prática de como uma categoria
de ferramentas térmicas pode ajudar no acabamento. Retouch3D é uma ferramenta eletrônica de mão com pontas de
metal intercambiáveis que permite alisar superfícies, ajustar detalhes, remover suportes, consertar contornos e
outras tarefas. Necessita de treino pra usar pois é fácil a ferramenta "espalhar" o plástico ao invés de
somente aplainá-lo, mas é sem dúvida útil. Como muitos projetos criativos, começou com financiamento coletivo
no kickstarter e hoje tem a venda internacional por http://www.retouch3d.com/[_http://www.retouch3d.com_].

image::image197.png[image,width=642,height=391]

* **Ferro de solda velho** -- Um ferro de solda está entre as ferramentas térmicas mais baratas que se pode comprar,
especialmente um ferro de baixa potência como de 20 ou 30W. É um substituto razoável para fazer um trabalho
parecido ao Retouch3D, mas peca pela temperatura excessiva (o que faz com que espalhar ou deformar o plástico
acabe acontecendo mais) e a falta de ponteiras específicas para o trabalho de artesanato. Além disso, caso se
opte por usá-lo, praticamente se inviabiliza para seu uso original com solda, pois vai acumulando plástico
carbonizado que lentamente adere à ponta.
* **Gotejador de cera** -- Esse nome estranho -- em inglês, _wax carver_ -- é de um dispositivo bem conhecido dos odontologistas, usado para fazer moldes de cera para próteses
dentárias. O que se ressalta dele no entanto é que tem características muito próximas às do Retouch3D, desde
o formato das pontas intercambiáveis quanto a faixa de temperatura de trabalho (ainda que um pouco menor) e ainda
o fato de usar metal que não "gruda" no plástico. Além disso, o gotejador com duas pontas independentes
e temperatura regulável custa aproximadamente metade do preço do Retouch3D. É um substituto competente
para a tarefa. O autor ilustra seu uso com um modelo chinês de gotejador adquirido por menos de 50 dólares:
https://www.youtube.com/watch?v=4f4aPmjVoK4[_https://www.youtube.com/watch?v=4f4aPmjVoK4_].
* *Forno elétrico* -- esse item tão comum na cozinha é valioso para muitas tarefas relacionadas ao acabamento. Por exemplo, é
útil para, quando usado em baixa temperatura, tirar a umidade de filamentos antes das impressões. E pode ser
usado para amolecer as peças para remoldagem, para melhorar a superfície e fazer recozimento (annealing), que
falaremos logo à frente. Para a impressão 3D o ideal é um forno elétrico de volume médio com regulação PID
de temperatura. A resistência nunca deve tocar a peça. Deve também ser dedicado a esse uso, pois os vapores do
plástico o impregnarão e deixarão impropício para uso alimentício. Além disso, existem as precauções de
segurança necessárias como uso em ambiente isolado, arejado e protegido pois há perigo de incêndio e emissão
de fumaça tóxica. A recomendação também serve apenas para fornos elétricos, não se estendendo a fornos de
microondas que via de regra não são úteis para este fim.
* *Ferramenta de metal aquecida* -- No iníco e na
falta de verba para ferramentas mais adequadas, mesmo uma ferramenta com ponta de metal pode ser útil. Aquecendo-se
a ponta de um pequeno canivete de cabo de madeira com algo que não use chama -- por exemplo, tocando no ferro de
solda ou usando a pistola de vapor -- o metal fica acima da temperatura de derretimento do plástico, e pode ser
usado por alguns segundos para reparar ou remover seções resistentes. De novo, as precauções com segurança
são bastante necessárias aqui; uma ferramenta com cabo de metal se aquecerá por inteira e pode queimar a mão;
uma ferramenta com cabo de plástico pode derretê-lo; colocar uma ponta de metal direto na chama causará oxidação
no metal e pode inutilizá-lo.

==== Outras

* *Morsa* / *Torno / Sargento* -- Ferramentas de fixação são necessárias para permitir que o acabamento seja
feito na peça sem que ela escape, para imobilizá-la em posições diferentes, para colar partes em contato ou
ainda para realizar pressão, como ao firmar um inserto de metal na peça de plástico. Há dois tipos principais que
nos interessam, as _morsas_ (ou tornos), que são instrumentos mais pesados que fixam estacionários em uma mesa ou
apoio, e os __sargentos__, ferramentas portáteis que servem para fixação ou colagem na peça. No caso da morsa,
caso se tenha pouco espaço de trabalho, é recomendada um morsa articulada de sucção que além de ter liberdades
de posicionamento é uma ferramenta móvel -- comparada à de bancada que geralmente é afixada com parafusos.

image::image198.jpeg[image,width=642,height=182]

* *Kit de assistentes de soldagem* -- apesar do nome ligado à eletrônica, essas ferramentas que consistem em
extremidades de metal com formas diversas para criar alavancas, enganchar, mover, limpar, punçar e puxar elementos
pequenos são ótimas para tratar detalhes minúsculos e partes difíceis de alcançar de peças de impressão 3D.

image::image199.jpeg[image,width=534,height=375]

* *Terceira mão* -- sendo um suporte mais delicado e sofisticado que uma morsa, é muito usado para soldagem,
mas serve também para imobilizar e suportar peças pequenas rebuscadas para trabalhos complexos. Um kit que
contenha lupa e iluminação é recomendado.

image::image200.png[image,width=486,height=411]

* *Lupa* -- serve para trabalhar com detalhes pequenos, e existem modelos na forma de óculos ou monóculo que
evitam ocupar as mãos, servindo para trabalhos em que se a use mais continuamente e não se queira usar a lupa da
terceira mão.  * *Pinças* -- existem pinças de todo tipo, com forma de tesoura a iluminadas, mas as de manicure já
ajudam enormemente na remoção de fiapos e pequenos detalhes do interior das peças. Curvadas ou retas são igualmente
úteis, mas uma que possa exercer maior força e pegada mais forte são preferíveis para o caso geral. As com ponta
chata têm maior facilidade de capturar um fiapo de plástico que as pontiagudas.  * *Tamboreamento* -- apesar de
ser inviável citar todo e qualquer método industrial de acabamento existente, o _tamboreamento_ (rock tumbler,
em inglês) é um método útil para peças com geometria mais robusta e com efeito especialmente distinto nos
materiais que contêm metal em pó, pois permitem ressaltar o brilho, reflexividade e textura metálica. O aparelho
é simplesmente um pequeno "barrill" giratório em que se coloca a peça de interesse, um detergente especial
e elementos abrasivos, como pedrinhas ou lascas. Depois de alguns minutos a poucas horas de giro, a abrasividade
torna a peça reluzente e agradável. O youtuber "Barnacules Nerdgasm" fez um vídeo mostrando o processo e o
antes e depois: https://www.youtube.com/watch?v=nDoYO22103Q[_https://www.youtube.com/watch?v=nDoYO22103Q_]. Existem
aparelhos de tamboreamento assim como detergentes e grãos abrasivos com preços baixos em sites de artesanato
e joalheria.

=== Acabamento químico: solventes

Acabamentos com contato mecânico com a peça, como o desbastamento, têm utilidade limitada. Funcionam bem em
superfícies bem suportadas e definidas, mas uma das principais vantagens da impressão 3D em relação a outros
processos de fabricação é a possibilidade de formas complexas; e formas complexas são feitas de seções finas,
detalhadas e rebuscadas, com saliências e reentrâncias que ou não conseguem que as ferramentas de desbastamento
alcancem, ou que se quebram com a tensão mecânica (lembrando que a FFF apresenta anisotropia que faz especialmente
partes verticais finas serem frágeis). O tratamento térmico alivia um pouco esse problema por não necessariamente
ter tensão mecânica, mas se não for muito bem controlado faz as seções delicadas desabarem -- ou até a
peça toda.

Por isso, um tipo de tratamento que começou como curiosidade, mas acabou virando ferramenta essencial para o
trabalho de acabamento é o tratamento químico. A idéia geral de tratar o plástico ABS com o solvente acetona
já era conhecida antes mesmo do movimento reprap, mas o tratamento mais popular, o uso de vapor aquecido atacando o
plástico, parece ter vindo da mente dos reprappers Neil Underwood e Austin Wilson, documentada no blog de Austin^1^
em 2013. Na condensação do solvente na superfície, o líquido resultante escorre, selando as lacunas entre
camadas e suavizando os contornos verticais da peça. Então a peça é retirada do banho de vapor de solvente, que
acaba o processo de evaporação e deixa a peça resultante alisada e até brilhante. Pode parecer um procedimento
"doméstico" e desajeitado, mas os anos provaram que está aí pra ficar e tem o uso ratificado pela prática,
constando até de artigos científicos em usos biológicos.^2^

Existem vários jeitos de realizar a operação descrita, mas alguns pontos merecem destaque:

* Quase sempre, vale mais a pena usar o solvente na *forma de vapor* do que líquido. Na forma de líquido o
contato exerce pressão mecânica maior e é muito mais agressivo, e por isso menos controlável. O solvente
também tem chances maiores de interagir com aditivos e corantes do plástico nessa forma -- por exemplo, a
acetona em forma líquida comumente "desbota" o ABS tratado, enquanto na forma de vapor isso não ocorre --
pelo contrário, a exposição ao vapor pode retornar a cor de uma peça por remover o aspecto esbranquiçado de
arranhões. Alguns métodos de tratamento usam, ao invés do solvente puro, uma mistura do solvente com água para
ter controle.  * Como o solvente deve ter também certa volatilidade, o tratamento com *vapor frio* pode ser uma
opção, ainda que mais lento.  * O acabamento químico deixa a superfície "lisa" e vedada, e *prejudica a
adesão de tintas e revestimentos* (que se beneficiam de microporos do material para entranharem e se firmarem).
* O solvente __**nunca escorre ou evapora completamente**__ da peça, portanto o término do contato deve ser feito
antes do ponto ideal de tratamento, para permitir que a peça "descanse" e chegue à forma final. Este tempo de
descanso varia de acordo com a geometria da peça, o solvente e o método, podendo variar de horas a semanas. Nos
primeiros minutos de contato a peça geralmente estará bem pegajosa e dependendo do solvente e da penetração,
flexível, tendo que ser manuseada com extrema delicadeza para não aderir à ferramenta que a estiver suportando.
* __**É possível exagerar no tratamento da peça**__ e ela terminar não somente pior que antes, com deformações,
rachaduras e bolhas. É um incidente que acontece com frequência ao se tentar alisar completamente a peça,
visto que o solvente continua agindo após a interrupção do banho. É preciso um pouco de treino até encontrar
o ponto ideal de tratamento com o solvente específico, tanto em tempo quanto em quantidade.

image::image201.png[image,width=642,height=559]

* Devido ao ponto anterior, as ferramentas para manuseamento e apoio da peça devem ser finas para minimizar o
contato e aderência, além de resistentes aos solventes. Peças de metal como pinças de fundição e pegadores de
laboratório são adequadas para a manipulação e superfícies como uma malha de arame ou redinha metálica são
adequadas para o apoio. Todos esses itens precisarão de limpeza após o tratamento, pois partículas do plástico
dissolvido inevitavelmente aderem e se acumulam em suas superfícies.
* Especialmente se for feito o tratamento com
vapor, **proteção adequada é indispensável**. Isso envolve não só proteções de corpo inteiro como luvas de
nitrilo, macacão de proteção, proteção de cabelo, máscara de gás com filtro para solventes orgânicos, óculos
e botas de borracha, mas também um ambiente adequado para a emissão de fluidos inflamáveis de forma contida,
como uma capela química ou um contêiner de construção anti-chamas e resistente a solventes. Recomenda-se ainda
um plano de emergência para acidentes, como uma fonte de água abundante com um chuveiro próximo ao local e um
extintor de incêndio de CO₂, o mais apropriado para solventes inflamáveis.
* Se usado o método do vapor por
aquecimento de líquido, e o recipiente não for completamente vedado, **a fonte de calor não pode ter chama ou
elemento incandescente exposto**, pois o contato com o vapor pode causar incêndio ou explosões. A acetona, por
exemplo, tem vapor invisível e mais pesado que o ar; aquecida por baixo estando contida em um recipiente, sobe até
a borda e "entorna" pelos lados, alcançando o elemento aquecedor. Em teste feito pelo autor numa capela química
com 50ml de acetona em uma lata e uma vela abaixo para aquecê-la, o tempo desde o acendimento da chama da vela até
o conjunto se incendiar foram meros 12 segundos, e as chamas permaneceram por 6 minutos. Nem todos os solventes são
facilmente inflamáveis como a acetona, mas a precaução é recomendada __sempre__. Fogões/fogareiros elétricos
com superfície não-incandescente são baratos e suficientes para o caso geral.
* Exceto no caso da solução de
limpeza e thinner, **todos os solventes aqui listados necessitam de permissão da polícia federal para compra**,
embora o limite varie (por exemplo, 2l por mês para acetona e 5l por mês para tetraidrofurano). Comprando
em locais devidamente autorizados como lojas de laboratório, o procedimento costuma ser simples e na hora por
eles facilitarem. Desconfie de vendas pela internet em sites como __mercadolivre__, pois além do risco de estar
cometendo um ato ilegal, não existe garantia de procedência.
* Segue a legislação de interesse sobre tais
produtos. Cabe notar que isto não deve ser encarado como aconselhamento legal e sim uma orientação inicial,
devendo o leitor realizar sua própria pesquisa ou contratar um advogado caso ache necessário:
** **Portaria n. 1.274 de 25 de agosto de 2003** -- explica a razão pela quais os produtos químicos abordados são controlados
e as provisões para sua comercialização e aquisição. Disponível na integra na página da Polícia Federal em
http://www.pf.gov.br/servicos-pf/produtos-quimicos/legislacao/PORTARIA1274.pdf/view[_http://www.pf.gov.br/servicos-pf/produtos-quimicos/legislacao/PORTARIA1274.pdf/view_].
** **Anexos da Portaria 1.274/03** -- material de suporte da Portaria 1.274,
com o mais importante para nossos propósitos sendo o **Anexo I**, que lista os
materiais cuja comercialização e aquisição são controlados e seus respectivos limites. Disponíveis em
http://www.pf.gov.br/servicos-pf/produtos-quimicos/legislacao/anexos-da-portaria-1274-03[_http://www.pf.gov.br/servicos-pf/produtos-quimicos/legislacao/anexos-da-portaria-1274-03_].
** **Lei n. 10.357, de 27 de dezembro de 2001** -- Estabelece normas de controle e fiscalização de produtos
químicos que direta ou indiretamente possam ser destinados à elaboração ilícita de substâncias entorpecentes,
psicotrópicas ou que determinem dependência física ou psíquica, e dá outras providências.  ** Adicionalmente,
um guia online que facilita o acesso à informação da portaria 1274/03 encontra-se neste endereço:
http://www.dinamicadespachante.com.br/materias.php?cd_secao=56[_http://www.dinamicadespachante.com.br/materias.php?cd_secao=56_].

Com todos os pontos esclarecidos, o melhor modo de explicarmos de forma efetiva é primeiro listar os diferentes
solventes e suas particularidades para então descrever os métodos de alisamento.

[NOTE]
.Notas:
====
. __http://web.archive.org/web/20130907052608/http://www.strangespaceblog.com/blog/http://web.archive.org/web/20130907052608/http://www.strangespaceblog.com/blog/2013/2/24/acetone-vapor-bath.html[2013/2/­24/acetone-vapor-bath.html]__. Infelizmente o blog de Austin não existe mais, mas o _web archive_ guardou o momento.
. He, Y., Xue, G. H., & Fu, J. Z. (2014). Fabrication of low cost soft tissue prostheses with the desktop 3D printer. __Scientific reports__, __4__. https://www.nature.com/articles/srep06973[_https://www.nature.com/articles/srep06973_]
====

==== Acetona

image::image202.png[image,width=642,height=444]

O solvente mais utilizado e documentado de todos é, sem dúvida nenhuma, a acetona, também chamada de propanona
ou dimetil cetona. É o composto da classe das _cetonas_ mais simples, na forma de um líquido incolor de odor
característico e frutado. É massivamente produzida pela indústria para uma enorme variedade de cenários, desde
reação para criação de outros produtos químicos até para inclusão em produtos como removedor de esmalte e
_thinners_ de tinta. Sendo um composto produzido pelo próprio organismo e tendo via metabólica de eliminação,
sua capacidade tóxica é baixa, tendo toxicidade aguda e crônica baixas se ingerida ou inalada. Não há estudos
que lhe atribuam efeitos carcinogênico, mutagênico ou neurotóxico. É até mesmo usada em baixa quantidade em
alguns alimentos e bebidas, por ser "geralmente reconhecida como segura". Por outro lado, o contato da acetona
com a pele dissolve os óleos de proteção naturais e a resseca^1^.

Tem densidade de 0,7845 g/cm^3^ (~80% da da água) e ponto de ebulição em 56°C, sendo no entanto bastante volátil
mesmo abaixo dessa temperatura -- uma de suas propriedades mais utilizadas. Na forma de gás, tem densidade duas
vezes maior que o ar, tendendo a se acumular em cima do líquido ao invés de se dispersar. O ponto de fulgor da
acetona é de -20°C e o composto é bastante inflamável, o que quer dizer que acima dessa temperatura a acetona
entra em combustão com qualquer chama, o que a torna bastante perigosa. Apesar disso, para entrar em combustão
sem chama inicial ("ponto de auto-ignição"), é necessário aquecê-la a 465°C. É miscível em água e
álcool. Na atmosfera em forma de gás, tem meia-vida até degradação por ultravioleta de 22 dias.

A acetona é um composto controlado pela portaria 1.274/03 com limite de 2l por mês, sendo obtida em locais
especializados como lojas de laboratório, que facilitam o processo de permissão pela polícia federal. Por isso
mesmo, compostos derivados de acetona de acesso livre como removedores de esmalte a têm em baixa quantidade e em
conjunto com outros compostos que contra-atacam alguns de seus efeitos. Por essa razão, a acetona a ser usada nas
tarefas de acabamento deve obrigatoriamente ser a de laboratório, com pelo menos 99% de pureza (denominada P.A. de
"pureza analítica" ou "para análise"); uso da "acetona de farmácia" ao invés da de laboratório
quase sempre resultará em um acabamento malfeito e ação conjunta dos outros componentes da solução na peça,
levando a rachaduras, descoloramento, bolhas e fragmentação, muitas dessas ações aparecendo somente dias depois
do tratamento.

A acetona funciona bem com filamentos de ABS, ASA e policarbonato; em termos químicos, diz-se que é
"incompatível" com o material pois o dissolve. Logo, um material resistente à acetona será "compatível"
com ela. A acetona é um composto bastante polar: os polímeros mais compatíveis com a acetona são os que têm
__baixa polaridade__, como o polietileno; os mais __incompatíveis__, ou seja, que se dissolvem melhor, terão
polaridade alta, próxima à da própria acetona -- como nitrocelulose e poliestireno.

__**A acetona funciona com PLA?**__ É uma pergunta extensivamente repetida em fóruns de internet. Deveria ser outra:
a acetona _dissolve_ o PLA? E para essa pergunta a resposta é "não". No entanto, há centenas de testemunhos e
muitos vídeos de pessoas persistentemente tratando peças de PLA com acetona e tendo resultados. Isso ocorre porque
certamente a acetona _ataca_ o PLA, de maneiras diversas, desde o ressecando até contribuindo para oxidação e
degradação. Para tornar a situação mais complicada, a formulação do PLA tem muitas variáveis e vários de seus
aditivos são dissolvidos pela acetona, ou dão um efeito visualmente agradável quando atacados por ela. Portanto,
a forma como a acetona age com o PLA usado dependerá de muitos fatores pertinentes ao filamento específico. Um
revés muito grande, entretanto, é que na maioria desses casos, a ação de alisamento aparente mostra seus
problemas a médio ou longo prazo, com o aparecimento de fissuras, rachaduras, desbotamentos e fragmentação da peça.

image::image203.png[image,width=642,height=457]

*Vantagens:*

* Alta disponibilidade em lojas de laboratório.  * Baixo preço.  * Bastante volátil, o que faz com que a peça
seque rapidamente após a aplicação.

*Desvantagens:*

* Necessidade de permissão da polícia federal e limite de 2l por mês.  * Inflamável.  * Não raramente interage
com corantes do plástico e os "desbota".  * Levemente tóxica.

Notas:

1 -- Um documento de 276 páginas (em inglês) listando praticamente todos os efeitos tóxicos
que a acetona pode ter é disponibilizado pelo departamento de saúde dos EUA no endereço:
https://www.atsdr.cdc.gov/toxprofiles/tp21.pdf[_https://www.atsdr.cdc.gov/toxprofiles/tp21.pdf_]

==== Clorofórmio

image::image204.png[image,width=642,height=440]

Pânico! Horror! Indignação! A substância mais conhecida do público leigo pelo "lança-perfume"^1^ ou pelo
clichê hollywoodiano de ser embebida em um pano e colocada no rosto de uma vítima para incapacitá-la não merece a
fama que tem, a começar pelo clichê ser falso (administrado desse modo, ele levaria pelo menos cinco minutos para
agir). No "mundo real", o clorofórmio ou triclorometano, de fórmula CHCl₃, é, como a acetona, produzido
industrialmente em larga escala e entra no processo produtivo como precursor de várias substâncias (como o PTFE,
ou Teflon) e solventes de tantas outras, como gorduras, óleos, borracha, alcalóides, ceras e resinas. Também
aparece por processos naturais, especiamente sintetizado por algumas algas e fungos.

Muito de sua toxicidade vem de ser um composto organoclorado^2^, sendo reativo e carcinogênico. Apesar disso, é bem
absorvido, metabolizado e eliminado por mamíferos após exposição oral ou dérmica, podendo criar feridas por
dissolver os lipídios da epiderme. A eliminação é primariamente pelos pulmões. O clorofórmio é um depresso
do sistema nervoso central, podendo causar torpor e coma, com sintomas sérios com a ingestão de 7,5g do material
e a dose letal sendo estimada em meros 45g.

É, como a acetona, um líquido incolor e com odor característico -- e devido à sua toxicidade, sentir este
odor já é um indicativo alarmante de exposição excessiva. *Não custa reiterar, a proteção adequada ao
manuseá-lo é questão de vida ou morte.* A peça deve ser tratada em ambiente isolado, preferencialmente em
capela química, e com todo o aparato de proteção de corpo inteiro. Diferente da acetona, tem densidade maior
que a água e, apesar de também ser volátil, é bem menos, significando que peças tratadas com ele demorarão
mais para secar. Tem ponto de ebulição ligeiramente maior que a acetona -- 61°C -- e a vantagem de não ser
inflamável, se decompondo em 450°C. Não é solúvel em água, pois não tem grupos hidrofílicos.

Assim como a acetona, tem sua compra controlada pela portaria 1.274/03 com limite de dois litros por mês. Tem
o preço próximo ao da acetona. Funciona especialmente bem com PLA, mas sua utilidade se estende para muitos
dos outros filamentos, incluindo ABS, ASA e policarbonato, com o efeito em PETG e TPU dependendo do filamento
específico. A ação de dissolução do PLA é intensa e rápida, então o tempo de exposição da peça não deve
passar de poucos minutos. Aliado à menor volatilidade, há maior propensão em tratar a peça "além do ponto"
com clorofórmio do que com acetona. Por outro lado, mesmo com o tratamento em forma líquida, o clorofórmio não
costuma interagir com os corantes dos filamentos, preservando sua cor.

*Vantagens:*

* Alta disponibilidade em lojas de laboratório.  * Baixo preço.  * Moderadamente volátil, a peça não demora
muito para secar.  * Consegue tratar vários plásticos diferentes.  * Ação forte e rápida, alguns segundos
podem ser suficientes de acordo com a peça.  * Não é inflamável.

*Desvantagens:*

* É a substância mais tóxica da lista. É carcinogênica, depressora do sistema nervoso central e exige proteção
de corpo inteiro com máscara de gás para manipulação.  * Necessidade de permissão da polícia federal e limite
de 2l por mês.

Notas:

1 - FOGAÇA, Jennifer Rocha Vargas. "Composição e Aplicações do Clorofórmio"; __Brasil Escola__. Disponível em
<http://brasilescola.uol.com.br/quimica/composicao-aplicacoes-cloroformio.htm[_http://brasilescola.uol.com.br/quimica/composicao-aplicacoes-cloroformio.htm_]>.
Acesso em 15 de julho de 2017.

2 - FOGAÇA, Jennifer Rocha Vargas. "Compostos organoclorados"; __Brasil Escola__. Disponível em
<http://brasilescola.uol.com.br/quimica/compostos-organoclorados.htm[_http://brasilescola.uol.com.br/quimica/compostos-organoclorados.htm_]>.
Acesso em 15 de julho de 2017.

==== Diclorometano

image::image205.png[image,width=642,height=352]

Se o clorofórmio é __triclorometano__, CHCl₃, o diclorometano ou cloreto de metileno é o "irmão menor",
com apenas dois átomos de cloro -- CH₂Cl₂. Aparece na mesma _Lista II_ de substâncias controladas da
portaria 1.274/03 que o clorofórmio, com o mesmo limite. Em geral, o diclorometano tem propriedades próximas às
do clorofórmio, sendo mais volátil, tendo temperatura de ebulição em 39,6°C e temperatura de auto-ignição em
556°C, mas podendo formar misturas combustíveis quando acima de 100°C. É o menos tóxico dos cloroidrocarbonos,
mas sua alta volatilidade torna a inalação e absorção dérmica bastante perigosa. Tem odor semelhante ao
clorofórmio, sendo facilmente reconhecível, e exige as mesmas proteções para manipulação. Sua ação de
solvente afeta os mesmos plásticos que o clorofórmio afeta mas é mais lenta, portanto pode ser preferível para
se ter maior controle. O preço é um pouco maior que o clorofórmio por ser produzido em menor escala.

*Vantagens:*

* Boa disponibilidade em lojas de laboratório.  * Preço mediano.  * Bem volátil, a peça não demora para secar.
* Trata os mesmos plásticos do clorofórmio.  * Ação mais lenta e contida que o clorofórmio, podendo ser usado
com maior controle.  * Menos tóxico que o clorofórmio.  * Não é inflamável nas temperaturas convencionais de
aplicação com vapor (<100°C) e tem ponto de auto-ignição bem alto.

*Desvantagens:*

* Preço maior e disponibilidade menor que o clorofórmio.  * Mesma necessidade de proteção do clorofórmio.
* Necessidade de permissão da Polícia Federal e limite de 2l por mês.  1.  [[tetraidrofurano]] === Tetraidrofurano

image::image206.png[image,width=642,height=402]

O Tetraidrofurano (às vezes escrito -- incorretamente - "tetrahidrofurano"), THF ou oxolano^1^ é um éter
heterocíclico incolor, com odor pungente e forte ação solvente, atacado PLA, ABS, ASA, policarbonato e até látex,
devendo ser manuseado com luvas de nitrilo. Devido a ser fracamente polar, pode dissolver tanto compostos polares
quanto apolares e é miscível em água. Tem a toxicidade semelhante à da acetona, isto é, baixa, mas devido à
sua forte ação solvente o risco de penetração dérmica e consequente desidratação é maior. Além disso, com
ponto de fulgor em -14°C, o tetraidrofurano é altamente inflamável e tende a formar peróxidos explosivos. Tem
temperatura de ebulição de 66°C e no estado de vapor é 2,5 vezes mais pesado que o ar, oferecendo o mesmo perigo
da acetona de o vapor inflamável "entornar" de um recipiente aberto e entrar em ignição em contato com peça
incandescente -- portanto é estritamente necessário manusear em ambiente que possa conter eventuais chamas e
explosões. Algumas formulações de tetraidrofurano misturam o inibidor de peróxidos _hidroxitolueno butilado_ (BHT).

Seu maior revés no entanto é o preço. Custa em média 3 vezes mais que a acetona. Por outro lado tem limite de
utilização bem maior, de 5 litros por mês. Apesar de ser um solvente poderoso, sua ação no PLA é mais lenta
que do clorofórmio.

*Vantagens:*

* Relativa baixa toxicidade, semelhante à da acetona. Seu odor pungente e forte também torna vazamentos facilmente
perceptíveis, bem mais que as outras substâncias.  * Poder solvente mais lento que do clorofórmio, permitindo
maior controle.  * Limite de 5l por mês, bem maior que das outras substâncias controladas.  * Trata uma gama
variada de plásticos, semelhante ao clorofórmio e diclorometano.

*Desvantagens:*

* Preço consideravelmente maior, cerca de 3 vezes o preço da acetona ou até mais.  * Necessidade de permissão
da Polícia Federal.  * Apesar da mesma toxicidade, riscos maiores que o da acetona, em especial de penetração
dérmica ou ignição de chamas ou até explosão. Devido a esses riscos, a necessidade de um ambiente com
contenção de chamas é indispensável.

Notas:

1 -- Ficha de Informação:
http://sistemasinter.cetesb.sp.gov.br/produtos/ficha_completa1.asp?consulta=TETRAHIDROFURANO[_http://sistemasinter.cetesb.sp.gov.br/produtos/ficha_completa1.asp?consulta=TETRAHIDROFURANO_]

==== Metil-Etil-Cetona (MEK)

image::image207.png[image,width=634,height=410]

Se o clorofórmio tem seu irmão mais fraco, o diclorometano, pode-se dizer que a acetona tem uma irmã mais
forte, visto pela sua enorme polaridade de 2,76D, a metil-etil-cetona, MEK (do inglês __methyl ethyl ketone__)
ou butanona. É um solvente industrial largamente usado e pode ser visto como uma acetona com ação solvente mais
rápida e forte, funcionando com os mesmos plásticos, e volatilidade bem menor. A temperatura de ebulição da MEK
é 79,6°C; isso quer dizer que caso se aqueça a mistura, seu vapor estará nessa temperatura ou acima, e além
da ação de dissolução do plástico, no caso dos plásticos resistentes como o PLA pode haver amolecimento pela
temperatura acima da transição vítrea. Esse efeito pode ser facilmente confundido com o alisamento da peça,
mas será na verdade degradação que acaba levando a rachaduras e inviabilização.

A MEK tem os mesmos requerimentos de aquisição da acetona, com limite de 2l por mês e um preço um pouco maior. Tem
também os mesmos riscos e embora seja menos volátil, é mais tóxica, e ainda é inflamável e até explosiva.

*Vantagens:*

* Alta disponibilidade em lojas de laboratório.  * Preço baixo a mediano.  * Baixa volatilidade, o que permite
maior controle.  * Ação mais forte e rápida

*Desvantagens:*

* Preço maior que a acetona.  * Necesside de permissão da Polícia Federal e limite de 2l por mês.  * Ação mais
forte e rápida pode degradar a peça.  * Baixa volatilidade fará com que os métodos a frio não funcionem bem.

==== Solução limpadora

Acetona e MEK são produtos extremamente necessários em alguns campos de trabalho -- solventes que podem ser
usados para todo tipo de preparado e limpeza - e a burocracia e taxas extras para obter tais produtos seriam
paralisantes. Felizmente, existem produtos industrializados, de preços próximos ao desses solventes, que os
utilizam em sua formulação sem impurezas que impeçam sua ação, e que podem ser obtidos sem permissões especiais,
precisando apenas o comprador ser maior de 18 anos. Desses produtos, o mais importante é a assim chamada _solução
preparadora_ ou _solução limpadora_ de canos e PVC, uma mistura primariamente de acetona e MEK. Discriminamos
três marcas principais fáceis de encontrar no mercado brasileiro: __Tigre__, _Pulvitec_ e __Amanco__.

image::image208.png[image,width=642,height=374]

As três soluções têm uma porcentagem de MEK e acetona variável, mas dentre esses limites:

[cols=",,",]
|=====================================
|*Solução*	|*% de Acetona*		|*% de MEK*
|*Tigre*	|22-70			|30-86^1^
|*Polytubes*	|60-100			|1-20^2^
|*Amanco*	|40-50			|40-50^3^
|=====================================

*Vantagens:*

* Alta disponibilidade e facilidade de compra: em lojas de encanamento, materiais de construção e pela internet.
* Não necessita de permissão da polícia federal, apenas ser maior de 18 anos.  * Preço semelhante ao de frascos
de acetona e metil-etil-cetona.  * Mistura dos dois solventes, se valendo tanto da força maior da MEK quanto da
volatilidade da acetona.

*Desvantagens:*

* Só funciona com os mesmos plásticos da acetona e metil-etil-cetona.  * Tem os mesmos perigos e riscos dos
dois solventes.  * Pode ser difícil achar os frascos maiores de 1l, visto que os de 200ml também são vendidos.

Notas:

1 -
http://www.tigre.com.br/sites/default/files/produtos/ficha-de-seguranca/soluaaao-preparadora-tigre--v3--30112015pdf_0.pdf[_http://www.tigre.com.br/sites/default/files/produtos/ficha-de-seguranca/soluaaao-preparadora-tigre--v3--30112015pdf_0.pdf_]

2 -
http://www.pulvitec.com.br/produto/solucao-limpadora-polytubes[_http://www.pulvitec.com.br/produto/solucao-limpadora-polytubes_]

3 -
_http://assets.production.amanco.com.br.s3.amazonaws.com/uploads/gallery_asset/file/54/FISPQhttp://assets.production.amanco.com.br.s3.amazonaws.com/uploads/gallery_asset/file/54/FISPQ_Solu__o_Limpadora.pdf[­_Solu__o_Limpadora.pdf]_

==== Compostos não recomendados para o acabamento químico

Assim como passamos uma lista de compostos que podem ser usados para o acabamento químico, há também aqueles
compostos que, embora disponíveis no mercado e anedoticamente utilizados para esse fim, são inadequados ou até
perigosos. Apresentamos uma pequena lista de compostos que o leitor deve _evitar_ usar.

* *Acetona de farmácia* ("removedor de esmaltes"): devido à sua composição com álcool, água e outras
substâncias que além de inibir o efeito solvente da acetona têm grande potencial de degradar a peça, seu uso
é totalmente desencorajado.  * *Thinner:* Thinner, ou "diluente" em português, é um composto que serve
para diminuir a concentração já existente de um composto em uma solução -- _diluindo_ o composto. Contraste
com __solvente__, que é o composto que vai criar a solução, _dissolvendo_ ou _solubilizando_ algo em si. Já
notamos então estarmos trabalhando com uma categoria de produtos, e não um produto específico, o que complica a
situação. Thinners são geralmente usados para tintas de diversos tipos, com várias fórmulas diferentes, mas um
padrão pode ser observado que é a mistura de hidrocarbonetos aromáticos, ésteres, glicóis, álcoois e cetonas,
alguns desses produtos com ações destrutivas aos plásticos. A legislação não exige que a composição exata
do thinner seja especificada, então é muito difícil dizer a adequação de uma marca particular para o objetivo
de fazer acabamento em plásticos e praticamente impossível de comparar com outras substâncias.
* **Acetato de etila**: um solvente relativamente barato e encontrável em lojas de laboratório com momento de dipolo de 1,78D,
não necessitando de permissão especial para compra. geralmente recomendado para uso com o PLA mas diferentemente
do que se diz sobre ele, não funcionando se o polímero for __enantiopuro__^1^ (tiver um único isômero no material
-- que é geralmente o caso), tendo infelizmente ação reduzida sobre a superfície da maioria das formulações
desse polímero. Na prática, vê-se que a baixa ação dele em peças de PLA não justifica seu uso, e dado que seu
ponto de ebulição é alto -- 77,1°C -- pode ser que haja confusão entre os que o advogam entre o tratamento
por calor e o efeito de dissolução da superfície.

Notas:

1 - Kalia, S., & Avérous, L. (Eds.). (2011). _Biopolymers: biomedical and environmental applications_ (Vol. 70). John
Wiley & Sons.

=== Acabamento químico: métodos

Listados os materiais de que podemos dispôr e suas particularidades, o passo seguinte é enumerar os métodos
que usaremos com eles. Começamos pelo mais básico e aumentamos a sofisticação, além de dizer as vantagens e
desvantagens de cada um.

==== Imersão

O método mais simples possível de tratar uma peça fabricada por uma impressora 3D FFF é submergi-la no solvente,
e as desvantagens são óbvias para qualquer um que já mergulhou um cubo de açúcar ou um cristal de sal em água,
que é solvente para esses compostos: a deformação e destruição são imediatas, e embora a ação dos solventes
de plásticos seja mais suave, o procedimento para dar certo tem tantas variáveis e necessitaria de tanto controle
que não é usável na prática. Entre outros fatores, a convecção do líquido causará deformação, e em alguns
líquidos mais densos que o plástico, como clorofórmio, a flutuabilidade da peça tanto causa deformações
quanto atrapalha a submersão. O solvente também penetra rapidamente nos interstícios de camadas e encharca a
peça por dentro, e quando essa é removida, a geometria pode criar poças localizadas que continuarão atacando
a forma. Outro problema é que o custo de tais solventes em volume suficiente pra permitir submersão é alto e
ainda esbarra no limite mensal das regulações, e o líquido torna-se inutilizável após pouco uso, por acumular
corantes de plásticos que contaminarão os seguintes.

Em especial a submersão em acetona tem o frequente inconveniente de agir nos corantes e desbotar o plástico.

De qualquer modo, existem ocasiões para as quais esse método pode compensar, como tratamento rápido de uma
peça pequena. Nesse caso, deve-se lembrar de usar as proteções adequadas e submergir a peça bem antes do ponto
ideal pois a ação do solvente continuará forte mesmo depois de retirada. É preciso ter bastante cuidado com
os instrumentos e ambiente de secagem pois a peça estará pegajosa e amolecida e qualquer contato inadvertido
a deformará.

*Vantagens:*

* Método mais simples. Exige apenas o recipiente com o solvente, a peça, um instrumento para fazer a submersão
e as proteções.

*Desvantagens:*

* Para conseguir resultados razoáveis em todas as situações, exige muito controle, incluindo potencial custo em
equipamentos e instrumentos com esse fim.  * Utiliza uma grande quantidade de solvente, o que além de dispendioso
torna seu uso crítico visto que têm limites mensais regulados pela lei.  * Lida com pressões mecânicas
de convecção e efeitos de flutuação que podem distorcer a peça.  * Em muitos casos atinge os corantes e
"desbota" a peça.

==== Imersão do Solvente Diluído em Água

Um dos meios de atacar alguns dos pontos do método anterior é diluir o solvente que usaremos em algum outro
líquido inerte para o plástico cuja disponibilidade seja abundante e custo pequeno -- o melhor candidato sendo,
para a maioria dos casos, a água comum -- de torneira ou destilada. Com isso, é possível reduzir o custo, já que
se usa menos solvente -- e de quebra o limite mensal passa a ser menos preocupante -- e também se obtém maior
controle, visto que a mistura agirá mais lentamente que o solvente puro. Lembrando que o método não funciona
com solventes imiscíveis em água, como o clorofórmio e diclorometano, a afirmação de que a água é _inerte_
para o plástico, ainda mais quando este se encontra sendo atacado pelo solvente, é contestável -- aqui, a
hidrofilia do material terá um efeito considerável e pode causar degradação polimérica, tendo que ser feitos
testes caso a caso para se avaliar a adequação ao material.

*Vantagens:*

* Método simples * Diminui o custo e limites da imersão, diluindo o solvente em água * Maior controle, por ter
ação mais lenta.

*Desvantagens:*

* Necessita de testes caso a caso, pois a água pode degradar o material.  * Lida com pressões mecânicas de
convecção e efeitos de flutuação.  * Precisa que o solvente seja miscível com água, descartando clorofórmio
e diclorometano.

==== Aplicação direta com caneta ou pincel

Um caso ligeiramente diferente ocorre quando se quer tratar apenas partes ou seções mais grosseiras da peça,
ou ainda se deseja usar o solvente como "cola" de duas partes do mesmo plástico, ou mesmo se deseja abdicar
da rapidez do tratamento por inteiro em razão de um mais artístico e artesanal usando um aplicador do líquido
-- que pode ser um pincel, uma pequena seringa ou até uma "caneta especializada" para aplicações. É
importante fazer uns testes com o solvente e o plástico que se deseja tratar antes de partir para uma peça
final, pois os efeitos podem ser destrutivos para a peça e o pincel. Em especial, a acetona tende a desbotar o
ABS quando aplicada diretamente na superfície em forma líquida; outros solventes podem ter efeito semelhante,
ou ainda tornar o plástico tão pegajoso que seja inviável o contato do pincel.

Como existem vários aplicadores diferentes, comentamos apenas os mais populares:

* *Pincéis.* No caso da aplicação do solvente com pincéis, é importante usar pincel chato ou pincel trincha,
preferencialmente de cerdas naturais porque elas são naturalmente mais resistentes a solventes. É _sempre_
necessário limpar o pincel no fim da aplicação com thinner ou mais do próprio solvente pois o plástico
residual que adere às cerdas, quando o solvente seca, tende a se acumular e inutilizar o pincel, quebrando cerdas
ou formando uma camada grossa em volta. Mas mesmo a limpeza metódica não garante sobrevida muito maior ao pincel:
este deve ser visto como um item consumível e renovável, visto que após um número variável de aplicações
começa a deteriorar e até perder cerdas -- que podem grudar na peça, a arruinando. Nesse caso, então, pode
ser preferível priorizar pincéis de baixo preço em detrimento dos mais sofisticados.
* **Seringa / pipeta /
mini-borrifador**. Método geralmente usado para trabalhos mais esporádicos, consiste em gotejar ou borrifar
em baixo volume e de forma controlada seções da peça com o líquido solvente para atuação local. Haja visto
que não se toca a peça com o aplicador, é um método que depende inteiramente de o líquido agir com o efeito e
intensidade desejados, o que nem sempre acontece. Pode ser feito de forma econômica comprando seringas de farmácia
(que são de polipropileno e, portanto, resistente aos solventes aqui mencionados) e removendo a agulha. Caso
um borrifador seja usado, é importante verificar que seja de material resistente ao solvente usado.
* **Caneta
aplicadora**. Esta é uma nova opção que surgiu em financiamento coletivo e independentemente em certas lojas
de impressão 3D: um dispositivo feito de plástico resistente a solventes (geralmente polipropileno) e com uma
ponta esponjosa retrátil que quando pressionada se encharca com o solvente do compartimento. O único pequeno
inconveniente é que a pressão para a ponta se retrair pode prejudicar o tratamento delicado de seções finas,
mas fora isso é uma ótima ferramenta para corrigir imperfeições locais de superfície e como tem resposta
táctil com a ponta retrátil, inspira considerável melhoria da habilidade de tratamento com a prática. Ainda que
não seja um instrumento caro, no entanto, não se encontra pra vender no Brasil e é necessário importá-lo. Uma
alternativa barata e artesanal é apresentada no canal de youtube do autor.

image::image209.jpeg[image,width=642,height=303]

*Vantagens:*

* Permite tratamento localizado de imperfeições.  * Talento nessa forma de artesanato vai pesar bastante na
forma final da aplicação.  * É útil para outros usos, como colar peças do mesmo plástico.  * Utiliza pouco
solvente -- somente o essencial para umedecer a superfície com o aplicador.  * Baixa exposição ao solvente,
resultando em baixo risco.

*Desvantagens:*

* Dependendo da combinação de aplicador, solvente e plástico, pode desbotar a coloração.  * Se forem usados
pincéis, eles terão vida curta e necessitarão ser constantemente trocados.  * Com seringas e borrifadores, o
solvente aplicado pode não ter o efeito desejado.  * Depende de o aplicador alcançar a parte da peça que precisa
de tratamento; em formas complexas, isso pode ser impossível.

==== Aplicação com vapor frio de solvente

A encarnação mais comum deste método é o uso de uma lata média ou grande com papel absorvente preso nas paredes
internas por pequenos ímãs, ou recipiente de vidro com espuma colada nas paredes. Embebe-se o papel absorvente
ou a espuma com o solvente e apoiando-se a peça de plástico em uma base não-aderente ou resistente a solventes
como papel alumínio, coloca-se o recipiente em cima, vedando o conjunto. A volatilidade natural do solvente
fará com que o ar dentro do recipiente fique saturado com ele, e vá tratando lentamente a peça. Um tratamento
desses tipicamente leva no mínimo meia hora e funciona melhor com os solventes mais voláteis, como acetona e
tetraidrofurano, sendo consideravelmente mais lento quando usado com MEK, clorofórmio ou solução preparadora.

*Vantagens:*

* Não agride nem tende a deformar muito a peça, preservando os contornos e atacando só a superfície.  * É
um método lento, permitindo por isso maior controle.  * Não envolve aquecimento ou fonte de energia, oferecendo
por isso menos riscos.  * Utiliza pouco solvente -- somente o essencial para embeber o papel ou espuma.

*Desvantagens:*

* Como a lata é opaca e mesmo o vidro tem que ser revestido internamente por espuma, a peça não é visível durante
o tratamento, e o método não permite boa averiguação do progresso. Levantamento do recipiente para averiguação
da peça faz o vapor frio escapar, prejudicando o tratamento.  * O tempo de tratamento demorado pode ser um revés.
* O vapor frio, especialmente para os solventes de PLA, normalmente não é tão efetivo quanto o aquecido.  * Como
há certo contato com o líquido e ainda o vapor no ambiente, é necessário o uso das proteções adequadas.

==== Banho de Vapor Aquecido

Como dito no histórico de tratamento de peças, esse foi o método que marcou uma mudança efetiva no fluxo de
trabalho de acabamento. Seus resultados são os melhores de todos os métodos aqui descritos, com preservação e
até ressalte das cores do plástico, manutenção da forma e contornos da peça e suavização rápida e elegante
da superfície. É claro que isso não quer dizer que o método seja infalível -- sua velocidade, por exemplo,
também faz com que seja bastante agressivo, e há o risco de se exceder o tempo de exposição fazendo a peça
deformar, criar bolhas e rachaduras, ou até mesmo parecer bem tratada a princípio e dias depois começar a
deteriorar. Além disso, os perigos do contato com o líquido e o vapor aquecido são mais presentes nesse método,
sendo indispensável o uso das proteções para corpo inteiro e sua execução em um ambiente isolado e protegido
contra chamas, com uma fonte de calor sem partes incandescentes. Recomenda-se uma capela química com exaustor
para máxima segurança.

*Procedimento sugerido:*

* Antes de iniciar o tratamento químico, a peça deve ter seus suportes e raft **removidos**, ter os defeitos de
impressão mais aparentes *removidos* e principalmente a superfície *lixada* nas partes que deverão ficar mais
lisas. A peça não deve estar úmida.
* Durante o tratamento, os fiapos menores serão completamente *dissolvidos*
pelo vapor e o pó do lixamento e a superfície esbranquiçada do processo serão também atacados de forma a tomar
um contorno *liso* e **brilhante**.
* Veste-se a *proteção* adequada, incluindo a máscara de gás com filtro
para vapores orgânicos, o jalevo e as luvas de nitrilo.
* Coloca-se o *fogareiro elétrico* dentro do ambiente
protegido e ventilado e se assenta o recipiente de tratamento, como um **béquer**, acima de sua espiral aquecedora.
* Ao invés do fogareiro elétrico, para testar o método pode-se usar a *mesa aquecida* da impressora regulada para
uns 100°C, mas atente-se ao leitor que a mesa tem fios relativamente expostos e risco maior de faíscas, incêndios
e explosão. O vapor de solvente escapando do recipiente também pode acabar agindo nas peças da impressora,
especialmente acrílico que dissolve facilmente. Em operações do dia-a-dia, é desejável separar o ambiente
de acabamento do ambiente de impressão.
* Coloca-se uma *base* para que a peça **não entre em contato com o líquido** (caso contrário ela sofrerá deformação quase imediata), e que tenha **pequena área de contato**,
como uma rede metálica.
* Derrama-se um pouco de solvente no recipiente -- geralmente **1 a 2mm de nível de líquido** são suficientes para durar por uns 5 minutos -- e por fim se **coloca a peça**.
* Pode-se colocar
algo no recipiente para dificultar a saída do vapor, como uma *tampa* ou uma **cobertura de papel alumínio**,
tomando o cuidado de *não ser algo que o vede* pois a pressão interna tende a aumentar com o aquecimento.  *
Liga-se o fogareiro elétrico na **temperatura baixa**. Esse ajuste deixa a espiral aquecida entre 80° e 120°C
dependendo do modelo, e essa temperatura determinará a **velocidade de evaporação**. Lembrando a física básica,
durante o processo de transição de fase (líquido para gasoso), a substância permanece na mesma temperatura,
que é sua temperatura de ebulição.
* O *tempo de exposição* ótimo depende de quão lisa se deseja que a
peça torne, da temperatura do fogareiro, do solvente e do tamanho, geralmente sendo de *alguns segundos* a **poucos minutos*
a partir do momento em que o líquido começa a borbulhar.
* Uma melhor qualidade é obtida expondo a
peça ao vapor mais de uma vez com intervalos em que descansa em ambiente seco. Assim, o plástico dissolvido tem
tempo de se acomodar no contorno da peça. Isso também ajuda a evitar superexposição. Claro, isso gera um novo
problema: o vapor não vai "esperar" a peça secar pra se dissipar e submetê-la a várias passadas pode ser
um desperdício. Um jeito de amenizar esse problema, otimizando a utilização do solvente evaporado, é aguardar
a impressão de uma certa quantidade de peças para tratá-las em lote, e deixá-las algumas horas secando para as
passadas subsequentes.
* Uma alternativa a deixar a peça dentro do béquer desde o início é usar um instrumento
dedicado de pequena superfície de contato, como um **pegador de laboratório**, ligar o fogareiro e expor a peça
pelo tempo suficiente para tratamento dentro do béquer. Esse método permite uma suavização personalizada e é
especialmente recomendado pra peças altas, visto que o vapor tende a se acumular e ter ação muito maior na parte
inferior do béquer. No entanto o risco de o plástico aderir no pegador é alto e a manipulação direta da peça
envolve mais contato com o vapor aquecido e **risco bem maior**.
* Antes de chegar ao ponto desejado, **desliga-se o fogareiro e se aguarda** que o líquido pare de borbulhar. Pode-se esperar que o vapor se dissipe completamente ou
se retirar a peça do béquer com instrumentos adequados e luvas para deixar secar em uma superfície adequada.
* Uma boa superfície para a peça secar é *papel alumínio amassado* de forma que suas rugas façam com que a peça
tenha contato mínimo. Assim, o efeito de aderência do plástico amolecido será minimizado. Durante a secagem,
a peça deve ficar longe de poeira ou resíduos, pois esses tendem a aderir facilmente à sua superfície.
* O béquer, base e pegador e quaisquer outros itens com contato com o vapor devem ser limpos depois do procedimento,
pois tenderão a acumular plástico dissolvido e outros resíduos.

image::image210.jpeg[image,width=642,height=338]

*Vantagens:*

* O método remove pequenos fiapos, respeita o contorno da peça e dá um acabamento brilhante e alisado.  * É
um método rápido, podendo ser usado em lote para várias peças passando cada uma por apenas segundos no vapor
quente do solvente.  * Vê-se claramente a superfície do plástico mudando, o que permite parar quando se acerta
o ponto.  * Utiliza pouco solvente.

*Desvantagens:*

* Pode deformar ou prejudicar a peça se for usado por tempo demasiado.  * A superfície brilhante não é
evitável. Se o desejado for uma superfície fosca ou texturizada, o banho de vapor aquecido não é o melhor método.
* Tem maiores riscos por envolver fonte de calor e vapores aquecidos (que se expandem mais rapidamente e sendo
mais pesados que o ar, podem circundar o recipiente e "derramar" dele). Usar as proteções é indispensável.
* Deixa a peça flexível e pegajosa por alguns minutos. É preciso ter cuidado com o contato com ela para não
arruinar sua superfície, e mesmo na hora da secagem é preciso deixá-la em lugar sem poeira e resíduos.

==== Nebulizador / umidificador / vaporizador / Aparato "Maker"

Uma idéia que necessariamente passa pela mente de muita gente é: o procedimento de aplicação de solvente
é caro, desajeitado, perigoso e relativamente sem muito controle. Ao mesmo tempo, existem várias máquinas de
consumo doméstico, como nebulizadores, vaporizadores e umedecedores cujo custo é baixo por serem do "mercado de
massa" e que poderiam, com algumas modificações, ser facilmente usadas para realizar o processo de alisamento com
menos risco e mais controle; seria uma _exaptação_ do dispositivo para a impressão 3D. Maior espírito _Maker_
que tentar isso, impossível! Alternativamente, ao invés de se obter uma máquina já pronta para modificar, pode
ser mais eficaz aplicar os princípios de uma com elementos obtidos individualmente, como elementos nebulizadores
e bombas de ar -- também perfeitamente factível.

Ao se tentar tal empreitada, entretanto, as dificuldades logísticas e técnicas logo aparecem. Os pontos a se
observar são:

* *Os aparelhos de mercado são feitos de plástico* e estamos procurando construir algo pra lidar com solventes
de plástico. Percebe o conflito? Como acontece no mercado de massa por desinteresse dos consumidores, geralmente o
plástico de que é feito a máquina nem mesmo é discriminado. Se for polipropileno, indicado em alguns modelos da
marca _Mondial_ por exemplo, o risco é menor, mas ainda assim presente, pois não há garantia que as outras partes,
especialmente as elétricas, serão tolerantes e se comportarão como o desejado com o solvente.
* **Os aparelhos de mercado não são construídos pra tratar objetos** e por isso não têm câmara vedada e espaçosa como seria
desejável, sendo construídas para dissipar o vapor no caso dos vaporizadores e umidificadores, e direcioná-lo no
caso dos nebulizadores. O que isso significa é que mesmo que o aparelho seja usável para o propósito de acabamento,
terá que sofrer consideráveis modificações estruturais.
* Nebulizadores, umidificadores e grande parte dos
vaporizadores usam o método *ultrassônico* para dispersar as moléculas do líquido, o que gera um *vapor frio*
que pode não ser o que queremos, já que o vapor aquecido tem efetividade tão maior no acabamento. Por outro lado,
o fato de usar ultrassom ao invés de aquecimento torna o método mais seguro.
* Listados todos os motivos anteriores,
os testes necessários, possíveis perdas ou acidentes, o mais seguro seria buscar informações de _makers_ que já
trilharam esse caminho e modificaram um desses aparelhos, mas... _Não se encontram_ receitas desse tipo. Portanto
mesmo que o modelo específico a ser modificado fosse extremamente popular no mundo inteiro de modo à receita
ser aplicável no Brasil, esse é um caminho ainda não desbravado e por isso mesmo bastante arriscado.
* Por tudo isso, ainda que seja potencialmente um trabalho maior, caso o leitor se interesse em construir um dispositivo
para esse fim, o sugerido é uma das **receitas de máquinas "a partir do zero"**, sempre lembrando que ainda
que tenha um componente lúdico e que valha a pena fazer também para "crescimento pessoal", geralmente toma
um tempo que pode representar uma grande economia se ao invés do projeto for comprada uma solução pronta para
uso. Ainda assim, essa solução permite o uso da criatividade menos confinada e adição de controles especiais
para o acabamento, como medição de temperatura e ventoinha para maior fluxo de ar, e recursos preciosos como
plataforma anti-aderente para evitar este efeito da peça úmida de solvente. _Observação conveniente:_ ventoinhas
são geralmente feitas de poliamida ou poliimida reforçada com fibra de vidro, compostos resistentes aos solventes
que listamos.
* Havendo disposição e tempo, a receita "Maker" mais popular na web descreve um aparato que
usa partes de um mini-umidificador ultrassônico portátil (dos que difundem vapor no ambiente, pouco maior que
uma lata de refrigerante) e itens de prateleira como jarro de vidro, tubos de polietileno, lata de tinta vazia,
conectores de rosca e bombinhas de ar. Opcionalmente permite controle por timer, constando também nas instruções.

image::image211.jpeg[image,width=642,height=262]

*Vantagens:*

* Solução flexível, que pode ser construída de acordo com as necessidades de escala e orçamento que se tenha,
podendo inclusive ser personalizada com temporizadores e microcontroladores ou itens que permitam aplicação
em série.
* Itens de mercado de massa, com elementos e peças de reposição facilmente adquiríveis.

*Desvantagens:*

* Tempo, disposição e estudos necessários para se construir tal aparato. Caso seja para uma empresa de impressão
3D média ou grande, pode exigir um profissional dedicado para operação, manutenção e reparos.
* Fragilidade da solução, que não tem garantias de funcionamento e riscos grandes associados à construção interna.

==== Máquinas especializadas

Ora, recomendamos aparelhos especializados para o tratamento químico se a disposição para construir um for baixa,
mas _qual_ aparelho? No momento de publicação deste livro não há nenhuma comercializada no Brasil, mas existe
uma criada por financiamento coletivo que virou um produto de verdade comercializado por uma companhia de Taiwan,
a __Magic Box__.

image::image212.jpeg[image,width=642,height=417]

Ela trabalha com uma câmara hermética em que se põe a peça e um compartimento para o solvente, que é borrifado
para câmara formando uma névoa que ataca a peça. É também com vapor frio, mas o controle se vê pelos botões
da máquina: tem timer, regulação de intensidade e medidor para troca do filtro. No entanto, cabe lembrar que
esta tecnologia ainda está em sua infância, e a máquina, vendida por 600 dólares, tem tido muitas reclamações
e na sua capacidade máxima esgota o tanque de solvente em 20 segundos. É garantida apenas para acetona, com o
risco de uso de outros solventes ficando por conta do usuário.

Esse é um dos exemplos de mercado ansiando por soluções e na falta tendo que recorrer a procedimentos caseiros e
inseguros. Empreendedores _makers_ não têm falta de fontes de idéias para criar dispositivos e itens que dominem
o mercado. Muito provavelmente a fragilidade de funcionamento da MagicBox vem das dificuldades de se conter e
lidar com um composto perigoso como a acetona. Tendo isso em vista, a empresa _Polymaker_ pensou em uma solução
bastante criativa: por que não criar um filamento de impressão 3D _especial_ que funcione com um solvente menos
perigoso e tolerado por máquinas, e criar conjugado a ele uma máquina que o aplique? Esse é o ponto do filamento
_Polysmooth™_ e da máquina aplicadora __Polysher™__, que usam o solvente de prateleira _álcool isopropílico_
(isopropanol), que não ataca componentes eletrônicos e é barato e largamente usado pela indústria.

image::image213.png[image,width=591,height=471]

*Vantagens:*

* Uma empresa por trás do aparelho dá segurança legal e técnica para o tratamento químico.
* Solução pronta e simples, sendo apenas necessário a compra do insumo (solvente) e manutenção preventiva.
* Necessidade muito menor de treinamento de pessoal.

*Desvantagens:*

* Tamanho único -- e pequeno. Não servirá para peças grandes.
* Ainda não há solução comercial que use
aquecimento do solvente, que é o tratamento mais efetivo.
* Fragilidade das soluções, em um mercado ainda incipiente.
* Indisponibilidade no Brasil -- necessidade de importação. Isso também dificulta manutenção
e reparos.
* No caso do filamento especial PolySmooth™, a necessidade de importação do filamento é um
obstáculo. Além disso, o fato de ser atacado por um solvente tão comum e abundante tem o efeito de tornar as peças
impropícias para muito usos em que estarão expostas.

==== Outros usos dos solventes

O uso de solventes de plásticos é tradicional na indústria de injeção e "chegou pra ficar" na da impressão
3D de baixo custo. Além do acabamento, a mente criativa dos _makers_ tem utilizado solventes para todo tipo de
tarefa relacionada à impressão 3D. O **"suco de ABS**", como foi batizado, uma mistura de cerca de 5/6 de
volume de acetona e 1/6 de volume de resíduos de ABS (geralmente suporte triturado), vira um líquido colorido
que pode ser usado para:

* Passar no vidro e criar uma fina camada de plástico, servindo como "cola" para evitar _warp_ e descolamento
durante a impressão.
* Revestir a peça de forma a engrossá-la e permitir curvas mais orgânicas e artísticas,
e também recuperar a cor, ou no caso de plástico de cores diferentes, servir como tinta.
* Funcionar como _cola_
para unir partes diferentes, já que o solvente evapora e o que permanece é apenas o plástico. Dessa maneira,
se tem uma peça contínua do mesmo material com cicatrizes mínimas.
* Preencher delaminações, buracos e
falhas de impressão eventuais sem deixar vestígios.
* Reforçar seções finas. É de se notar, aliás, que
os solventes deixam a resistência das peças maior no sentido vertical (por aumentar a aderência entre camadas,
visto que o plástico dissolvido penetra nos intervalos entre elas) mas menor no plano XY (pois aumentam levemente
a porosidade ao atacar a polimerização do plástico). São um antagonista da anisotropia da impressão 3D FFF.  +
É importante notar que algumas dessas estratégias podem pedir por misturas mais espessas -- por exemplo, cobrir
buracos pode funcionar melhor com uma mistura de 2/3 de acetona e 1/3 de ABS. Além disso, embora o suco de ABS
seja o mais conhecido, os outros solventes e seus plásticos também funcionam -- por exemplo, é possível fazer
"suco de PLA" com clorofórmio, o problema está em esses compostos serem bem mais tóxicos e o perigo de ter
contato tão próximo com eles em tarefa de revestimento, colagem e pintura tornar essas operações muitíssimos
mais perigosas.

=== Acabamento térmico -- recozimento (__annealing__)

Quando uma peça de impressão 3D é fabricada, o processo todo submete o material a várias tensões localizadas
dado principalmente às diferenças de temperaturas entre os vários pontos em que o filamento é depositado. Muitas
dessas tensões ("estresses") acabam se traduzindo no _warp_ do material que mencionamos, mas outras não chegam
a ser aliviadas na geometria do material. Essas tensões contribuem para diminuir a aderência entre camadas, causar
efeitos de fadiga, mudanças de cor, rachaduras e deformação com o tempo. Em partes translúcidas e transparentes,
tais tensões podem causar níveis diferentes de refração da luz no aspecto do material, prejudicando o efeito
estético.

Para aliviar esses estresses localizados, existe a técnica de _recozimento_ ou, em inglês, __annealing__, que
vem de outros tipos de fundição industrial. A idéia é deixar a peça em temperatura elevada por várias horas,
às vezes por dias (caso de lentes de vidro, por exemplo). Esta temperatura elevada se situa acima da temperatura
de transição vítrea (tg), mas abaixo da temperatura de derretimento (tm), de modo que as moléculas do material
passam a ter alguma liberdade para se moverem, mas não excessiva de modo que a forma possa se desmanchar. Assim, elas
lentamente "relaxarão" e removerão o stress, resultando em uma peça mais forte, mais isotrópica e resistente
ao tempo, e em certos casos para peças impressas um acabamento melhor também é conseguido visto que as linhas
de camada ficam menos visíveis. O recozimento também pode ter o efeito, em filamentos específicos preparados
para esse fim, de cristalização das moléculas, ou seja, formação de estruturas organizadas que aumentam a
rigidez e resistência do objeto -- o "HTPLA" da empresa Proto-Pasta com fibra de carbono é um exemplo disso.

Idealmente o recozimento seria um processo controlado e demorado, com o forno esquentando lentamente para dar
tempo para o equilíbrio térmico acontecer entre as partes internas e externas da peça impedindo o _warp_ ao
máximo. Na prática, adicionar ainda mais tempo ao já demorado processo da impressão 3D não é uma boa idéia,
e fornos com esse tipo de controle de tempo -- geralmente muflas microcontroladas com "rampas" de temperatura
-- são caros e pequenos. Então um equilíbrio entre custo, tempo e temperaturas é buscado.

O resultado também varia muito com o material, até mesmo nas dimensões que são mais afetadas. E a princípio,
parece consensual que o processo não funciona com ABS, sofrendo este material deformação inaceitável com a
temperatura. Algumas formas mais propensas a warp podem necessitar de reforço adicional em certos pontos para
impedir a deformação e o melhor momento para realizar o recozimento é imediatamente após a impressão terminar,
antes mesmo de a peça esfriar -- portanto se o forno tiver volume para tal, levar a peça ainda grudada ao vidro
quente para dentro dele é recomendado.

Embora no ramo industrial o recozimento seja um processo bem controlado, conhecido e usado, na impressão 3D de
baixo custo não parece existir ainda corpo teórico científico e acadêmico consistente de como o conduzir. Os
testes documentados de alguns estudantes da Universidade Estadual do Arizona^1^ são um começo, embora nas
recomendações coloquem uma temperatura especialmente alta e um tempo curto para o PLA (30 minutos a 140°C)
-- outras fontes oferecem valores bem mais conservadores, como o vídeo de Thomas Sanladerer sobre o processo^2^
(110°C por uma hora). Nas experiências do autor deste livro, os valores menos agressivos do Thomas se aplicam
melhor aos filamentos que usa.

Note ainda que como o recozimento pode em princípio ser feito em um forno comum, não existem estudos analisando
possíveis resíduos ou contaminação nos alimentos assados no mesmo dispositivo, e tendo ciência das partículas
ultrafinas do processo de extrusão e das substâncias tóxicas presentes no vapor do plástico, toda cautela é
pouca -- recomenda-se usar um forno dedicado a essa função.

image::image214.png[image,width=564,height=459]

1 --
https://3dprint.com/3388/study-how-to-make-3d-prints-stronger/[_https://3dprint.com/3388/study-how-to-make-3d-prints-stronger/_].
O estudo não parece ter resultado em artigo acadêmico, carecendo por isso de citação formal.

2 - https://www.youtube.com/watch?v=CZX8eHC7fws[_https://www.youtube.com/watch?v=CZX8eHC7fws_]

=== Pintura

Tratando de impressão 3D FFF, pintura surge como um assunto inevitável, até pela limitação da tecnologia
em fabricar com cores diversas. Se por um lado é v[[FEITO_pintura]]erdade que existem muitas peças em que a
pintura é irrelevante, o fato é que para muitas ela é parte da função e para outras ela se apresenta como uma
indispensável vantagem de acabamento. Além disso a pintura pode atuar como reforço, proteção, revestimento e
para omissão dos incômodos e aparentes rel[[porosidade]]evos de camada e serrilhamentos que aparecem nas peças
(função que compartilham com as massas de preenchimento, que por conveniência trataremos em conjunto).

E para podermos entender como a pintura funciona, vale a pena aprendermos um pouco por trás da ciência de
materiais envolvida. Considerando pintura como todo revestimento dos objetos impressos em 3D para fins de aspecto
e funcionalidade, os compostos da pintura, as tintas, permitem decorar, proteger contra rachaduras e envelhecimento
e também melhorar as características da superfície protegida.

*Tinta* não é somente um líquido colorido. A tinta é uma mistura mais ou menos complexa^1^ de diferentes compostos,
e em sua formulação podem ser encontrados:

* **Aglutinantes**: a resina, também conhecida por ligante ou veículo, é o componente que vai formar o filme
seco e o único cuja presença é obrigatória. É classificada de acordo com o mecanismo de cura, sendo os quatro
mais comuns a __evaporação__, _reticulação_ cruzada, _polimerização_ e __coalescência__.
* **Corantes ou pigmentos**: em forma de pó, são envoltos pela resina (líquida) e são os encarregados de dar cor à peça.
* **Cargas**: em forma de pó, são também envoltos pela resina, encarregando-se de melhorar as propriedades
físicas e condicionar o aspecto final.
* **Solventes**: regulam a viscosidade do produto ao método de aplicação
e as propriedades de cura deste. É volátil e não se torna parte do filme seco da tinta.
* **Aditivos**: são
compostos que, mesmo usados em pouca quantidade, proporcionam grande efeito no produto em suas propriedade físicas
e químicas, como melhorar estabilidade e compatibilidade dos pigmentos, conferir propriedades anticongelantes,
melhorar a textura, catalisar reações, emulsificar a mistura, promover aderência e outros.
* **Ceras**: melhoram o tato e orientam partículas metálicas -- como sais de alumínio.

Uma fórmula contendo estes compostos forma uma _suspensão_ dos pigmentos e cargas na resina -- sendo insolúveis
nela -, ao mesmo tempo em que esta resina está em solução com o solvente.

==== Molhabilidade

De modo geral, os plásticos de impressão 3D não têm condições ideais para a fixação de tintas, adesivos
e metalização, devido a suas superfícies quimicamente inertes ou com baixa energia superficial. A aderência
da tinta ao plástico dependerá de três fatores: tensão superficial (energia de superfície), _molhabilidade_
e compatibilidade química. A tensão superficial é função da coesão entre as moléculas do líquido; na sua
superfície, essa força tenderá a ser maior porque as moléculas mais externas não estão ligadas às outras
por todos os lados, dispersando menos as forças de atração e formando um _filme_ invisível interfaceando o
meio externo. Esse filme faz com que o movimento de um objeto seja mais difícil na superfície do líquido do
que quando ele está completamente submerso. A força necessária para romper um filme de 1cm de comprimento é
chamada de tensão superficial e medida em dinas (10^-5^ N) por centímetro.

image::image215.png[image,width=642,height=386]

Para um líquido formar uma superfície uniforme sobre um sólido -- o efeito que desejamos ao aplicar nele
a tinta -, é necessário que sua tensão superficial seja inferior às forças adesivas entre o líquido e o
sólido^2^. Quando isso ocorre, considera-se que o líquido tem boa molhabilidade, ou seja, ele se espalha sobre
o sólido. Este índice pode ser medido pelo ângulo de contato entre o líquido e a superfície, quantificando
a afinidade entre o líquido e o sólido. Com ângulo próximo de zero, a molhabilidade é máxima.

A tensão superficial de tintas líquidas situa-se entre 36 a 38 dinas/cm para tintas à base de solventes e
entre 40 e 45 dinas/cm para tintas à base d’água. Quando uma tinta líquida é aplicada sobre o polietileno
sem tratamento, será visível a formação de gotículas, já que a tensão superficial da tinta é superior às
forças adesivas entre a tinta e o plástico (30 dinas/cm).^3^

Segue uma tabela^4^ de tensões superficiais e ângulos de contato de plásticos utilizados em impressão 3D e
utensílios de dia-a-dia.

[cols=",,,",]
|==========================================================================================
|*Abreviação*				|*Polímero*					|*Energia de Superfície em dinas/cm*	|*Ângulo de contato (graus)*
|					|Nylon 6/6 (poliexametileno adipamida)		|46					|
|PC					|Policarbonato					|46					|75
|					|Nylon-6 ou Poliamida				|6					|38
|PET					|Polietileno tereftalato			|42					|76
|PMMA					|Polimetilmetacrilato (acrílico ou Plexiglas®)	|41					|82
|					|Poliimida (Kapton)				|40					|83
|PVC r					|Policloreto de Vinila (rígido)			|39					|90
|					|Poliéster					|41					|70
|					|Acetal						|36					|85
|PLA					|Ácido Polilático				|36-42^3^					|80^4^
|ABS					|Acrilonitrila Butadieno Estireno		|35					|82
|PVA					|Álcool polivinílico				|37					|10
|					|Poliacrilato (filme acrílico)			|35					|
|PVC p					|Policloreto de Vinila (plasticizado)		|35					|89
|PS					|Poliestireno					|34					|72
|					|Nylon-12					|36					|
|PP					|Polipropileno					|30					|88
|PU					|Poliuretano					|38					|85
|PE					|Polietileno					|30					|88
|					|Borracha natural				|24					|
|PDMS					|Polidimetilsiloxano (usado em cubas deSLAs)	|23					|98
|FEP					|Etileno Propileno Fluorado			|20					|98
|PTFE					|Politetrafluoretileno (Teflon™)		|19					|120
|==========================================================================================

Os poliolefinas -- polímeros produzidos a partir de olefinas simples, ou alcenos como monômeros, como polietileno
e polipropileno -- são as que apresentam maiores dificuldades de aderência, porque além de possuíram baixa
molhabilidade, são apolares, ou seja, incompatíveis com tintas e adesivos -- esses sendo polares.

No âmbito industrial, os filmes plásticos são submetidos a certos tratamentos para modificar suas superfícies
melhorando as características de aderência. Os três tipos mais comuns de tratamento são a _corona_ (descargas
eletrostáticas para aumentar a energia superficial), à chama (combustão de um gás sobre a superfície do filme,
que é então resfriado imediatamente ao passar por água gelada) e químico (aplicação de um verniz/__primer__
de modo a criar condições para a ancoragem de tintas, adesivos e outros revestimentos). O método da chama
pode até ser usado "amadoristicamente" com peças de ABS, passando bem rapidamente um maçarico sobre sua
superfície para polarizá-la, e logo depois o pintar.

1 -
http://www.ebah.com.br/content/ABAAAgjicAH/pintura-pecas-plasticos[_http://www.ebah.com.br/content/ABAAAgjicAH/pintura-pecas-plasticos_]

2 -
_http://www.revistatecnologiagrafica.com.br/index.php?option=com_content&id=1481:tratamenhttp://www.revistatecnologiagrafica.com.br/index.php?option=com_content&id=1481:tratamento-superficial-de-filmes-plasticos&Itemid=183[­to-superficial-de-filmes-plasticos&Itemid=183]_

3 -- Uma explicação mais detalhada das forças de coesão e adesão de um líquido
em um substrato plástico pode ser obtida neste excelente artigo em português:
http://abflexo.org.br/artigo-tecnico/tensao-superficial-em-substratos-plasticos[_http://abflexo.org.br/artigo-tecnico/tensao-superficial-em-substratos-plasticos_].

4 -- A tabela deste livro foi baseada nesta referência, com algumas modificações e seleções:
http://www.tstar.com/blog/bid/33845/surface-energy-of-plastics[_http://www.tstar.com/blog/bid/33845/surface-energy-of-plastics_]

==== A prática: tintas

Sabendo a composição e os princípios de aderência das tintas, podemos aprender quais usar. Existem diversos
tipos de tintas no mercado, mas nem todas são propícias para usar com plástico.

* *Tintas de PVA* ou látex PVA são as mais baratas que se pode usar. São à base d’água, e embora sejam
fáceis de aplicar até no plástico cru, não têm muita retenção -- podendo ser limpadas facilmente com pano
úmido. São geralmente foscas e secam rapidamente após a aplicação. Não são adequadas para peças expostas ao
tempo ou umidade.
* *Tinta acrílica* é o plástico acrílico (PMMA) com solvente; é também à base d’água e
tem o aspecto semelhante à PVA, um pouco mais brilhante e forte em geral, embora exista a variedade fosca. Demora
mais pra secar e se torna impermeável
* **Tinta "PU" (poliuretano) ou epóxi**. Bicomponentes, são também
chamadas de _tintas automotivas_ por serem comumente utilizadas em automóveis. São geralmente mais viscosas e
não solúveis em água, também fazendo um bom trabalho de preenchimento, e dependem do catalisador para secar
completamente. Uma vez seca, proporciona também ótima proteção à peça. Sua flexibilidade natural as protege
de rachamentos.
* *Tinta poliéster* tem um aspecto brilhante, por vezes até metálico, mas é fina (não servindo
para cobrir imperfeições) e não resiste muito ao descascamento, necessitando de verniz ou laca aplicado após
a pintura.
* **Tinta automotiva spray**. Geralmente é tinta acrílica em aerossol para aplicação rápida.

Outros tipos de tinta -- como esmalte, guache, tinta a óleo e tinta de tecido -- não são geralmente ideais
para o uso com plásticos de impressão 3D. Uma exceção pode ser o uso de esmalte de unha com pincel fino para
desenhar detalhes na peça.

==== Revestimento, coberturas e auxiliares

Além das tintas, a tarefa de pintura costuma pedir por alguns compostos que auxiliam o acabamento e melhoram a
aparência e textura da peça, além de protegê-la de fatores ambientais:

* **Primer**. É um composto de cor transparente ou neutra (geralmente acinzentada) que pode até ser uma tinta,
mas que tem a propriedade de ser bem aderente ao plástico e à tinta. Funciona como uma interface de promoção
de adesão ("priming") entre a superfície e a tinta da cor que se deseja, aplicado portanto antes da tinta.
* **Primer filler**. É uma variedade de _primer_ que além de facilitar a adesão da tinta, é espesso e pastoso,
cobrindo imperfeições e reentrâncias e funcionando como um elemento de suavização da superfície. O tipo de
primer filler mais comum é o de poliuretano ("PU").
* *Massas corretivas* são auxiliares ao primer com
a função especificamente de corrigir riscos e imperfeições, como o primer filler. São colocadas antes do
primer. Algumas marcas famosas são Tamiya Putty e Massa para pequenas correções Lazzudur Alto Sólidos. São
também muito usadas por plastimodelistas e podem até ser modeladas para desenhar alguns detalhes. Uma solução
substituta para a mesma tarefa pode ser utilizar massa corrida PVA epóxi bicomponente.
* *Selantes* são compostos
que impermeabilizarão / selarão a peça pintada, usadas após a secagem da tinta. Alguns exemplos são goma laca
incolor (totalmente transparente, e pode ser usada para fixar glitters e purpurinas), goma laca indiana (solúvel
em álcool e com acabamento amarelado) e goma laca purificada (acabamento e fixação de glitter). Existem lacas
brilhantes e foscas.
* *Betumes* são revestimentos usados para dar acabamento envelhecido.
* *Vernizes* são películas de acabamento, não necessariamente com propriedade selante. Alguns vernizes podem ser coloridos para
complementar as tintas que cobrem. Existem vernizes brilhantes, texturizados e foscos.
* **Revestimento próprio para impressão 3D**. A conhecida empresa _Smooth-On_ tem um composto chamado **XTC-3D**, feito especialmente para
revestir peças impressas em FFF dando um acabamento brilhante e alisado. Resina de fibra de vidro epóxi pode
substituir a XTC-3D que não é vendida no Brasil.
* *Líquido Jet* é um líquido à base de acetona utilizado
no meio odontológico que pode ao mesmo tempo ter uma ação alisadora em plásticos como ABS e de revestimento
por ter também base acrílica.

Vale notar que ao se usar tais compostos, quase sempre a peça ficará mais grossa. Com o nível de precisão das
impressoras 3D FFF, 0,1mm a mais já podem ser suficientes para impedir que um encaixe funcione adequadamente ou
que partes móveis se articulem. Pode ser necessário evitar a aplicação deles em locais críticos da peça ou
então modelá-la antecipadamente mais fina para compensar o volume a mais gasto. Um dos jeitos de fazer isso é
a "compensação horizontal", que veremos no capítulo de fatiamento.

==== Nitrocelulose vs. Poliuretano

Na escolha de auxiliares para o acabamento, é comum se encontrarem compostos à base de duas substâncias diferentes:
_nitrocelulose_ e __poliuretano__. Vale a pena vê-los em mais detalhes:

* *Poliuretano:* Já vimos as características da _tinta_ de poliuretano e que ele é também usado para __primer
filler__, mas existem também vernizes e fundos transparentes baseados nele. É um polímero plástico com
consistência de borracha, bastante flexível, muito resistente quimicamente. Muito comumente são bicomponentes, com
poliésteres poli-hidroxilados ou resinas acrílica poli-hidroxiladas no componente A, e no componente B o agente de
cura, um poli-isocianato alifático ou aromático. Quando é utilizado o alifático têm alta resistência aos raios
ultravioleta, quando é utilizado o aromático essa resistência não está presente. Devido à sua elasticidade é
resistente a abrasão, o que impede que seja lixada depois de aplicada na peça. Costuma formar camada mais grossas,
devido à sua viscosidade. Não funciona bem com pincéis, sendo necessária pistola de pintura ou aerógrafo.
* *Nitrocelulose:* Feito a partir da fibra do algodão. Pode ser entendido lembrando-se da _celulose_ que é o
principal componente da madeira e do papel, pois tem propriedades semelhantes. Serve para lacas, seladoras, vernizes
e primers. É um produto bastante sensível a agentes químicos e solúvel em acetona, não servindo para proteger
os plásticos desse solvente. Seus compostos serão geralmente mais baratos que os de poliuretano, tendo ótima
aderência, entranhando no material e também secando rapidamente com camadas finas. Geralmente sua aplicação é
monocomponente, dado que tem secagem rápida, e pode ser aplicada até com pincel. É um material biodegradável
de fontes renováveis e por isso bastante ecológico e que, sem aditivos, não emana subprodutos tóxicos.

Muitos outros compostos podem ser usados mas sairia do foco desta obra. Felizmente, existe
boa literatura sobre isso em português; para uma breve comparação entre poliuretano e
nitrocelulose com vídeo de apoio, recomendamos o artigo no sítio web de marcenaria __oficina44__:
http://oficina44.com.br/nitrocelulose-ou-poliuretano-pu/[_http://oficina44.com.br/nitrocelulose-ou-poliuretano-pu/_].
Poliuretano é um material tão útil e versátil que tem sítio
web em português com seu nome, e um *livro inteiro online* dedicado a ele:
http://www.poliuretanos.com.br/livro/livro.htm[_http://www.poliuretanos.com.br/livro/livro.htm_]. E para explorar
toda a gama de revestimentos de proteção, temos a listagem do site especializados em tintas anticorrosivas:
http://www.tintasanticorrosivas.com.br/informacoes-tecnicas/tintas-anticorrosivas/[_http://www.tintasanticorrosivas.com.br/informacoes-tecnicas/tintas-anticorrosivas/_].

==== Aplicação das tintas e revestimentos

As tintas e compostos auxiliares precisam ser aplicados na peça, e os dois modos principais de o fazer são com
um instrumento de contato como pincel ou brocha, ou borrifação como spray (aerossol) ou aerógrafo. Mas antes
de tudo, é preciso lembrar que qualquer que seja o método usado, a necessidade de *proteção* novamente aparece.

Uso continuado das tintas exige basicamente o mesmo material que se usava com os solventes para acabamento. A
máscara de gás com filtro para vapores orgânicos novamente deve ser usada aqui -- a máscara de poeira não
é suficiente, pois não filtra vapores. Luvas de nitrilo novamente são bem-vindas, e apenas o jaleco ou roupa
contra contaminação pode ser trocada por uma roupa velha, grossa e que cubra todo o corpo, como um macacão
e blusa de manga longa. A razão é que ao invés de ataques dos solventes simples, manchas de tinta acabarão
aderindo permanentemente à vestimenta. É importante também faz a tarefa em ambiente arejado e ventilado --
com ventilação que não escape para outros cômodos do edifício.

O método mais controlado de aplicação das tintas é o **pincel**, velho conhecido. O que não é tão conhecido
de quem já não mexe com artesanato é que existem vários tipos de pincel, classificados pela largura do ferrolho,
formato, tipo de cerdas e tamanho -- essa última medida _despadronizada_ e dependente de fabricante, com alguns
relacionando a centímetros, outros a polegadas e outros sem relação com um sistema específico. A medida é
dada em um número, que geralmente se situa entre 1 a 5 para os pincéis mais finos para detalhes e desenhos,
10-12 para os pincéis medianos propícios para cobrir uma peça de impressão 3D e 25 a 30 para caracterizar os
pincéis de parede e grandes obras.

Mas o detalhe mais importante para os pincéis a serem usados na impressão 3D são __as cerdas__. Cerdas sintéticas,
geralmente feitas de nylon extrudado, são mais firmes e aplicam melhor a cor na superfície sem deixar marcas. Por
outro lado, cerdas naturais, como de pêlo de porco, são mais resistentes aos solventes e podem ser necessários
para os trabalhos em que se usa solvente. Algumas cerdas naturais como pêlo de esquilo são bastante macios e
bons para esfumaçar a tinta. Pincéis chatos costumam ser melhores para revestir a peça com cores uniformes,
pincéis redondos para realizar tons intermediários e mudanças de cor. Ao se usar solvente ou thinner, sejam
cerdas naturais ou sintéticas, é aconselhado deixar o pincel secar antes de molhá-lo novamente com tinta.

Existem várias áreas do conhecimento humano em que pincéis são usados, como pintura industrial, maquiagem,
revestimentos e proteções. Para conveniência e brevidade, trataremos apenas dos de artesanato, com a
lembrança que o espírito _maker_ criativo pode utilizar sempre de ferramentas de outras áreas em um processo
de "exaptação". E como sempre, referências adicionais são dadas para leitura complementar sobre o assunto^1^.

_*Demãos*_ -- o processo de pintura quase nunca é imediato -- exige paciência, treino e método, não apenas no
momento da aplicação, mas também na _estratégia_ de aplicação de tintas e revestimentos. Na quase totalidade
das vezes, apenas aplicar o líquido no material nunca dá o efeito desejado: ao secar, a cor pode enfraquecer,
ou o líquido pode adentrar no poro e deixar seções sem cor, ou simplesmente ser insuficiente para trazer a
aparência desejada. E aplicar maior quantidade ou fazer uma camada mais grossa de aplicação também não funciona:
a maior tensão superficial impede que o líquido entranhe no material e impede a aderência necessária, criando
também uma diferença mecânica entre a tinta e o substrato que facilitam sua remoção. Por isso, é sempre bom
reservar um tempo adequado para se fazer várias _demãos_ sobre a peça. As demãos são aplicações sucessivas
de uma camada bem fina do líquido, com toda a duração necessário para a cura, secagem ou aderência completa
ao material. Os materiais de aderência como o _primer_ costumam exigir apenas uma demão e uma a 3 horas de cura,
os de pintura exigem 3 a 5 demãs para máxima qualidade e algumas poucas horas para cura completa em cada demão,
enquanto que os de revestimento, especialmente os mais grossos, costumam pedir de 1 a 2 dias e no máximo 2 demãos,
sendo isso apenas uma regra geral com consideráveis exceções.

_*Limpeza do pincel*_ -- nada mais frustrante que pegar o pincel para cobrir sua peça e somente encontrar uma
massa dura de cerdas que praticamente não tem mais utilidade. Ainda que seja um insumo descartável, a limpeza
do pincel faz parte das boas práticas de acabamento e estende sua vida útil. A seguir algumas sugestões:

* Remova o excesso de tinta ou revestimento com pano ou papel absorvente, na direção da virola até a ponta --
tendo o cuidado de não puxar as cerdas. Ajuda também passar o pincel em uma superfície que absorva o excesso.
* Com o excesso removido, mergulhe no solvente ou diluente (thinner) apropriado para o produto que está usando. Acetona
ou thinner para produtos acrílicos ou poliuretano, álcool para goma laca e para produtos à base d’água, água
_morna_ com um ou dois pingos de detergente para quebrar a tensão superficial.
* Novamente passe o pano seco ou
papel absorvente no pincel da virola até as pontas, de modo a secá-lo completamente. É útil também embrulhar as
cerdas no papel absorvente para mantê-las secas.
* Se o volume de pintura é considerável e a variedade de cores
utilizada é grande, vale a pena utilizar o mesmo pincel sempre para o mesmo material e coloração. Ainda que sejam
às vezes imperceptíveis, resíduos da coloração anterior podem contaminar a pintura e piorar consideravelmente o
aspecto da peça.
* Pincéis no fim da vida útil podem ser utilizados para os produtos de aderência como _primer_
e __primer filler__, visto que neles a coloração não é importante.

_*Spray*_ -- uma alternativa ao uso dos pincéis são as tintas em aerossol (spray), especialmente por aderirem
e entranharem mais facilmente às superfícies serrilhadas das impressões 3D. Outra vantagem é que sua natureza
descartável significa que não precisam de limpeza. Por outro lado, os aerossóis servem apenas para áreas
grandes de pintura (até porque precisam de certa distância da peça -- geralmente uns 30 cm ou mais) e embora
sejam ótimos para degradês, não funcionam para detalhes. Além disso, não têm a mesma flexibilidade que um
pincel para entrar em áreas internas da peça. Mas o pior dos sprays é o __custo__. Uma lata de spray rende muito
pouco em relação a um pote de tinta equivalente, mesmo os mais caros. Além disso, os recipientes usados exigem
reciclagem especializada.

A solução às limitações do spray existe e se chama __*aerógrafo*__. É um instrumento que basicamente
serve para borrifar de maneira controlada praticamente qualquer líquido, servindo inclusive para acabamento com
solventes. Não é um instrumento especialmente barato -- mas dado o preço das latas de spray, a economia que
se tem usando este instrumento compensa os gastos iniciais após poucas dezenas de aplicações.

Assim como os pincéis, os aerógrafos são um instrumento com muitos tipos e facetas e não conseguiríamos dar
mérito necessário a eles sem ocupar centenas de páginas do livro. Seguem algumas notas breves sobre o uso de
aerógrafos em impressão 3D:

* O aerógrafo utiliza um compressor de ar comprado à parte. Para trabalhos em que não se exija muita pressão
ou tempo de trabalho contínuo, que se supõe ser o da maioria dos casos da pintura de peças, o compressor de
ar portátil ou mini-compressor^2^, que costuma custar entre 40 e 60 dólares, é recomendado pela praticidade e
preço. O compressor de ar fixo é mais poderoso e pode trabalhar continuamente por várias horas mas vai custar
mais de 150 dólares.
* Existem vários tipos de "canetas" de aerógrafo, citadas nas referências^3^. Para
praticidade, o recomendado para uso com peças de impressão 3D é o aerógrafo de gravidade de mistura interna
e de dupla ação, com abertura de 0,3mm. Esse tipo de aerógrafo permite o controle da pressão da "mistura"
de líquido e água que será borrifada assim como a abertura do facho, potencializando controle fino da pintura
ou revestimento que se aplique. Com esse controle, o aerógrafo pode ser usado tanto em fachos finos para detalhes
de desenho na peça quanto em fachos largos para cobertura de tinta ou revestimento.
* A parte mais sensível do
uso de aerógrafo é acertar as proporções de diluição da mistura com thinner que vai no recipiente acima da
caneta. Uma proporção muito grossa fará o facho ser irregular, expelir perdigotos ou até entupir; uma proporção
muito rala fará o facho ser fraco e não aderir corretamente à superfície. A consistência e diluição ideais
variam de acordo com tinta e fabricante e são obtidas por um processo de experiência, tentativa e erro^4^.

image::image216.jpeg[image,width=642,height=356]

*Notas:*

*1* -- Um excelente e completo artigo de artesanato sobre
pincéis pode ser encontrado na página especializada __Cozinha da Pintura__:
http://www.cozinhadapintura.com/2011/11/pinceis.html[_http://www.cozinhadapintura.com/2011/11/pinceis.html_]. Outra
referência boa em duas partes, dessa vez sobre materiais das cerdas, é no portal de artesanato __FazFácil__:
http://www.fazfacil.com.br/artesanato/pinceis-artisticos-tipos/[_http://www.fazfacil.com.br/artesanato/pinceis-artisticos-tipos/_]

*2* -- É útil saber a diferença prática entre usar um compressor de ar
fixo e um compressor de ar portátil, explicada pelo canal "Tom Plasti":
https://www.youtube.com/watch?v=SC4R3Vjl7Bs[_https://www.youtube.com/watch?v=SC4R3Vjl7Bs_].

*3* -- O _Schnauzer Site de Plastimodelismo_ tem uma matéria bem detalhada sobre aerógrafos,
com uma seção ilustrada especialmente útil sendo a que detalha os tipos de equipamentos:
http://www.spmodelismo.com.br/material/aerografo/tipos.php[_http://www.spmodelismo.com.br/material/aerografo/tipos.php_].
Como muitas das técnicas para o uso do aparelho são melhor compreendidas visualmente,
o canal de youtube _Claytrix_ é uma ótima fonte de aprendizado, tendo vídeos divididos
em episódios bastante úteis para a impressão 3D como _Pintando escultura com aerógrafo_
(https://www.youtube.com/watch?v=YlxnmpJ1MII[_https://www.youtube.com/watch?v=YlxnmpJ1MII_])
e até de acabamento em geral -- "Como aplicar primer para pintura",
https://www.youtube.com/watch?v=rfICHkdKUsg[_https://www.youtube.com/watch?v=rfICHkdKUsg_]. Já o
canal _Kaka Craft_ tem uma ótima avaliação de como e quando usar aerógrafo e a comparação de
seus resultados com o do pincel, "Pincel x Aerógrafo (+compressor de ar). Qual o melhor?", em
https://www.youtube.com/watch?v=j9KNcGb9Fh4[_https://www.youtube.com/watch?v=j9KNcGb9Fh4_].

*4* -- Já foi dito que experiência é o tipo de sabedoria mais difícil de ensinar. Um exemplo
utilizando tinta acrílica, e com várias dicas de como procurar a diluição ideal para cada tinta com um
método auto-corretivo, vendo a resposta visual de cada borrifação, é dada pelo canal "Tom Plasti":
https://www.youtube.com/watch?v=ueS7W5AJOJA[_https://www.youtube.com/watch?v=ueS7W5AJOJA_]. O vídeo levanta ainda
a importante lição de sempre limpar o aerógrafo depois de cada uso, pois o líquido pode curar ou endurecer
dentro da agulha de aplicação e aí a limpeza pode ser bastante complicada ou até impossível, com a caneta
tendo que ser substituída em alguns casos.

=== Manutenção e Cuidados com a Impressora 3D

Sendo um aparelho que em sua operação normal lida com tantas forças mecânicas, térmicas e até químicas, é
esperado que a impressora 3D sofra considerável desgaste com o uso, comprometendo seu funcionamento e precisão e
aumentando riscos de acidente. Portanto, ativamente buscar fazer verificações, correções, limpeza, lubrificação
e manutenção geral da impressora é essencial para continuar tendo impressões de boa qualidade e também mitigar
eventuais problemas que surjam.

Para esse fim, é preciso entender que existem vários modelos de impressora 3D FFF tanto no mercado brasileiro
quanto no internacional, e embora as técnicas que aqui apresentamos sejam o mais universais possíveis, dadas
as particularidades de certos modelos, pode ser que não se apliquem ou precisem ser modificadas. Por exemplo,
a lubrificação de um componente pode exigir um tipo de óleo diferente, ou partes como o _hotend_ podem não ser
facilmente desmontáveis para limpeza, sofrendo mais desgaste com a tentativa de manutenção que com o uso cotidiano.

==== Componentes mecânicos

* **Parafusos e porcas**: Em impressoras 3D reprap como _graber_ e __prusa__, os parafusos podem afrouxar
um pouco quando submetidos a muita pressão estrutural ou vibrações, especialmente em peças móveis como
extrusor ou suportes do carro X. Recomenda-se apertar tais parafusos com periodicidade anual. Caso a carcaça
seja de acrílico é preciso especial cuidado no aperto pois este material tem tendência a rachar.
* **Motor e correia**: Ainda em relação aos parafusos em _graber_ e __prusa__, os mais propensos a folga são os que esticam
a correia dos carros X e Y. Em ambos os casos, antes de se apertar os parafusos deve-se afrouxá-los o máximo sem
removê-los; então, deslizar o motor para deixar a correia o mais esticada possível, para só então apertá-los.
* **Rolamentos e barras lisas**: Uma das partes mais delicadas e propensas a desgaste estrutural da impressora são
os rolamentos. Recomenda-se desligar a impressora (para não haver torque de retenção nos motores) e com a mão,
deslizar o carro da impressora para ver se há movimento livre, ou se existe irregularidade da resistência. É
razoavelmente comum que surjam irregularidades nos eixos como um ligeiro abaulamento das barras lisas ou ainda
desgaste prematuro ou perda das esferas dos rolamentos. Falta de paralelismo entre as barras lisas também pode
causar isso. Se tais irregularidades forem percebidas, recomenda-se desmontar o conjunto para a localização
do problema. Se as barras tiverem entortado levemente, recomenda-se trocá-las, visto que a correção nunca
fica perfeita. Caso o problema seja nos rolamentos, é mais barato colocar novos. Sendo falta de paralelismo,
geralmente remontar o conjunto tomando cuidado de acertar os encaixes já resolve o problema.
* **Buchas**: No caso de buchas de bronze ou __drylin__, o desgaste é esperado dado o contato constante com a barra lisa, e a
vida útil de tais componentes é necessariamente limitada. O carro deve ser deslizado no eixo procurando-se fazer
um pouco de força no sentido transversal, de modo a procurar detectar alguma folga. Se houver folga no carro, é
sinal que as buchas esgotaram sua vida útil e precisam ser trocadas. Recomenda-se fazer a verificação a cada
6 meses.
* **Barra roscada e fuso**: o desgaste de barra roscada é mais comum do que de fusos, visto que seus
fios são bem mais finos e sua estrutura é feita para sustentação e não movimento. De qualquer maneira, é algo
que pode acontecer com ambos os componentes. O desgaste pode acontecer tanto na barra quanto na castanha ou porca,
e pode ser descoberto quando, girando manualmente o eixo com os dedos, se encontra folga ou "emperramento" do
movimento. Não costuma ser visível onde está o problema -- se na barra ou na porca -- portanto o recomendado
é removê-lo e testar em uma castanha virgem, para ver se desliza uniformemente e sem folgas. Se deslizar, é a
castanha que se desgastou e precisa ser trocada. Outro problema que pode acontecer com barras roscadas e fusos,
facilmente verificável com o desmonte do elemento e comparação com uma régua. Assim como no caso da barra lisa,
correções caseiras não costumam funcionar, portanto a troca é recomendada, especialmente no caso do fuso.
* **Nivelamento dos eixos**: em qualquer impressora 3D que tiver dois motores ou mais para controle de um eixo,
uma assimetria pode acontecer de modo que o carro não fique perfeitamente paralelo. Essa assimetria costuma
ser sutil, nem mesmo percebida a olho nu, e mesmo assim contribui enormemente para o desgaste e empenamento das
peças. Em especial, impressoras 3D estilo _graber_ e _prusa_ que tenham nivelamento automático de mesa (BAL)
costumam mascarar tão bem o problema que ele parece inexistente. É comum que um fator que dificulte a detecção
do problema é que a mesa de impressão siga a assimetria/inclinação do carro, fazendo parecerem simétricos
visto que estão paralelos.  + O procedimento recomendado nesse caso deve ser feito sempre que se desconfie que
há uma assimetria (como depois de transportar a impressora 3D) ou com periodicidade pelo menos bimestral. Como a
mesa de impressão pode também estar desnivelada, recomenda-se desmontá-la inteira, e usar uma superfície plana
colocada entre os dois motores para nivelamento. Coloca-se no carro X um _relógio comparador_ com suporte deslizante
e então se gira um ou outro motor para abaixar ou levantar cada eixo, até que se os deixe paralelos -- isto é,
em todo lugar que o relógio comparador tocar na superfície pela extensão do carro X, dará a mesma medida.

image::image217.png[image,width=634,height=343]

Conformações diferentes de eixos -- por exemplo, que toquem um elemento paralelo, ao invés da mesa de impressão
-- exigirão estratégias diferentes, mas que podem ser inferidas a partir da mostrada. No caso ilustrado,
é requerimento que os eixos estejam nivelados a partir do quadro da impressora para que a mesa de impressão,
que costuma ter inclinações mais frequentes, os use como referência para seu próprio nivelamento.

* **Nivelamento da mesa**: é extremamente importante para todo o processo de impressão que a mesa esteja bem
nivelada em relação aos eixos da impressora, mesmo se a impressora tiver nivelamento automático, que em tempo
de impressão compensa o nivelamento com correção matemática das coordenadas. Durante o processo de impressão,
tipicamente o eixo Z não se move enquanto cada camada está sendo impressa, somente os eixos X e Y. Quando se
usa o autonivelamento em mesa desnivelada, cada camada é impressa inclinada, e o eixo Z permanece em constante
movimento, desgastando consideravelmente mais o fuso ou barra roscada (isso não é verdade para alguns modelos
de impressora, como a brasileira Sethi S3 que ao invés de corrigir por cálculos, inclina mecanicamente a mesa,
evitando tal desgaste). +
A técnica de nivelamento mecânico de mesa mais frequente é o ajuste fino de seus
cantos usando parafusos. As mesas de impressão são quase sempre sustentadas por molas -- que servem como
dispositivos de segurança para que o hotend não "afunde" na mesa e se quebre -- e essas molas têm um
parafuso que serve de anteparo, girando sua rosca para aumentar ou diminuir a altura do canto. Esse ajuste é
feito tendo a ponta inferior do hotend como calibrador: Coloca-se o hotend no ponto mais baixo e ele é movido
no eixo XY o mais próximo possível do canto a ser ajustado, para então se girar o parafuso. No caso de mesa
sem autonivelamento, como também se está ajustando o nível zero do eixo Z, se coloca um anteparo de 0,1mm de
espessura entre a ponta do hotend e a mesa -- geralmente um cartão de visitas. Diversos itens podem ajudar na
agilidade desse procedimento, como o uso de porcas borboleta ao invés de porcas comuns para poderem ser ajustadas
com a mão, ou mesmo designs impressos de sites de impressão 3D.

image::image218.jpeg[image,width=642,height=216]

* **Empenamento da mesa**: problema especialmente comum em mesas grandes, pode ocorrer de, ao se tentar
nivelar uma mesa de impressão, perceber que não é a inclinação o problema, e sim a superfície não ser
satisfatoriamente plana. A possibilidade de corrigir esse empenamento vai depender do tamanho da mesa, material
e outras características de construção, mas em geral mesas de metal podem ser corrigidas com pressão aquecida
em superfícies planas, e pra mesas de circuito impresso se aconselha a troca tanto por serem mais baratas quanto
mais difíceis de corrigir. Enquanto a troca não é feita, o recurso de _mesh leveling_ automático do firmware
Marlin pode ser usado temporariamente para compensar a geometria irregular, visto que o nivelamento automático
simples não ajuda neste caso.
* **Extrusor/tracionador**: ainda que haja enormes variações entre os modelos
de extrusor do mercado, é mais ou menos universal que a tração pelos dentes do pinhão desprenda lascas e
pequenos fragmentos do plástico, e que com o tempo essa "poeira" adira a esses dentes, tornando a tração
mais difícil e escorregadia. Para complicar, é frequente que o acesso a essas partes seja dificultado pela
geometria. Um elemento que costuma funcionar para a limpeza do pinhão são pincéis comuns de pintura, com os de
cerda dura penetrando mais entre os dentes para remoção dos resíduos. Ligue a impressora e, sem filamento no
extrusor, mande um comando de extrusão que dure pelo menos uns 2 minutos, e com o pinhão rodando, use o pincel
para limpeza. Se fragmentos "teimosos" não saírem, o uso de um pincel com cerdas de metal pode resolver.
* **Hotend**: os maiores locais de desgaste de um hotend são o bico, o tubo interno e o _heatbreak_ (barreira
térmica):
** *O bico pode deformar* quando é vítima de muitas operações desajeitadas que o arremetem contra a
mesa ou fazem com que colida com objetos. Outra possível causa de deformação do bico, neste caso seu orifício,
é o uso de filamentos abrasivos para o qual ele não é construído -- o material do bico é latão, um metal
relativamente mole. Nem sempre tais deformações são visíveis a olho nu, sendo mais facilmente perceptíveis
quando a qualidade de impressão começa a variar. Como é uma peça relativamente simples, barata e comum na
maioria das impressoras de mercado, recomenda-se a troca quando se suspeitar de deformação. Para o uso com
filamentos abrasivos como fibra de carbono, sugere-se um bico de aço inoxidável. Ao trocar o bico, se sua
impressora usa autonivelamento de mesa, pode ser necessário reconfigurar no firmware o _offset_ (deslocamento)
vertical da altura do bico em relação à sonda.
** Outro problema que pode acontecer não só com o bico, mas
também com o bloco aquecedor, é o *plástico derretido* e carbonizado aderir em suas paredes. Isso por si só
não costuma causar muito problema se a camada for fina, servindo até como isolante térmico para impedir que
a temperatura escape, mas pode dificultar a manutenção e manchar impressões. Recomenda-se a limpeza semestral
do bico e do bloco aquecedor, que pode ser feita desmontando-se o hotend e colocando os elementos mergulhados em
solvente por algumas horas, com subsequente lixamento do plástico remanescente. O procedimento é semelhante ao
utilizado para quando há eventual *entupimento do hotend* com plástico derretido, ilustrado no canal de youtube
do autor: https://www.youtube.com/watch?v=NZ1dRB3ZXNc[_https://www.youtube.com/watch?v=NZ1dRB3ZXNc_]
** Em hotends com tubinho de **PTFE interno**, é muito comum que o tubo de PTFE degrade, carbonize ou arranhe, os sintomas
disto sendo uma perceptível diminuição da qualidade de extrusão e entupimentos frequentes. Deve-se desmontar
o hotend e remover o tubo para verificação. A troca deste tubo é simples e barata, a desmontagem e montagem
do hotend sendo a parte mais trabalhosa.
** Em hotends __*all-metal*__, se o tubo interno de metal arranhar,
é necessário substituí-lo. Soluções caseiras como uso de broca não funcionam, visto que essa parte interna
precisa de polimento especial para funcionar bem com o plástico derretido.
** O __*heatbreak*__, apesar de ser
uma peça feita com duríssimo aço inoxidável, é uma peça bastante fina que, com alguma pressão mecânica,
pode deformar ou se dobrar, e tentativas de endireitá-la não funcionam. É outra peça que, se estragada, deve-se
trocar. Para evitar problemas com o heatbreak, evite bater o hotend contra a mesa.
** Como se pode ver, partes diferentes do hotend exigem trocas, mas as *peças individuais* podem ser difíceis de achar ou até, dependendo do
modelo, indivisíveis do conjunto. Nesse caso, o único jeito é realmente a substituição do hotend inteiro.
* **Limpeza (geral)**:
** Antes, uma precaução: evite umidade perto de circuitos eletrônicos, peças térmicas ou
metálicas, mesmo com pano úmido. Gotas podem levar a curtos e corrosão.
** Se a mesa aquecida usar **vidro**,
remova-o para limpar separadamente. É importante que tanto o vidro quanto a mesa estejam bem polidos; partículas
de poeira ou plástico podem interromper o contato do vidro com a mesa, criando um pequeno vão com ar que funciona
como isolante térmico e portanto prejudicando o processo de impressão. É preciso ainda ter especial cuidado
com mesas aquecidas que têm **contatos expostos**, como as mesas "MK2B" presentes em repraps.
** Se sua impressora 3D tem **fundo fechado**, a acumulação de sujeira e detritos de impressão nessa parte é perigosa
para o funcionamento da impressora. Se for muito difícil remover tais detritos com pano, use um mini-aspirador,
do tipo que se usa em automóveis, para limpá-los.
** Impressoras que têm a *carcaça de metal* a têm revestida
por proteção, de modo que passar um pano levemente úmido com sabão é efetivo para limpá-la, com uma escova
de dentes usada para as frestas que acumulam mais sujeira. Algumas receitas caseiras como fazer uma pasta de
bicarbonato de sódio e água para passar no metal, neutralizando o pH e deixando-o brilhante, podem funcionar bem.
** Em impressoras 3D de **MDF ou acrílico**, cuidado com a utilização de álcool isopropílico. Ele mancha,
penetra no MDF e o amolece, e causa rachaduras no acrílico.
*** No caso do *acrílico* um pano de microfibra
úmido com sabão costuma ser suficiente para limpar; um acabamento melhor pode ser obtido utilizando-se cera
lustra-móveis incolor. A microfibra tem a desejável propriedade de não soltar fiapos.
*** O *MDF* absorve umidade rapidamente e se não tiver uma camada protetora, tende a inchar e se degradar por causa disso. Para a
limpeza, um pano seco deve ser utilizado, ou no máximo um pano de microfibra com algumas poucas gotas de água
com sabão para limpeza mais pesada. Nunca use produtos pesados como querosene ou thinner no material. Recomenda-se
fortemente que se proteja a carcaça de impressoras de MDF com vernizes ou lacas impermeáveis para estender sua vida
útil. Recomenda-se o revestimento nas peças antes da montagem, ainda que isso dificulte um pouco os encaixes.

==== Componentes eletrônicos

* *Drivers* e **Motores**: é sempre bom fazer uma verificação nos motores, ver se eles não estão perdendo passo
ou superaquecendo durante as impressões. As perdas de passo são visíveis pelo desalinhamento da peça quando nos
motores X ou Y, na compressão da peça quando no eixo Z e como um dos motivos possíveis para subextrusão pelo
motor do extrusor. Já o superaquecimento pode ser constatado colocando-se o dedo sobre o motor, ou em termos mais
científicos, medindo se a temperatura passa de 50°C. Em quaisquer desses casos, o primeiro item a verificar é se
os drivers estão com a corrente adequada regulada para o motor, o mesmo procedimento visto na seção sobre drivers
e motores e feito com multímetro, e girar o potenciômetro para corrigir seus ajustes. É interessante fazer a
medição semestral ou anual da corrente dos drivers para garantir a vida útil deles e dos motores que controlam.
* **Microcontrolador**: o cérebro da impressora é certamente um componente importante e dar uma examinada por
partículas de poeira, cabos com contatos frágeis, chips que estejam esquentando e outros potenciais causadores de
problemas leva pouco tempo e pode prevenir muitas dores de cabeça. Uma passagem de pincel ou pano de microfibra
com álcool isopropílico são recomendados para remover sujeira e se houver problemas de dissipação térmica,
dissipadores de alumínio e ventoinhas de gabinete (ligadas nos 12V da fonte) ajudam bastante.
* *Fios* e **Cabos**: são um componente especialmente pernicioso nas __repraps__, visto que suas receitas de montagem costumam ser bem
detalhadas, explicativas e abrangentes... Exceto na parte de cabeamento. Ensinam o que ligar e onde, mas nem mesmo
tamanho de cabos passam -- e é comum ver impressoras com cabos diversos de tamanho curto ou longo demais, assim
como desorganizados como se fossem uma "maçaroca" de fios que além de ser perigosa e ineficiente, torna bastante
trabalhosa a manutenção de um aparelho que devia ser justamente muito fácil de mexer e arrumar.  + Se você "se
reconheceu" nesta caracterização de impressora, existem alguns utensílios que podem auxiliar na arrumação,
organização e fixação dos cabos. A seguir:
** **Tiras enforca-gato**: também conhecidas por _abraçadeiras de
nylon_ e variados outros nomes, são tiras oferecidas em variados tamanhos e se fecham travando inserindo uma ponta
em um pequeno orifício na outra extremidade, prendendo com firmeza.
** **Espiral organizadora de cabos**: é um
dos organizadores mais fáceis de se colocar e remover em fios e cabos, sendo portanto adequada para fiações que
exigem frequente manutenção: permite ser colocada mesmo com os cabos já ligados em seus respectivos terminais.
** **Malha náutica**: uma malha flexível e compressiva em que se inserem os fios e cabos antes de os prender nos
contatos. Oferece o melhor acabamento visual, mas dificulta a manutenção visto que para se remover os cabos sem
cortar a malha é necessário desconectar pelo menos uma de suas extremidades.
** **Lagarta/esteira porta-cabos**:
lembrando em aparência a espiral organizadora, é um aparato de plástico mais sofisticado (e mais caro) que
limita o movimento dos cabos a um plano de deslizamento. É bastante utilizada para operação guiada de cabos,
como os de mesa aquecida e extrusor, mas sua colocação precisa ser bem planejada. Existem alguns modelos em que
cada elo da lagarta tem uma pequena portinhola que permite que a lagarta seja removida e recolocada sem precisar
desconectar os fios, mas são mais difíceis de achar.

image::image219.jpeg[image,width=642,height=239]

==== Lubrificação

Ao desavisado, pode parecer que qualquer lubrificação de peças de máquinas é um problema trivial e basta usar
um óleo qualquer comprado em lojas de ferramentas para tê-lo resolvido. Esta aparência, no entanto, está muito
longe da verdade, especialmente para uma máquina que reúne tantas tecnologias diferentes e tem variadas partes
móveis. Deixar de lubrificar uma impressora 3D, a longo prazo, pode resultar em impressões ruins, acumulação
de poeira, desgaste de peças e até problemas mecânicos; mas lubrificá-la de maneira incorreta tem o mesmo
potencial de danos, se não maior, especialmente em um ambiente dominado por receitas desinformadas de internet
e soluções paliativas; imagine lubrificar uma peça sujeita a grandes temperaturas com óleo inflamável ou que
gere vapores tóxicos.

**Óleos versus Graxas**: existe um debate recorrente na indústria de máquinas sobre o uso de óleos (líquidos)
ou graxas^1^. A graxa, ou óleo graxo, é um agente de dispersão de um produto espessante num lubrificante líquido,
com consistência entre sólida e semifluida, podendo conter outros ingredientes para ter propriedades específicas
desejadas. Como se pode inferir pela descrição, as graxas geralmente serão mais caras. Existem muitos tipos
diferentes de óleos e ainda mais tipos diferentes de graxas, mas para nossas finalidades o mais adequado é manter
o assunto simplificado. Lubrificantes em geral servem para^2^:

* Converter em atrito sólido para atrito líquido, reduzindo a perda de energia; * Reduzir o contato entre
as superfícies e assim o desgaste; * Proteger as superfícies contra substâncias corrosivas como ácidos ou
oxigênio; * Evitar a formação de sujeira;

E em especial, as graxas, por serem mais espessas, costumam cumprir as seguintes funções adicionais:

* Absorver e dissipar o calor gerado pelo contato das superfícies;
* Impedir a saída de lubrificantes e a
entrada de partículas estranhas;
* Amortecer o choque de dentes de engrenagens ou outras peças de impacto;
* Amenizar/amortecer as folgas ou interstícios da geometria do mecanismo.

Existem ainda _lubrificantes sólidos_ como grafite ou PTFE (Teflon), que dão uma lubrificação seca às peças.

Dada essa distinção, segue-se uma lista de sugestões do que usar em cada peça da impressora 3D e sua devida
explicação^3^:

* **Barras roscadas**: devido às características de barras roscadas de grande propensão a desgaste do metal
devido aos fios finos, o uso de graxa ou lubrificantes sólidos não é recomendado. Outro problema de usar graxa
nessas peças é que com a frequente exposição delas a poeira e partículas do plástico, as graxas tendem a se
entremear com elas e formar um composto abrasivo e grudento, prejudicando todo o mecanismo. Portanto, o recomendado
para tais componentes é um óleo fino, como o óleo doméstico _Singer_ ou outros óleos da mesma categoria usados
em bicicletas. Óleos minerais e óleos de silicone costumam também ter bom desempenho nessa peças, com o óleo
usado em esteiras sendo uma boa indicação para uso geral dado seu baixo preço e resistência a temperatura. Se
recomenda reaplicação mensal.
* **Fusos de rosca**: em impressoras 3D fechadas que tenham tais mecanismo isolados
e protegidos da ação do plástico, ainda mais se tiverem o acesso dificultado, o uso de graxas especiais para
fusos, geralmente baseadas em lítio e vendidas em casas de ferramentas e artigos para automóveis, pode ser uma
alternativa melhor por proteger e lubrificar as peças por mais tempo, não topando nos problemas de desgaste
existente nas barras roscadas, e ainda amortecer folgas microscópicas. Por outro lado, se tais fusos estiverem
expostos, tanto pela facilidade de manutenção quanto pela menor propensão a acumular poeira, os mesmos óleos
das barras roscadas são recomendados.
* **Rolamentos radiais**: são peças quase sempre fechadas e vêm com sua
própria lubrificação, portanto lubrificação adicional não é necessária. Caso se detecte atrito da peça,
devido ao seu baixo preço pode ser mais palatável substituí-la que tentar lubrificá-la. Alguns rolamentos
maiores de vida útil longa têm o que se chama de "pino graxeiro", que é uma entrada específica para se
aplicar graxa com instrumento especializado.
* **Rolamentos lineares em barras lisas**: praticamente todos os
rolamentos lineares encontrados em impressoras 3D são fechados (dão a volta completa em torno da barra) e não
necessitam de aplicação adicional de lubrificação. No entanto, a barra lisa que abraçam estará sujeita ao
ambiente, e se recomenda usar o mesmo óleo doméstico ou de silicone das barras roscadas para proteger a peça. Se
recomenda reaplicação mensal.
* **Buchas**: as buchas, usadas nos mesmos lugares em que os rolamentos lineares,
podem ser feitas de materiais diversos como bronze, cobre, plásticos (incluindo auto-lubrificantes) e PTFE, o que
complica uma receita geral para seus lubrificantes -- por exemplo, as de plástico auto-lubrificante não demanda
lubrificação adicional, e em certos casos usar um lubrificante incompatível com um dos dois materiais em contato
pode acabar gerando atrito, corrosão e desgaste no conjunto. A incompatibilidade pode acontecer por o material não
interagir bem com o lubrificante, seja por reações químicas, seja por polaridade de superfície. Por outro lado,
a lubrificação é estritamente necessária para o caso de metal com metal (por exemplo, buchas de bronze na barra
lisa de aço cromado). Para buchas de plástico de impressão como ABS ou PLA, não se deve usar óleo mineral,
ou de ésteres e poliglicóis; por outro lado, o óleo de silicone é compatível (e óleo de silicone não pode
ser usado com buchas de silicone). Algumas graxas mais finas de propósito geral também cumprem bem a tarefa de
proteger as barras lisas e permitir bom deslizamento das buchas.
* **Articulações e juntas de esfera**: Nestes
casos graxa de lítio pode ter um bom desempenho. Lubrificante sólido de PTFE pode ter ainda melhor desempenho,
pois não tende a acumular sujeira, embora precise ser reaplicado frequentemente.
* **Hotend**: usado para quando
se quer aprimorar o deslizamento do filamento (especialmente PLA) dentro do tubo, muitas vezes se usa uma gota de
óleo no tubo de hotend. Para esse fim, os óleos de alta temperatura são os mais adequados, em especial o óleo
de silicone.

**O que não usar**: como já foi descrito, o ecossistema _maker_ tem uma boa dose de amadorismo e de "maus
conselhos" sendo passados como verdades, e por isso é salutar ter uma lista de compostos que comumente são
usados, mesmo sendo totalmente inadequados para a tarefa.

* **Grafite**: o grafite em pó é um lubrificante comum e utilizado em muitos mecanismos e articulações, mas em
geral não é muito adequado para as peças das impressoras 3D por não aderir bem às superfícies lubrificadas
e acabar se tornando ele mesmo um resíduo. Além disso, faz com que necessite de constante necessidade de
reaplicação, e pode, como no caso das barras roscadas, acabar gerando desgaste mecânico adicional nelas. Apesar
de poder haver impressoras mais robustas com necessidades mais específicas que tolerem melhor o grafite, quando
for o caso isso certamente será claro e constará no manual de manutenção.
* *Óleos vegetais* domésticos como
canola eventualmente aparecem como proposições "maker" devido ao seu baixo preço e alta disponibilidade,
mas têm incompatibilidades com metais e substâncias orgânicas que são detrimentais ao funcionamento de
máquinas, com resíduos como a glicerina que são potencialmente perniciosos.
* *Desengripantes como WD-40* **não são lubrificantes**, ao invés disso sendo compostos feitos para _remover_ resíduos de poeira, ferrugem ou de lubrificantes anteriores. A sigla "WD" significa "Water Displacing", ou "Deslocamento de Água",
por seu uso principal como solvente ou remover de ferrugem. Uso nas peças de impressora leva a ressecamento de
sua lubrificação, formação de "pelotas" de sujeira, aumento do atrito e desgaste, e remove a lubrificação
interna dos rolamentos.

Notas:

1 - http://www.machinerylubrication.com/Read/923/grease-oil[_http://www.machinerylubrication.com/Read/923/grease-oil_]
-- texto bem explicado e curto, em inglês, sobre quando usar graxa e quando usar óleo.

2 -- Em português:
http://www.dolphingrupo.com.br/blog/20-08-15/lubrificar-máquinas-é-preciso[_http://www.dolphingrupo.com.br/blog/20-08-15/lubrificar-m%C3%A1quinas-%C3%A9-preciso_]
http://www.dolphingrupo.com.br/blog/20-08-15/lubrificar-máquinas-é-preciso-mas-é-melhor-usar-graxa-ou-óleo[_-mas-%C3%A9-melhor-usar-graxa-ou-%C3%B3leo_]

3 -- Como sempre, o wiki do projeto reprap -- em inglês - tem informações úteis sobre o assunto. Tenha
em mente no entanto que alguns dos compostos sugeridos na página podem ser difíceis de encontrar no Brasil:
http://reprap.org/wiki/Lubrication[_http://reprap.org/wiki/Lubrication_]

==== O Pesadelo: Calibração de uma delta

Quando se procura saber mais sobre as impressoras estilo __delta__, seja para comprar ou para montar, as respostas
em fóruns podem assustar o interessado. Há um determinado aspecto das deltas que é unanimamente vilificado: sua
calibração, especialmente a calibração inicial para a impressora começar a funcionar. Mas o que causa consenso
tão resoluto, e por que seriam as deltas tão mais propensas a complexidade e problemas do que outros tipos de
impressora 3D? Entender o problema é meio caminho para a solução, então antes de enveredar para a calibração,
é mister apontar a lente do microscópio para nossa delta para compreender o que contribui para sua fragilidade.

Os motivos principais para as deltas serem consideradas problemáticas são:

* *Medidas despadronizadas* -- a maioria das impressoras cartesianas é projetada com tamanho bem determinado que,
testado, funcione bem, com peças proporcionais aos pesos que devem sustentar, volumes de impressão bem definidos
e capacidade tabelada. Até mesmo as cartesianas de fabricantes diferentes apresentam medidas próximas, não
raramente idênticas. Nas deltas de mercado, a variabilidade é maior, em parte porque a escala não afeta tanto a
diferença de custo. Os dois modelos mais famosos, Kossel e Rostock, têm muitas derivações diferentes de variados
tamanhos e compleições, e cada fabricante toma liberdades em suas medidas que as diferenciam ainda mais. Assim,
não há valores "padrão" em que se basear exceto para alguns poucos modelos comerciais de maior sucesso.
+ image:image220.jpeg[image,width=568,height=422]

* *Dificuldade de obtenção das medidas* -- em cima do fator de despadronização, as deltas em sua montagem têm
"pontos livres" cujo posicionamento durante a montagem não é exato, como a altura de onde se prende o endstop
no poste. Assim, a maioria das construções de deltas exige uma etapa posterior de mensuração das distâncias
resultantes, e mesmo essas medidas são difíceis de fazer (pela geometria das peças aliada às limitações dos
instrumentos), portanto propensas a erros consideráveis.
* *Indireção das medidas* -- muitas medidas não são
usadas diretamente e portanto não podem ser verificadas diretamente; entram em um cálculo ou combinação com
outras e não podem ser aferidas de maneira simples. Isso transforma um problema de uma variável em um sistema
de múltiplas equações, com variáveis difíceis de isolar. Como exemplos, temos as coordenadas X-Y-Z --
calculadas pelas posições dos braços nos pilares - e o DELTA_RADIUS, a principal medida de uma delta, calculado
a partir de outras três medidas. **Isso também dificulta bastante o entendimento intuitivo dessas medidas**,
de modo que fica difícil "abstrair" o que pode estar dando errado.  * *Falta de ponto de referência* --
Três pontos no espaço tridimensional têm um único plano passando por eles; os três endstops de uma delta,
no topo da carcaça, definem o plano de inclinação das impressões. Numa construção ideal, a altura deles nos
postes seria perfeitamente simétrica e definiriam um plano completamente horizontal. Na vida real, os endstops
estarão em alturas diferentes e a inclinação do plano terá que ser aferida para correção; entretanto, o
melhor ponto de referência para essas medidas seria a plataforma de impressão, que _também_ terá sua própria
inclinação em relação à superfície. E para complicar mais ainda o meio de campo, essas duas inclinações têm
que ser encontradas simultaneamente ao valor da concavidade ou convexidade resultante das imprecisões das medidas
dos eixos -- que também deve ser corrigido para resultar em um plano. Essa é a maior armadilha das deltas e a
razão de sua calibração ser demorada: qualquer que seja o método usado, são necessárias várias iterações
de aproximações sucessivas até se estabelecer um ponto de referência com precisão razoável. As variáveis
que queremos achar são: 1.  *Medidas iniciais* aproximadas dos elementos de interesse. Vamos medir partes da
delta que permitirão ao firmware fazer as transformações de eixos (A, B, C) para (X, Y, Z) usando cálculos
trigonométricos. Essas medidas têm diferentes nomenclaturas em diferentes firmwares, vamos listar dos três
mais conhecidos.  2.  *Distância do bico* (na sua posição mais alta) **à mesa**. Vamos chamar de __*h*__. (de
__height__, _*altura*_ em inglês). No Marlin, ele é o ajuste **DELTA_HEIGHT**, no Repetier *Z_MAX_LENGTH* e no
Smoothieware **gamma_max**. Por ser relativamente fácil de obter, fácil de corrigir, e portanto fácil de iterar
em uma delta comum com endstops máximos, será a nossa "âncora" para medidas.  3.  *Deslocamento* (offset) *de
cada endstop de cada torre* (inclinação do plano). Se as torres são A, B e C, vamos chamá-los de D~A~, D~B~ e D~C~.

image::image221.png[image,width=642,height=551,title="Visão de cima de uma delta, sendo ressaltadas as torres A, B e C (perceba que estão em sentido anti-horário) e as coordenadas X e Y, com a origem (0,0) no centro da mesa. A coordenada Z é a altura. A equivalência entre A, B e C e X, Y e Z é importante para as transformações trigonométricas que mapeiam coordenadas das torres em coordenadas cartesianas. Ressalte-se que a sequência ABC começa do canto inferior esquerdo e vai no sentido anti-horário. Dependendo da documentação consultada, tais torres podem aparecer como Alpha, Beta, Gamma ou mesmo X, Y e Z (causando confusão com os eixos cartesianos)."]

image::image222.png[image,width=642,height=424]

1.  **Concavidade**. Essa pode ser a parte mais difícil de ser compreendida, e se traduz no seguinte: quando as
medidas dos componentes estão erradas, a transformação trigonométrica de coordenadas nos pilares A, B e C para
X, Y e Z tem o sintoma de transformar um plano em uma seção convexa ou côncava. Quer dizer, se você mandar o
extrusor desenhar um quadrado num plano de altura específica, ao invés disso você terá como se fosse um quadrado
desenhado na superfície de uma esfera.  2.  **Distância angular entre as torres**. Na verdade _não usaremos_
essas variáveis. As deltas têm três torres, e embora idealmente os ângulos delas devessem ser exatamente iguais
(3 ângulos de 120°), na fabricação ou montagem pode haver alguma irregularidade. Adicionalmente, alguns modelos
de delta podem adotar ângulos diferentes -- por exemplo, dois ângulos de 130° e um de 100°. Mas esse caso
é tão raro, e as irregularidades de montagem quando existem são tão diminutas, que não interferem em nada na
qualidade de impressão nas grandezas em que vamos trabalhar. De qualquer jeito, firmwares como Marlin e Repetier
têm ajustes especiais para tratar esses casos -- não abordados aqui.  3.  **Inclinação da mesa**. Assim como
o plano dos endstops, a mesa pode ter uma inclinação não visível a olho nu. Essa inclinação complicaria pois
seria composta com o plano dos endstops. Ao invés de medi-la e tentar corrigi-la, é possível _não usá-la_
sem perder precisão, de modo explicado a seguir.  + image:image223.png[image,width=618,height=512]

* Entendido que vamos tirar as medidas apenas para os itens **1, 2 e 3**, a idéia é __começar com tudo mecanicamente
acertado e uniforme__, ou pelo menos o mais uniforme praticável: _simetria_ é mais importante que _precisão_
/ __acurácia__. É essencial que os braços da impressora sejam **exatamente do mesmo tamanho**. Se você está
montando uma reprap, existem gabaritos para acertar os braços de forma que fiquem idênticos. A plataforma de
impressão também pode ser nivelada colocando a impressora em uma mesa perfeitamente horizontal (verificada com
nível) e ajustando os parafusos de fixação para que também fique em um plano perfeitamente horizontal, usando
o mesmo nível. Deste modo se elimina a preocupação da inclinação da mesa das medidas. O __effector__, se for
impresso, deve ter sido impresso em uma impressora 3D bem calibrada, para não apresentar assimetria radial. As
correias devem estar perfeitamente esticadas, sem nenhuma folga. Os motores dos eixos devem ser do mesmo tamanho e
se possível mesma marca e fabricante. Autonivelamento de mesa deve estar desligado (podendo ser religado depois da
calibração).  * O EEPROM do microcontrolador (no caso do Repetier e Marlin, que usam arduino) deve estar ligado,
para que a correção de deslocamento seja gravada nela. É possível fazer os ajustes com a EEPROM desligada,
mas os valores serão perdidos quando a impressora for desligada.  * Dois comandos em G-Code farão a correção:
o *M666* faz a correção dos endstops. O *M665* faz a correção da concavidade.  * O número de passos por mm do
firmware nas torres deve ser colocado a partir das peças usadas na delta, não pela mensuração da distância
percorrida. Como para o caso das impressoras cartesianas, use a _prusa calculator_ para calcular os números de
acordo com as peças.

image::image224.png[image,width=642,height=530]

Um exemplo seria o caso ilustrado na figura. Julgando que o motor do extrusor já foi medido e é de 760 passos
por mm, a linha do Configuration.h no Marlin seria:

#define DEFAULT_AXIS_STEPS_PER_UNIT \{ 160, 160, 160, 760 } // 160.00 obtido da prusa calculator pros eixos

Outros requisitos são: os endstops devem estar todos disparando quando tocados (G-Code M119 para verificar)
e portanto o comando G28 deve estar funcionando e os motores devem se mover na direção certa.

* *Medidas para a transformação inicial.* Essa seção pode parecer confusa, pois cada firmware usa uma
nomenclatura diferente. Erros nessas medidas são os responsáveis pelo abaulamento (convexidade ou concavidade)
da impressão. As medidas tiradas supõem que as três torres da delta são idênticas e uniformemente espaçadas,
logo só se mede uma torre. Meça com uma régua e não se preocupe muito com valores exatos -- essas mesmas
medidas serão corrigidas na frente. Os principais elementos de interesse aparecem na figura. A nomenclatura usada
é a do Marlin atigo (antes da versão 1.1.0). Essas medidas são também as que o G-Code *M665* usa como parâmetros.

image::image225.png[image,width=642,height=427]

As medidas são quase todas horizontais, _delta_diagonal_rod_ sendo a única na diagonal:

* *DELTA_DIAGONAL_ROD* (o comprimento do braço da delta) está no arquivo Marlin.ino nas versões antigas e
no Configuration.h nas versões novas do Marlin. Também tem o nome de *DELTA_DIAGONAL_ROD* no Configuration.h
do Repetier, e no smoothieware se chama **arm_length**. Outro nome com que é referenciado é __*diagonal rod
length*__. No comando **M665**, é o parâmetro **L**.
* **DELTA_RADIUS**, a distância horizontal do parafuso do
braço no effector até o outro parafuso do braço no carro do trilho, é chamada de arm_radius no smoothieware
ou ainda tratada como __*horizontal radius when centered*__. O Repetier chama essa medida de **ROD_RADIUS**, mas
não configura seu valor. No Marlin antigo, ele não necessariamente era medido: podia ser calculado com a seguinte
expressão: + **DELTA_RADIUS = DELTA_SMOOTH_ROD_OFFSET -- DELTA_EFFECTOR_OFFSET -- DELTA_CARRIAGE_OFFSET**. No
comando **M665**, é o parâmetro **R**.
* **DELTA_SMOOTH_ROD_OFFSET**, valor não usado mais pelas novas
versões do Marlin, mede a distância horizontal do centro da mesa até o centro da torre. No Repetier, ele tem
o nome de **PRINTER_RADIUS**, e não é usado no Smoothieware. Como pode não ser usado -- não prejudicaria as
transformações? Na verdade, se for ignorado o tamanho do effector e se considerá-lo como um ponto, os cálculos
da delta são basicamente os mesmos, mudando apenas o tamanho da área de impressão horizontal; então, como esse
dado é apenas o arm_radius com espaçamentos e o tamanho da mesa já é gerenciado pelo fatiador, o smoothieware
se isenta de usá-lo. O comando M665 também não mexe neste valor.  + Com esses três dados colocados no firmware
ou arquivo de configuração, já é desejável aferir a altura do bico.

* A *altura do bico* (parâmetro H do G-Code M665) servirá primariamente como referência para evitar que o hotend
afunde na mesa e _precisará ser refeita e regravada no firmware/EEPROM_ a cada nova iteração de medidas. Após
todo o procedimento, ela será usada pelo _firmware_ para chegar à coordenada Z zero sem autonivelamento de mesa
configurado. Um dos jeitos de medir é usar uma régua perpendicular à mesa e deixar os três braços no ponto
mais alto (depois de um G28), e então fazer a medição; outro jeito é configurar uma altura maior no firmware,
fazer homing, e então, no LCD ou pela USB, fazer a altura baixar até que o hotend toque a mesa, pegar o valor de
deslocamento / diferença que aparece no LCD (o G-Code M114 relata a posição se for pela USB) e corrigir o valor
do firmware de acordo.  + Por exemplo, se coloca no firmware (Configuration.h, recompilação e regravação do
arduino): #define DELTA_HEIGHT 250.00 -- sabendo que 250 mm é maior que o valor que se vai medir - e então se
liga a impressora e se faz __homing__. Navega-se pelos menus do LCD e se vai movendo o eixo Z até que o hotend
toque na mesa. Tocando na mesa, vê-se uma posição Z de 61.5. Isso quer dizer que a altura dela na verdade é
250 - 61.5mm, ou seja, 188.5mm. Muda-se então no firmware para #define DELTA_HEIGHT 188.50. Alternativamente,
o valor pode ser ajustado dinamicamente por G-Code com o comando M665 H188.50.  * Agora vem a parte crítica:
sabemos que temos dois ajustes pra fazer -- o primeiro é a __inclinação dos endstops__, e pra esses por
enquanto nem medidas temos. O segundo é o __abaulamento__, que estará perto das medidas reais, pois fizemos
aferição inicial da DELTA_DIAGONAL_ROD e demais variáveis. No entanto, essas medidas ainda terão erros e o
plano deve apresentar uma leve curvatura. Por qual dos dois começar? Os erros de um não vão prejudicar o outro?
+ A resposta para esse dilema é se aproveitar de uma propriedade geométrica dessas estruturas. Mesmo o plano
abaulado com maior erro ainda será simétrico com as quinas, pois ele se utiliza da propriedade de as medidas das
três torres serem exatamente iguais. Por outro lado, a inclinação dos endstops vem justamente da diferença
de altura deles em cada torre, e será assimétrico por torre. Um *triângulo equilátero* com centro na origem
e com os vértices na *direção das torres* terá cada um de seus vértices exatamente na mesma altura!

image::image226.png[image,width=642,height=408]

* E o melhor tamanho para tal triângulo é tal que seus vértices fiquem a meia distância entre a posição (X,Y)
do endstop e o centro da mesa, porque aí teremos uma proporção simples (metade) para saber o deslocamento /
erro do endstop:

image::image227.png[image,width=642,height=336]

* Quanto vale _2a_ neste caso? Oras, é um valor que já medimos: **DELTA RADIUS + DELTA_EFFECTOR_OFFSET**! Basta
portanto pegar este valor e dividir por 2, para saber o tamanho _a_ da mediana do triângulo vermelho!  * Poupado
o trabalho de calcular os três pontos do triângulo equilátero, eles são, em (X,Y), relativos a um tamanho de
mediana __a__: (0,__a__), (-0.866×__a__, -0.5×__a__) e (0.866×__a__, -0.5×__a__). Essas medidas são tiradas
das propriedades do triângulo equilátero.^2^

image::image228.png[image,width=642,height=459]

* Agora, tendo os pontos do triângulo e entendendo que o que vamos fazer é descobrir a inclinação do plano dos
endstops, é bom saber que existem jeitos distinto de lidar com as medidas a ser coletadas. Fazer a movimentação
pelo LCD das impressoras que o têm não é produtivo, e como essas impressas, assim como as que não têm LCD,
também permitem controle pela USB através de um print host (enviando comandos G-Code), é a solução que será
mostrada. Como alguns comandos serão repetidos várias vezes, nessa hora vale a pena conhecer bem o print host
usado pra ver se suporta _macros_ ou _atalhos_ -- scripts simples facilmente acessíveis para operações repetitivas.

image::image229.png[image,width=642,height=340]

* Eis o que vamos fazer: vamos posicionar o bico do hotend nos três pontos do triângulo na coordenada zero
(encostados na mesa). Em cada um desses pontos vamos, com uma régua ou paquímetro, medir a diferença. Após
conseguir esses números, vamos colocá-los como correções das torres no firmware e refazer os testes, vendo
se ficaram nivelados. Mas há algumas observações a tomar: ** Se o plano dos endstops está inclinado, é
quase certo que **um dos pontos estará numa coordenada "abaixo da mesa"**, ou seja, o hotend vai **bater na
plataforma de impressão**. Isso pode, claro, estragar o bico ou a mesa, e infelizmente a maioria das receitas
de calibração de delta não avisa desse risco. Para evitar que isso aconteça, use primeiro uma coordenada Z
(parâmetro "Z__número__" no G-Code) alta, como Z20 (20mm acima da mesa) só para determinar de olho, nesse
plano, qual é o ponto do triângulo mais baixo. Uma vez determinado e medido, fica fácil ir diminuindo o Z
gradativamente de modo que o bico nunca colida na mesa. Assim que tal ponto mínimo for achado, é recomendado
atualizar a DELTA_HEIGHT no firmware para refletir isso. Por exemplo: se o ponto *3* do triângulo é o mais
baixo, e se quando ele encosta na mesa o firmware acusa a coordenada Z "1.6", isso significa que a altura da
impressora está especificada 1.6 mm a mais do que alcançável. Se DELTA_HEIGHT for 240 (por exemplo), deve-se
baixá-la para 238.4 (que ainda não será o valor real, só obtido no final de todas as calibrações).  + Pode
acontecer ainda que a coordenada Z em que o hotend encostaria na mesa seria negativa e o firmware não permite que
o hotend se desloque em uma coordenada dessas. Se for este o caso, no Marlin e Repetier deve-se mudar a definição
de *Z_MIN_POS* para um número negativo (e.g. -20) no **Configuration.h**. No Smoothieware, não é necessário.
** Para evitar maiores riscos, faremos que o hotend tente um ponto, _*volte ao topo da impressora com homing*_
e só então tente outro ponto. O movimento lateral entre os pontos poderia raspar na mesa, por causa do erro de
abaulamento ainda presente.  ** Dependendo de como a delta é montada, para a inclinação do plano dos endstops
o leitor pode optar por **mexer fisicamente nos endstops da impressora**, movendo-os mais para cima ou para
baixo na torre, ou informar esta correção no firmware, para que ele compense. A solução aqui descrita é a
última, *realizar a correção nos parâmetros* sem mudar fisicamente nada.  ** G-Codes usados: *** *M665* --
ajustar configuração de abaulamento + Parâmetros: **** L__número__ -- DELTA_DIAGONAL_ROD **** R__número__
-- DELTA_RADIUS **** H__número__ -- DELTA_HEIGHT *** *M666* -- ajustar configuração de desnível (plano
dos endstops)^3^ + Parâmetros: **** X__número__ -- deslocamento na torre A, negativo para baixo, positivo
para cima.  **** Y__número__ -- deslocamento na torre B.  **** Z__número__ -- deslocamento na torre C.  *
Vamos então começar o procedimento.  ** Vamos considerar que tiramos as seguintes medidas para a impressora: ***
DELTA_HEIGHT é 200mm. Na prática, raramente será tão exata.  *** (DELTA_RADIUS + DELTA_EFFECTOR_OFFSET), ou
seja, a distância horizontal do centro da mesa até o endstop, é **150mm**. As coordenadas do nosso triângulo,
portanto, serão _*a*_ (-64.95, -37.5), _*b*_ (64.95, -37.5) e _*c*_ (0, 75). Os pontos foram nomeados de acordo
com a torre perto da qual estão (A, B, C).  ** Primeiramente, ligamos a impressora na USB, disparamos nosso print
host predileto e enviamos o comando de _homing_ e então o comando para ir no primeiro ponto, na coordenada Z 20
(20mm acima da mesa) para não termos riscos de bater nela: *** G28 + G1 X-64.95 Y-37.5 Z20 ** Repetimos para
os outros dois: *** G28 + G1 X64.95 Y-37.5 Z20 *** G28 + G1 X0 Y75 Z20 ** Percebemos que de olho o ponto _*a*_
(-64.95, -37.5) é o mais baixo de todos. Lentamente, abaixamos a até que toque na mesa: *** G28 + G1 X-64.95
Y-37.5 Z15 ; continua acima da mesa + G1 X-64.95 Y-37.5 Z10 ; continua acima da mesa + G1 X-64.95 Y-37.5 Z8 ;
continua acima da mesa + G1 X-64.95 Y-37.5 Z4 ; toca na mesa ** Redefinimos a DELTA_HEIGHT então para 4 mm menor,
já que é o Z encontrado. 200 -- 4 = 196mm. Se o Z encontrado fosse negativo, adicionaríamos o número.  ***
M665 H196.00 + M500 ; grava na EEPROM ou config....txt ** De novo, mandamos pela USB os comandos para as coordenadas
do triângulo, mas dessa vez já para o ponto zero (encostado na mesa): *** G28 + G1 X-64.95 Y-37.5 Z0 *** G28 +
G1 X64.95 Y-37.5 Z0 *** G28 + G1 X0 Y75 Z0 ** Como o ponto _*a*_ é o nosso ponto mais baixo, ele deve tocar na
mesa e os outros ficarão acima. Um resultado possível colocando em cada ponto e medindo a distância bico-mesa
com paquímetro ou régua:

image::image230.png[image,width=642,height=382]

* Medimos uma diferença de Z de 0.3mm pra *b* e 0,4mm pra **c**. Mas precisamos saber a altura em que o centro
(0,0) está para poder inferir a altura relativa de cada ponto. Para isso, basta tirar a média aritmética das
alturas (0+0.3+0.4)/3 = 0.233... Isso significa que o centro está em (0,0,0.233...), o ponto _*a*_ está 0.233 mais
baixo que o centro, o ponto _*b*_ está 0,066... mais alto que o centro e o ponto _*c*_ está 0,166... mais alto
que o centro. Podemos usar agora a proporção do dobro: o deslocamento da torre *B* será 0,0666...×2 = 0.13 mm
(arredondado) e o deslocamento da torre *C* será 0.1666...×2, ou seja, 0.33 arredondado. Redefinimos o nosso
DELTA_HEIGHT para refletir o Z do centro da mesa com M665 e colocamos os modificadores das torres A, B e C pelo
comando M666. O novo DELTA_HEIGHT será 0.23 mm acima, ou seja, menor: ** M665 H195.77 ; redefine DELTA_HEIGHT para
o centro ficar com Z=0 + M666 X+0.23 Y-0.13 Z-0.33 ; colocam-se os deslocamentos + M500 ; grava na EEPROM/config *
Uma estratégia alternativa que envolve não redefinir o DELTA_HEIGHT seria simplesmente deixar a torre "A",
a mais baixa encontrada, como zero, e compensar nos outros deslocamentos. Assim: ** M666 X0 Y-0.36 Z-0.56 ;
deslocamentos compensados com A em 0 + M500 ; grava na EEPROM/config * Mandamos o hotend novamente para as três
coordenadas, para ver se a correção saiu como esperado: ** G28 + G1 X-64.95 Y-37.5 Z0.2 ; continua acima da mesa +
G1 X-64.95 Y-37.5 Z0 ; tocou a mesa ** G28 + G1 X64.95 Y-37.5 Z0.2 ; continua acima da mesa + G1 X64.95 Y-37.5 Z0 ;
tocou a mesa ** G28 + G1 X0 Y75 Z0.2 ; continua acima da mesa + G1 X0 Y75 Z0 ; tocou a mesa.  * O hotend deve ter
encostado na mesa nos três casos. A inclinação foi corrigida, fica faltando o abaulamento. Caso não tenha dado
certo, reefetue as medidas e repita o procedimento.  * Agora vamos consertar o abaulamento. Para isso, o ponto que
vamos precisar é o ponto central da mesa. Com o abaulamento, ele não estará no mesmo plano de __*a*__, _*b*_
e __*c*__. Ele estará ou abaixo -- caso tenhamos uma deformação convexa -- ou acima -- caso tenhamos uma
deformação côncava. No caso de estar abaixo, se mandarmos o hotend para a coordenada (0,0,0) ele vai colidir com
a mesa, então como no caso anterior vamos colocar a uma altura arbitrária por segurança: ** G28 + G1 X0 Y0 Z20 *
Colocamos "Z20" para o hotend ficar a 20mm acima da mesa. Então calculamos essa diferença, medindo a altura a
que o hotend realmente ficou.  * Digamos que o hotend parou a 18,4mm acima da mesa. Isso quer dizer que ele parou
1,6mm (20-18,4) abaixo do plano dos endstops. Se tivesse parado a 21,4 acima da mesa, ele teria parado _-1,4mm_
(20-21,4) _abaixo_ do plano dos endstops, ou melhor dizendo, 1,4mm _acima_ do plano dos endstops. Conforme a figura:

image::image231.png[image,width=642,height=349]

* Apesar de DELTA_RADIUS ser uma grandeza na horizontal e termos medido um deslocamento vertical, a relação
trigonométrica entre as duas faz com que esse deslocamento possa ser adicionado ou diminuído de DELTA_RADIUS, para
que o ponto centra fique no mesmo plano. Essa conta pode ser feita em etapas, por exemplo, supondo que medimos 1,6mm
_abaixo_ do plano dos endstops, e que o DELTA_RADIUS medido com régua foi cadastrado como __110mm__. Precisamos
_diminuir_ DELTA_RADIUS de 1,6mm e 110-1,6 = 108,4. Vamos diminuir um pouco menos, para 108.6. Lembrando que *M665
R__número__* ajusta DELTA_RADIUS: ** M666 R108.6 ; ajusta DELTA_RADIUS + M500 ; grava no firmware / config + G28 ;
homing + G1 X0 Y0 Z10 ; margem de segurança, para não batermos na mesa. + G1 X0 Y0 Z5 ; margem de segurança,
ainda estamos longe + G1 X0 Y0 Z1 ; ainda não encostou + G1 X0 Y0 Z0.1 ; encostou na mesa. Estamos acima do
plano. + M666 R108.5 ; diminuímos DELTA_RADIUS de um décimo de milímetro + M500 ; gravamos no firmware + G28 ;
homing para zerar às posições + G1 X0 Y0 Z0.1 ; não encostou na mesa, mas ficou bem próximo. + G1 X0 Y0 Z0 ;
o hotend encostou na mesa. Calibramos DELTA_RADIUS!  * Terminou? Não. Ajustamos DELTA_RADIUS mas um valor ainda
pode estar errado, o DELTA_DIAGONAL_ROD. O sintoma de um DELTA_DIAGONAL_ROD errado (ele é o tamanho do braço,
lembre-se) são distâncias horizontais erradas na mesma proporção que ele. Se o DELTA_DIAGONAL_ROD estiver duas
vezes menor que o real, por exemplo, e você mandar imprimir um quadrado de uma camada de altura, ele imprimirá o
quadrado com arestas da metade do tamanho desejado.  + image:image232.png[image,width=618,height=602]
* Esse fator nos dá a receita para achar o erro do DELTA_DIAGONAL_ROD: o meio mais simples é, se a impressora
estiver com o extrusor funcionando, fazer ela imprimir um quadrado chato de tamanho conhecido -- digamos, _100mm x
100mm_ de lado e 1mm de altura. Mede-se o lado impresso, suponhamos que tenha dado _96mm_ de lado. Isso quer dizer
que ele precisa ser 100 / 94 = 1,041666... vezes maior. Digamos, ainda, que o DELTA_DIAGONAL_ROD cadastrado seja
_240mm_ (pode-se usar o comando M666 sem parâmetros para saber). Multiplica-se 240 por 1,041666..., chegando-se
a 250mm. G-Code: **M666 L250**. Seguindo de um comando *M500* para gravar os ajustes, nossa calibração da delta
estaria finalizada^4^.  * Se sua impressora não estiver ainda com o hotend ou tracionador funcionais, você pode
mandar imprimir sem filamento -- o que se chama de "dry run", ou execução seca -- e ir seguindo a trajetória
do hotend com um lápis ou caneta. Algumas pessoas vão além e ao invés de colocar um hotend funcionado, deixam
uma caneta presa no extrusor e mandam imprimir: a primeira camada será desenhada na base (colocando-se um papel
preso a ela).

Notas:

1 -- O endereço clássico com instruções sem figuras e bem resumidas, em inglês, de como
calibrar uma delta: __http://minow.blogspot.com.br/index.html#4918805519571907051__. Outro
endereço que passa uma receita mais bem explicada, também é inglês, é este:
http://cdr2.com/delta-calibration.html[_http://cdr2.com/delta-calibration.html_]

2 -- O venerado site matemático _wolfram alpha_ tem os detalhes para os interessados (em inglês):
http://mathworld.wolfram.com/EquilateralTriangle.html[_http://mathworld.wolfram.com/EquilateralTriangle.html_]

3 -- O firmware _Repetier_ tem um comportamento diferente de Marlin e Smoothieware, com deslocamentos positivos
para baixo, e pelo menos em algumas versões o uso de passos de motor ao invés de mm. Para encontrar o valor
em passos, multiplique pelo valor encontrado pela calculadora prusa para os passos do motor por mm, por exemplo:
0,3mm × 160 passos por mm = 48 passos. Caso o comando não funcione adequadamente, pode ser necessário partir
para o ajuste pelos menus do LCD.

4 -- A receita que passamos serve para os três principais firmwares: Marlin, Repetier e Smoothieware. No entanto,
a receita do site do Smoothieware sugere um expediente um pouco diferente, que usa além dos explicados o G-Code M306
(ausente no Marlin e Repetier), que reseta a posição zero da impressora para a coordenada atual. A calibração
pelo smoothieware está descrita de forma sucinta na seção "Manual Calibration" de seu tutorial de delta:
http://smoothieware.org/delta[_http://smoothieware.org/delta_]

1.  [[section-10]] === + [[calibração-automática-de-delta-com-g33-marlin-somente]] === Calibração automática
de delta com G33 (Marlin somente)

Depois de toda esta via crúcis que é a calibração de uma delta, o leitor pode se estar perguntando se __não
existe jeito mais fácil__! Em especial, em diversos momentos da calibração foi necessário tomar medidas da
ponta do hotend até a mesa, em diversas coordenadas. E se um sensor no effector ou hotend pudesse medir essa
altura? Ora, é exatamente isso o que a sonda Z ("Z probe") usada no autonivelamento de mesas de impressão faz!

No momento da redação deste livro, os únicos firmwares que parecem ter implementado esta idéia é o _Marlin
Firmware_ _1.1.0_ e seu fork __MK4duo 4.3.2__^1^. Assim como a calibração de delta, a autocalibração exigirá
uma série de ajustes já perfeitamente configurados. Os requisitos são esses:

* Como a autocalibração usará a sonda Z do hotend, o _offset_ (deslocamento) da sonda em relação ao bico
deve estar configurado com exatidão, isto é, o firmware deve saber com perfeição a posição do bico.  *
A mesa tem que já estar perfeitamente horizontal em relação ao quadro da delta, e sem imperfeições como
abaulamentos ou saliências. A necessidade é de estrutura e não lógica -- usar autonivelamento de mesa para
emular esta horizontalidade não funcionará.  * Os passos por mm, assim como no caso da calibração da delta,
devem ter sido configurados com exatidão, preferencialmente usando a __prusa calculator__.

E cabem as seguintes observações sobre o método:

* Os valores obtidos são: ** DELTA_HEIGHT (Height:__número__) ** Deslocamento da Torre A (Ex:__±número__)
** Deslocamento da Torre B (Ey:__±número__) ** Deslocamento da Torre C (Ez:__±número__) ** DELTA_RADIUS
(Radius:número) ** Desvio-padrão da iteração (uma medida que diz a precisão obtida, quanto menor melhor)
** (opcional) desvios de ângulos das torres A, B e C (Tx, Ty e Tz).  * Ele calcula quase todas as variáveis
restantes, _menos_ o DELTA_DIAGONAL_ROD, o tamanho do braço, já que seu erro não é medido verticalmente e
sim horizontalmente, fora das capacidades da sonda Z. Isso quer dizer que no final da calibração automática
ainda será necessário imprimir um quadrado de testes para a correção da medida no firmware.  * Uma benesse é
que se as torres não estiverem em ângulos perfeitos de 120° uma da outra, ele consegue também detectar esta
disparidade. Mas como essa é uma imprecisão rara na construção de deltas, aconselhamos a deixar desligada
tal detecção.  * O algoritmo tem precisão arbitrária, que pode ser configurada em número de iterações ou
desvio padrão mínimo.  * O comando ajusta as correções na memória mas não grava na EEPROM. É preciso se
lembrar de executar o G-Code M500 no final do procedimento.

Consideradas todas essas observações, depois de um G28, o comando para a autocalibração de delta é o
**G33**. Ele calcula automaticamente um quadrado na mesa que ocupa a maioria de sua área. O comando aceita os
seguintes parâmetros:

* *Pnúmero* -- número de pontos de sondagem da aresta do quadrado.  ** *P1* -- sonda apenas o centro da mesa e
infere a altura.  ** *P2* -- sonda um quadrado 2x2 ** *P3* a *P7* -- sonda quadrados 3x3, 4x4 etc. É necessário
no mínimo P3 para ele medir as imprecisões de ângulos das torres.
* **T0**/**T1**: Com 0, não calibra os
ângulos das torres. Com 1, calibra tais ângulos. Aconselha-se T0. O default é T1 para P>2.  * *C__número__*
-- calibra para uma dada precisão; por exemplo, C0.03 calcula para que o desvio padrão seja no máximo de 0,03mm,
levando tantas iterações quanto necessárias.  * *F__número__* -- força pelo menos _número_ iterações serem
executadas antes de sair do procedimento.  * *V__número__* -- modo de execução: ** *V0* -- Modo _dry-run_
(execução a seco). Apenas relata os ajustes, mas não configura.  ** *V1* -- Relata os ajustes.  ** *V2* --
Relata os ajustes e os resultados que obtém da sonda Z.
* **E0**/**E1**: Usado no caso de sonda Z retrátil. Com 0
(default), não recolhe nem estende a sonda. Com 1, recolhe e estende a sonda a cada medição.

Exemplos de execução do comando. Saída do comando mostrada em verde:

G33 P4 C0.05 T0 ; sonda 16 pontos (4×4) e pára quando um desvio-padrão

; de 0,05mm é alcançado. Calibra DELTA_HEIGHT, endstops

; e DELTA_RADIUS, não calibra ângulos das torres.

G33 Auto Calibrate

Checking... AC

.Height:297.78 Ex:+0.00 Ey:+0.00 Ez:+0.00 Radius:100.00

Iteration : 01 std dev:0.317

.Height:297.65 Ex:-0.15 Ey:-0.16 Ez:+0.00 Radius:100.80

Iteration : 02 std dev:0.059

.Height:297.66 Ex:-0.17 Ey:-0.13 Ez:+0.00 Radius:100.91

Calibration OK std dev:0.042

.Height:297.66 Ex:-0.17 Ey:-0.13 Ez:+0.00 Radius:100.91

Save with M500 and/or copy to Configuration.h

Ou ainda:

G33 ; calibra com ajustes default

G33 Auto Calibrate

Checking... AC

.Height:297.77 Ex:+0.00 Ey:+0.00 Ez:+0.00 Radius:100.00

.Tower angle : Tx:+0.00 Ty:+0.00 Tz:+0.00

Iteration : 01 std dev:0.306

.Height:297.65 Ex:-0.15 Ey:-0.14 Ez:+0.00 Radius:100.77

.Tower angle : Tx:-0.02 Ty:+0.11 Tz:+0.00

Iteration : 02 std dev:0.049

.Height:297.67 Ex:-0.12 Ey:-0.12 Ez:+0.00 Radius:100.87

.Tower angle : Tx:-0.03 Ty:+0.20 Tz:+0.00

Iteration : 03 std dev:0.033

.Height:297.69 Ex:-0.10 Ey:-0.12 Ez:+0.00 Radius:100.91

.Tower angle : Tx:-0.03 Ty:+0.25 Tz:+0.00

Iteration : 04 std dev:0.031

.Height:297.69 Ex:-0.07 Ey:-0.11 Ez:+0.00 Radius:100.92

.Tower angle : Tx:-0.03 Ty:+0.30 Tz:+0.00

Calibration OK rolling back.

.Height:297.69 Ex:-0.10 Ey:-0.12 Ez:+0.00 Radius:100.91

.Tower angle : Tx:-0.03 Ty:+0.25 Tz:+0.00

Save with M500 and/or copy to Configuration.h

Salve então com o comando M500 e não se esqueça de depois disso imprimir o quadrado e corrigir o DELTA_DIAGONAL_ROD
de acordo, como na calibração manual!

Notas:

1 -- O Repetier Firmware implementa um comando "G33" mas tem funcionalidade bem diferente -- serve para
"distortion correction" de mesa, um autonivelamento mais sofisticado equivalente ao _mesh leveling_ do Marlin.

Malhas

Na Impressão 3D usamos a representação digital de objetos em 3 dimensões e a submetemos por vários filtros
até termos aquela série de instruções que a máquina vai executar ao fabricar o objeto. Será necessário
conhecermos bem as formas de representação usada para garantirmos reprodução precisa do objeto que queremos,
assim como para poder impedir erros comuns que ocorrem de problemas inerentes ao formato.

1.  [[a-representação-tridimensional-de-objetos]] = A representação tridimensional de objetos 1.  [[coordenadas]]
== Coordenadas

Assim como usamos as coordenadas cartesianas para visualizar figuras e gráficos de *duas dimensões* (largura
e altura, comumente chamadas de "X" e "Y"), a representação universal de distâncias e dimensões de
objetos tridimensionais é o **plano cartesiano tridimensional**, em que o eixo X corresponderá à largura, o Y
à profundidade e o Z à altura. As unidades desses eixos podem ser arbitrárias (mm, polegadas, etc.) ou mesmo
não haver (serem simplesmente "pontos" determinados sem correspondentes no mundo real)

image::image233.png[image,width=642,height=405]

Na impressão 3D FFF, as coordenadas tridimensionais correspondem aos seguintes arranjos em relação à estrutura
da impressora:

image::image234.png[image,width=642,height=509]

== Representações de formas tridimensionais

No plano tridimensional, no entanto, existem dois modos principais de se representar cada objeto do mundo real:

* **Sólido**: é a representação dos objetos pelo volume que ele ocupa, utilizando de primitivas igualmente
sólidas. São mais realistas e completas, mas mais difíceis de processar e construir. A modelagens sólidas é
utilizada para simulações não-visuais, CAD e certas aplicações como _ray tracing_ e Geometria Construtiva Sólida.
* **Superfícies**: o objeto é representado não pelo seu volume, mas pelas superfícies que o compõem. Imagine
um cubo sendo modelado como os seis quadrados que o compõem, sendo dispostos tridimensionalmente (e tendo espessura
__infinitamente pequena__) de modo a definir a forma fechada. Este tipo de representação é mais fácil de processar
computacionalmente e é usada para praticamente todos os tipos de animações e efeitos visuais envolvendo 3D.

Confuso? Não se preocupe. Sem ler especificamente os algoritmos e estruturas de dados que tratam estas formas, fica
mesmo difícil fazer uma distinção de qual é qual -- mais ainda porque visualmente, as duas representações
são idênticas. Por outro lado, já dá pra inferir que na representação de superfícies, se você tiver uma
forma __não fechada__, ela não corresponde ao mundo real que não tem superfícies infinitamente finas. Falaremos
disto mais adiante.

Um detalhe importante a notar: converter um objeto de representação sólida para de superfície é uma tarefa
simples de programar e computacionalmente eficiente. Muitos programas portanto fazem isso. A operação contrária,
converter superfícies para sólidos, exige análise topológica e bastante heurística e é por isso mesmo não
só complexa para programar como computacionalmente demorada.

image::image235.png[image,width=642,height=355]

image::image236.png[image,width=587,height=435]

Tanto para sólidos quanto para superfícies, no entanto, existem outras subdivisões:

* **Poligonal / poliédrica**: os sólidos e superfícies são todos formados de segmentos de retas. Qualquer
superfície ou linha que pareça na curva na verdade foi "interpolada"com muitos segmentos de forma a passar
a impressão de algo curvo.
* **Modelagem curva**: além dos segmentos de retas, esse tipo de representação
admite curvas na representação matemática das formas. As curvas podem ser arcos de círculo, "splines"
ou mais comumente o caso específico de splines chamada NURBS. Elas representam uma equação matemática que
define cada ponto de determinado segmento da forma -- e uma equação que tem um pequeno número de índices. A
maioria dos modeladores sólidos, por sua sofisticação maior inerente, suporta curvas.
* **Escultura digital**:
também um tipo de modelagem curva, os expedientes que esse tipo de representação usa para chegar às formas
são diferentes. Técnicas como deslocamento, superfícies de subdivisão, tesselagem dinâmica e voxelização
permitem que o software use de abordagens manuais, artísticas e orgânicas para representar formas.

As _malhas_ de que tanto falamos são uma representação **poligonal de superfície orientada**. Em outras palavras,
matematicamente nós só definimos as "cascas" planas da superfície de nossos objetos, cascas essas que são
sempre formadas de _polígonos_ bidimensionais. É _orientada_ porque você também define qual é o "lado de
dentro" do polígono e qual é o "lado de fora".

O formato mais usado pra impressão 3D, no entanto, simplifica ainda mais essa representação. Ao invés de usar
polígonos com números de lados arbitrários, o formato STL aceita apenas triângulos. Além disso, não permite
especificar unidades: os softwares que abrem STL "assumem" uma unidade para os números da forma, normalmente
milímetros. Pra arrematar, o formato não tem designadores pra objetos diferentes e quando você abre algo com
várias peças, verá que elas se movem juntas -- pois são consideradas uma entidade única. Muitos desses
softwares por isso mesmo oferecem a função de "identificar e separar partes" pra facilitar o manuseamento.

image::image237.png[image,width=373,height=367]

Toda essa simplicidade exigida tem uma razão. Os softwares que usaremos para enviar as formas para a impressora
precisam realizar _muitas_ manipulações e operações matemáticas em cima dessas formas, e muitas vezes as
precisam fazer em "tempo real". Também há o fator que o formato STL foi inventado na década de 80, em que o
processamento disponível era muito mais lento que o atual. Novos formatos para impressão 3D, como o AMF e o 3MF,
levaram isso em conta permitindo muito mais informação que o STL, como diferentes objetos ("constelações"),
cores, materiais, unidades, polígonos ao invés de apenas triângulos... No entanto, ainda trabalham com _malhas_
e não incorporaram modelagem sólida nem curvas no formato.

Trabalhar com malhas poligonais tem reveses maiores do que apenas não ter curvas ou informação de sólidos. A
modelagem sólida é mais robusta por equivaler às regras "do mundo real". Como vimos anteriormente,
uma operação simples como remover uma face de uma malha fechada ("shell", casca) já torna a forma
impossível de existir no mundo real e, portanto, impossível de imprimir. Podemos até pensar que dá pra
perceber qual é a casca certa, mas computadores não "percebem", funcionam sob algoritmos. E se tirarmos
mais uma face? E esses "buracos" não são o único problema possível. Existem muitos jeitos possíveis de
criar uma "malha" matemática que viola várias propriedades do "mundo real", vamos ver alguns deles aqui
que aparecem frequentemente nas formas enviadas pra impressão 3D e que só são percebidos muito tarde -- pois
embora alguns desses problemas sejam visíveis, como os buracos, outros são simplesmente imperceptíveis pelas
imagens que o computador nos mostra, podendo ser detectados apenas por análises matemáticas.

Alguns desses problemas podem ser resolvidos de forma automática, e muitos programas que lidam com impressões
3D já oferecem funções de conserto sob demanda ou até automaticamente. Mas a maioria exigiria que o software
entendesse a _intenção_ por trás do objeto, o que computadores são excepcionalmente ruins em fazer, tendo que
usar o que se chama de "heurística" -- um "chute" informado -- pra tentar resolver. Adicionalmente,
às vezes simplesmente falta informação para consertar -- se removermos quatro faces do nosso cubo, como o
software vai adivinhar que aquilo era um cubo?

Na vivência prática de um profissional que lida com impressão 3D, as formas que lhe são dadas pra imprimir
vêm de diferentes fontes. Muitas delas, e mais frequentemente as formas orgânicas e esculpidas, foram criadas
em forma de malha com operações que introduzem muitos erros geométricos impossíveis de visualizar, e que
não correspondiam a preocupações do modelador que geralmente vai se importar apenas com a percepção visual
da forma. O resultado disso pode ser algo tão complexo, com tantos polígonos e triângulos, e tantos erros
intratáveis, que os softwares de análise e conserto automático ou guiado podem simplesmente não dar conta de
resolver -- portanto, é preciso se preparar para isto e especialmente para dar o feedback adequado ao cliente.

Por outro lado, caso o profissional de impressão 3D tenha conhecimento de modelagem de malhas para consertar
esses erros, esse conhecimento pode ser crítico para a impressão, e um diferencial importante em um mercado
concorrido. Por isso mostramos os problemas mais comuns, e as maneiras de mitigá-los ou resolvê-los. Note que
o modo mais produtivo é antes deixar que um dos softwares de conserto automático tente resolver, e só na falha
deste procedimento navegar na difícil arte de consertar malhas.

Infelizmente, o lado negro da indústria enxergou nisso uma ótima oportunidade para reforçar seu
controle e escassez, e procura usar erros deliberados em malhas como mecanismo para impedir que as
pessoas possam gozar até mesmo dos poucos direitos ainda dados pela legislação draconiana dos
direitos autorais, que é impressão 3D de um modelo a que tenha acesso. Essa idéia é factível
em grande parte porque os melhores algoritmos de auto-conserto de malha são proprietários e,
portanto, bloqueáveis. Por isso, conhecimento de como malhas funcionam e como sobrepujar seus problemas
é algo importante até por questões de liberdade! Você pode saber mais sobre o assunto na notícia em inglês:
https://3dprintingindustry.com/news/deliberate-mistakes-key-protecting-3d-printed-parts-theft-114092/[_https://3dprintingindustry.com/news/deliberate-mistakes-key-protecting-3d-printed-parts-theft-114092/_]
- cabe notar que a nomenclatura usada é equivocada: cópia não-autorizada de "propriedade" intelectual não
pode ser chamada de __roubo__, pois __não há subtração__.

image::image238.png[image,width=517,height=412]

== Operações booleanas

Um conceito importante para entender malhas e sólidos e como os problemas podem surgir é o de __operações
booleanas__. São modificações que você exerce tendo dois ou mais sólidos ou malhas como operandos e uma única
malha ou sólido como resultado. São três as operações básicas (é possível ter operações derivadas),
ilustradas aqui no software OpenSCAD com a única mudança sendo no nome da função:

image::image239.png[image,width=642,height=372]

image::image240.png[image,width=642,height=328]

image::image241.png[image,width=642,height=350]

1.  [[erros-de-malhas]] == Erros de malhas 1.  [[buracos]] === Buracos

image::image242.png[image,width=642,height=417]

Apenas cascas (malhas fechadas) conseguem representar uma estrutura sólida tridimensional. Malhas que estejam
abertas podem resultar de vários processos diferentes no fluxo de modelagem, desde operações entre superfícies
não-concidentes até manipulação incorreta de retas e pontos. Esse problema está entre os mais fáceis de
serem resolvidos de forma automática, mas se faltar informação pode ser necessário modelagem adicional. Algumas
vezes o procedimento de fechar buracos, se passado com os parâmetros incorretos, pode ligar partes da malha que
não são relacionadas; neste caso uma reparação mais cuidadosa, com fechamento de seções específicas, pode
ser necessária. A maioria dos softwares de modelagem e reparo permite tal tratamento.

=== Normais invertidas

"Normal" é o nome que se dá, em uma polígono, a um vetor em ângulo reto com sua superfície, apontando
"para fora". Como explicamos ao falhar de malhas, elas são __orientadas__: se o polígono fosse uma folha de
papel, ele teria dois lados, um considerado "de dentro" e o outro "de fora".

image::image243.png[image,width=423,height=294]

O problema que pode acontecer nas malhas é que, ao computar qual é o lado "de dentro" e o "de fora", o
software se confunde, como por exemplo em operações booleanas ou esculpimento de superfícies irregulares. Esse
problema tem relação com o anterior, de buracos, mas pode se tornar muito mais complexo pois enquanto buraco é
__falta de informação__, as normais invertidas são __informações inconsistentes ou erradas__. Uma casca pode
ter uma forma irresolvível somente por causa das normais invertidas, exigindo interferência manual do modelador
que pode precisar selecionar face a face as faces "ruins" e invertê-las. Em objetos típicos com milhares de
faces e muitas de difícil alcance ou visualização, a tarefa pode ser impraticável. Softwares modeladores costumam
ter facilitadores visuais para o problema; Blender, por exemplo, permite visualização das normais dos polígonos,
e tem também o ocultamento de faces invertidas (backface culling) como uma opção falsa/verdadeira. Um algoritmo
que costuma resolver grande parte dos problemas é a seleção de uma área ou objeto e executar a função de
"normalizar" a orientação dos triângulos, o que quer dizer que polígonos adjacentes terão sua orientação
decidida por "maioria" de acordo com os outros polígonos.

image::image244.png[image,width=642,height=326]

=== Faces, arestas e vértices flutuantes

Digitalizadores (scanners) tridimensionais são a quase exclusiva fonte deste problema. Seus algoritmos percorrem
a superfície dos objetos escaneados e inferem pontos, arestas e superfícies, com uma grande porcentagem dessas
inferências sendo erradas ou fruto de ruído, aparecendo, na malha, como uma espécie de "nuvem de sujeira"
em volta do contorno irregular e cheio de buracos do objeto digitalizado. Sem querer entrar no mérito dos
sofisticadíssimos algoritmos de reparo dos softwares destes digitalizadores, que têm seu próprio fluxo de trabalho,
é comum mesmo após o reparo haver partes soltas, defeitos, "bolhas" e imperfeições. Muitos destes defeitos
serão resolvíveis manualmente, selecionando as partes "ruins" e simplesmente apagando ou "dissolvendo"
(removendo os vértices sem deixar buracos). Truques de seleção como selecionar a parte principal da malha e
pedir ao modelador para selecionar todas as partes contíguas também dão bastante certo.

Veja que se você tem acesso a uma _malha_ contendo tais imperfeições, e não apenas a uma "nuvem de
pontos", e está tendo dificuldades em resolver todos os problemas, pode ser que a inferência da malha tenha
sido contagiada/deturpada pela limpeza inadequada dessa nuvem. Nesse caso, o melhor a fazer é procurar obter a
fonte original da malha para corrigi-la e refazer a inferência, visto que certos erros no início desse processo
podem tornar impossível a correção posterior.

image::image245.png[image,width=642,height=343]

=== Interseções

Partes da malha se introjetando ou coincidindo com o espaço interno de seu volume - este é um problema genérico
que pode ocorrer até mesmo com modelagem sólida (geralmente menos propensa a erros) convertida para malha, embora
seja mais frequente em esculturas digitais ou peças mecânicas rebuscadas modeladas como malhas. O grande risco
das interseções é que elas podem quebrar a inconsistência interna da casca, algo irresolvível. Pra complicar,
ela muitas vezes ocorre conjugada a normais invertidas pois operações booleanas inconsistentes têm o potencial
de ocorrer em conjunto. Como este costuma ser um erro de modelagem envolvendo auto-referência (da malha em si
mesma), os softwares de conserto tentam "unir" as partes coincidentes com operações booleanas. Com outros
problemas interferindo na análise da topologia da malha, no entanto, a operação pode falhar.

image::image246.png[image,width=642,height=332]

=== Non-manifold

Entramos no espinhoso e complexo campo da teoria da topologia, uma disciplina matemática de nível superior que
traria exigências excessivas de conhecimento para o tratamento de formas para impressão 3D. A incompreensível
entrada na _wikipedia_ sobre "manifold" já faz a maioria dos leitores desistir de tentar compreender o conceito:

"Na matemática, um _manifold_ é um espaço topológico que localmente se assemelha ao espaço euclidiano
próximo a cada ponto; mais precisamente, cada ponto de um manifold __n__-dimensional tem uma vizinhança que é
homeomórfica ao espaço euclidiano de dimensão __n__."

Mais incompreensível que essa definição, no entanto, é por que alguém decide ensinar tal conceito de maneira
tão carregada e hermética; formalismo matemático não é boa justificativa, visto que a definição usa vários
termos vagos como "vizinhança" e "perto".

*Para que serve:* o manifold traz a idéia de algo _fisicamente viável_ e por extensão, o _**non**-manifold_ é
algo inviável. Alguns dos problemas que já tratamos tecnicamente podem ser classificados como __non-manifold__, mas
seria complicado demais tratá-los por essa ótica. Vamos tentar explicar o que é da forma mais intuitiva possível,
mesmo havendo o risco de alguma imprecisão conceitual ou da ira de matemáticos raivosos pedindo nosso enforcamento:

* Tecnicamente falando, você vai querer que seus modelos sejam sempre 2-manifold. Somente esses modelos
podem ser tratados de forma consistente pelos softwares.  * Isso significa: cada aresta estará conectada a
exatamente duas faces. 0-manifold e 1-manifold são buracos e cascas abertas.  * Você vai chamar 2-manifold de
simplesmente _manifold_ e os outros casos de __non-manifold__.  * Esses casos englobam, entre outras, as seguintes
situações: ** Faces/arestas/vértices ocupando o mesmo lugar, parcial ou totalmente, espacialmente, que outros,
sem estarem conectados. Se nosso cubo do Blender fosse realmente 6 quadrados dispostos espacialmente de acordo
com as faces de um cubo, teríamos um design __non-manifold__, porque cada aresta apareceria duas vezes (uma de
cada quadrado) e como as arestas do quadrados não estão conectadas, haveria "buracos" de tamanho zero.  +
image::image247.png[image,width=530,height=499]image:image248.png[image,width=547,height=479]
** Faces internas, que não contribuem para a geometria do objeto.
+ image:image249.png[image,width=247,height=234] ** Uma aresta conectada a várias
superfícies. Isso impede, entre outras coisas, que o software saiba qual é o lado interno ou externo da casca.
+ image:image250.png[image,width=246,height=232]

Os exemplos simplificados mostrados acima podem parecer bem fáceis de resolver, mas matematicamente falando
quebram a consistência topológica e atrapalham ou impedem os softwares de lidar corretamente com eles. Muitos
deles são completamente invisíveis pela forma tridimensional, como o caso do cubo com 6 quadrados disjuntos ao
invés de uma malha de 6 quadrados. O modo de consertar esses erros é simplesmente incorporar o fluxo de reparo no
seu fluxo de trabalho de impressão 3D: sempre use um software para inspecionar erros -- alguns dignos de nota são
os open-source: Blender (que tem uma aba repleta de funções para inspecionar erros relacionados a impressão 3D),
meshlab, FreeCAD; o gratuito meshmixer; ou serviços gratuitos de nuvem (automáticos, permitindo pouco controle
dos parâmetros) como o Azure Mesh Repair e MakePrintable.

image::image251.png[image,width=566,height=443]

== Problemas de malha -- não-geométricos

Nem todos os problemas de malha que se pode ter são relacionados à geometria _lógica_ da peça, e sim à
geometria __física__. Em outras palavras: embora a forma seja perfeitamente equivalente a um objeto real, a
tecnologia específica de impressão 3D (no caso da FDM) não a permite imprimir perfeitamente. Idiossincrasias
como paredes finas demais, detalhes que não aparecerão na peça impressa, seções pendentes da peça que tendem
a desabar e até distribuição de forças podem também ser detectadas de forma automatizada. No entanto, esses
problemas geralmente pedem não só correção, mas um _redesign_ da peça, o que pode ser complicado se for uma
peça para simplesmente imprimir para cliente. Detectados problemas deste tipo na peça, o melhor é devolver para
redesign ou ao menos informar o cliente -- com um acordo de isenção de responsabilidade por tais falhas.

=== Paredes finas

Em um modelo fechado qualquer, a _espessura de parede_ (wall thickness) é a distância mínima entre dois pontos
de uma superfície fechada. É uma das características geométricas mais importantes de um objeto: o quanto
o objeto consegue suportar de peso, tanto em tração quanto compressão, será função de quão grossas suas
paredes são. Birôs de impressão 3D maiores costumam ter analisadores automáticos que procuram por paredes
finas no arquivo digital e rejeitam peças antes mesmo de chegarem a avaliadores humanos. Um exemplo notável é
a _Shapeways_ dos EUA; para PLA, a espessura de parede mínima que aceitam é de 1mm, e esse número se aplica
suficientemente bem aos materiais comuns de impressão 3D. Vários softwares de PC fazem análise de formas para
achar paredes finas: os open-source FreeCAD, Meshlab e Blender são bons exemplos, mas softwares proprietários
como Meshmixer e Netfabb também têm tais recursos.

image::image252.png[image,width=642,height=402]

Tenha ainda ciência o leitor que isso é uma simplificação do problema. Mesmo nos documentos da Shapeway, a
espessura tem suas variações: eles criam o conceito de "cabo" (__wire__) para especificar certas geometrias
em que a espessura mínima é de 2mm.

image::image253.png[image,width=642,height=523]

=== Detalhes pequenos

Ressaltamos duas vezes a parede ser não somente fina, mas mais fina que nosso bico. Este problema está relacionado
ao anterior, mas as consequências e parâmetros são diferentes. Há vezes em que seu objeto precisa ter certos
detalhes pequenos como chanfros, pequenas elevações e traços cuja função é ornamental e não terão necessidade
de serem mecanicamente íntegros. O melhor exemplo disso são peças com certas letras em alto relevo. No entanto,
como a impressão 3D FFF traça um filete de plástico com espessura não infinitesimal, é fisicamente impossível
ter qualquer tipo de trajetória do plástico, e portanto detalhamento, menor que a espessura deste filete. A
maioria das impressoras 3D FFF tem um bico entre 0,3 a 0,6mm, com o mais comum sendo de 0,4mm. E os softwares que
processam as impressões -- os fatiadores, que veremos no próximo capítulo -- quando vêem um detalhe menor
que o filete que podem produzir, simplesmente não o incluem no código para impressão. Novamente, birôs de
impressão costumam designar um detalhamento mínimo (saliência ou reentrância) em uma superfície, que costuma
ser entre 1 e 2 vezes o orifício do bico usado.

image::image254.png[image,width=452,height=344]

=== Overhangs

__Overhangs__, uma palavra em inglês que pode se traduzir como _seções pendentes_ da peça, isto é, superfícies
da parte de baixo da peça que estarão acima da plataforma sem algo para sustentá-las, ou com as faces em
um ângulo tão próximo do horizontal que a deposição de plástico derretido não terá sustentação para
possibilitá-las. Lembre-se que a impressão 3D FDM divide as peças em camadas e _sempre_ ocorre de baixo para cima,
sem que o bico retorne a camadas mais baixas. Ficará mais fácil visualizar com o caso de um cogumelo a ser impresso:

image::image255.png[image,width=555,height=570]

Veremos no fatiamento que temos a oportunidade de pedir ao software de impressão que coloque estruturas automáticas
ou semi-automáticas, destacáveis no final da impressão, chamadas de *suportes* para lidar com a maioria desses
__overhangs__. Passamos a esses software um ângulo mínimo a partir do qual criar tais estruturas (lembrando:
quanto mais alto o ângulo, mais próximo da horizontal, pois é em relação ao eixo vertical). Para a maioria
dos materiais, um ângulo de 45° costuma ser suficiente; alguns mais dúcteis ou de maior coeficiente de calor
específico (que demoram mais a solidificar, como o PLA) poderão exigir um ângulo menor como 30° (levando mais
suporte). Suportes são estruturas extras que por estar em contato com a peça gerarão tensão e trabalho a mais,
então nem sempre serão desejáveis; por exemplo, detalhes finos ou internos podem imprimir bem com suporte,
mas a tarefa de os remover após a impressão poderá quebrar as partes delicadas ou ser impraticável numa parte
interna difícil de alcançar. Existem mitigações para esses problemas, que veremos na parte de fatiamento.

image::image256.png[image,width=642,height=495]

=== Distribuição de forças

Por fim, muitas dessas _diretivas_ de qualidade de objetos impressos na verdade são apenas "atalhos" para
termos objetos imprimíveis, robustos e com boa aparência. Se formos ao fundo da questão, no entanto, a maioria
dessas diretivas concerne termos uma boa distribuição de forças no objeto, de modo que ele consiga resistir
a elementos ambientais básicos, consiga se auto-sustentar, consiga sustentar as cargas que precisa e consiga
portanto cumprir bem seu objetivo, seja funcional ou ornamental. E esta distribuição de forças na verdade é
uma disciplina bem complexa de cursos de engenharia de materiais, civil e mecânica, chamada de __análise de
elementos finitos (FEA)__. Ela não serve somente para forças mecânicas, tem outras utilidades como análise da
termodinâmica dos objetos. Existem pacotes bem completos de FEA (um exemplo é o open-source __Salome Platform__)
no mercado e muitos dos CADs mais sofisticados e completos como o SolidWorks a incorporam.

*A Anisotropia*

No entanto, mesmo com a impressão 3D FFF tendo se popularizado tanto, virtualmente nenhum pacote de software
do mercado está devidamente preparado para lidar com o maior revés de análise da FFF, aquele que já
mencionamos: a __anisotropia__^1^, que tem mensuração bastante difícil por variar de acordo com o material e
temperaturas usadas, a resolução usada, os ajustes usados nos fatiadores como preenchimento e paredes, e por
o problema de laminação de estruturas ser difícil de equacionar neste tipo de análise. Alguns estudos já
estão aparecendo procurando resolver esse problema e até um serviço online surgiu a preços estratosféricos
(http://my3dmatter.com/fea-for-fdm-3d-printing/[_http://my3dmatter.com/fea-for-fdm-3d-printing/_]), mas a solução
deste problema, qualquer que seja, provavelmente demorará algum tempo para chegar ao cidadão comum.

image::image257.jpeg[image,width=523,height=533]

Notas:

1 -- Leitores _gamers_ que apreciam jogos tridimensionais podem já conhecer a palavra de um dos ajustes de
qualidade mais comuns, o _filtro anisotrópico_ (anisotropic filtering), um pós-processamento de texturas para
aprimorar a visualização em objetos distantes.

Operação da impressora 3D

Uma vez que foi dada a necessária teoria para entender uma impressora 3D atual, a próxima etapa é partir para
a prática. O caso típico de uso a ser tratado em nossos exemplos é o de uma impressora 3D FFF de baixo custo
no mercado nacional para fins pessoais ou profissionais. Alguns modelos de impressoras 3D com características
especiais (como as estilo "delta") serão tratadas em apêndices, assim como casos de uso que extrapolam o comum.

== Introdução

Uma Impressora 3D "de mercado" tipicamente vem com drivers de dispositivo e um software (fatiador) para você
usar com a impressora 3D. No fatiador, você pode controlar a impressão enquanto acontece, ligado à impressora 3D,
ou gerar um arquivo no formato "g-code" para mandar para a impressora quando ela pode ser autônoma, isto é,
tem um "slot" para pendrive ou cartão SD e botões e visor para você iniciar e controlar a impressão sem
nenhum computador conectado.

Como a maior parte do tempo em que você vai passar nas tarefas de impressão 3D será na frente do fatiador,
e como é ele o software que diz como o processo de impressão 3D ocorrerá, é o foco principal deste capítulo.

Existem vários fatiadores diferentes de impressoras FFF no mercado, e muitos fabricantes fazem para seus produtos
fatiadores particulares e específicos, que não servem em outros modelos. Como é um mercado de massa com muitas
alternativas diferentes, qualquer tentativa de tratar esses fatiadores específicos seria improdutiva. O mesmo
pode ser dito de escolher um único fatiador popular como exemplo; o mais popular hoje pode ser obscuro amanhã,
e omitir as inovações e pontos positivos de outros fatiadores faria o aluno ter um aprendizado incompleto.

A abordagem do curso trata, então, de usar como ilustração alguns poucos fatiadores razoavelmente populares,
de boa quantidade de recursos e razoavelmente genéricos, com outros fatiadores (e print hosts) sendo descritos
nos apêndices.

Antes de começar a entender os fatiadores, no entanto, é importante contextualizá-los apropriadamente. Eles se
inserem no workflow de impressão atuando como softwares onde você:

* *Importa* formas tridimensionais (formatos mais comuns: STL, OBJ, AMF e 3MF); * *Dispõe* essas formas
tridimensionais em uma "bandeja virtual" tridimensional que é a mesa de impressão da impressora 3D que
configurou; * *Faz operações simples* com essas formas tridimensionais, como: mover as formas; aumentar ou diminuir,
uniformemente ou nos eixos X, Y e Z; realizar cortes simples; rotacionar / inclinar a peça; combinar com outras
peças; * Grava / exporta a disposição da bandeja que arrumou; * *Configura* os _parâmetros de fatiamento_
adequados para a forma. Preenchimento, suportes, estruturas de apoio, resolução, etc.; * *Executa* a operação
de fatiar (geralmente por um botão ou item no menu); * Tem uma **pré-visualização**, depois do fatiamento
completado, em como ocorrerá a impressão; * Tem uma *previsão* de tempo e consumo de material da impressão
-- em alguns fatiadores, é até possível colocar o custo por quilo do material para se ter uma **estimativa de
preço**; * Visualiza ou até edita o *g-code* resultante do fatiamento; * Grava / exporta o g-code resultante; *
Executa operações de manutenção da impressora 3D pela USB, bluetooth ou rede, como testes de movimentação,
gravação de firmware, nivelamento da mesa, mudança de parâmetros da memória do microcontrolador (EEPROM);
* Envia a impressão (g-code) pela USB, bluetooth ou rede para a impressora executar, possivelmente visualizando
a renderização em 3D da trajetória da impressão enquanto ela ocorre; * Monitora a impressão tendo momento a
momento a temperatura de cada componente aquecido, o material gasto, a velocidade atual, a trajetória percorrida
e até a visualização por câmeras, vendo na tela "ao vivo" enquanto acontece, e podendo até configurar alarmes.

Essas são as opções disponíveis em fatiadores modernos, atualmente. Nenhum deles faz *todas* as operações,
apenas subconjuntos delas. É possível que no futuro agreguem ainda mais funções, e no passado muitas dessas
operações eram realizadas por softwares diferentes. Quando o software não executa a operação de "fatiamento"
mas permite que você controle a impressora, execute operações de manutenção e envie o g-code, ele é chamado de
_*Print Host*_ ao invés de fatiador. Quando o software só recebe o modelo da bandeja pronta e as configurações
de fatiamento como parâmetro, sem mesmo exibir uma interface gráfica, e devolve apenas o "g-code", ele é
chamado de __*fatiador puro*__. Há muita utilidade em se usar um fatiador puro, uma delas é poder ser usado com
outras interfaces e workflows, ou de forma automática e em lote (__batch__) para várias peças e/ou bandejas
pré-configuradas. Ainda, esses fatiadores purs não precisam de recursos de display pra serem executados, podendo
usar o processamento de dispositivos embarcados. Por isso alguns fatiadores, como _Cura,_ _Slic3r_ e _MatterControl_
(não por acaso justamente os open-source), oferecem a funcionalidade de fatiador puro como um opcional do programa
(você pode invocá-los em modo _batch_ pela linha de comando ou através de outro programa).

image::image258.png[image,width=626,height=475]

== Fluxo de trabalho (workflow) da Impressão 3D

* **Escolha ou obtenção das formas tridimensionais**. Há diversas fontes possíveis para as formas: ** Elas
podem ser criadas por softwares _*modeladores sólidos*_ -- aplicativos que permitem a modelagem tridimensional e
geram arquivos cujos dados descrevem as formas sólidas que compõem o modelo. Alguns exemplos de tais softwares:
SolidWorks, Inventor, FreeCAD.  ** Elas podem ser criados por software _*modeladores de malha ou superfície*_
-- aplicativos que permitem a modelagem tridimensional e geram arquivos cujos dados, ao invés de descrever
as formas sólidas que compõem o modelo, descrevem as superfícies ou "peles" que envolvem as formas do
modelo. A diferença aparentemente sutil de abordagem é gigante no que concerne aos dados gravados e como são
processados matematicamente. Em geral os modeladores de superfície geram formas mais orgânicas, como fazem
os aplicativos ZBrush, Sculptris e Blender mas também o Sketchup.  ** *Modeladores matemáticos* de funções
algébricas podem gerar formas de gráficos tridimensionais, também em malha, como Mathematica e MathCAD; **
**Linguagens de programação em 3D**, como CadQuery, OpenSCAD, SolidPython; ** Digitalização 3D de imagens
(por fotogrametria, por scanner 3D especializado, por ultrassom "4D")
** **Procura e download da Internet**,
em sites de impressão 3D como _thingiverse_ ou __youmagine__, sites genéricos de formas 3D como _grabcad_
e _cgtrader_ ou até mecanismos de busca 3D como __yobi3d__, _stlfinder_ e __yeggi__.  ** Extração de dados
de aplicativos e jogos, através de "desempacotadores" e conversores automáticos. Um exemplo notável é o
jogo _minecraft_ que tem muitos modelos extraídos para impressão, mas virtualmente qualquer jogo tridimensional
tem seus modelos conversíveis para as malhas impressas em 3D (e como as formas não são feitas especificamente
para impressão 3D, podem precisar de alguns ajustes).  ** Personalização e geração de objetos, em sites como
_thingiverse_ (novamente) ou geradores de "lithopanes" (fotografias bidimensionais em relevo).  * *Conversão*
da forma para um formato que o fatiador entenda. Para malhas simples de uma só cor, STL e OBJ; para malhas com
cores ou materiais diferentes, AMF ou 3MF; * *Importação* da forma 3D no fatiador, de onde se procede com o
**workflow do fatiamento**; * Preparação física da impressora para a operação: inserção do filamento no
extrusor, colocação do vidro na mesa aquecida, revestimento do vidro com fita ou cola; * *Envio da impressão*
para a Impressora 3D, seja por um dispositivo intermediário de armazenamento (cartão SD, pendrive -- de onde
se escolhe o arquivo em um display da impressora), seja por uma conexão entre impressora e computador (wifi,
ethernet, cabo USB, bluetooth); * A Impressão de uma peça média (5-10cm de altura) em uma FFF tipicamente leva
horas para concluir. Mesmo com essa demora, se recomenda altamente o **acompanhamento presencial das impressões**,
especialmente se a impressora não tiver segurança industrial de operação, como peças resistentes ao fogo,
câmara fechada, resistência a impactos mecânicos; * Finalizada a impressão, há uma etapa de **retirada da
impressão da mesa**, que pode dar algum trabalho; * Retirada a peça, pode haver a necessidade de **remoção de
estruturas de apoio**, como a bainha, os suportes, o raft; * A peça pode precisar ou se beneficiar de uma etapa
adicional de **acabamento**: lixagem, remoção de pontas e plástico residual, pequenos reparos; peças divididas
serão coladas; para alguns plásticos, temos a opção de **acabamento químico**, usando solventes como acetona
ou clorofórmio; * Opcional: *revestimento* da peça para conferir a ela alguma propriedade como dureza ou brilho;
* Opcional: *pintura* da peça para lhe dar cores e "vida".

image::image259.png[image,width=651,height=745]

= E o que é fatiar?

A etimologia da palavra já revela sua fundamentação: vamos pegar uma forma 3D, orientar em relação a uma
superfície, e cortá-la em fatias horizontais (seções transversais) bem finas, como se fosse um pão de forma
colocado na vertical.

Quanto mais finas as fatias, menos os detalhes verticais nelas importam (como inclinações), pois mais ela se
aproxima de algo perfeitamente bidimensional. Com fatias de paredes simplificadas suficientemente finas e um
número muito grande delas, seu empilhamento será praticamente igual à figura tridimensional que as originou.

image::image264.png[image,width=608,height=510]

O profissional abre o software fatiador e o alimenta com a peça ou peças tridimensionais (arquivos digitais como
STL, AMF, 3MF, OBJ) que deseja imprimir, as visualizando na interface e as dispondo em uma "bandeja virtual",
que representa a plataforma de impressão da máquina a ser usada. O operador toma as _decisões_ que mencionamos,
como a altura de cada fatia ("altura de camada"), além de algumas operações simples de manipulação 3D
como rotacionar, mudar o tamanho ou até cortar e separar a forma. Após a operação matemática de fatiamento
ser completada, o fatiador devolve um código de máquina que a impressora 3D entende e executa. Este código,
normalmente no formato "G-Code", pode ser gravado em mídia como cartão SD ou pendrive e colocado na impressora,
ou ser enviado a ela -- dependendo do modelo, por uma porta USB, bluetooth ou rede sem fio.

Fica mais fácil ver com o resultado da visualização de algumas camadas do fatiamento da Figura 15:

image::image265.png[image,width=642,height=475]

image::image266.png[image,width=662,height=269]

== Principais fatiadores do mercado

A seguir, uma listagem atual dos principais fatiadores de impressão 3D FFF disponíveis para microcomputadores
(PC/Mac).

* *Slic3r* -- fatiador open-source com muitos recursos avançados e opções de configuração;
escrito em perl, sua velocidade de fatiamento às vezes decepciona. Se destacam nele a possibilidade
de cortar peças no próprio fatiador, a possibilidade do uso de arcos, retração de firmware e
autospeed. Plataformas: Mac OS X, Linux, Windows. Sítio oficial em http://slic3r.org/[_http://slic3r.org_]
e código em https://github.com/alexrj/Slic3r[_https://github.com/alexrj/Slic3r_].
* *Prusa Slic3r* -- fork mais famoso do Slic3r feito pela Prusa Research, com
"polimento" extra, alguns recursos a mais e cuidado extra com defaults. Anúncio e explicação
http://www.prusaprinters.org/introducing-slic3r-prusa-edition/[_http://www.prusaprinters.org/introducing-slic3r-prusa-edition/_],
downloads em https://github.com/prusa3d/Slic3r/releases[_https://github.com/prusa3d/Slic3r/releases_] e código
em https://github.com/prusa3d/Slic3r/[_https://github.com/prusa3d/Slic3r/_].  * *Cura* -- fatiador open-source
com duas versões bem diferentes: a antiga, até a versão numerada como 15.04.3, com interface bem simples,
intuitiva e ágil, assim como fatiamento bem rápido, mas com poucas opções de configuração; e a nova, tendo
sua interface reescrita e começando da versão 2.1.0, com muito mais opções de configuração e recursos
avançados e únicos, como "penugem" e impressão em arame. Plataformas: Mac OS X, Linux, Windows. Existem
versões "personalizadas" (forks) do Cura feitos por terceiros, como o "Lulzbot Cura", o "Katana" e
até uma versão que funciona como fatiador de impressora SLA ao invés de FFF (Cura da CTC Riverside). Sítio
oficial em https://ultimaker.com/en/products/cura-software[_https://ultimaker.com/en/products/cura-software_],
código em https://github.com/Ultimaker/Cura[_https://github.com/Ultimaker/Cura_].  * *MatterControl* --
fatiador open-source escrito em .Net, se ressaltando pelos plug-ins (braille, importação de imagens 2D,
criação de texto 3D) e pelo workflow bem controlado, permitindo operações em batch, oferecendo alarmes de
e-mail ou SMS e monitoração remota da impressora. Tem uma quantidade média de opções. Plataformas: Mac
OS X, Linux, Windows. Sítio web em http://www.mattercontrol.com/[_http://www.mattercontrol.com/_], código em
https://github.com/MatterHackers/MatterControl[_https://github.com/MatterHackers/MatterControl_].  * *Simplify3D*
-- fatiador proprietário vendido por US$ 150 pela empresa de mesmo nome. Tem muitos recursos avançados e uma
boa quantidade de opções de configuração, além do workflow bem controlado pelo que chama de "processos"
e "perfis". Se destacam nele a colocação personalizada de suportes, o fatiamento rápido e para vários
formatos, o painel de controle da impressora poderoso e com autodetecção de protocolo, a visualização
seccional das peças e o nivelamento fácil de peças na mesa. Plataformas: Mac OS X, Linux, Windows. Sítio
web em http://www.simplify3d.com/[_http://www.simplify3d.com_].  * *Kisslicer* -- fatiador _shareware_ já
não muito atualizado, caracterizado pelo bom fatiamento de superfície, edição online do g-code, versão para
raspberry pi e alguns recursos únicos como __seam hiding__. Extrusão dupla ou tripla só é possível na versão
registrada. Plataformas: Mac OS X, Linux, Windows. Sítio web em http://www.kisslicer.com/[_http://www.kisslicer.com_].
* *Voxelizer* - fatiador proprietário gratuito da empresa Zmorph, bastante poderoso e trabalhando em um
workflow que antes converte as formas em "voxels", ou pixels tridimensionais. Dotado de recursos poderosos,
como fatiagem adaptativa (diferentes alturas de camada para diferentes partes do objeto) e muito parâmetros
de configuração. Funciona para impressoras 3D FFF genéricas mas é especialmente criado para as impressoras
sofisticadas da Zmorph, especialmente as multifuncionais. Plataformas: principalmente Windows, versões de Mac OS X e
Linux existem mas estão muito defasadas. Sítio web em http://voxelizer.com/welcome/[_http://voxelizer.com/welcome/_].
* *CraftUnique Craftware* -- fatiador proprietário gratuito com um visual e workflow bem distintos; tem um número
médio de configurações ao mesmo tempo em que apresenta recursos bem poderosos, como a _colocação personalizada
de suportes_ e a visualização simultânea de g-code de seções. Plataformas: Mac OS X, Linux, Windows. Sítio
web em https://craftunique.com/craftware[_https://craftunique.com/craftware_].  * *Repsnapper* -- apesar de
bastante negligenciado, esse fatiador open-source multiplataforma simples continua em desenvolvimento ativo e tem
alguns recursos interessantes, como uma parte de controle da impressora bem completa com macros e editor de g-code,
fatiamento para SVG, corte e separação interativa de partes de STL, velocidade separada para Z, fatiamento variável,
velocidade de overhang configurável, raio de largura de camada para diâmetro do bico configurável, importação
e exportação para AMF, geração de arcos (G2 e G3), compensação horizontal ("offset outer shells"), e
renderização tridimensional que não necessita de aceleração (sendo interessante para uso em embarcados), opções
de depuração detalhadas para achar erros e equivalências em G-Code (este último recurso o torna o melhor fatiador
para usuários avançadíssimos e desenvolvedores que precisam depurar novos recursos de firmware). Plataformas: Mac OS
X, Linux, Windows. Código em https://github.com/timschmidt/repsnapper[_https://github.com/timschmidt/repsnapper_].
+ image:image267.png[image,width=506,height=348] * *IceSL* -- fatiador _experimental_
que é uma espécie de mistura de "OpenSCAD" com Slic3r, feito inicialmente pra fins
acadêmicos. Multiplataforma, mas infelizmente não é open-source, o que é especialmente lamentável
pois se fosse teria muito apelo pra crescer, conseguindo fazer formas complexas sem perder detalhes
por interpolação, consegue lidar com extrusão dupla de maneira admirável e tem também um primoroso
algoritmo de contorno para __warp shield__. Tem duas versões online totalmente usáveis. Sítio web em
https://members.loria.fr/Sylvain.Lefebvre/icesl/[_https://members.loria.fr/Sylvain.Lefebvre/icesl/_].  * *Raise3D
IdeaMaker* -- fatiador bem novo, tem aparência e recursos muito parecidos com o Simplify3D (incluido os suportes
manuais) mas é gratuito. Se destaca pela interface limpa e pelo recurso de corte de peças por planos (incluindo
planos inclinados). Sítio web em https://www.raise3d.com/pages/ideamaker[_https://www.raise3d.com/pages/ideamaker_]
+ Temos ainda softwares que não são fatiadores completos, mas __print hosts__:
* **pronterface/suite Printrun**:
um controlador de impressão open-source escrito em python com interface compacta, poderosa e ágil, muito usado para
diagnósticos e resolução de problemas avançados em impressoras 3D. Permite usar o Slic3r como fatiador puro.  *
**Repetier Host**: um controlador de impressão proprietário escrito em .Net sofisticado, com bandeja virtual para
colocação das peças, operações reversíveis de zoom/escala/rotação com as formas, integração com fatiadores
Slic3r e Cura, ótima integração com impressoras 3D que usem o _Repetier Firmware_ e o servidor de impressão
_Repetier Server,_ com visualização e edição de g-code, e poderosa interface de controle da impressora 3D.
* **Atelier**: controlador de impressão open-source com grande participação brasileira no desenvolvimento,
escrito em C++ com a biblioteca gráfica Qt.

image::image268.png[image,width=589,height=546]

Trabalharemos com 3 fatiadores e um Print Host para comparação: os open-source *Slic3r* e **Cura**, o proprietário
gratuito *Repetier Host* e o proprietário pago **Simplify3D**. Esses softwares foram escolhidos tanto por sua
popularidade, tanto pelos seus termos serem, em comparação, facilmente transferíveis para as opções dos
outros fatiadores. É importante notar que mais que aprender "caixinhas" e "diálogos" de um fatiador, é
essencial entender os conceitos por trás; o mercado muda, e o fatiador que hoje é popular pode se tornar esquecido
em alguns anos. A monocultura de aplicações infelizmente é um "vírus mental" que assola muitos campos do
conhecimento e os prejudica trazendo esta confusão de conceitos entre o "método" e a "ferramenta". Para
piorar o cenário, as empresas produtoras dos softwares das "monoculturas" comumente os vendem sob licenças
proprietárias, restritivas e controladoras, para estender o poder sobre os profissionais e sedimentar seu domínio
-- pode se tornar impossível exercer aquela profissão sem o aval da fabricante, um poder inadmissível que
muitos entregam sem hesitação (condenando junto os colegas de profissão, pelo efeito de rebanho).

== Aprendendo a fatiar

Comecemos por ver os primeiros parâmetros, os mais básicos que precisaremos, para configurar a nossa impressão
em um fatiador de mercado. O assistente de configuração do fatiador __Slic3r__, especificamente, pede justamente
as configurações iniciais que nos interessam, e usaremos como ilustração passando em seguida em como esses
ajustes aparecem nos outros fatiadores.

image::image269.png[image,width=628,height=328]

=== Ajuste I: Tipo de código de máquina

Existem muitas impressoras 3D no mercado, e embora a maioria delas use uma variação do *G-Code* consagrado
de décadas de uso em máquinas CNC, pequenas variações podem gerar grandes diferenças, como um código de
inicialização inadequado. Escolher o "sabor" (flavor) do código aceito pelo seu firmware é extremamente
importante. Consulte o manual da sua impressora 3D para saber o _firmware_ que ela usa. Nas estilo reprap, os
firmwares mais usados são o __Marlin__, o _Repetier Firmware_ e em um longínquo terceiro lugar, o __Sailfish__.

Note-se ainda que essa configuração não deve ser confundida com outra: o formato de arquivo a ser gravado. Algumas
impressoras, como as da Makerbot, aceitam g-code em um "modo de compatibilidade" mas têm um formato binário
nativo próprio (de nome S3G, Sanguino3 G-code, e extensão .s3g ou .x3g) que alguns poucos fatiadores suportam
(em nosso exemplo, somente o Simplify3D), tendo os outros que recorrer a um software conversor posterior (gpx)
que transforma o arquivo .gcode em .x3g.

image::image270.png[image,width=637,height=436]

=== Ajuste II: tamanho e formato da mesa

Este ajuste varia um pouco entre os fatiadores: em alguns deles você entra apenas os lados da mesa, em outros
você entra as três dimensões X, Y e Z do seu volume de impressão. No Slic3r, você entra apenas os lados e
a altura máxima fica "em aberto", você podendo colocar objetos de qualquer altura na mesa virtual dele. Ele
também permite que você defina um ponto da mesa para ser a "origem", ou seja, o ponto onde as coordenadas são
zero. Se você entrar as dimensões 200 mm x 200 mm para a mesa e colocar o ponto (100,100) como sendo a origem,
estará informando ao Slic3r que o centro da mesa é (0,0), e ele gerará as coordenadas do G-code de acordo
com essa configuração. Via de regra, mesas retangulares têm o (0,0) no canto inferior esquerdo, que já é o
__default__. Geralmente só se muda esse default no caso de algumas impressoras 3D estilo delta que usam mesa quadrada.

As deltas em sua grande maioria no entanto usam mesas circulares (ou hexagonais, mas com áreas de impressão
aproximada de um círculo), e você pode selecionar esta opção no Slic3r -- e aí a origem é obrigatoriamente
no centro da mesa.

O Slic3r oferece ainda uma terceira possibilidade de você usar um arquivo STL para definir a forma da mesa.

image::image271.png[image,width=636,height=331]

image::image272.png[image,width=636,height=331]

Vale notar, finalmente, que especialmente quem usa a impressão 3D para serviços de impressão sob demanda pode
se beneficiar de um "truque" que é criar configurações especiais de impressoras com "mesas virtuais"
gigantes -- digamos, 2000 mm x 2000 mm de área -- somente para poder dispor todos os modelos de uma só vez e
ter uma estimativa do tempo total e volume de plástico gasto de uma quantidade grande de peças .

=== Ajuste III: diâmetro do (orifício do) bico

Lembre-se: o _bico_ é o __nozzle__, a pecinha pequena de onde o plástico sai derretido, não é o
__hotend__. Portanto deve ficar bem evidente que sempre que falarmos em diâmetro do _bico_ estamos falando do
diâmetro __de saída__, do filete bem fino que será depositado na mesa. Os bicos mais usados hoje em dia têm
abertura de 0,4mm, mas você deve verificar o manual da sua impressora para saber esse número. A maioria das
impressoras também oferece o bico como uma peça trocável, encaixável no bloco aquecedor por uma rosca M6
(6mm de diâmetro) comum, permitindo com essa padronização que o usuário use suas impressoras com diferentes
diâmetros de bico.

image::image273.png[image,width=356,height=282]

O fatiador usará este número para saber qual é a espessura do filete que ele deposita. Se ele for preencher um
quadrado de 1,2mm x 1,2mm com um bico de 0,4mm, por exemplo, ele fará 3 linhas paralelas (3 x 0,4 = 1,2) de 1,2mm
de comprimento cada.

image::image274.png[image,width=642,height=304]

=== Ajuste IV: diâmetro do filamento

Aqui ocorre uma confusão comum: o _hotend_ da sua impressora 3D tem um tubo interno que ou é preparado para
filamentos de 1,75mm, ou é preparado para filamentos de 3mm. Este tubo será um pouco maior que o diâmetro nominal
do filamento, tanto para acomodar variações de filamentos quanto certa expansão térmica que irá acontecer, sem
ficar tão folgado que dê para o filamento dobrar. Então o tubo de um hotend preparado para 3mm terá, digamos,
3,1mm de diâmetro. Por outro lado, os próprios filamentos costumam ter o contrário desta folga: são fabricados
com o diâmetro _um pouco abaixo_ do nominal, pelos mesmos motivos. Um filamento vendido como "1,75mm" terá
normalmente algo por volta de 1,7mm, e um de 3mm variará em torno dos 2,85mm. Essas medidas podem ainda variar
mais dependendo do fabricante e até do lote de filamento.

Esse ajuste, no entanto, é muito importante para o fatiador calcular o quanto de material estará utilizando. É
a área da seção transversal do filamento vezes o comprimento que dá o volume de plástico que entra; coloque
um diâmetro menor que o realmente utilizado, e terá superextrusão; coloque um diâmetro maior, e terá
subextrusão. Essas duas situações são problemáticas. Uma recomendação que se costuma fazer é medir o
filamento em vários pontos e fazer uma média, e refazer a medida cada vez que se trocar o carretel de filamento
(os fatiadores permitem vários perfis de configuração de filamento).

image::image275.jpeg[image,width=412,height=383]

image::image276.png[image,width=634,height=300]

=== Ajuste V: temperatura do extrusor

Como no caso do diâmetro do filamento, este é só um ajuste inicial; você irá criar vários perfis diferentes
posteriormente, por exemplo um para ABS, outro para PLA. No caso ilustrado, consideramos que vamos inicialmente
usar ABS, então configuramos a temperatura do extrusor em 230°C.

image::image277.png[image,width=635,height=301]

=== Ajuste VI: temperatura da mesa

Este parte terá uma leve variação entre fatiadores pois alguns oferecem um "checkbox" para você dizer
se a impressora tem ou não mesa aquecida, e somente se estiver ligado permitem configurar uma temperatura. No
caso do Slic3r, se sua impressora 3D não tiver mesa aquecida, ou se tiver mas o material não necessitar dela
aquecida, basta colocar zero no campo. No nosso caso, usaremos ABS com um vidro acima da mesa, portanto usaremos
a temperatura-padrão de 120°C pra que a primeira camada fique acima da temperatura de transição vítrea. A
recomendação do Slic3r de 110° é adequada para mesas sem vidro. Note que algumas impressoras 3D podem não ter
potência suficiente para chegar a 120°C na mesa, caso em que a única saída é colocar um valor menor neste campo.

image::image278.png[image,width=634,height=300]

Terminamos a configuração inicial, e agora estamos prontos para usar o software!

image::image279.png[image,width=634,height=300]

== Revendo a configuração

Mas não acabou -- após a primeira execução, o assistente pode ser chamado novamente pelo item "Help" →
"Configuration Assistant"; mas é útil saber onde estão as configurações. A interface que aparece logo
após o assistente é essa:

image::image280.png[image,width=616,height=453]

Faremos uma modificação nas configurações gerais. O Slic3r inicia em "modo novato" (novice mode), em
que apenas as configurações mais simples são exibidas. Como queremos saber todas, vamos mudar para o modo
"Expert". Vá em "File" → "Preferences":

image::image281.png[image,width=248,height=278]

Vamos mudar "Simple" para "Expert". Para facilitar nossa operação, vamos também marcar a opção
"Remember output directory" para que ele lembre onde estamos gravando nossos arquivos ".gcode", que
enviaremos para a impressora 3D. A opção "Auto-center parts", quando ativada, faz com que ao abrirmos as
peças 3D para dispor em nossa bandeja virtual, ele automaticamente rearranje as peças para ficarem centralizadas,

Vamos também desabilitar o "background processing", e essa opção exige entender um pouco com o Slic3r, em
particular, funciona. Ele foi um dos primeiros fatiadores a surgir do projeto reprap, sucedendo espiritualmente um
anterior chamado "skeinforge" (que não é mais usado). Para facilitar o ritmo do desenvolvimento e o ingresso
de voluntários no projeto (lembre-se, ele é open-source e colaborativo), ele foi escrito em uma linguagem de
programação mais fáceis de usar e com mais recursos matemáticos disponíveis -- perl -, no entanto a linguagem
tem o ponto baixo de ter baixo desempenho e alto uso de memória. Hoje em dia grande parte desse problema foi sanado
e o perl é na verdade escrito em perl e C, com as partes que mais precisam de desempenho terem sido convertidas
pra linguagem mais rápida "C", mas ele ainda é visivelmente mais lento na operação de fatiar do que outros
fatiadores como Simplify3D e Cura.

O __background processing__, ou processamento de fundo, dispara o refatiamento a qualquer modificação feita
nas configurações ou nas posições das peças na bandeja virtual. Sabendo que esse processamento demora e
sobrecarrega o computador, isso pode não ser uma boa idéia. Desmarcando essa opção, o fatiamento só será
disparado quando realmente necessário, ou seja: quando o arquivo .gcode for ser gravado ou quando o botão
"print" for pressionado para controlar a impressão pela USB.

O botão "Print" só aparece, por sua vez, se a conexão "serial" (USB) da impressora for
configurada. Desmarcar a opção "Disable USB/serial connection" faz com que o slic3r possa exercer a função de
_host_ ou _controlador_ de impressão, ou seja, possa controlar a impressora pela USB e enviar automaticamente G-Code
para ela, tendo que ficar ligado durante todo o andamento da impressão. Fora os fatiadores que já mencionamos,
existem softwares que exercem somente o papel de host, como Repetier Host, Pronterface e Atelier; antigamente
o Slic3r não tinha as funções de host e o Repetier Host era bastante usado para gerenciar suas impressões,
pois sua interface é bastante sofisticada e completa para esse fim.

Alguns fatiadores e hosts, quando iniciados pela primeira vez, vasculham automaticamente as conexões seriais do
computador para ver se há uma impressora conectada e tentam uma autodetecção de parâmetros e modelos. O Slic3r,
por segurança, não faz isso.

O workflow de impressão irá variar bastante se você a gerencia pelo fatiador ou não. Vantagens de usar um
controlador de impressão:

* Você não precisa estar com a impressora 3D nem mesmo próxima; basta estar ligada pela USB ao computador. Não
precisa gravar e transportar pen drive ou SD Card até ela; * O andamento da impressão é claramente mostrado no
fatiador, com a seção sendo impressa aparecendo na tela em tempo real, de forma que fica muito intuitivo entender
o que está acontecendo.

Há desvantagens também:

* A velocidade de transferência pela USB é velocidade de __serial__, o que quer dizer que é muito baixa --
geralmente 115200 bps e no máximo 225000, velocidade dos _modens_ de 1995. É suficiente para conduzir a impressão
3D em tempo real, mas se a operação for transferir o arquivo .gcode para a impressora, a tendência é demorar.
* A impressão fica totalmente dependente do computador e o ocupando. Se o computador estiver com sobrecarga de
processamento e travando, a impressão sofrerá pausas que prejudicarão a qualidade de impressão; se ele der
alguma pane ou o fatiador fechar, a impressão terminará. E você não poderá sair do software de impressão
até a impressão 3D terminar, o que tipicamente leva várias horas para uma peça média.

Aprenderemos os dois modos aqui. Vamos deixar o fatiador configurado para poder controlar a impressora pela USB,
que é o modo mais geral. Vamos desabilitar o __disable__. Nossa configuração final das preferências ficará assim:

image::image282.png[image,width=284,height=377]

Confimando a seleção, o Slic3r nos pede que reiniciemos:

image::image283.png[image,width=336,height=117]

Saia do software e o chame novamente. Você perceberá uma nova aba, "Controller". Se clicar nas outras abas,
verá que em relação ao modo simples agora aparecem bem mais opções, divididas por seções laterais.

Vamos aproveitar e já configurar a impressora 3D para ser reconhecida pela USB. Clique na aba "Printer settings".

image::image284.png[image,width=589,height=568]

O ajuste de "Extruders" permite que o slic3r lide com mais de um extrusor, para impressões com dois ou mais
materiais simultâneos. E o "octoprint" é um software open-source que roda um servidor de impressão, ou seja,
um software que permite que você envie tarefas de impressão e as monitore pela rede. O Cura também permite tal
conectividade com o octoprint.

Vemos que existe um espaço para "serial port" nos ajustes que está em branco. Esta "porta
serial" é o dispositivo de comunicação com a impressora 3D (o cabo USB), e precisa de um
_driver_ para funcionar corretamente. Ele varia de acordo com o sistema operacional. No Linux,
ele já é integrado ao sistema e reconhecido automaticamente, não precisando de nenhuma ação
adicional. No Windows e Mac OS X, para essa porta ser corretamente reconhecida, é necessário a
instalação de um driver USB-pra-serial. Um endereço de web para baixar tais drivers é o seguinte:
http://www.silabs.com/products/mcu/Pages/USBtoUARTBridgeVCPDrivers.aspx[_http://www.silabs.com/products/mcu/Pages/USBtoUARTBridgeVCPDrivers.aspx_]

No Windows, para verificar qual porta foi criada, entre no gerenciador de dispositivos e procure por UART to
USB bridge:

image::image285.png[image,width=339,height=315]

Se tudo der certo, uma vez que o driver esteja instalado, a autodetecção do Slic3r vai funcionar nas opções,
quando você apertar a setinha que desenrola as portas disponíveis:

image::image286.png[image,width=493,height=286]

Selecionada a porta, a configuração "Speed" se torna automaticamente ativa. A grande maioria das impressoras
3D aceita a velocidade de 115200 bps, que é a configuração segura que usaremos. Algumas impressoras 3D aceitam
velocidade maiores como 225000 e 250000 (confirma o manual da sua impressora). Após entrarmos com a velocidade,
clicamos no botão "Test" para ver se a conexão funcionou com sucesso.

image::image287.png[image,width=447,height=282]

Na aba "Controller" agora já é possível inclusive se conectar à impressora para enviar alguns comandos
básicos. Como é um recurso recente do slic3r, o que se pode fazer por essa interface ainda é pouco -- mas o
importante é que a configuração habilita o comando "Print" da aba __Plater__, possibilitando que imprimamos
a partir da bandeja virtual.

image::image288.png[image,width=596,height=350]

image::image289.png[image,width=616,height=528]

O outro ajuste que da impressora 3D que configuramos mas ainda não apareceu é o diâmetro do bico. Basta clicarmos
no item _Extruder 1_ que o encontramos. Nada mais lógico; o bico é parte do hotend que é parte do extrusor,
logo a configuração fica aí.

image::image290.png[image,width=623,height=160]

Se tivéssemos mais de um extrusor, cada um deles teria um item de configuração para si, e eles poderiam ter
diâmetros de bicos diferentes. O item seguinte, __extruder offset__, só tem sentido para configurações com
vários extrusores e mesmo assim raramente vai ter valores diferentes de zero pois a posição relativa de cada
extrusor já é dada pelo firmware, liberando o fatiador deste ajuste.

Esta aba ainda tem configurações de retração por extrusor, mas trataremos dela mais à frente pois tem maior
relação com outras configurações de fatiamento.

=== O G-Code nosso de cada dia

Sorrateiramente, trouxemos o leitor até a aba de impressoras do Slic3r, porque na verdade a configuração
inicial de uma impressora tem um passo importante que é por vezes negligenciado: o __G-Code inicial e final__. Na
configuração do sabor de G-Code, o fatiador já coloca alguns valores _default_ de acordo com a configuração
nesses campos, mas algumas vezes esses valores não são suficientes.

E o que são esses campos? São códigos em formato de comandos de G-Code que serão sempre enviados em toda
impressão. São muito específicos ao modelo da impressora, contendo certas tarefas que ela espera serem executadas
por impressão, e podem mudar até de iteração de modelo -- por exemplo, a brasileira Sethi3D AiP A3 introduziu
a necessidade de dois comandos relacionados a autonivelamento de mesa que os modelos anteriores não tinham. Confira
no manual da sua impressora e não deixe de colocar os comandos certos nesses campos.

Além de inicialização e finalização, esses campos também permitem colocar certa "personalidade" à sua
impressão. No firmware específico da Sethi3D AiP (Repetier Firmware), o comando de G-Code "M120 S<frequência>
P<repetições>" toca um bipe na frequência determinada com tantas repetições e pode ser usada para uma
musiquinha de fim. Esse comando também ilustra as diferenças entre G-Codes: em outros firmwares, o M120 tem
outro significado e o comando que gera bipes é o M300. É a isso que nos referimos quando falamos em "sabor"
de G-Code. O site _reprap_ é usado como referência agregadora de todas as variações de g-codes usados nos
diferentes firmwares de impressoras 3D: http://reprap.org/wiki/G-code[_http://reprap.org/wiki/G-code_]

Tratamos g-codes em mais detalhes no capítulo "Diversão com G-Code", em que descrevemos o formato e passamos
dicas e truques para ele tornar a sua impressão melhor.

image::image291.png[image,width=622,height=639]

=== Diâmetro e temperatura

Faltam esses ajustes, e basta pensar que eles são específicos em relação ao __carretel de filamento
usado__. Enquanto para aquele seu carretel de PLA vermelho (cuja espessura medida é de 1,69mm) usa 220°C no
extrusor e 60°C na mesa, o seu outro carretel, de ABS azul com diâmetro médio de 1,72mm, você usará 235°C
no extrusor e 120°C na mesa. Você pode ter aquele PLA específico de 1,7mm cujo vendedor recomenda 190°C no
extrusor e mesa a 50°C, ou aquele PETG de 1,65mm em que usa 250°C no extrusor e 80°C na mesa. Esses ajustes
estão na aba de filamento do Slic3r e em outros fatiadores seguem o padrão de ter "perfis" ou "seções"
diferentes para que possa ter muitas dessas combinações armazenadas. Essa configuração pode se tornar bastante
complicada, caso o leitor tenha curiosidade tratamos mais a frente em detalhes.

image::image292.png[image,width=607,height=307]

=== O Multiplicador de Extrusão

Você sabe o que é o diâmetro e as temperaturas, portanto que _Extrusion Multiplier_ é esse? No Slic3r ele é
um número pelo qual ele modificará o seu cálculo de plástico a ser extrudado. Digamos que para determinada
camada ele calcula que gastará 15 mm^3^ de plástico e você põe o multiplicador de extrusão em 1.1; 15 * 1.1 =
16.5 mm^3^, que é o quanto ele realmente gastará de plástico, causando o que se chama de __superextrusão__. Em
alguns casos, a superextrusão pode ser útil para fazer camadas mais grossas, mais resistentes. O mesmo pode ser
dito da subextrusão, extrudar menos do que deveria (com o multiplicador em 0,9, por exemplo): tem uma utilidade
limitada na fabricação de detalhes mais finos ou rarefeitos.

Como pode isso acontecer? Por que deveríamos poder mudar o ajuste de quanto plástico sai da impressora, se ela
tem todas as medidas necessárias e consegue calcular o volume final?

Para responder a essa pergunta, é preciso entender o mecanismo de extrusão da impressora e as propriedades dos
materiais. A parte do mecanismo já vimos: um "pinhão" dentado crava seus fios no filamento, auxiliado por um
rolamento com mola para fazer pressão. Quando o pinhão rotaciona, esses fios, enterrados no plástico, empurram
o filamento para a câmara de derretimento. No entanto, os materiais mais flexíveis e moles, como o ABS, cedem
muito mais facilmente aos fios do pinhão, tendo eles enterrados profundamente, enquanto que os mais rígidos,
como PLA, oferecerão maior resistência. Esse contato diferenciado entre filamentos faz com que para a mesma
_velocidade angular_ (taxa com que o pinhão roda) se traduza em diferentes __velocidades escalares__.

image::image293.png[image,width=642,height=439]

Sempre é interessante ver a história da reprap, e o blogueiro _nophead_ tem um artigo
mais profundo sobre este problema da ‘mordida’ do pinhão que virou referência:
http://hydraraptor.blogspot.com.br/2011/03/spot-on-flow-rate.html[_http://hydraraptor.blogspot.com.br/2011/03/spot-on-flow-rate.html_]

Apesar deste fator, e apesar de o uso de um fator de extrusão para "compensar" esse movimento maior do ABS
(o vloqueiro Maker __Thomas Sanladerer__, em seus testes, recomenda usar um fator de extrusão de 90% / 0,9 para o
PLA com pinhões "MK8" padrão, considerando a impressora tendo sido calibrada com ABS), esta configuração é
abusada no meio da impressão doméstica, pois acaba sendo um "bandaid" que conserta temporariamente vários
problemas (como um filamento emborrachado que esteja escorregando). Em geral, no entanto, tanto superextrusão
quanto subextrusão são efeitos indesejados e que apontam contra a qualidade de uma impressão.

Isso é um pouco mais grave porquanto existam operadores que usam o multiplicador de forma __incorreta__, diferente do
que foi planejado. Vimos que colocamos a medida _real_ do diâmetro do filamento, a que medimos, e não a _nominal_
que seria de 1,75mm (ou de 3mm, caso você use este tipo). A razão disso é que ela entrará em muitas fórmulas
e algoritmos diferentes do fatiador na consideração de quanto plástico deve soltar, que outras compensações
deve fazer, a que velocidades, em que cantos e curvas e retas das formas que plota no espaço. Quanto mais este
valor diferir do real, e os fatiadores têm se tornado mais sofisticados com controles complexos de fluxo, mais
estas fórmulas divergirão, e menos controle do processo se tem. A forma incorreta de preencher estes valores
é a de colocar uma medida que não equivale ao diâmetro real do filamento e tentar "corrigir" esta medida
incorreta usando um multiplicador de extrusão que compense.

Por exemplo, coloca-se 1,75mm na medida do filamento (sem medi-lo) mas ao se tentarem impressões com esta medida,
percebe-se que as peças estão saindo ralas, com subextrusão. Isso acontece porque tal filamento tem a medida real
média de, digamos, 1,65mm. Por tentativa e erro, o operador descobre que se colocar um multiplicador de extrusão
de 1,06, as impressões ficam boas. E nesse ínterim ele perdeu plástico, tempo, e mesmo com o multiplicador
potencialmente não terá peças tão boas quanto se pusesse as medidas corretas (1,65mm e multiplicador de 1,0),
pois o fatiador está "acreditando" que o filamento tem realmente 1,75mm e calculando como devia, inclusive
levando em consideração outros multiplicadores, compensações e controles de fluxo que precisa fazer e só
está _compensando_ no final o seu resultado já processado.

O efeito do multiplicador de extrusão é mascarar defeitos na impressora, que podem ser inclusive com várias
causas distintas. Algum índice errado ou perdido no meio do caminho, alguma largura de camada -- não precisa
nem ser no fatiador, pode ser no firmware (como os passos por mm) ou um problema mecânico.

A lição aqui é: o multiplicador de extrusão é um índice para ser usado com muitas reservas e raramente. Ele
não serve para compensar uma impressora descalibrada ou medidas imprecisas. Use basicamente em "emergências",
quando por algum motivo que ainda não pode determinar, seu extrusor está causando super ou subextrusão e é
necessário corrigir. Note ainda que os _hosts_ de impressão costumam oferecer como recurso um multiplicador de
extrusão interativo, isto é, você o modifica em tempo real enquanto a impressão acontece; muitas das impressoras
3D que têm um painel de LCD também permitem fazer isto por este painel durante a impressão.

Alguns fatiadores -- o Cura, por exemplo -, ao invés de colocar um fator de multiplicação colocam uma
porcentagem. O efeito é o mesmo, é o fator multiplicado por 100. Um multiplicador de extrusão de 1,2 do Slic3r
é correspondente a um multiplicador de extrusão do Cura de 120% (e a nomenclatura no Cura para a configuração
deste item é __flow__, fluxo).

image::image294.png[image,width=553,height=390]

=== Os mesmos ajustes de sempre

Se você não se cansou _ainda_ de falarmos destas configurações, prepare-se porque vamos começar tudo de novo. A
razão é que há outros fatiadores, e precisamos dar bons parâmetros de comparação. Mais do que a nomenclatura e
as configurações de um fatiador específico, os conceitos é que são importantes, e são eles que serão fixados
na memória. Se ensinamos apenas um programa, daqui a 5 anos ele pode nem ser mais usado -- como aconteceu com
o fatiador __skeinforge__. Certas impressoras proprietárias têm fatiadores bastante diferentes, mas que usam os
mesmos conceitos. Certas pessoas terão preferência por um software ou outro. A todo dia aparecem novos fatiadores,
existe francamente uma corrida por recursos entre eles atualmente. Não há como ensinar um único software sem
estar fazendo uma aposta que quem paga é o leitor.

O Slic3r foi escolhido para ilustrar este livro porque ele é ao mesmo tempo rico em recursos, organizado
racionalmente e suficientemente genérico que sirva para intuir e ilustrar os ajustes de outros fatiadores.

=== Simplify3D

Este competente fatiador proprietário tem usabilidade boa e variados recursos únicos que mesmo com sua forma de
venda sem _trials_ ou versões limitadas lhe renderam uma boa parcela do mercado. Uma boa qualidade de fatiamento,
colocação manual de suportes que também são facilmente destacáveis fisicamente, um bom painel de controle
pela USB, suporte a variados tipos de arquivos de saída, recursos de sintonia fina e um polimento muito grande de
interface são os pontos fortes deste software, que é uma opção sólida para uso profissional com suporte oficial
e workflow produtivo. É necessário advertir, entretanto, que seu acordo de uso (EULA) proíbe o compartilhamento
dos arquivos produzidos com ele e engenharia reversa dos recursos e formatos do software. Softwares proprietários
inevitavelmente acabam tendo tais limitações por seu frequente apelo à escassez artificial; neste caso,
a proibição do compartilhamento de g-codes foi incluída para evitar que algum licenciado desse um jeito de
fatiar pela nuvem, o que permitiria muitos usuários usufruindo de uma única licença.

Todos os ajustes exibidos aqui são com o Simplify3D com a interface configurada no modo avançado, como fizemos
com o Slic3r.

No Simplify3D, a primeira aba se refere ao extrusor e nela já temos a configuração do diâmetro do bico, seguida
do multiplicador de extrusão. Curiosamente, temos também aí ajustes de retração associados ao extrusor,
algo que trataremos mais à frente.

image::image295.png[image,width=631,height=504]

Já as configurações de ajuste de temperatura do filamento o Simplify3D organiza numa aba à parte, em que
todos os elementos com temperatura controlável ficam organizados. Assim, você pode ter um elemento extrusor,
um segundo elemento extrusor (para quando tem extrusor duplo), a mesa aquecida e até ter elementos para câmara
aquecida e outras mesas aquecidas (algumas impressoras 3D de maior volume usam isso).

image::image296.png[image,width=529,height=450]

image::image297.png[image,width=531,height=429]

Anti-intuitivamente, os ajustes de forma e tamanho de mesa do Simplify3D ficam na aba G-Code, e os G-Codes de início
e fim não ficam nessa aba -- ficam na aba scripts. Veja no entanto que a forma de mesa é um "override" em
cima do __profile__. O Simplify3d tem uma organização diferente do Slic3r, ele tem os "profiles" que definem
categorias maiores (por exemplo, um profile por impressora 3D) e os "processes" que definem configurações
específicas (que é o diálogo que abrimos, e um "process" irá sobrepujar as configurações de mesa do
"profile" se o "Update Machine Definition" estiver ligado). Vemos também a configuração do sabor de
firmware e da velocidade da conexão USB-serial.

As configurações de máquina do Simplify3D permitem alguns ajustes que não vimos até agora: especificar
a direção em que o fim de curso ocorre e na visualização, inverter algum dos eixos. Ele também tem os
"offsets" de extrusor que a configuração do Slic3r oferece e que quase nunca são usados.

image::image298.png[image,width=611,height=459]

O diâmetro do filamento aparece na categoria "Other" (outros), outra organização não muito intuitiva de
configurações. Apesar de sua ululante excelência técnica, parece ter faltado aos arquitetos do Simplify3D um
pouco de criatividade para nomeação de diálogos. Nesta aba vemos também várias outras configurações que
dizem respeito à qualidade de impressão, que será o tema do capítulo seguinte.

Seguido do diâmetro, dois itens muito úteis aparecem: o *preço* do filamento por quilo e a densidade
do filamento. Estes dois índices dão base ao Simplify3D para que, após fatiar, ele calcule quantos gramas de
filamento você gastará (ele sabe o volume, tudo o que precisa para saber o peso é a densidade), e como ele tem
o peso, pode calcular também o custo financeiro do uso do material. Se o operador cobrar impressões 3D por peso,
pode colocar diretamente seu preço neste campo que quando realizar o fatiamento o Simplify3D já dirá quanto
ele deve cobrar.

image::image299.png[image,width=582,height=437]

=== Cura

É preciso esclarecer que para fins práticos, é sensato dizer que existem *dois* fatiadores de nome Cura: O que
tem a numeração até a série 15.04 (sendo a versão 15.04.6 a de manutenção mais recente) e o que foi quase
totalmente reescrito, cuja numeração na época da redação deste texto estava em 2.7.

image::image300.png[image,width=642,height=235]

O redesenho do Cura tem seus motivos. Muitos recursos a mais foram adicionados ao fatiador, mas a "poeira"
de tanta mudança ainda está se assentando. Quando um software sofre mudanças tais que perde recursos que antes
tinha, a esses recursos perdidos se nomeiam "regressões". Algumas regressões do 2.7 em relação ao 15.04,
por exemplo, são a importação de objetos no formato .AMF, a opção de configuração para preço do filamento
e a extrusão volumétrica.

Por outro lado, a diferença de recursos (novos) que o Cura novo tem em relação ao 15.04 é tão grande que não
valeria a pena listar aqui. Basta dizer que ele tem tantos recursos e tão granulares que permite que você ajuste
a _visibilidade_ deles.

image::image301.png[image,width=542,height=474]

Esse é, portanto, um grande diferencial dessa nova versão do Cura. Ele permite sintonia milimétrica de cada
pequeno detalhe do fatiamento, de forma que quem precisa de ajustes finos terá no fatiador, hors concours,
a melhor opção. O outro ponto forte que se ressalta do fatiador são os itens "experimentais", por assim
dizer, que ele tem: um ajuste que permite imprimir em "arame", sem utilizar camadas, a sua forma tridimensional
(impressão em arame/wire printing); um outro ajuste que introduz "ruído" na superfície do objeto, dando
aspecto rugoso ou acidentado (pele felpuda/fuzzy skin); suportes cônicos; malhas de preenchimento; mudança da
geometria do objeto para imprimir sem suportes; e tantos outros que ocuparão um bom tempo dos mais exploradores. O
software ainda se sobressai em realizar o fatiamento rapidamente (e ele ocorre em backgroud, automaticamente),
conseguir impressões de boa qualidade e ainda conseguir fazer a impressão demorar menos que em outros fatiadores.

Em termos de organização, o Cura não tem tantos painés, diálogos, abas como Slic3r e Simplify3D. Ele tem os
ajustes de impressão e impressoras; e permite a você definir "profiles" e "materiais" a partir dos ajustes
de impressão. Vários dos nossos itens iniciais, incluindo até mesmo o G-Code de início e fim de impressão,
estão diretamente no diálogo de configuração de impressora.

image::image302.png[image,width=615,height=531]

E os outros itens de nosso interesse -- temperaturas e diâmetro do filamento? Não é preciso procurar muito. Estão
logo no início, nas configurações de ajuste de material, seguidos pelo "flow" que é o multiplicador de
extrusão.

image::image303.png[image,width=614,height=563]

== Importação e disposição de peças na mesa

Uma vez tenhamos configurado esse mínimo no fatiador, já podemos -- antes mesmo de qualquer elaboração nas
configurações -- usar o software para montar nossa "mesa de impressão virtual", isto é, o que queremos
que saia na impressora. O caso mínimo seria uma forma tridimensional no tamanho e orientação exata em que foi
modelada, bem no centro da mesa, e nesse caso basta abrirmos a figura e mandarmos imprimir. Para todos os outros
casos, no entanto, devemos aprender como manipular, dispor e até editar as peças na mesa.

Antes, uma explicação: o ato de carregar as peças na mesa é comumente denominado de __importação__. E
é assim chamado justamente porque, em relação aos dados tridimensionais da peça carregada, o fatiador vai
associar uma série de outros dados: escala, orientação, posição, extrusor, filamento, suportes e outros
parâmetros. Alguns fatiadores, como Simplify3D e Cura, permitem salvar a mesa de impressão com todos os metadados
associados a ela, de modo que você poderá abrir depois e recarregar não só as disposições de todas as peças,
como as configurações associadas a elas. No caso do Simplify3D, tal arquivo é o ".factory", aquele mesmo
cuja engenharia reversa é proibida pela EULA do software (o que efetivamente proíbe outros softwares de poderem
importar o formato); no caso do Cura, elas são guardadas em um arquivo de formato aberto ".3mf". Alguns dos
fatiadores, como o Slic3r, permitem também _exportar_ a disposição da mesa como algum formato tridimensional
como STL ou AMF, mas perdendo os metadados de impressão.

Outra opção notável de "importação" é o fatiador carregar uma figura _bidimensional_ convencional como
GIF, JPEG, PNG e empregar um algoritmo para transformá-la em uma forma tridimensional. As melhores figuras para
objetos simples são as iconográficas em preto e branco, mas o software também processa figuras complexas de
muitos tons de forma a criar um "lithopane" ("quadro" com relevo saltado). Se o seu fatiador não suporta
esse tipo de importação, existem softwares gratuitos e livres que fazem essa transformação externamente, como
o multiplataforma __png23d__, que transforma bitmaps "png" em arquivos .STL ou de OpenSCAD. Existem vários
serviços de nuvem que fazem o mesmo, incluindo o próprio thingiverse, e o integrante da lista "reprapbr"
*JP* fez um software proprietário gratuito de lithopanes para Windows, com interface gráfica bem intuitiva:
http://www.imprimindo3d.com.br/software-para-impressao-de-lithophanes/[_http://www.imprimindo3d.com.br/software-para-impressao-de-lithophanes/_]

image::image304.png[image,width=642,height=678]

image::image305.png[image,width=623,height=416]

Uma vez importada a figura tridimensional, ela aparecerá por _default_ no centro da mesa. Se forem importadas várias
figuras, o software pode preguiçosamente dispô-las no centro sobrepondo as anteriores, ou pode rearranjá-las na
mesa. Esse comportamento é configurável (**Slic3r**: File → Preferences → Auto-center parts; **Simplify3D**:
Tools → Options → Models → Automatically center and arrange imported models; **Cura**: Preferences → Configure
Cura... → General → Ensure models are kept apart _e_ Automatically drop models to the build plate) e tanto
Simplify3D quanto Slic3r ainda disponibilizam um botão de arranjo instantâneo caso você tenha "bagunçado"
a mesa.

Se o formato que você importou foi STL e o arquivo tem múltiplos objetos, você pode ter um problema; como dissemos
ao mencionar o formato, ele não tem informações de "objetos separados", então o fatiador considera cada
arquivo STL carregado como um único objeto. Isso pode ser inconveniente para posicionamentos e transformações,
pois ele só permitirá a você operar em todos de uma vez. Para evitar isso, tanto Slic3r quanto Simplify3D
permitem a você separar os vários objetos:

image::image306.png[image,width=642,height=373]

Você vê que no menu do Slic3r ainda aparecem opções para manipulações dos objetos como rotacionar, "scale"
(redimensionar) e espelhar. Mas primeiro vamos ao mais básico: o melhor é primeiro você aumentar o seu campo
de visão, ou seja, _diminuir o zoom_ pra ver mais da tela. Você faz isso usando a rodinha do mouse; movendo pra
frente, a visão se aproxima e pra trás, ela se distancia. Isto funciona do mesmo jeito em todos os fatiadores.

No Slic3r, se você clicar e arrastar o objeto, ele é movido por cima da mesa. Já o Cura apresenta um menu de
manipulações à esquerda, a manipulação inicial é de "translação" (mover na mesa) e se você clicar
e arrastar a peça ela se move como no Slic3r. No Simplify3D é ligeiramente diferente: para mover a peça você
deve estar com a tecla _Ctrl_ apertada, clicar e arrastar. Sem o __Ctrl__, ele não mexe na peça, fazendo apenas a
_rotação_ do ponto de vista. A idéia aqui é evitar que se arraste as peças sem querer. Você pode ainda querer
somente _deslocar_ lateralmente e para cima/para baixo o ponto de vista (movimento que em inglês é referido como
__*pan*__). De uma forma mais organizada:

* Slic3r: Botão esquerdo na peça para arrastá-la; botão esquerdo fora das peças para rotacionar o ponto de
vista; botão direito ou do meio para __pan__.  * Simplify3D: Ctrl + botão esquerdo na peça para arrastá-la;
botão esquerdo em qualquer lugar para rotacionar o ponto de vista; botão direito para __pan__; o botão do
meio "reseta" a visualização. Esses atalhos podem ser mudados em Options → Preferences → Mouse/Keyboard
shortcuts e em especial se aconselha desmarcar o "[ ] Middle mouse button resets view" se você mexe com os
vários fatiadores, visto que será comum confundir as teclas.  * Cura: Com o modo "translação" selecionado,
botão esquerdo na peça para arrastá-la; botão direito em qualquer lugar para rotacionar o ponto de vista;
botão do meio para __pan__.

image::image307.png[image,width=642,height=401]

=== Configurações adicionais de posicionamento

Cada fatiador costuma vir com suas próprias facilidades e recursos extras de posicionamento e disposição,
e vale a pena explicitar como funciona em cada um deles.

* **Slic3r**: sendo ainda o mais simples dos três em sua interface, não tem muitos recursos especiais de
posicionamento e mesmo o posicionamento pela interface não é lá muito intuitivo. Também não ajuda o fato de
este fatiador nem mesmo implementar a função básica de **desfazer (undo)**^1^. Temos nas preferências gerais um
ajuste para auto-centralizar peças, na interface da mesa um botão para "arranjar" as peças automaticamente e o
botão direito para uma série de operações, ajustes e configurações por objeto. Um ajuste de posicionamento que
merece menção especial, no entanto, é a de rotação das peças. Como ela é feita somente pela especificação
de um número (os graus de rotação em relação ao eixo), pode ser muito difícil visualizar como tal rotação
acontece.  + Nesse sentido, é útil resgatar um pouco de teoria da modelagem tridimensional. Os softwares de
tratamento de forma 3D seguem a *regra da mão direita* para rotação.

image::image308.png[image,width=642,height=499]

1.  [[section-11]] === image:image309.png[image,width=642,height=319] + O Cura faz as rotações
com o mesmo referencial (pois ele permite entrar valores), mas o Simplify3D pode confundir quem não quiser usar o
modo interativo e colocar os valores diretamente, pois a representação _default_ dos eixos dele inverte o Y pois
assim a visualização da impressão em impressoras 3D cartesianas fica mais fácil. Para a rotação funcionar
segundo a regra da mão direita, é preciso desmarcar a inversão do Y, ou simplesmente decorar que os sentidos
de rotação numérica, no default dele, são invertidos.

image::image310.png[image,width=507,height=364]

* **Simplify3D**: As configurações de visualização, posicionamento e disposição estão espalhadas pelo menu
*Tools* → *Options* do fatiador: + image:image311.png[image,width=463,height=605] + As importantes
para nosso caso serão: ** *Swap mouse scroll wheel zoom direction* -- faz com que o sentido da rodinha do mouse
se inverta: para trás diminuirá e para frente aumentará o zoom.
** **Middle mouse button resets view**: caso
o ângulo de visualização esteja muito ruim, você pode resetá-lo para o _default_ simplesmente pressionando o
botão do meio do mouse. Se você usa vários fatiadores ou programas de modelagem, é recomendado desligar esta
configuração pois muitos deles usam o botão do meio para outras funções, levando a pressioná-lo sem querer
no fatiador e perdendo a visualização em que estava.
** **Always show full 3D transform gizmo**: para fazer
as transformações visualmente o Simplify3D apresenta "gizmos" (controles) em que se clica com o mouse para
realizá-las. Com essa configuração selecionada, o fatiador sempre mostrará os 3 eixos para transformação ao
invés de somente um.

image::image312.png[image,width=642,height=263]

* Na aba *Machine* temos novamente de interesse a possibilidade de ligar ou desligar na configuração default o
"flip Y" visto na regra da mão direita.  * Na aba *Models* temos o "**Automatically scale to correct unit system
without prompting**". Como vimos, o formato STL não inclui unidades, embora seja assumido o milímetro. Quando
o Simplify3D importa um objeto e ele é pequeno demais, ele assume que foi gravado em _polegadas_ (inches), que
são maiores. Normalmente ele mostra uma janela de diálogo ao importar tais peças, mas com essa configuração
ligada ele transforma a figura automaticamente para polegadas (uma polegada é igual a 25,4 milímetros, ou seja,
ele aumenta a figura em 2540%).  * Ainda na aba *Models* há a opção para ele dispôr as peças automaticamente
conforme os modelos são importados, **Automatically center and arrange imported models**. Como ele já possui
o botão *Center and Arrange* na interface principal, desligar essa configuração pode ser útil quando se quer
"fundir" peças ou posicioná-las livremente.  * Interativamente, o Simplify3D tem dois ótimos atalhos para
manipular posição e rotação; são eles o *Ctrl-T* (drop / largar peça) e *Ctrl-L* (align / alinhar com a mesa).
** O *Ctrl-T* analisa a peça e vê onde é a posição mais baixa dela no eixo Z, e alinha essa posição para ter Z=0
(ou seja, encosta na mesa). Na prática esse modificador serve para "largar" peças de modo que encostem na mesa
(não fiquem flutuando) ou, se a peça estiver com partes __para baixo da mesa__, colocá-la acima.  ** O *Ctrl-L*
é uma função mais útil: uma vez apertada a combinação de teclas, permite ao usuário selecionar uma _face_
da peça. Quando clicada com o botão do mouse, o fatiador rotaciona a peça de modo com que essa face se alinhe
com a mesa, e aí realiza a função de "largar" a peça nessa rotação de modo que encoste na mesa. Veja
que se a face selecionada não for a mais baixa na peça, ela não encostará na mesa, apenas ficará alinhada.
+ Tanto no Ctrl-T quanto no Ctrl-L as modificações de posicionamento e rotação ficam armazenadas nos campos
numéricos do objeto, e podem ser zeradas restaurando o objeto a coordenadas "default".

image::image313.png[image,width=642,height=366]

* **Cura**: as opções gerais do Cura, que afetam visualização e posicionamento, podem ser um pouco difíceis
de compreender. A tela de configuração pode ser acessada no Menu __Preferences → Configure Cura → General__:

image::image314.png[image,width=642,height=530]

As opções pertinentes são:

* **Viewport Behaviour -- Display overhang**: na visualização default, com essa opção ligada mostra em
vermelho brilhante os overhangs/seções pendentes da forma.
* **Center camera when item is selected**: desliza
a visualização da câmara para focalizar em um objeto quando se o seleciona (sem mudar o nível de __zoom__).
* **Ensure models are kept apart**: já mencionada, com ela ligada os modelos são espaçados de forma a não
colidirem ou se penetrarem.
* **Automatically drop models to the build plate**: automaticamente deixa os objetos
importados ao nível da mesa (sem rotacioná-los).  * As três opções seguintes são relacionadas e merecem uma
explicação: sendo uma aplicação __OpenGL__, isto é, que se vale de aceleração de hardware para desenhar as
formas tridimensionais na tela, o Cura em sua inicialização tenta ativar a renderização, mas se não consegue
(o que pode acontecer por a máquina não ter hardware para isso ou não ter o driver instalado), cai em __modo
de compatibilidade__, bem mais lento. Nesse modo de compatbilidade, as opções servem para não sobrecarregar
o processador. Veja que elas só valem para a __visualização de fatiamento__, não para a visualização 3D
default. A *Only display top layer(s) in layer view compatibility mode* faz com que nessa visão _só_ seja mostrada
a camada superior ou camadas superiores do intervalo, e a *Display five top layers in layer view compatibility mode*
diz que o número dessas camadas superiores mostradas é cinco. A opção *Force layer view compatibility mode
(restart required)* força que o Cura já inicie em modo de compatibilidade sem tentar ativar a aceleração de
hardware, e só começa a valer quando a aplicação é reiniciada.
* **Scale large models**: com essa opção
ativada, verifica se a peça cabe no volume de impressão configurado, e se não couber a reduz até que caiba.
* **Scale extremely small models**: como no simplify3d, se detecta se a peça é pequena demais (mais de 100 vezes
menor que o volume de impressão) e calcula um multiplicador de potência 10 para ela que a coloque em um tamanho
mínimo dentro deste volume.

* **Rotação, posicionamento e modificação interativa**: como mostrado na figura 135, o Cura dispõe de várias
opções para posicionamento, rotação, modificação, etc., e para cada uma delas um controle (gizmo) diferente. Por
__default__, os controles têm uma "grade" de valores em que ficam, mas se você deixar a tecla *Shift*
apertada pode fazer ajuste fino. O mesmo efeito pode ser dado desselecionando o "snap" do controle específico.

image::image315.png[image,width=577,height=432]

* **Rotacionar a peça na mesa para obter orientação ótima**: esta opção do Cura aparece
em _Extensions → OrientationPlugin → Calculate optimal printing orientation_ caso o
_OrientationPlugin_ esteja habilitado nas preferências. O que este plugin faz é analisar a
geometria da peça de forma e rotacioná-la de forma a maximizar o espaço de contato com a mesa
e diminuir o suporte necessário. Uma explicação do algoritmo pode ser lida (em inglês) em
http://www.salzburgresearch.at/blog/3d-print-positioning/[_http://www.salzburgresearch.at/blog/3d-print-positioning/_].

Notas:

1 -- O Slic3r é software livre e open-source, e qualquer um com conhecimento de
programação pode ajudar a resolver estes problemas. No momento da redação deste
livro, um relato de bug está aberto para a implementação do recurso de desfazer em
https://github.com/alexrj/Slic3r/issues/3265[_https://github.com/alexrj/Slic3r/issues/3265_] e um patch já foi
escrito para resolvê-lo: https://github.com/alexrj/Slic3r/pull/4100[_https://github.com/alexrj/Slic3r/pull/4100_].

=== Corte / divisão de peças

Exclusividade do Slic3r, essa função não existe nos outros fatiadores e serve para dividi-la em duas metades
usando de um plano de corte. Para ativá-la, você pode selecionar o objeto e apertar o botão de menu "Cut",
ou clicar com o botão direito e selecionar a opção "Cut".

image::image316.png[image,width=642,height=818]

1.  [[section-12]] === + [[section-13]] === image:image317.png[image,width=642,height=441] +
=== Simulando o corte no Cura e Simplify3D

Apesar de esses fatiadores não terem uma função de corte específica como o Slic3r, é possível usar um editor
de objetos tridimensionais externos como Blender, Meshlab e Meshixer para cortar a peça. Mas também é possível
"simular" esta função se aproveitando do fato que os fatiadores ignoram as partes da peça com coordenadas
menores que zero (abaixo da plataforma virtual de impressão). A desvantagem principal desta abordagem é perder
a flexibilidade de orientar a peça como desejar (já que ela vai ter necessariamente que estar horizontal em
relação ao "plano de corte") e também de ter que saber a dimensão e posicionamento exatos para fazer tal
corte. Demonstraremos no *Cura* pois é trivial saber como fazer as mesmas transformações no Simplify3D, dado
o que já ensinamos.

=== image:image318.png[image,width=578,height=377]

image::image319.png[image,width=579,height=422]

image::image320.png[image,width=623,height=379]

image::image321.png[image,width=613,height=346]

== Impressão contínua vs. sequencial

Um recurso que todos os fatiadores oferecem, mas de formas diferentes, é a possibilidade de o usuário escolher
como quer que as peças da mesa sejam impressas, quando há várias: todas ao mesmo tempo (a primeira camada de
todas elas, então a segunda camada de todas, etc...) ou uma de cada vez. O primeiro modo é chamado de _impressão
contínua_ e o segundo caso de __impressão sequencial__.

Se a idéia é simples, por que os fatiadores a tratam de forma diferente? Ora, temos que nos lembrar que fatiadores
são softwares genéricos pra tratar uma gama enorme de modelos e tipos de impressoras 3D, e a construção delas
varia bastante, afetando muito o modo como podem tratar a impressão sequencial. Uma Graber i3, com seu carro X
ocupando espaço poucos centímetros acima da altura do bico, não tem a capacidade de fazer várias peças altas
ao mesmo tempo, pois voltaria à coordenada vertical zero e acabaria batendo o carro nas peças já impressas. Já
uma delta tem apenas o volume bem mais vertical do _effector_ e dos braços, podendo imprimir livremente peças
altas em sequência sem colidir com nada. Uma CoreXY, por outro lado, vai ser ainda mais limitada pois tem dois
carros horizontais e as únicas peças que conseguiria imprimir são aquelas de no máximo a altura dos eixos.

E mesmo essas limitações não são absolutas. Numa Graber i3 você pode imprimir as várias peças em fila indiana
no eixo Y e nesse caso seria possível a impressão sem colisão. Mas determinar essa solução pra casos gerais
é virtualmente impossível, pois existem muitas formas de construção e sistemas de eixos de impressoras 3D,
e provavelmente muitos outros a serem inventados. Portanto, você não informa detalhadamente ao seu fatiador o
sistema de eixos que usa e suas limitações específicas, você informa dados mais simples. E aí temos a diferença:
cada fatiador pede dados ligeiramente diferentes para saber se a impressão atual baterá nessas limitações.

[[FEITO continuavssequencial]]image:image322.png[image,width=621,height=450]

O modo default dos fatiadores é o contínuo. Como os diferentes fatiadores tratam o problema:

* Slic3r: A seção _Output options_ (opções de saída) dos _Print Settings_ é onde se trata o modo sequencial. Para
ativá-lo, ligue o "Complete individual objects". Para saber como tratar colisões, o Slic3r trata o problema de
maneira bem simples: exige o "raio" do extrusor e a altura em relação ao extrusor em que o sistema de eixos
está. Se houver mais de um extrusor e o deslocamento estiver configurado no Slic3r ele usará esses ajustes,
mas como geralmente o deslocamento está no firmware, o que se usa nesses casos é somar a distância entre os
extrusores e os raios deles para o controle de colisão.

image::image323.png[image,width=529,height=212]

image::image324.png[image,width=601,height=396]

O Slic3r usa esses dados para avisar sobre colisões já enquanto se arrumam os objetos na mesa. Deixá-los próximos
demais de tal modo que o cilindro colida com algum objeto fará a barra de status mostrar o aviso "Some objects
are too close; your extruder will collide with them" ("Alguns objetos estão muito próximos; seu extrusor
colidirá com eles"). Se os objetos estiverem separados, mas ainda forem maiores que a altura _h_ dos eixos,
ele avisará "Some objects are too tall and cannot be printer without extruder collisions" ("Alguns objetos
são altos demais e não podem ser impressos sem colisões do extrusor".

image::image325.png[image,width=578,height=461]

* Cura: como o Slic3r, tem a *altura dos eixos* configurável nas definições de impressora: Preferences →
Printers → Machine Settings → Gantry height. No entanto ele não tem a opção de "raio" ou volume do
extrusor/hotend porque na verdade esses dados estão precisamente especificados internamente para cada modelo de
impressora; ao invés de ser somente um círculo, o arquivo __json__^1^ que define características mecânicas da
impressora 3D permite especificar um polígono com várias arestas. No entanto, como editar esses arquivos-texto
exige conhecimento avançado e muita consulta, na prática esse dado está indisponível para o usuário comum. Por
outro lado, ele tem os dados simplificados "printhead settings" que permitem dizer o mesmo, sendo apenas
distâncias horizontais do bico aos extremos do extrusor.

image::image326.png[image,width=642,height=508]

image::image327.png[image,width=642,height=294]

Se você tem uma impressora corretamente cadastrada entre as impressoras do Cura, o dado da forma do extrusor já
estará configurado como devia. Se estiver usando um perfil genérico, para o extrusor sem ventoinha ele usa as
medidas de um quadrado de 2mm de lado, e com ventoinha um retângulo de 30mm no eixo X e 20mm no eixo Y. A altura do
eixo (gantry height) está em 20mm também, e se quiséssemos que o Cura não a levasse em consideração bastaria
colocar um valor bem alto, como 99999999.

image::image328.png[image,width=619,height=468]

* Simplify3D: O Simplify3D começa com a abordagem de simplesmente _não ter_ o raio, medida ou formato do extrusor,
tendo especificável (mas não configurável) somente a altura de colisão do eixo. Dessa forma, ele deixa a tarefa
de espaçar corretamente as formas na mesa inteiramente para o operador. O modo sequencial é dado na hora em que
o Simplify3D vai executar o fatiamento, e nesse momento você deve especificar a altura dos eixos.

image::image329.png[image,width=598,height=379]

E mais uma diferença do Simplify3D é que a sequência não é dada entre cada _peça_ na mesa e sim entre
cada __processo__. Isto significa que se você tem 30 peças, se quiser imprimi-las em sequência precisará de
30 processos, um para cada uma, mesmo que sejam processos idênticos.^2^ + Mas a melhor diferença ficou para o
final: o Simplify3D não se nega a fatiar se a altura do objeto ultrapassar a altura dos eixos. Ao invés disso,
ele divide em seções: como a altura máxima que ele consegue obter é, digamos, os 20mm que especificamos,
ele imprime os processos em sequência até chegar a 20mm em cada um deles; então, na altura 20mm + uma camada,
ele reinicia a sequência até completar 40mm; e daí em diante, até completar todos os objetos.^3^

image::image330.png[image,width=591,height=449]

Neste caso a vantagem do Simplify3D sobre Cura e Slic3r é aparente, mesmo não tendo a análise mais completa
levando em conta o formato do hotend ou extrusor. Resta esperar que tais recursos sejam também implementados
nesses fatiadores!^4^

Notas:

[[FEITO_disposicao]]1 -- Ainda assim, é possível editá-lo com um editor de textos comum. Ele se situa em
__cura/resources/definitions__, tem o nome terminado em _.def.json_ e a lista de variáveis com explicação pode
ser encontrada em https://github.com/Ultimaker/Cura/issues/798[_https://github.com/Ultimaker/Cura/issues/798_]. O
formato do extrusor é dado pelas variáveis _machine_head_polygon_ e __machine_head_with_fans_polygon__.

2 -- Ainda assim, você pode tentar pressionar os desenvolvedores do
Simplify3D para que implementem impressão sequencial em processo único:
https://forum.simplify3d.com/viewtopic.php?f=23&t=1763[_https://forum.simplify3d.com/viewtopic.php?f=23&t=1763_].

3 -- Referência em
https://www.simplify3d.com/support/articles/multi-part-printing/[_https://www.simplify3d.com/support/articles/multi-part-printing/_]

4 -- Por conveniência, o autor abriu relatos de bugs tanto para Slic3r quanto para Cura pedindo este recurso
neles, a seguir: https://github.com/alexrj/Slic3r/issues/3739[_https://github.com/alexrj/Slic3r/issues/3739_]
e https://github.com/Ultimaker/Cura/issues/1493[_https://github.com/Ultimaker/Cura/issues/1493_].

== Outra camada de configurações...

...ou configurações de camada? Pois agora que terminamos a __base__, o mínimo que uma impressora precisa para
começar a funcionar, precisamos saber como fazer uma impressão viável (isto é, que chegue à peça final sem
problemas no meio do caminho) e de qualidade (qualquer que seja o fator de qualidade que adotemos: resistência
a tração, a compressão, superfície suave, detalhes finos, aparência esteticamente agradável, etc.).

E se queremos detalhes, precisamos evitar ao máximo o efeito "degrau" que pode acontecer com camadas de
impressão muito grossas, análogo à pixelização que se vê em gráficos de computadores antigos. A _altura de
camada_ (__layer height__, em inglês) é, na prática, a "resolução" da impressora 3D.

image::image331.png[image,width=528,height=423]

A altura de camada será limitada fisicamente pelo diâmetro do bico, já que é ele que determina a altura máxima
que o filete de plástico consegue atingir. Via de regra, não é recomendável usar uma altura de camada maior que
80% do diâmetro do bico, pois o que acabará acontecendo é que o fatiador vai superextrudar para tentar atingir tal
altura e o que sairá sera um filete embolado, não mais alto. Também não é muito recomendável usar uma altura
de menos de 20% pois o plástico terá uma subextrusão tão acentuada que acabará picotado, enroscando no bico ou
ainda com outros problemas. Portanto, para um bico padrão de 0,4mm se recomenda uma altura de camada entre 0,08mm
e 0,32mm -- tendo sempre em vista que essa "regra" é apenas uma orientação, com muitos casos em que não vale.

image::image332.png[image,width=642,height=573]

Uma camada mais fina torna em geral a superfície mais suave e portanto pode parecer sempre desejável, mas tem
desvantagens. Como o extrusor se movimenta na mesma velocidade quer esteja fazendo uma camada de 0,3mm, quer uma de
0,1mm, e como as peças com camadas de 0,1mm terão três vezes mais camadas, a impressão demorará 3 vezes mais
tempo com a camada de 0,1mm. Como uma impressão 3D já é algo que pode levar horas pra concluir, multiplicar este
tempo por 3 nem sempre é factível. Existem alguns "macetes" que permitem diminuir este tempo, como fazer as
paredes de 0,1mm e o preenchimento interno de 0,3mm, algo que falaremos mais à frente.

Outro problema é que temos maior laminação com mais camadas, e já vimos que a baixa aderência entre camadas é
um fator que atenta contra a resistência da peça. Quanto mais camadas, mais espaço intersticial, e menos robusta
a peça será. Outras propriedades podem pesar contra camadas finas: quando se usam filamentos transparentes,
o grau de refração é maior com camadas menores, então pode ser desejável usar camadas grandes para obter
maior grau de transparência.

Os motores, fusos e pinhões do mecanismo que movimenta o eixo Z de sua impressora terão impacto na qualidade
de camada. Um descompasso entre rotações completas da barra roscada ou fuso com a altura de deposição do
plástico pode trazer deslocamentos micrométricos mas relevantes, e a empresa Prusa Research disponibiliza via web
um mecanismo de cálculo de vários índices para sua impressora 3D, entre eles a de "altura de camada ideal"
considerando o mecanismo.

image::image333.png[image,width=596,height=631]

== Controle de altura de camada e fatiamento adaptativo

[[FEITO adaptive_slicing]]Por bastante tempo, o Slic3r tem tido um recurso que é tanto bastante útil como pouco
usado, que é o ajuste fino de controle de camadas por altura. Embora outros fatiadores também permitam isso de
várias formas -- como o Simplify3D com seus "processos" --, o que chama atenção no recurso é a rapidez e
facilidade com que isso é feito: selecionando o objeto, clicando com o botão direito e selecionando "settings"
para configurações _por objeto_ e usando a aba "layers" pra definir os intervalos de altura e as alturas de
camada que terão (valores fora desses intervalos terão a altura de camada da configuração geral).

image::image334.png[image,width=549,height=460]

O _fork_ do Slic3r da Prusa Research, o Prusa Slic3r, levou este conceito mais adiante e permite uma configuração
suave e visual das alturas de camada:

image::image335.png[image,width=521,height=455]

E como se usa esta facilidade? Ora, se você já enxergou uma peça impressa e o efeito de "escada" ou
"serrilhado" na vertical especialmente nas partes que deveriam ser curvas suaves, sabe o problema de se dividir
uma forma em fatias. Quanto menor a espessura dessa fatia, mais suave fica a forma, mas também mais tempo se leva
para imprimi-la. E muitas formas têm seções com linhas mais retas e verticais que realmente não se beneficiariam
das camadas mais finas como as outras, mais suaves e curvilíneas. Não seria portanto ideal que somente as camadas
necessárias fossem mais finas, numa graduação de acordo com sua suavidade ou inclinação?

É mais ou menos isso que se tenta obter, geralmente, quando se editam as alturas de camada em intervalos tanto
no Slic3r quanto o Prusa Slic3r. No entanto, inclinações e suavidades de curva são propriedades geométricas
que podem facilmente ser analisadas, e o procedimento pode perfeitamente ser automatizado. Essa é a idéia já bem
antiga de __fatiamento adaptativo__, mas que recentemente tomou renovado interesse com o algoritmo __VariSlice__™ da
Autodesk^1^, criado pelo time de desenvolvimento da impressora 3D DLP open-source Ember. O algoritmo foi implementado
na linguagem Processing (Java) e seu código-fonte disponibilizado sob licença open-source, podendo gerar tabelas de
alturas para camadas para serem importadas no Slic3r. O time de desenvolvimento da Ember também está participando
da implementação independente da idéia feita pelo usuário __platsch__no Slic3r, com uma combinação das idéias
de manual e automático: o algoritmo inicialmente faz a análise e ajustes das alturas de camadas automaticamente,
com o usuário podendo alterá-las.

image::image336.png[image,width=642,height=581]

=== Valor da cúspide

Se a configuração de altura de camada mínima e máxima é fácil de entender, nem tudo é simples no fatiamento
adaptativo. Um valor mais complexo que também pode ser entrado é o _cusp value_ (valor da cúspide). Cúspide
é a ponta ou extremidade aguda de algo, e neste termo ele se refere ao encontro entre as camadas -- o ponto
mais distante da curva da forma. A distância máxima deste ponto em relação à curva é o valor da cúspide^2^,
configurável para o fatiamento. Um valor de cúspide igual a zero fará com que as camadas nunca se desviem da
média das curvas, e as deixará sempre no valor mínimo. Um valor de cúspide igual ou maior que a altura de
camada máxima deixará as camadas sempre no valor máximo.

image::image337.png[image,width=535,height=241]

image::image338.png[image,width=579,height=508]

=== Em outros fatiadores

O Slic3r não é o único fatiador a ter fatiamento adaptativo, mas parece ser o que a implementa de forma mais
consistente, configurável e modificável. Outros fatiadores que a implementam com parâmetros mais automáticos
são o open-source _repsnapper_ e o proprietário __voxelizer__. No caso do repsnapper é apenas uma opção a
ser ligada ou desligada e no caso do voxelier só o tamanho de camada mínimo e máximo são configuráveis.

image::image339.png[image,width=518,height=432]

image::image340.png[image,width=567,height=352]

1 -
http://www.instructables.com/id/Variable-Slicing-for-3D-Printing-on-Autodesk-Ember/[_http://www.instructables.com/id/Variable-Slicing-for-3D-Printing-on-Autodesk-Ember/_]

2 - http://kalanka.de/blog/adaptive-slicing/[_http://kalanka.de/blog/adaptive-slicing/_]

3 - https://github.com/platsch/Slic3r/tree/adaptive-slicing[_https://github.com/platsch/Slic3r/tree/adaptive-slicing_]

=== A Importância da Primeira Camada

image::image341.png[image,width=636,height=357]

A altura de camada __da primeira camada__, diferente das camadas da peça inteira, costuma levar diferentes
considerações e tem seu tamanho ajustável de forma independente das outras camadas. Isso acontece porque a
primeira camada é a mais crítica para toda a impressão: ela define quão bem a peça estará aderida à mesa,
portanto quão estável ela ficará durante toda a impressão. Faça uma primeira camada ruim e sua impressão
falhará de alguma forma: no melhor caso, as quinas do objeto levantarão e você terá _warp_ na peça, no pior
caso a peça pode tombar e ser jogada em algum mecanismo da impressora, levando a danos físicos na impressora
ou até acidentes mais sérios.Manter o nivelamento da mesa bem calibrado, com a distância entre a ponta do
bico e a mesa sendo de um cartão de visitas (0,3mm), é essencial para o bom funcionamento da impressora 3D,
assim como manter a mesa perfeitamente horizontal em relação ao plano XY, caso contrário em um extremo da mesa
o bico encostará nela na coordenada Z zero, mas em outro extremo o bico ficará levantado ou afundado. As mesas
de impressora 3D são sustentadas por molas inclusive por causa das situaçõs em que o bico afundaria nelas --
isso dá um tempo de manobra para o operador intervir e impedir danos permanentes ao maquinário.

A situação atual da tecnologia já melhorou bastante em relação a 2009, com procedimentos como regulagens
manuais de parafusos de cada canto sendo cada vez mais raros nas impressoras 3D de hoje. A maioria já adota o
nivelamento automático (com a mais recente Prusa i3 MK2 adotando o refinadíssimo nivelamento de malhas) e ter
a distância do bico para a mesa bem ajustada acaba sendo mais uma questão de ter endstops precisos e um ajuste
de firmware (o deslocamento da sonda do Z) com a medida correta.

Dito isto, é de interesse do usuário saber que o próprio G-Code nunca extruda da coordenada Z zero. Considera-se que
isso seria extrudar plástico completamente encostado na mesa, o que gera pressão extra e pode bloquear e entupir
o bico. O fatiador inicia suas impressões da altura de camada inicial mais um "offset geral" configurável
para a máquina. Não confunda o _offset_ (deslocamento inicial) com a altura da primeira camada, tratada mais adiante.

image::image342.png[image,width=626,height=287]

=== Babystepping

[[FEITO babystepping]]Um recurso muito útil dos firmwares mais populares (mas não ativado por __default__) é o
__babystepping__, ou __passos de bebê__. É um recurso usado somente em modo interativo, e disponível apenas em
impressoras 3D com LCD e controles, e apesar de disponível para os 3 eixos X, Y e Z, a sua principal utilidade
é para o eixo Z, especialmente por esse ser o eixo com a maior granularidade de posicionamento da maioria das
impressoras 3D do mercado.

O _babystepping_ consiste em corrigir micrometricamente -- para baixo ou para cima -- a altura do extrusor __em
tempo real__, ou seja, __enquanto ele imprime__. Se você começou a impressão e percebeu que o filete não está
saindo tão espremido (ou está tão rente à mesa que o filamento não sai), você pode navegar nos menus do LCD e
selecionar o _babystepping_ para acertar esse posicionamento com precisão bem alta, e salvar a sua impressão. Esse
ajuste de posicionamento não é gravado, e é resetado no primeiro _home_ ou autonivelamento da impressora. A
medida obtida no ajuste fino pode ser depois utilizada como correção no firmware para impressões posteriores.

A utilidade do _babystepping_ é múltipla. Pode obviamente ser usado para impressoras sem autonivelamento que
estejam "um pouquinho fora" da altura ideal, mas também serve para impressoras com autonivelamento com offset
incorreto ou ainda que use sensor de nivelamento de baixa precisão, que às vezes pode obter medidas um pouco
fora das desejadas. Teoricamente ele também poderia ser ajustado para quando a impressora perde passos em um eixo,
mas dificilmente alguém percebe tal momento em uma impressão de múltiplas horas.

Para usar a função de _babystepping_ no LCD (a impressão já tem que ter iniciado):

__Repetier Firmware__: Menu, Quick Settings, Z babystepping, usar o botão rotativo para ajustar.

__Marlin Firmware__: Menu, Tune, dar scroll até Babystep Z, usar o botão rotativo para ajustar.

O Smoothieware não tem _babystepping_ no LCD e não implementa o G-Code M306 usado para isto, visto
que foge dos padrões de código deles. Ao invés disto, usa um esquema de diferentes sistemas de
coordenadas através do comando "G10 L2". Mais detalhes podem ser vistos no fórum do smoothieware:
http://forum.smoothieware.org/forum/t-1765243/in-print-z-height-adjustment-babystepping[_http://forum.smoothieware.org/forum/t-1765243/in-print-z-height-adjustment-babystepping_]

Para aparecer nos menus e poder ser usado, o babystepping tem que ser configurado no firmware como ativo e regravado
no microcontrolador da impressora 3D.

=== A altura da primeira camada

Existem duas estratégias diferentes e "quase opostas" para lidar com os ajustes de primeira camada
nos fatiadores. A primeira estratégia envolve configurar uma primeira camada _mais grossa_ que o resto da sua
impressão e funciona bem nos fatiadores que automaticamente reajustam a extrusão de acordo, como o Slic3r e Cura;
por exemplo, se você está imprimindo a 0,2mm, colocar a primeira camada com 0,3mm funciona bem: o filete sairá
mais volumoso, terá maior área de contato, a altura extra absorverá as submilimétricas diferenças que ocorrem
em toda a extensão da superfície, e resto da sua impressão procederá de acordo.

No Simplify3D e outros fatiadores que _não_ reajustam a extrusão de acordo com a altura da primeira camada (sendo
um ajuste à parte), é recomendado que você coloque uma altura de primeira camada __menor__, mantendo a extrusão
dessa primeira camada (referida como extrusion width) a mesma. Assim a mesma quantidade de plástico que ocuparia
0,2mm que é a sua altura de camada principal passa a ocupar 0,1mm, deixando essa camada bem "apertada" na
mesa e portanto com bastante aderência.

image::image343.png[image,width=599,height=327]

Outras técnicas que ajudam uma primeira camada boa:

* **Temperatura mais alta**. Com uma temperatura na mesa mais alta para a primeira camada, está terá maior
viscosidade e ficará mais "chata". Também se pode colocar uma temperatura mais alta para o extrusor, para
garantir "achatamento" e aderência.
* **Menor velocidade**. Isso é essencial especialmente para plásticos
que solidificam mais rápido como o ABS: nas camadas superiores, o plástico sendo depositado estará se fundindo
ao mesmo material abaixo, e suas moléculas têm alta afinidade. Na primeira camada, no entanto, só há a mesa
e um possível adesivo passado por cima dela; o bico pode acabar "arrastando" o filete, principalmente nas
curvas mais fechadas, e plotando uma forma incorreta na mesa que não servirá de apoio adequado para o restante da
peça. A menor velocidade dá mais tempo para o plástico ser depositado no lugar certo. Geralmente uma velocidade
de 20% a 40% da velocidade normal de impressão é recomendada e isso costuma vir como _default_ nos fatiadores.
* **Maior largura de extrusão**. A largura de extrusão é um ajuste que, junto com a altura de camada, pode
ser configurado especificamente para a primeira camada. Se na primeira camada for visível a separação entre os
filetes de plástico, este item (geralmente uma porcentagem) deve ser aumentado. Veja que o fatiador "compensa"
a largura maior aumentando a quantidade de plástico (e também separa mais as linhas, em proporção), de modo
a evitar que a mesa se inunde de plástico.
* **Colas e adesivos**. Materiais mais difíceis como policarbonato,
poliacetal e HDPE podem não funcionar bem nem com os ajustes anteriores. Nessa hora, certos adesivos específicos
podem ajudar bastante. Desde cola branca escolar até produtos feitos especificamente para impressão 3D (A.Bond,
Spray Cliever e outros), as opções são variadas aqui. É importante verificar a compatibilidade química do
adesivo considerado com o material que deseja trabalhar.  * *Brim* (bainha) e *Raft* (balsa): são estruturas
auxiliares que você define no fatiamento e, junto com as outras que apresentaremos, são o tema do próximo
capítulo.[[FEITO_priming]].  1.  [[estruturas-auxiliares]] == *Estruturas* *auxiliares*

Partindo do pressuposto (nem sempre verdadeiro) que a matéria-prima da impressão 3D é barata, nem sempre a peça
que retiramos da mesa de impressão estará em sua forma final. Dificuldades pragmáticas como aderência à mesa,
estruturas pendentes, geometrias difíceis, fragilidade ao calor acabam tendo soluções em estruturas temporárias
que são fabricadas em conjunto com a peça, para serem posteriormente destacadas e descartadas (ou, melhor ainda,
recicladas como novos carretéis de filamento).

=== Prime

O __Prime__, também chamado de __Priming__, é o nome dado às variadas estratégias de início de impressão para
ter o bico da impressora "limpo" dos fragmentos de plásticos ou sujeira e também para começar a extrudar
plástico uniformemente.

=== *Skirt (saia)*

image::image344.png[image,width=642,height=196]

A idéia desta estrutura -- uma das desempenhar a função de "prime" -- é literalmente desperdiçar filamento
antes de iniciar a impressão: o _skirt_ nada mais é que um contorno da primeira camada da peça, separado desta
primeira camada. Você o configura colocando a distância da peça e o número de voltas. Ocorre que quando se insere
um novo carretel no extrusor da impressora 3D, o extrusor não começa inicialmente a depositar plástico. O momento
em que o plástico derretido começa a sair é sujeito a algumas variáveis e portanto levemente indeterminado;
extrudar uma ou duas linhas de plástico antes de começar a própria peça garante que a deposição já terá
iniciado. O skirt é útil para outras finalidades: ajuda a visualizar se há algum desnivelamento da mesa e também
realiza __priming__, que é purgar o plástico derretido que pode estar presente no bico de extrusões passadas. Como
a quantidade de filamento que desperdiça é realmente muito pequena, é altamente recomendado que se o utilize sempre.

=== Brim (bainha)

image::image345.png[image,width=642,height=196]

Já vimos que a aderência à mesa é um problema atacado por várias estratégias, e o brim vem se somar a
elas. Consiste em fazer um contorno chato ligado à peça que aumenta a _superfície de aderência_ da peça em
contato com a mesa. Assim, a força de aderência total fica maior, e a peça mais firme. A bainha também _canaliza_
o warp, sendo a primeira estrutura a se deformar, atrasando assim que a parte mais interna -- a própria peça
-- sofra seus efeitos.

O aspecto negativo da bainha é que ela tem que ser destacada no final. Para peças com seções grandes, não
costuma ser um problema; para peças com seções finas ou delicadas em contato com a mesa, a bainha pode ser mais
difícil de tirar sem quebrar algo. Geralmente as arestas restantes da bainha são fáceis de remover com estilete
ou rebarbadeira manual.

Alguns fatiadores tornam o _skirt_ e o _brim_ uma configuração só, bastando para ter o brim configurar a
distância da estrutura para a peça igual a zero.

**Nota**: diferente de outros fatiadores, o Simplify3D não usa a velocidade de primeira camada para o brim, usando a
velocidade "normal" e podendo não aderir bem na mesa. Enquanto não se conserta essa idiossincrasia do fatiador,
um jeito de mitigá-la é usar _processos separados_ para a primeira camada e o resto da impressão. Falaremos
sobre isso mais à frente.

*Orelhas do Mickey* ou *Abas* -- o usuário pode olhar para o modo como o brim funciona e se perguntar: se o warp
tende a se concentrar nos cantos e regiões pontiagudas, por que não existe uma opção no fatiador para fazer
bainha somente nelas, economizando plástico e tempo de impressão? A razão é que essa análise de geometria é
complexa e sujeita a casos de falha. Isso não evitou que algumas pessoas modelassem elas mesmas essas estruturas
-- batizadas carinhosamente de __mouse ears__, orelhas de camundongo, e colocassem no seu modelo.

image::image346.png[image,width=633,height=451]

image::image347.png[image,width=612,height=442]

=== Raft (balsa)

image::image348.png[image,width=642,height=299]

Este nome um tanto cômico na verdade reflete a aparência da estrutura: é como se houvesse uma estrutura de troncos
e galhos elevando um pouco a peça e funcionando como uma "bóia" em relação à plataforma de impressão. E
é esta a idéia geral da estrutura: oferecer uma superfície "fofa" e adesiva em cima da qual a peça se torne
estável para a impressão. Nas impressoras FDM industriais, o _raft_ é sempre usado, muitas vezes de material
diferente em impressoras com dois extrusores (é mais facilmente destacado).

O _raft_ também serve para aderência, mas perceba que ele é bem diferente do brim. O _brim_ é um reforço
lateral e não levanta a peça, o _raft_ fica por baixo dela. O _brim_ é contínuo, o _raft_ é mais "esparso" e
portanto não tem uma superfície de contato tão grande com a mesa. A característica de ser "esparso" advém
de o _raft_ compartilhar configurações com as estruturas de suporte, que é a que explicaremos a seguir.

=== *Tornando as coisas suportáveis*

Já tratamos do problema da _estruturas pendentes_ quanto falamos sobre as malhas. Reiterando o que dissemos,
partes do lado de baixo da peça que têm inclinação próxima da horizontal ou que aparecem "soltas" no
espaço em relação à mesa precisarão, durante a impressão, de _suporte_ como pilares de sustentação abaixo
delas. Esse suporte precisa ser facilmente destacável após o término da impressão e idealmente também não
deve atrasar muito a impressão da peça nem gastar muito material.

Tradicionalmente, as estruturas de suporte automático, nos fatiadores, usam duas configurações principais:
o _ângulo mínimo_ em relação à vertical para o suporte ser colocado e o __padrão__, isto é, que forma
esparsa os pilares terão, já que não serão totalmente preenchidos.

image::image349.png[image,width=632,height=633]

Suportes são estruturas "detestadas mas necessárias" no mundo da impressão 3D. Muitas vezes colocadas
pelo fatiador em uma área de difícil alcance, ou mesmo desnecessária, são um estorvo que leva muita gente a
comprar instrumentos variados para facilitar sua remoção, de cortantes a de pressão, multiplicando os acidentes
relacionados à área. Não é à toa que os cursos de modelagem para impressão 3D têm uma enorme parte teórica
dedicada a geometrias que evitem colocação de suportes e que na impressão 3D industrial a extrusão múltipla
utilizando filamentos dissolvíveis, embora encareça consideravelmente o processo, torna-se algo tão favorecido
especialmente para as formas mais rebuscadas.

image::image350.png[image,width=616,height=371]

Um destaque especial para um "macete" de qualidade: até a versão 1.2.9, os suportes do Slic3r
são lentos e rebuscados, não funcionando tão bem quanto os de outros fatiadores. Como muitos
softwares livres de amplo alcance, entretanto, ele sofreu um _fork_ (uma derivação e desenvolvimento
independente) pelo pessoal da __Prusa Research__, que faz as impressora 3D Prusa. Esta derivação do
Slic3r tem algumas diferenças e novidades interessantes, e uma delas é a melhora do padrão default
("rectilinear") e o surgimento da opção que permite remover o __sheath__, a parede de separação
do suporte. Sem o sheath, o suporte, sendo em sanfona, fica muito mais fácil de remover da peça, então
esta configuração é altamente recomendada. O slic3r modificado pode ser baixado do site da Prusa Research -
http://www.prusaprinters.org/introducing-slic3r-prusa-edition/[_http://www.prusaprinters.org/introducing-slic3r-prusa-edition/_]
- ou do repositório deles do github -- https://github.com/prusa3d/Slic3r[_https://github.com/prusa3d/Slic3r_]. Note
que essas diferenças e novidades da versão "prusa", no momento de criação deste livro, já estão sendo
incorporadas ao Slic3r "oficial", e possivelmente estarão disponíveis no momento em que você, leitor,
o estiver lendo.

image::image351.png[image,width=642,height=764]

=== Um toque pessoal: os suportes de colocação manual

Dados os reveses dos suportes, e que suas configurações nem sempre são suficientes para assegurar uma colocação
automática boa ou mesmo passável, os programadores do fatiador Simplify3D implementaram uma _excelente_ solução
que ainda é, hoje, o seu principal diferencial: a colocação manual de suportes. Funciona assim: você pode
usá-lo como os outros fatiadores e simplesmente configurar o ângulo mínimo para o suporte automático, e se
ele deve ou não gerar o suporte. Mas você pode chamar um painel específico para ver como os suportes ficarão,
e através deste painel pode zerar os suportes da peça, remover partes do suporte ou adicionar suportes onde o
fatiador não colocou. Embora este procedimento possa necessitar de uns minutos de dedicação, não se compara aos
riscos e potencialmente horas perdidas de remoção física de suporte, ou do custo de filamento dissolvível. Para
arrematar, fisicamente o próprio suporte do Simplify3D é um dos mais fáceis de destacar da peça, usando um
padrão de sanfona que preserva melhor a qualidade das superfícies que apóia e que faz com que todo o suporte
saia de uma vez só quando puxado.

image::image352.png[image,width=603,height=437]

De fato, haja visto essa solução muito boa para o problema, o leitor pode se perguntar: por que nem todos os
fatiadores a adotaram? A melhor resposta é que este recurso necessita de algoritmos complexos e uma sintonia fina
de interface e os desenvolvedores de outros fatiadores por isso _ainda_ não o implementaram. Além do Simplify3D,
outros fatiadores para impressoras FFF do mercado que permitem a colocação manual de suportes são o CraftUnique
Craftware e o Raise3D Ideamaker. Ambos são proprietários, mas pelo menos também são multiplataforma (Mac OS X,
Linux e Windows).

image::image353.png[image,width=517,height=480]image:image354.png[image,width=566,height=407]

Uma outra opção gratuita e proprietária é o software _Meshmixer_ da Autodesk. Diferente dos citados, ele não é
um fatiador; ele é um __editor de malhas__, um software feito para auxiliar no tratamento de malhas para impressão
e também com capacidades limitadas de modelagem. Similar ao Meshmixer a Autodesk oferece também o _Print Studio_
com a mesma capacidade de fazer suportes automáticos, apesar de menor configurabilidade.

image::image355.png[image,width=603,height=582]

Outro modo de colocar suportes personalizados -- ou removê-los -- é o usado pelo fatiador *Cura* em sua versão
2.4.0: ele permite que se definam certas malhas como __malhas de modificação de suporte__, tanto para forçar
suporte naquele volume ("Support Mesh") como para forçar que ele não apareça ("Anti Overhang Mesh").

image::image356.png[image,width=642,height=558]

=== A cobertura de escorrimento (draft shield ou
ooze shield)

Essa estrutura tem vários nomes diferentes, todos difíceis de traduzir: "cobertura de trabalho", "campo
de escorrimento" seriam algumas traduções livres dos termos. É implementada com ligeiras variações entre os
fatiadores, o conceito geral sendo um "campo", "cobertura" ou "paredes" em torno do objeto e com pelo
menos duas finalidades diferentes: capturar o escorrimento (__ooze__) excessivo do bico quando se usa dupla extrusão
ou filamentos menos viscosos, _ou_ formar um "domo" em volta da peça para aprisionar o ar quente e ajudar a
prevenir o warp. Quando o objetivo é este último, geralmente a estrutura acompanha o contorno da peça verticalmente.

Alguns fatiadores não têm esta estrutura, mas ela pode ser aproximada configurando um _skirt_ com a altura da peça.

image::image357.jpeg[image,width=618,height=516]

=== Pilares de escorrimento / prime / purga

Assim como o __ooze shield__, o pilar de escorrimento, torre de purga ou torre de _prime_ serve para descartar
filamento escorrido e limpar o bico a cada camada impressa. É bastante usado em extrusão dupla porque nesta um
bico é utilizado por vez, e o bico não ativo tende a deixar escorrer filamento. Se o ooze shield estiver causando
problemas na peça, o pilar pode ser uma boa alternativa.

image::image358.png[image,width=615,height=484]

=== Bridges (pontes)

Um caso em que se tem estruturas pendentes onde os suportes não seriam tão úteis ou até atrapalhariam são
as __pontes__. A ponte é uma estrutura cuja parte superior é completamente horizontal (sem material abaixo)
e relativamente curta. A maioria dos fatiadores consegue detectar tal situação e como tal pode ser configurado
para, ao invés de produzir suporte abaixo dela, tentar produzir o filete mais horizontal possível, regulando
velocidade e extrusão (tipicamente maior velocidade e menos extrusão, "esticando" o filete e evitando que
colapse). A regulagem deste tipo de comportamento dependerá bastante do filamento, das temperaturas e das dimensões
escolhidas. Alguns integrantes do _thingiverse_ e outros websites de compartilhamento de formas 3D compartilham
"testes de tortura de pontes", para você testar os limites de sua impressora com essas estruturas. Um dos
mais clássicos é o do usuário __Triffid Hunter__, integrante ativo do projeto reprap.

image::image359.png[image,width=633,height=577]

image::image360.jpeg[image,width=642,height=257]

image::image361.png[image,width=623,height=527]

== Configurações de Qualidade

Os conceitos que aprendemos até agora são essenciais para a _viabilidade_ da impressão. Uma vez que aprendemos
tais requisitos, estamos prontos para aquela parte que torna o fatiamento algo semelhante a uma arte: os ajustes
que, quando equilibrados de maneira calculada e harmoniosa, contribuem para dar à peça o acabamento, aparência
ou propriedades desejadas.

=== O Preenchimento

Nesta altura do aprendizado, o leitor já tem noção que as peças impressas em 3D não precisam ser totalmente
sólidas, preenchidas: é desperdício de material, não contribui muito para a resistência e torna a peça
desnecessariamente pesada. Assim como no caso do suporte integrado que vem em alguns STL, existem peças que já
vêm modeladas ocas para não gastar muito material. Mas, claro, isso não é necessário: uma das configurações
mais flexíveis que todo configurador tem é o preenchimento interno da peça, _infill_ em inglês.

O ajuste mais importante do infill é a __porcentagem__. Esta porcentagem é a quantidade de material no espaço
interno da peça que será ocupado: 0% sendo nenhum material (totalmente oca) e 100% sendo totalmente maciça. Para
os valores entre 0 e 100, o fatiador empregará o segundo ajuste, que é o __padrão de preenchimento__, uma
estrutura repetitiva. Um terceiro ajuste do preenchimento é o ângulo em relação ao eixo X da mesa, e serve
para que o preenchimento não coincida com a orientação da peça, tendo uma distribuição melhor de forças.

image::image362.png[image,width=626,height=534]

O Slic3r e Simplify3D permitem grande variedade de padrões de preenchimento. A maioria dos casos no entanto tem
mais valor ornamental e não contribui muito para melhorar propriedades desejáveis da peça. O Slic3r permite
até padrões diferentes na horizontal e vertical. Alguns casos que são notáveis de padrões são:

* Retilinear ou quadrático: é o que oferece melhor retorno resistência a força vs. rapidez de impressão. É o
default em virtualmente todos os fatiadores.  * Honeycomb (colméia) ou hexagonal: é tido como um preenchimento que
oferece uma ótima distribuição de forças, e na natureza aparece em estruturas que precisam disso. Na impressão
3D, entretanto, os primeiros testes de força feitos com preenchimentos, usando PLA, não encontraram diferenças
significativas em relação ao retilinear, e ele é impresso consideravelmente mais devagar.  * Triangular é adequado
para uso com filamentos flexíveis; preserva a elasticidade desejada na parte interna do objeto.  * Concêntrico é
interessante para uso com filamentos transparentes e translúcidos que precisam preservar a aparência interna suave.

Em uso geral para impressão 3D, o recomendado é usar uma porcentagem de preenchimento entre 10 a 30%, aumentando
só para os casos específicos em que maior robustez for desejada. 100% deve ser evitado porque nesse caso ao invés
de um padrão de preenchimento, uma trajetória sólida é aplicada, sem a sobreposição e trançamento de filetes
que dá resistência à peça. O peso também depõe contra a resistência do material. Para resistência máxima,
geralmente os por volta de 80% é suficiente.

O preenchimento é importante para a resistência do objeto, e a sua contraparte nessa empreitada é a configuração
de __paredes__, que deve ser levada em consideração em conjunto.

Os fatiadores *Cura* e *Slic3r* resolvem ainda um problema relativo a preenchimento "oco" (0%). A desvantagem
óbvia de você zerar o preenchimento e tentar imprimir uma peça só com a configuração de paredes (como
veremos abaixo) é que comumente se tem "overhangs" (seções pendentes) internas; com o preenchimento zero,
se a geometria não for adequada elas desabariam. O Cura tem um "modo oco" (__Hollow Out Objects__) que zera
o preenchimento, mas analisa o interior da peça oca para colocar suportes, garantindo a impressão adequada da
peça. O Slic3r tem a configuração Print Settings → Infill → Reducing printing time → "Only infill where
needed", que força preenchimento zero mas coloca suportes nas partes internas com seções pendentes.

image::image363.png[image,width=642,height=487]

Alguns fatiadores permitem ainda fazer o preenchimento com altura de camada diferente do resto da impressão. Neste
caso, a altura de camada do preenchimento precisa ser múltipla da altura de camada da impressão -- digamos,
0,1mm para a impressão e 3 vezes isso para o preenchimento, 0,3mm. Isso faz com que a impressão demore bem menos
e ainda fique ligeiramente mais robusta. Seguindo o exemplo de 0,1mm e 0,3mm, o jeito de fazer isso em cada fatiador
é ligeiramente diferente:

* **Slic3r**: ** Print Settings → Layers and perimeters → Layer height: [**0.1**] mm; ** Print Settings →
Infill → Reducing printing time → Combine Infill every: [**3**] layers
* **Simplify3D**: ** Layer → Primary
Layer Height: [**0,1000**] mm; ** Infill → General → Print Sparse Infill Every [**3**] Layers
* **Cura**: **
Quality → Layer Height [**0.1** mm] ** Infill → Infill Layer Thickness: [**0.3** mm]

É importante notar que esse ajuste pode facilmente levar a situações absurdas, que podem até estragar a
impressão. Por exemplo, se você tem um bico de 0,4mm, sua altura de camada for 0,3mm e você pedir o preenchimento
esparso a cada 3 camadas, você estará pedindo ao fatiador que faça as camadas de preenchimento com 0,9mm de
altura, algo totalmente fora da margem de extrusão razoável de um bico de 0,4mm. O filete para preenchimento
sairá completamente espirrado e torto e possivelmente nem se assentará em cima da camada anterior.

=== Paredes

Este ajuste se refere ao número de filetes ou camadas sólidas que o fatiador vai fazer antes de aplicar o padrão
de preenchimento. A denominação varia entre os fatiadores e mesmo neles para os que tratam como paredes laterais ou
do topo (__top__) e da parte de baixo (__bottom__). Alguns fatiadores usam para as paredes _o número de "voltas"
(perímetros)_ (nas paredes verticais) ou _camadas_ (nas paredes horizontais), outros usam _a espessura esperada_
(por exemplo, 0,8mm).

* **Slic3r**: paredes laterais são dadas em perímetros: __vertical shells -- perimeters__. Do topo e da
parte de baixo são dadas em camadas e __horizontal shells -- Solid layers Top & Bottom__.
* **Cura**: paredes
laterais são _wall thickness_ (espessura de parede). Do topo e da parte de baixo são _Top/Bottom Thickness_
(espessura superior/inferior). Podem ser dados tanto em número de perímetros/camadas quanto em milímetros, o
fatiador popula o campo de acordo.  + image:image364.png[image,width=618,height=268]
* **Simplify3D**:
paredes laterais são __Outline/Perimeter Shells__. Do topo e da barte de baixo são _Top Solid Layers_ e __Bottom
Solid Layers__. São sempre dados em números de filetes / camadas.  * Outros fatiadores terão suas próprias
nomenclaturas, mas a partir destes exemplos é possível inferir quais sejam.

image::image365.png[image,width=620,height=504]

Seguindo a indicação para FFF de espessuras mínimas para resistência (entre 1 e 2 mm), podemos inferir que
para um bico de 0,4mm e altura de camada de 0,2mm uma boa espessura lateral seriam 4 filetes (0,4 x 4 = 1,6mm)
e espessuras de topo e de baixo de 8 camadas (8 x 0,2 = 1,6mm). Para muitas peças, especialmente as decorativas,
essa espessura de camada é tão adequada que o preenchimento pode nem ser necessário.

Vale lembrar que tanto as paredes quanto o preenchimento contribuem para mais material condensado e portanto mais
pronunciado será o efeito de __warp__.

=== Larguras de camada

Um ajuste que vimos para aumentar a aderência na mesa foi a "largura de camada". Apesar de ser possível ajustar
para a primeira camada especialmente, ele pode ser especificado para todas as camadas do fatiamento. Geralmente
o fatiador faz o cálculo automático da largura de camada "ideal" a partir do diâmetro do bico, e pode
mantê-lo constante ou variá-lo durante a impressão para melhorar a qualidade da peça. O Simplify3D, por exemplo,
considera que a largura do filete é de 20% maior que o orifício -- 0,48mm para um nozzle de 0,4mm; o slic3r usa
uma fórmula complexa^1^ para calcular isso -- resultando em 0,67mm para um nozzle de 0,4mm com altura de camada 0,2
e 0,48 para altura de camada 0,3 -- e 5% maior que o bico para o filete _externo_ (a parede mais externa). Com até
mesmo os fatiadores discordando entre si, não é surpresa que eles permitam que o ajuste seja personalizado. É
importante notar que o fatiador ainda confia na quantidade de plástico correta configurada: se você aumenta a
largura de camada, ele extrusa mais plástico e também tece menos segmentos (a impressão demorará menos).

Se sua impressão estiver saindo com as linhas "não se tocando", o primeiro suspeito é a taxa de extrusão
baixa, mas pode ser também uma largura de extrusão menor que a real. Nesse caso:

* **para filetes distantes**, _aumente_ a largura de extrusão.
* **Para filetes apertados ou encavalados demais**,
_diminua_ a largura de extrusão.

image::image366.png[image,width=642,height=408]

__*Nota de configuração*__: o Slic3r permite ajustar as larguras de camada tanto em valor absoluto (por exemplo,
0,4mm) quanto porcentagem (por exemplo, 200%). Mas porcentagem _de quê_ exatamente? Intuir-se-ia ser o diâmetro do
nozzle, mas não é; a porcentagem entrada nos campos de largura de camada é em relação à **altura de camada**. Se
você tiver por exemplo altura de camada 0,1mm e colocar a _default extrusion width_ em "200%", você está
dizendo ao Slic3r que a espessura do filamento é 0,2mm; e se de repente mudar para 0,3mm e se esquecer de mudar na
largura de camada, o fatiador passará a assumir o valor 0,6mm. De fato, esta configuração é tão anti-intuitva
que se aconselha a nunca usar porcentagens, apenas valores absolutos. No _bugtracker_ do slic3r, existe um relato
de bug para isso: https://github.com/alexrj/Slic3r/issues/3658[_https://github.com/alexrj/Slic3r/issues/3658_]

Notas:

1 -- A fórmula do Slic3r é , onde w = largura de extrusão calculada, d = diâmetro do bico e h = altura de
camada: w = (π.d^2^ + (4-π).h^2^)/(4h), com o valor de w limitado ao máximo de 3d.

image::image367.png[image,width=642,height=437]

=== Ventilação

A ventilação no fatiador se refere às ventoinhas que podem ter sua intensidade controlada pela placa da impressora;
geralmente apenas uma, soprando o bico ou bicos do extrusor, conforme vimos no capítulo sobre extrusores. Portanto,
se refere a uma situação muito particular em que estamos tratando de um filamento com baixo warp e baixo ponto
de transição vítrea, que necessita de refrigeração forçada para apresentar boa qualidade de superfície.

A configuração dos fatiadores costuma ser mais do que suficiente para tratar todos os casos, até exagerada. Se
dividem em dois:

* Quando o filamento é realmente *muito* dúctil e propenso a "desabar". Neste caso, haverá uma configuração
de simplesmente "deixar a ventoinha ligada o tempo todo".  * Quando o filamento é medianamente dúctil, só
"desabando" nas partes mais delicadas como pontes e overhangs. Neste caso, basta deixar os ajustes automáticos
do fatiador em seus valores __default__.

image::image368.png[image,width=502,height=465]

=== Velocidades

À primeira vista, a configurabilidade de velocidades da impressora pode parecer estranha ao marinheiro de primeira
viagem; se é possível colocar valores arbitrários para as velocidades dos movimentos da impressora 3D, por que
não deixar tudo o mais rápido possível e terminar uma impressão em segundos ao invés de horas? A resposta,
como no caso das alturas de camadas, é topar com limite físico: os primeiros a considerar são a rapidez
do microcontrolador e do motor. O que se traduz em "velocidade" para o motor é quantos "cliques" o
microcontrolador envia para ele por segundo e microcontroladores Arduino têm um limite de cliques equivalentes a
pouco mais de 300 mm/s; e os motores terão também uma capacidade de velocidade relacionada ao torque, corrente
e estruturas internas. Se o microcontrolador enviar mais ordens de velocidade do que ele está preparado, ele pode
simplesmente não girar e perder a referência (pois não é "servo motor").

Mas mesmo desconsiderando a limitação de processamento, que teoricamente se resolveria comprando microcontroladores
mais rápidos (a alimentação também precisaria se readequar), outros limites físicos têm relação com a
estrutura da impressora, vibrações e qualidade de impressão. Até o atrito com os rolamentos pode fazer diferença
nesse caso, e velocidades muito altas terão efeitos como fazer a impressora vibrar, "sacudir" a peça no caso
de mesas móveis, gerar inércia que tende a criar artefatos na impressão. Para o profissional de impressão 3D,
colocar uma velocidade mais alta pode acabar significando tempo perdido com peças sub-ótimas, risco de artefatos
indesejáveis e de "perda de passo" do motor, não valendo a pena. Claro que existem impressoras 3D no mercado
construídas para aguentar maiores velocidades, mas aí estamos tratando das exceções e não da regra.

A orientação geral que costuma servir para a maioria das impressoras 3D é uma velocidade principal (de perímetro)
de 60 mm/s. Velocidade principal porque dependendo do fatiador existem várias outras velocidades configuráveis:
a velocidade do carro quando não se está imprimindo (velocidade de "travel", ou "percurso") pode ser
tão alta quanto a impressora aguente; o preenchimento e suportes não precisam ter muito boa qualidade, então
é comum haver uma velocidade maior para eles; do mesmo modo, seções transversais muito pequenas, pelas curvas
fechadas que apresentam, podem precisar de menor velocidade; pontes, como já vimos, podem ser programadas para
ter uma velocidade maior, para esticar o filamento; e a velocidade do eixo vertical, que geralmente é com fuso
ou barra roscada, pode ser limitada para evitar perda de passos dos motores.

Velocidade ainda não é o único fator em questão. O eixo não vai partir diretamente da posição estática para a
velocidade destino: ele tem uma aceleração mensurável até alcançar aquela velocidade. Estas acelerações também
são configuráveis. Tradicionalmente, são configuradas como acelerações máximas no próprio firmware da máquina,
sem interferência do fatiamento. Mas a tendência atual é de os fatiadores incorporarem essa configuração, o que
lhes ajuda na previsão correta do tempo de impressão total. E a configurabilidade não pára nas acelerações:
existe ainda um ajuste relacionado à velocidade máxima em mudança de direção, o "jerk", que começa
também a ser movido do firmware para o fatiador.

As estratégias de como lidar com esses ajustes também muda de acordo com o fatiador. O Simplify3D limita as
velocidades configuráveis ao mínimo, e emprega especial atenção aos seus algoritmos internos (heurística)
para tomar as decisões; o Slic3r tem muitas velocidades e acelerações configuráveis, mas também tem um
recurso chamado de "autospeed" (autovelocidade) que calcula as velocidades ideais em cada caso para deixar
a pressão interna do hotend a mais constante possível; o Cura simplesmente permite que o usuário decida tudo,
deixando todas as configurações ao alcance. Pode ser enlouquecedor lidar com tantas configurações.

image::image369.png[image,width=616,height=407]

O melhor a fazer para saber velocidades boas para sua impressora 3D é recorrer à fonte -- o fabricante. Grupos
de discussão, facebook e semelhantes relacionados ao produto também podem ter dicas de usuários aventureiros que
se arriscaram com impressões mais rápidas e preservaram qualidade. Para não deixar o usuário sem uma direção
ou comparação, entretanto, oferecemos algumas sugestões gerais, que podem ou não funcionar para sua impressora 3D.

* Velocidade de perímetro: 60 mm/s * Velocidade de perímetro pequeno: 20 mm/s * Velocidade de primeira camada:
20% * Velocidade de travel: 100 mm/s * Velocidade de infill: 70 mm/s * Velocidade de pontes: 80 mm/s * Velocidade
de _overhangs_ (somente no software repsnapper): 20 mm/s * Aceleração: 1000 mm/s^2^ nos eixos X e Y, 3000 mm/s^2^
para as impressoras 3D mais robustas, especialmente CoreXY e semelhantes.  * Jerk X/Y: 20 mm/s * É importantíssimo
lembrar que você deve _decidir_ quem cuida de sua aceleração, ou o fatiador ou o firmware! Se as acelerações
forem configuradas no fatiador, o ideal é aumentar ao máximo no firmware (digamos, 10000 mm/s^2^) para minimizar
as interferências. O mesmo vale em relação ao _jerk_ e velocidades máximas.

*Jerk* -- elaborando um pouco mais sobre o que esse ajuste significa, ele é a _máxima_ mudança de velocidade que o
hardware da impressora consegue fazer "instantaneamente", sem precisar usar as acelerações. Considera-se então
que no intervalo do jerk o hardware tem aceleração infinita, ideal. Como o jerk é uma mudança de velocidade,
ele é dado em mm/s. Diferente de outros ajustes, ele é uma quantia __vetorial__, onde o ângulo conta. Por isso
existem ajustes separados de jerk para cada eixo (alguns firmwares e fatiadores juntam os ajustes de X e Y em um
só, visto que frequentemente os dois eixos têm as mesmas velocidades e características físicas), incluindo o
"eixo" virtual do extrusor, ou seja, a velocidade de extrusão.

Como a _direção_ conta, isso quer dizer que até mantendo a velocidade escalar constante, mas mudando a direção,
o ajuste de _jerk_ pode entrar em ação.

image::image370.png[image,width=642,height=648]

Colocando um jerk *alto* (digamos, 30 ou 40mm/s), você está dizendo para o seu fatiador ou firmware que o hardware
da sua impressora é de qualidade industrial e muito próximo do ideal, não gerando artefatos com esse valor. Com
o jerk *baixo* (digamos, 5 ou 10 mm/s), você está dizendo que a sua impressora não aguenta fazer mudanças
de velocidade e direção muito bruscas e precisa das configurações de aceleração atuando. Geralmente quando
você tem artefatos de líquido derretido espirrando ou de efeito de ziguezague horizontal ("ringing"), você
vai querer diminuir seu jerk.

Algumas traduções da palavra jerk seriam "impulso", "arranque", "empurrão" ou "puxão". Este
é um caso em que se pesou que tais palavras mais confundiriam que esclareceriam o termo e se optou por usá-lo
no original em inglês, como jargão técnico.

**Nota**: existe um conceito de _jerk_ da física que não é o mesmo jerk que conceituamos. Traduzido como
"arrancada", o jerk da física designa a taxa de variação da aceleração, assim como a aceleração designa
a taxa de variação da velocidade e a velocidade é a taxa de variação de posição. A unidade deste _jerk_ é
distância por tempo ao cubo (e.g. 1000 mm/s^3^), enquanto que a do ajuste do fatiador ou firmware é em distância
por tempo (e.g. 20 mm/s).

*Autospeed do Slic3r* -- há um ajuste especial do Slic3r que, tendo em vista as equações de Bernoulli para
fluidos, tenta reajustar as velocidades e extrusão enquanto imprime de forma a manter a pressão dentro do hotend a
mais constante possível, garantindo uma qualidade e consistência maiores e também largamente diminuindo a chance
de falhas por mudanças bruscas durante a impressão (especialmente por retração). É especialmente importante
para a extrusão com filamentos flexíveis. Para que este ajuste funcione, basta colocar uma velocidade máxima de
extrusão em Print Settings → _Speed_ → _Autospeed (advanced)_ → _Max print speed_ e deixar um "zero" nas
velocidades da mesma seção que se deseja que o algoritmo trate (velocidades de suportes, pontes e preenchimentos
de vãos não são tratados pelo algoritmo).

image::image371.png[image,width=490,height=699]

=== Retração

Já mencionamos retração antes, agora vamos explicar o conceito: quando o hotend está extrudando filamento na
peça e precisa fazer um movimento de "travel", isto é, se mover no plano XY sem realizar nenhuma impressão,
se ele iniciar o movimento imediatamente o filamento líquido que está no bico não pára imediatamente de escorrer,
e formará um "fiapo" de plástico que ficará agarrado na superfície de onde o bico sai. Esse efeito tem o
nome de "stringing" e é um dos artefatos possíveis de filamento pouco viscoso.

Existem várias formas de impedir ou amenizar este efeito, e a forma mais efetiva é o movimento de retração:
assim com o extrusor traciona o filamento para a frente, o movimento rápido para trás cria um vácuo que recolhe
todo o filamento derretido novamente para dentro do bico. Essa é a retração, um recurso tão efetivo que está
presente em todos os fatiadores, mesmo os mais simples, com dois ajustes principais: a velocidade de retração
(geralmente entre 20-60 mm/s, menos que isso não gera o efeito de vácuo desejado) e quantos mm de filamento o
tracionador deve recolher (geralmente entre 2 e 5mm para extrusores diretos e até cerca de 8mm para extrusores
em bowden).

Logo de cara, existe um problema com a retração. O plástico na zona aquecida do hotend está se expandindo com o
calor, e isso não é problema se ele está sendo levado para a frente, para ser extrudado. Mas se ele for puxado
muito para trás, e tiver uma "folga" maior nessa região como acontece na maioria dos hotends, ele tenderá
a se expandir no volume disponível. Ao ser novamente tracionado para a frente, já expandido e solidificado,
ele não consegue passar pela seção do tubo que leva à zona aquecida, pois está estreito demais pra ele. O
resultado é entupimento e desgaste do filamento na engrenagem do tracionador. Estima-se que 2 segundos fora da
zona aquecida são o suficiente para o filamento expandir o suficiente para entupir, antes de ser tracionado novamente.

image::image372.png[image,width=539,height=342]

Algumas estratégias são usadas para diminuir este efeito.

* Deixar o filamento retraído o mínimo possível de tempo é uma delas, e isso se consegue com altas
velocidade de __travel__.  * _Lift Z_ (levantar o extrusor no eixo Z no movimento de retração, e baixar
novamente quando for para outra ilha de impressão) é bastante usado nas impressoras que têm o eixo Z rápido,
como as deltas.  * Também é útil conhecer bem as medidas do hotend para colocar somente o mínimo possível
dehttp://www.thingiverse.com/search?q=urination&sa= retração que não saia da zona crítica de expansão do
tubo interno. Um hotend convencional costuma medir entre 50 a 70mm, com a zona aquecida tendo de 10 a 15mm (20mm
em hotends especializados como o __Volcano__) e o heatbreak cerca de 5mm.  * A _desengrenagem_ ("coasting",
presente no Cura e no Simplify3D) é um recurso que pára o filamento décimos de milímetros antes do término da
extrusão, deixando o escorrimento completar o filete para então realizar uma retração menor e menos arriscada.
* O pressure advance (avanço de pressão) do Slic3r é um algoritmo mais avançado e mais difícil de entender e
calibrar mas que também pode contribuir, prevendo a diminuição súbita de pressão e permitindo o escorrimento para
extrusão.  * O _autospeed_ já citado, mantendo a pressão constante, minimiza os escorrimentos e a necessidade
de retração.  * O __combing__, que traduzindo seria algo como "penteamento", é uma estratégia que faz
com que o extrusor ao realizar o _travel_ passe por cima do máximo de área já impressa para purgar o filamento
escorrido no interior das peças.  * _Wipe before retract_ (esfregar antes de retrair) é uma forma mais comedida
de combing, fazendo o extrusor se movimentar dentro da seção transversal em que está pra limpar o bico antes
mesmo de realizar a retração.  * Os firmwares de reprap populares Marlin e Repetier Firmware, assim como o
da Makerbot, o Sailfish, têm um algoritmo de controle de pressão chamando de Pressure Advance, Linear Advance
ou Quadratic Advance. Esse recurso configurável ajuda no controle de pressão reduzindo problemas nos cantos e
pontas da peça e são semelhantes ao pressure advance do slic3r. São especialmente importantes para impressoras
3D que usam filamento guiado (bowden), que sofrem mais de escorrimento.  ** Documentação do Advance do Marlin:
http://marlinfw.org/docs/features/lin_advance.html[_http://marlinfw.org/docs/features/lin_advance.html_]
** Documentação do Advance do Repetier Firmware:
https://github.com/repetier/Repetier-Firmware/wiki/Hardware-settings-and-print-quality[_https://github.com/repetier/Repetier-Firmware/wiki/Hardware-settings-and-print-quality_]

Além do entupimento, a retração pode ter o efeito de __grinding__, mesmo sem entupimento. A cada vez que os
dentes do mecanismo tracionador pressionam o filamento, deixam marcas. Sucessivas idas e vindas deixam as marcas
cada vez mais fundas, de modo que retrações repetidas no mesmo segmento de filamento podem acabar fazendo com
que ele se desgaste e pare de responder ao tracionamento.

O efeito da retração é especialmente notável em impressões que têm muitas seções transversais pequenas e
finas, como as peças vazadas estilo "voronoi".

Para este problema, não existe solução fácil. O uso dos valores _default_ até que falhem é a estratégia
usada. É importante ao operador da impressora 3D, entretanto, saber que a interrupção da impressão por retração
pode ocorrer até numa impressora muito bem calibrada. Neste caso, ele deve perseguir as estratégias de impedir
que ocorra novamente do seu fatiador predileto.

**Retração "de hardware" ou "de firmware"**: se você vir este termo, a acepção é a seguinte: a
retração na maioria dos fatiadores é implementada com os comandos de movimentação convencional do extrusor -
"G0" e "G1". Quando o fatiador suporta retração __de firmware__, ao invés de usar estes comandos comuns
quando for retrair e avançar da retração, ele usa comandos específicos para a retração, "G10" (retrair)
e "G11" (avançar/recuperar da retração). Deixar o firmware cuidar da retração, ao invés do fatiador,
tem algumas vantagens:

* Permite configurar velocidades diferentes para a retração e recuperação; * Permite mudar estes ajustes
em tempo real, enquanto estiver acontecendo a impressão, refletindo na qualidade dela; * Se o firmware estiver
configurado para algoritmos avançados de controle de pressão como o Advance, ele pode agir especificamente na
retração já que os comandos são outros, e assim controlar melhor a qualidade da impressão. Note também que
se você habilitar advance __do fatiador__, a retração de firmware pode ter o efeito contrário, fazer ela sair
do controle do algoritmo.

Configurar este recurso depende de o firmware e o fatiador o suportarem. Os firmwares Marlin e Repetir Firmware
atualmente o implementam (o Repetier ainda possibilita ativar um recurso de "auto-retração", em que converte
comandos G1 com extrusão pura para G10 e G11), mas os fatiadores Cura e Simplify3D não suportam esse recurso,
com o Slic3r sendo atualmente o único que o implementa, nas configurações Printer Settings → General → Advanced.

=== Ajuste da costura

A "costura" ou "selo", "seam" em inglês, é a parte da superfície em que o filete de plástico se
junta consigo mesmo, tendo percorrido uma volta. Geralmente, esta junção é "presenteada" com uma pequena
bolha de plástico decorrente de uma mistura de _stringing_ com outros efeitos físicos. Esta junção permite algum
ajuste limitado pelo fatiador: escolhendo _random_ (aleatório), cada perímetro começará em um ponto aleatório,
de modo que as bolhas individuais ficam menos aparentes; e _nearest_ e __aligned__, dois meios de garantir que
os perímetros comecem sempre em pontos alinhados, o que os tornará mais aparentes na forma final mas também
mais fáceis de "limpar" com instrumentos e acabamento. Um algoritmo simples que poderia ser implementado nos
fatiadores e que já existia no fatiador kisslicer em 2013 é o assim chamado __seam hiding__, que faz o começo
e término do perímetro serem um pouco mais pra dentro que o resto, "escondendo" a costura. No mesmo ano, a
Stratasys adquiriu a patente do método nos EUA (patente __US 20130095303 A1__), desencorajando que os fatiadores
de mercado se valham dele. Ler a patente chega a ser perturbador -- eles listam todo e qualquer caso imaginável
de deixar a costura levemente retrocedida, para assegurar que nem algo parecido posser ser feito por outros. A
patente foi aceita mesmo com vários casos documentados de "arte prévia" desta técnica, algo que teoricamente
a invalidaria.^1^ Nas discussões de fatiadores como o slic3r, se optou por não implementar a técnica para evitar
qualquer imbróglio legal.^2^ É o "espaço de idéias" sendo fechado a olhos vistos.

image::image373.png[image,width=642,height=695]

image::image374.png[image,width=625,height=260]

No Slic3r, o ajuste da costura está em Print Settings → Layers and Perimeters → Advanced → Seam Position. Você
pode escolher entre alinhado, aleatório e "mais perto" (tentará achar uma face com ângulo agudo para esconder
a costura). O Prusa Slic3r oferece ainda a opção "Rear", que é o Y máximo, e por default já implementa
uma forma modesta de __seam hiding__^3^.

image::image375.png[image,width=344,height=180]

No Simplify3D, o ajuste da costura está em Layers → Start Points. Você pode escolher entre aleatório, otimizar
para velocidade, e mais perto (alinhado) de um ponto definido pelo usuário no plano XY.

image::image376.png[image,width=428,height=157]

No Cura, o ajuste da costura está em Shell → Z Seam Alignment, e você pode escolher entre aleatório, menor
caminho e mais perto (alinhado) de um ponto definido pelo usuário no plano XY.

image::image377.png[image,width=642,height=242]

1 - Este artigo explica o problema do método patenteado pela Stratasys:
http://patents.stackexchange.com/questions/4667/3d-printing-seam-concealment-for-3d-models-patent-application-prior-art-re[_http://patents.stackexchange.com/questions/4667/3d-printing-seam-concealment-for-3d-models-patent-application-prior-art-re_].
Há razões muito fortes para nos preocuparmos com este frenesi por patentes por corporações, num futuro em que
ninguém mais poderá explorar o espaço de idéias -- todo patenteado. Neste contexto, como que querendo nos
remeter de volta às cavernas, representantes da Stratasys declaram que gostariam de ver mais patentes no Brasil,
mesmo de concorrentes. Paulo Farias, diretor-geral da Stratasys no Brasil, chega a declarar que o Brasil ter
poucas patentes é motivo para "se sentir envergonhado" em uma entrevista para o "canaltech" do youtube
em https://www.youtube.com/watch?v=Vk3weOHcHDw[_https://www.youtube.com/watch?v=Vk3weOHcHDw_].

2 - https://github.com/alexrj/Slic3r/issues/3299[_https://github.com/alexrj/Slic3r/issues/3299_]

3 - https://github.com/prusa3d/Slic3r/issues/153[_https://github.com/prusa3d/Slic3r/issues/153_]

=== Modo Espiral

Quando mencionamos a _prusa calculator_ ao explicar altura de camada, notamos que tipicamente a impressora 3D tem
uma _resolução_ no eixo Z _muito maior_ que a necessária para qualquer impressão que façamos; no exemplo
ilustrado, um passo do motor correspondia a subir ou descer 0,004mm no eixo Z, isso sem considerar que com os
_drivers_ usados em impressoras 3D podemos chegar a 1/32 desse valor -- 125 _nanômetros_ de resolução, que
parecem em algum momento ser "desperdiçados" por usarmos camadas tão maiores que isso. Claro, uma impressão
que usasse camadas de 125 nanômetros não só demoraria anos para completar como provavelmente nem funcionaria
pela quantidade de plástico tão baixa que deveria sair, em nosso mundo real.

Mas uma maneira de aproveitar essa enorme precisão de posicionamento do eixo Z das impressoras 3D é o _modo espiral_
que praticamente todo fatiador do mercado tem. Sendo adequado somente para algumas geometrias específicas --
objetos bojudos com apenas uma "ilha" por camada, cujo interior não deve ser preenchido -, o que o modo espiral
faz é a impressão contínua do contorno da peça, subindo suavemente numa espiral (daí o nome) progressivamente
mais alta, até chegar ao topo. Fica mais fácil entender através da ilustração do fatiamento de um objeto.

image::image378.png[image,width=630,height=360]

O tipo de objeto que mais se beneficia desse tipo de impressão são __vasos__, por isso este modo também é
conhecido como "modo vaso". O objeto único de geometria simples é um requisito para ele funcionar corretamente;
caso vários objetos ou um objeto complexo estiverem carregados, os fatiadores não avisam que não vão imprimir
numa espiral ininterrupta -- ao invés disso, eles simplesmente imprimem em camadas, sem espiralizar.

image::image379.png[image,width=619,height=451]

Uma exceção à regra é o Slic3r, que não fatia com o modo espiral ligado se houver mais de um objeto na mesa
-- e deixa a seguinte mensagem na barra de status, até que o problema seja resolvido:

image::image380.png[image,width=499,height=26]

"Spiral Vase" é o nome da opção nesse fatiador e está nas configurações de camada. Quando você ativa
o modo, ele avisa que vai mudar várias outras configurações e pede confirmação que deseja prosseguir:

image::image381.png[image,width=570,height=544]

image::image382.png[image,width=559,height=422]

image::image383.png[image,width=449,height=178]

image::image384.png[image,width=642,height=570]

Por causa da maneira como o modo espiral funciona, com a camada superior sendo automaticamente removida, muitos
objetos em sites de compartilhamento de designs como o thingiverse deixam para download o contorno sólido do
"vaso", assumindo que o modo espiral automaticamente o deixará aberto em cima. Um exemplo é a série de
vasos "Julia" do thingiverse (Julia é o nome dado a um conjunto de fórmulas matemáticas fractais):

image::image385.png[image,width=642,height=428]

O modo vaso é especialmente útil para quem usa bicos largos (digamos, maiores que 0,8mm).

=== Impressão objeto a objeto

São os fatiadores que fazem as impressoras 3D FFF funcionarem como as vemos: camada por camada, de baixo pra
cima. Mas os comandos que a impressora interpreta permitem posicionamento arbitário do extrusor em qualquer posição
tridimensional que se queira, e seria teoricamente possível que um fatiador a fizesse extrusar um detalhe do topo
primeiro antes de um detalhe da base -- desde que essa trajetória não levasse o mecanismo a bater nas peças, claro.

=== Ajustes especiais de qualidade

Cada fatiador tem suas peculiaridades, analisamos aqui alguns dos recursos específicos de cada um:

*Slic3r* -- Em _Print Settings_ → _Layers and perimeters_ há o quadro "__quality__" com 4 opções
liga/desliga:

image::image386.png[image,width=577,height=139]

* *Extra perimeters if needed* (perímetros extras se necessário) -- em superfícies inclinadas, uma configuração
baixa de perímetros (paredes) pode, através do arredondamento, acabar expondo a parte interna da peça. Com
este ajuste ligado, o fatiador "arredonda pra cima" e coloca paredes a mais para garantir fechamento da peça.
* *Avoid crossing perimeters* (evitar cruzar perímetros) -- modifica a trajetória do extrusor de modo que ele
procure ficar tão na parte interna da peça quanto possível, economizando _travels_ e __retrações__.  * *Detect
thin walls* (detectar paredes finas) -- paredes com espessura próxima da largura de extrusão podem sofrer um
arredondamento indevido e acabarem mais grossas do que deviam ou ainda com um "espaço" entre duas passadas do
extrusor. Ligar este ajuste faz o fatiador detectar tal situação e corrigir, tanto preenchendo o espaço quanto,
quando necessário, realizando passada única. Se ainda assim os espaços aparecerem, um outro jeito de corrigir é
ir em Print Settings → Advanced, seção __Overlap__, e aumentar o valor (por default é 15%). Overlap significa
"sobreposição", e é uma porcentagem que diz em quanto o preenchimento "penetra" nas paredes, para não
ficarem como peças separadas.  * *Detect bridging parameters* (detectar parâmetros de ponte) -- já falamos
das pontes; com este ajuste ligado, o Slic3r analisa a geometria do objeto para saber quando usar as pontes,
se estiverem ativadas.

Todos os ajustes são recomendados. A razão de eles serem opcionais é devido ao histórico de lentidão do
fatiador que felizmente tem sido corrigida a cada nova atualização, e o impacto de cada um desses ajustes diminui
igualmente no tempo de fatiamento.

Um ajuste adicional de qualidade do Slic3r que vale a pena ser citado, ainda, é o de "resolução"
(__*Resolution*__), que fica em Print Settings → Advanced → Other. No campo você coloca um valor em milímetros
que ele considerará como sendo o lado do "pixel" volumétrico, ou __voxel__, da peça a fatiar. Qualquer
detalhe menor que essa medida será automaticamente simplificada. O _default_ desse campo é zero, quer dizer,
o fatiador usa toda a resolução da peça. Se o fatiamento estiver demorado, colocar um valor nesse campo pode
ser um jeito de o acelerar. Também ajuda a evitar que durante a impressão o extrusor fique com o que parece
"excesso de esmero" em algumas seções pequenas, extrudando pouco e dando "pulinhos"; isso é sintoma de
peça excessivamente detalhada.

*Simplify3D* -- Os ajustes específicos de qualidade do Simplify3D ficam espalhados por sua configuração,
mas a maioria deles é na aba __Advanced__.

* Comecemos por eles, então, na seção de _thin walls_ (paredes finas): +
image::image387.png[image,width=441,height=136] + O ajuste é bastante semelhante ao _detect thin_ walls
do Slic3r: desligado ("Only use perimeters for thin walls") ou ligado, com a tolerância de sobreposição de
um perímetro em cima do outro definida. Assim como no Slic3r, se mesmo com esse valor algumas brechas aparecerem,
você deve ir na aba "Infill" e aumentar o valor do "Outline overlap" (default em 20%).  * *Controle de
escorrimento* + image:image388.png[image,width=425,height=177] + Este ajuste trata de modificadores
para o movimento de retração do final de uma extrusão.  ** O primeiro ajuste, ☑ __*Only retract when crossing
open spaces*__, faz com que ele só execute a retração se não for passar em alguma parte já impressa do objeto;
senão, ele conta para essa parte remover qualquer resíduo do bico.  ** O segundo, ☑ __*Force retraction
between layers*__, faz com que sempre haja retração quando o fatiador mudar de camada.  ** _*Minimum travel
for retraction*_ é um ajuste útil para evitar que o tracionador "coma" o filamento fazendo com que avance e
retroceda várias vezes; estabelece uma distância mínima que tenha que percorrer sem extrudar para que a retração
possa ser acionada. Aconselha-se colocar um valor entre 3 a 10mm aqui se suas impressões têm falhado em figuras
rebuscadas como as peças "voronoi". A contrapartida é que mais "verrugas" ou fiapos devem aparecer.
** ☑ _*Perform retraction during wipe movement*_ faz com que, quando for executar um movimento de "wipe"
(passar o bico em áreas impressas para limpá-lo), ao invés de executar primeiro uma retração com o bico parado
e então percorrer o espaço impresso, ele faça os dois movimentos ao mesmo tempo.  ** ☑ _*Only wipe extruder
for outer-most perimeters*_ faz com que o fatiador não tente fazer o "wipe" para os perímetros mais internos,
visto que não estarão à mostra e suas imperfeições não interferem muito. É interessante deixar esse ajuste
ligado, a exceção seria para filamentos translúcidos e transparentes, em que essas imperfeições podem importar.
* Note que estes ajustes usam bastante o movimento de "wipe" e por isso o próximo ajuste, "☐ __*Avoid
crossing outline for travel movements*__", não deve ser ligado, pois faria o fatiador priorizar percursos sem
passar por partes impressas.  * O Simplify3D tem as configurações bastante organizadas, e as de retração não
se resumem a essa. Na aba "others", há mais ajustes, pertinentes ao caso de vários extrusores (tools): +
image::image389.png[image,width=429,height=157] + São eles a quantidade de filamento a retrair,
a quantidade adicional a extrudar quando recomeçar (que aconselhamos deixar sempre em zero) e a velocidade da
retração.  * Por fim, o último lugar onde se configura retração no Simplify3D é na aba "Extruder". Essas
são as configurações principais de retração: + image:image390.png[image,width=618,height=200]
** _*Retraction distance*_ e _*extra restart distance*_ são os mesmos do tool change, mas para o caso geral.
** __*Retraction vertical lift*__, também chamado Z-hopping, é levantar brevemente o extrusor quando houver
retração para diminuir a formação de verrugas. Envolve movimento Z do extrusor que costuma ser lento em
cartesianas, sendo mais recomendado para deltas ou no mínimo cartesianas mais rápidas. A velocidade é configurada
no próximo ajuste, __*Retraction Speed*__.  ** __*Coasting*__: como já mencionamos, coasting ou _desengrenagem_
é o tracionador deixar de tracionar alguns décimos de milímetros antes do fim da extrusão, para que o filamento
escorrido de excesso seja totalmente consumido. 0,20mm, o default do Simplify3D, é uma quantidade boa para o caso
geral.  ** *Wipe* é o movimento de limpeza do bico passando em cima de áreas impressas, ou seja, uma espécie de
__combing__. Ligando-se esse ajuste o fatiador passa a procurar realizar o wipe depois de completar o perímetro
de uma ilha impressa, e o wipe distance é a distância que ele deve percorrer realizado o movimento. Se _*perform
retraction during wipe movement*_ estiver ligado, a distância aqui não é usada, sendo usada a duração da
retração no lugar. O _wipe_ só é executado se a mínima distância para retração tiver sido percorrida.  *
_*Bridging*_ + image:image391.png[image,width=424,height=211] + Antigamente bastante deficiente tanto
na detecção quanto na configurabilidade de suas pontes, a versão 4.0 do Simplify3D trouxe boas melhorias nessa
parte. Os ajustes são: ** __*Unsupported area threshold*__: quanto de área mínima sem suporte é necessária
para que o algoritmo decida que vai usar a estratégia de "ponte" para ligar uma seção à outra. Dada em
milímetros quadrados (mm^2^).  ** __*Extra inflation distance*__: este ajuste leva em conta que a região de
suporte da ponte se apóia em determinadas camadas inferiores (mais interna que as paredes), e permite expandir
a região usada como apoio pra permitir uma fundação mais sólida. Pode ser difícil visualizar, então aqui
está um exemplo de uma ponte expandida em 2mm + image:image392.png[image,width=594,height=282] **
_*Bridging extrusion multiplier*_ e __*bridging speed multiplier*__: assim como no Slic3r, estes multiplicadores
de extrusão e velocidade permite que durante a ponte o fatiador extrudem menos plástico e mais rapidamente,
para que ele fique mais esticado.  ** _*Use fixed bridging infill angle [0] deg*_ -- faz com que os filetes que
percorrem a ponte tenham um ângulo diferente de 0 graus (paralelo à direção da ponte).  ** _*Apply bridging
settings to perimeters*_ -- ao invés de considerar a ponte como somente a parte interna da estrutura que liga
duas ilhas, considera seus perímetros como parte dela.

image::image393.png[image,width=642,height=473]

*Cura* -- Os ajustes relacionados a qualidade de impressão no Cura são tantos que fica difícil selecioná-los. Por
isso, selecionamos os mais semelhantes ao slic3r e simplify3d, referentes a perímetros, parede finas e
retração. Como arremate, vamos mostrar a mesma seção em inglês e português, para que a equivalência seja
conhecida. O Cura já apresenta "dicas" em azul com a descrição do que a configuração faz -- traduzidas
para português em sua versão oficial do programa pelo autor deste livro -, portanto a explicação aqui envolverá
mais do que isso.

image::image394.png[image,width=642,height=232]

* _*Outer Wall Inset*_ é um ajuste que juntamente com a compensação horizontal, tratada na próxima seção,
ajuda uma peça a ter dimensões mais de acordo com o modelo. No momento do fatiamento ou tradução da peça 3D
para uma trajetória de filetes, as áreas mais externas da peça podem ser "arredondadas para cima", tornando
o objeto um ou dois décimos de milímetro mais largo. Se isso estiver acontecendo, vale a pena ligar esta opção,
que recua o filete mais externo mesmo com ele se sobrepondo ao segundo filete mais externo. Esta opção tem o
risco de deixar a aparência da peça mais rugosa pelo excesso de filamento na superfície.  * _*Outer Before Inner
Walls*_ pode ser um jeito de diminuir a rugosidade do ajuste anterior se ela acontece. Basicamente, inverte a ordem
de construção das paredes de um objeto, que é por default de dentro pra fora, para que seja de fora pra dentro,
logo o segundo filete, se sobreposto ao mais externo, será depositado em cima da camada externa já solidificada. Por
outro lado, em seções pendentes, por o filete mais externo ser depositado sem o suporte lateral do filete mais
interior, ele pode acabar tendo menor qualidade.  * _*Alternate Extra Wall*_ faz em camadas alternadas a parede
ter um filete a mais pra dentro. Este filete ajuda a sustentar o suporte interno, reforçando a peça como um todo.

image::image395.png[image,width=642,height=240]

* __*Compensate Wall Overlaps*__: em algumas geometrias, o processo de fatiamento calcula uma trajetória de
filete que por vezes tem que passar no mesmo lugar duas vezes -- sobrepondo um filete sobre outro. Embora
na maioria das vezes esse plástico em excesso se acomode bem na geometria, umas poucas vezes ele pode gerar
imperfeições visíveis. O Cura permite diminuir a extrusão ao passar sobre tais áreas de modo que não haja
plástico em excesso nas sobreposições, e você pode até definir se somente nas paredes internas ou externas.
* __*Fill Gaps Between Walls*__: assim como a trajetória do fatiador pode ter sobreposições de filetes, devido
à espessura não desprezível dele o contrário também pode acontecer -- determinadas áreas serem tão pequenas
que as áreas em volta são preenchidas, mas uma "falha" permanece. Ativar este ajuste faz com que no final
da impressão da camada o extrusor volte a esta falha e a preencha com uma "gota" de filamento. O maior revés
desta configuração é o tempo maior de impressão.

image::image396.png[image,width=642,height=276]

* __*Print Thin Walls*__: Se já entendemos que o algoritmo de fatiamento "arredonda" a trajetória para a forma
desejada visto que a espessura do filete não é desprezível, o ajuste de imprimir paredes finas nada mais faz que
dizer se ele deve arredondar a forma para cima (ligado) ou para baixo (desligado). Se você tem uma superfície
impressa com letras de 0,2mm de espessura mas a largura de extrusão do bico é 0,4mm de espessura, com o ajuste
desligado as letras não vão aparecer. Com o ajuste ligado elas vão aparecer com 0,4mm de espessura. Na seção
seguinte, compensação horizontal, tratamos um caso semelhante resolvido de outro modo.

Vale ainda mencionar mais um ajuste específico no final da seção "perímetro": __*Ignore Small Z Gaps*__,
ou __*Ignore Pequenas Lacunas em Z*__. Esse ajuste vem ligado por default e faz com que se o modelo tem pequenas
reentrâncias na geometria -- como por exemplo uma fenda horizontal de 0,2mm de altura (eixo Z) -- o fatiador
a ignore e a preencha com paredes e preenchimento como se fosse uma parede contínua. Se seu modelo tem detalhes
que necessitam dessas lacunas e o fatiamento não as revela, é por causa disso.

**Retração**: os ajustes principais de retração do Cura ficam na seção "**Material**":

image::image397.png[image,width=642,height=265]

Mas não todos. Os restantes ficam na seção _*Travel*_ (__*Percurso*__):

image::image398.png[image,width=642,height=154]

Ao invés de discutir cada ajuste da retração ou reiterar expressões óbvias com "Retrai em Mudança de
Camada", mais vale entendermos as diferenças e semelhanças da retração do Cura com os outros fatiadores. O
que o Simplify3D chama de *wipe* é o que o Cura chamada de *combing* ("penteamento"), ou seja, passar o bico em
área já impressa para depositar filamento escorrido ou resíduos dentro da peça. A "distância extra" que o
Simplify3D extruda depois da retração é equivalente à "__*Quantidade Adicional de Avanço da Retração*__"
(__*Retraction Extra Prime Amount*__), só que dada em _volume_ (mm^3^) ao invés de distância de entrada do
filamento. Se quiser achar o volume _v_ em função do diâmetro _d_ do bico e da distância _L_ do filamento,
a fórmula é:

Por exemplo, para extrudar 0,2mm a mais de um filamento de 1,7mm de diâmetro, o volume equivalente é

Um ajuste útil para peças detalhadas é a contagem máxima de retrações: para evitar que o filamento soja
desgastado pelo vaivém do tracionador quando muitas retrações estão sendo feitas num baixo período de tempo,
pode-se especificar um número máximo (__*Maximum Retraction Count*__) em determinada distância (__*Minimum
Extrusion Distance Window*__) para que ele volte a retrair.

__*Coasting*__: já introduzimos o conceito desta operação e mostramos os ajustes para o Simplify3D, mas o Cura
permite uma configuração mais detalhada da mesma operação:

image::image399.png[image,width=642,height=78]

Novamente, o Cura privilegia o _volume_ de filamento extrudado ao invés de comprimento, o que é na verdade
tecnicamente mais adequado já que se espera que as impressoras passem a usar extrusão volumétrica. Para
impressoras 3D com aferição dinâmica de espessura de filamento, a diferença de qualidade pode ser grande.

=== Compensação horizontal

Se você já modelava em 3D antes de ter contato com a impressão 3D, pode ter topado com a seguinte situação:
você modela duas peças, uma principal e outra que deve ser encaixar perfeitamente nela. Para obter esta paridade
perfeita, faz uma operação booleana de diferença nas peças, e o vão de uma corresponde exatamente ao relevo
da outra. Manda imprimir em sua impressora 3D e ao tentar encaixar uma peça na outra, a menor simplesmente não
entra. O que está acontecendo?

A resposta é: apesar de o seu fatiador conhecer as dimensões do seu objeto e calcular o fatiamento levando
em conta as dimensões ideais das camadas, o fato de cada filete abaixo ser "espremido" pelo de cima faz as
bordas da peça se _espalharem_ um pouco mais do que o ideal, e traçarem um contorno no plano XY mais largo que
o modelado. Exagerando o espalhamento para ilustração, o que aconteceu com os encaixes foi análogo a isto:

image::image400.png[image,width=528,height=442]

Uma solução pra isso foi criada primeiro no fatiador slic3r, logo em seguida copiada pelo Simplify3D e um pouco
depois, pelo Cura. Ocorre que as operações-padrão de "inset" e "outset" (termos de computação gráfica)
já são rotineiramente usadas pelos fatiadores em outras áreas, e são delas que precisamos para resolver este
problema. Como elas funcionam? Do mesmo jeito que a forma amarela é uma "outset" do modelo, ou seja, uma
expansão em todas as direções dela, o modelo é, ele mesmo, uma expansão de outra forma mais interna. Basta
calcular esta forma mais interna e fatiá-la no lugar do modelo, pois a expansão dela equivalerá às dimensões
reais dele. Desse modo:

image::image401.png[image,width=507,height=469]

O valor de compensação horizontal é obtido pragmaticamente para o bico e filamento estimando-se a diferença
entre encaixes. A compensação horizontal negativa funciona bem para o caso dos encaixes, mas a positiva também
é útil para, por exemplo, letras finas que não aparecem...

image::image402.png[image,width=619,height=518]

Como última nota sobre este recurso utilíssimo, cabe notar que os nomes são diferentes em fatiadores diferentes:

* **Slic3r**: Print settings → Advanced → Other → XY Size Compensation
* **Cura**: Shell → Horizontal
Expansion
* **Simplify3D**: Other → Horizontal Size Compensation
* **repsnapper**: Preferences → Optimization
→ Offset Outer Shells By (mm) 1.  [[o-problema-dos-arcos-e-círculos]] == O problema dos arcos e círculos

Além do "espalhamento" indesejado das impressões 3D que a compensação horizontal ataca, temos também um
outro problema que não raramente é confundido com este espalhamento, pois tende a deixar seções circulares
mais estreitas. Este é na verdade um dos inúmeros aspectos de um problema _milenar_ da humanidade chamado de
"quadratura do círculo"^1^, ou quais os métodos que podem ser usados para transformar a curva do círculo em
um segmento linear. Na engenharia, especificamente na engenharia que criou a impressão 3D, esse problema afeta
as estruturas em arco e circulares, especialmente os orifícios circulares. Na introdução do livro falamos
de _papers não-acadêmicos_ e citamos o célebre post de blog do reprapper _nophead_ que expõe esse problema:
http://hydraraptor.blogspot.com.br/2011/02/polyholes.html[_http://hydraraptor.blogspot.com.br/2011/02/polyholes.html_].

Basicamente, são _*4*_ os problemas que encontramos quando importamos um STL no fatiador, fatiamos e o colocamos
para imprimir:

1.  **Erros de facetamento**: quando os sistemas de modelagem 3D convertem cilindros em malhas de triângulos
usadas para a impressão, eles produzem um prisma poligonal, ou seja, o círculo é transformado em um polígono
equilátero de muitos lados.

image::image403.png[image,width=642,height=500]

1.  **Pausas de segmento**: ok, converter um círculo para um polígono com 10 facetas não é boa idéia. Na hora
de imprimir, então, vamos usar o máximo número de segmentos de reta possível -- digamos, 1000 segmentos. E
tentando resolver o primeiro problema, topamos no segundo: as __pausas de segmento__. A impressora vai receber
_centenas_ de segmentos minúsculos pra percorrer, cada segmento extrudando uma quantidade insignificante de
filamento. Além dos erros de arredondamento pelo uso de quantidades tão pequenas, a impressora acaba ganhando
um número enorme de instruções a executar em pouco tempo, e ainda contando acelerações e desacelerações,
acaba fazendo pausas entre elas.  2.  **Encolhimento de arco**: esse problema acontece quando o seu círculo tem
espessura diferente de zero, ou seja, um círculo de "mundo real". O seguinte diagrama explica o problema:

image::image404.png[image,width=642,height=599]

1.  **Corte / repuxo de cantos**: enquanto que os problemas anteriores eram mais geométricos, este tem mais a ver
com propriedades físicas como viscosidade, aderência, elasticidade e até calor específico. Quando o _hotend_
deposita filamento em uma trajetória reta, e de repente sofre uma mudança suave de ângulo, o filamento acaba
sendo "puxado" dos cantos para dentro. Mais um fator que diminui furos!

image::image405.png[image,width=619,height=451]

=== Como corrigir esse problema?

Vimos que esse é um problema com causas compostas e bem diversas -- geométricas, físicas, até afetadas por
outros ajustes como compensação horizontal e arredondamento de paredes externas no fatiamento. É, por natureza, um
problema difícil de realmente "resolver" -- sendo melhor a abordagem de _mitigação_ ou __compensação__. No
próprio post de __nophead__, ele propõe uma solução que funcionou bem pra ele: a partir de 2mm de diâmetro,
dividir o círculo em pelo menos duas vezes seu diâmetro em mm. Um círculo de 6mm de diâmetro funcionaria
razoavelmente com pelo menos 12 divisões. Um de 10mm de diâmetro precisaria ter pelo menos 20 divisões.

Essa foi uma regra prática que serviu para o caso dele e lida com dimensões maiores. Infelizmente, não só
não parece muito prática para hoje em dia (em que precisões maiores são exigidas para as peças impressas,
mesmo as de pequena dimensão) quanto exige certo procedimento durante a modelagem, e nem sempre se tem a opção
de mexer na modelagem de um objeto.

**Na prática**: o que é feito é a priorização de modelos tridimensionais com considerável tesselação de
círculos e arcos (mesmo podendo topar no problema das pausas de segmentos) e alguma compensação manual "de
olho" usando configurações de compensação horizontal ou mesmo modelando orifícios maiores. Fatiadores
baseados em manutenção do volume (por __voxels__) como o _Voxelizer_ atacam o problema do ângulo da quantidade
de material utilizado. Pode-se bem dizer que esse é um _problema não resolvido_ da impressão 3D FFF.

[[uma-proposta-de-mitigação-mais-informada.]]  === Uma proposta de mitigação mais informada.

Que fique claro que a proposta apresentada aqui é uma incursão espinhosa em uma área controversa. Depende ainda
de softwares não totalmente adaptados para isso, embora muito já se tenha feito para tal. Os resultados podem
ser satisfatórios ou decepcionantes.

Na parte de malhas, já explicamos que modeladores sólidos costumam usar formatos complexos (STEP, IGES e outros)
que incorporam "curvas reais", determinadas por fórmulas matemáticas, mas que as malhas comumentes usadas nos
fatiadores de impressão 3D FFF não gozam dessa facilidade. É até possível que em algum futuro suas bibliotecas
internas ganhem suporte a curvas matematicamente formuladas e possam passar tal informação ao fatiamento, mas no
momento nenhum deles tem isso. No entanto, apesar de _fatiadores_ não incorporarem, a surpresa é que a maioria dos
_firmwares_ de mercado já apresenta suporte a curvas reais -- na forma de _arcos_ -- e já vem com esse suporte
ativado por default. Isso vale para Marlin, Repetier e Smoothieware: os comandos pertinentes são os G-Codes *G2*
e **G3**, denotando arco circular na direção horária e anti-horária respectivamente. Outros G-Codes padronizados
nas CNC, mas ainda não implementados nas impressoras 3D, seriam os *G5* e **G5.x**, para _splines_ e __NURBS__.

Em teoria, um firmware que implementa *G2* e *G3* pode, se valendo de tal descrição matemática infinitamente
precisa da trajetória, e conhecendo das particularidades mecânicas e eletrônicas do dispositivo que controla bem
melhor que o fatiador, adequar as correntes, tensões, tempos e forças de forma que a deposição do filamento
seja muito mais suave e precisa, sem pausas ou outros artefatos que causariam os piores efeitos da quadratura de
curvas. Teríamos uma curva de deposição matematicamente muito mais próxima da real.

Mas de que valem o *G2* e **G3**, se as próprias formas que os fatiadores informam, em formatos STL, AMF ou 3MF,
não podem ter arcos? Ora, eles _têm_ formas parecidas com arcos mas que foram transformadas em uma sequência
de pequenos segmentos de ângulos suaves. A questão é: algoritmos matemáticos podem detectar tais sequências
convertidas e recuperar os arcos da forma, produzindo *G2* e *G3* onde necessário. O fatiador repsnapper, por exemplo,
tem esse recurso. Slic3r, Cura e Simplify3D, no entanto, não têm. E ainda que seja interessante conhecer e executar
o repsnapper como prova de conceito, a carência de recursos desse fatiador não justifica usá-lo só por isso.

Mas não é necessário. Essa inferência de segmentos pra curvas pode ser feita _depois_ do fatiamento. De
fato, existe um software externo que, alimentado com G-Code de _qualquer_ fatiador de mercado, infere as curvas
e devolve um G-Code com elas transformadas em arcos *G2* e **G3**. Esse software, livre e multiplataforma,
chama-se **GCode Arc Optimiser**, é escrito em PHP e tem colaboração do autor do livro^2^. Pode ser baixado de
https://github.com/manticorp/GcodeArcOptimiser[_https://github.com/manticorp/GcodeArcOptimiser_]. O software exige
uma versão do interpretador PHP instalada e para ser usado, necessita que um pequeno script seja criado em sua
pasta (pode ser criado por qualquer editor de textos puro e gravado como "cli.php"):

[cols="",] |============================================================== a| [[FEITO_vimCodeElement1]]<?php

include "functions.php";

$debug = false;

$lookahead = 5; //

$pos_error = 0.1; // absolute

$alignment_error = 0.01; // absolute

$extrusion_error = 0.15; // percent

$start = microtime(true);

$options = getopt('f:o:');

$gcode = str_replace("\r","",file_get_contents($options['f']));

$gcode = explode("\n", $gcode);

$gcode = SplFixedArray::fromArray($gcode);

$processed = processGcode($gcode);

file_put_contents($options['o'], $processed);


E então colocar o arquivo G-Code de entrada (digamos, entrada.gcode) na mesma pasta e executar a conversão:

php cli.php -f "entrada.gcode" -o "saida.gcode"

Verifique a saída no final; deve haver alguma linhas começando com *G2* e **G3**. Os orifícios extrudados com esses
comandos serão mais exatos que outros, e as curvas da peça feitas pelas curvas inferidas serão também mais suaves.

Notas:

1 -- Tem até artigo na Wikipedia:
https://pt.wikipedia.org/wiki/Quadratura_do_círculo[_https://pt.wikipedia.org/wiki/Quadratura_do_c%C3%ADrculo_]

2 -- Nada muito envolvido, mas o programa de linha de comando do README, que chama a biblioteca
do autor, não funcionava e foi corrigido por quem escreve estas linhas, com o patch em
https://github.com/manticorp/GcodeArcOptimiser/pull/3[_https://github.com/manticorp/GcodeArcOptimiser/pull/3_].

1.  [[section-15]] == + [[filamentos-flexíveis-como-imprimi-los]] == Filamentos flexíveis: como imprimi-los

Filamentos flexíveis são um assunto contencioso nas comunidades online de impressão 3D. Sendo motivo de orgulho
para alguns, é alvo de ostentação, subjetividade e amadorismo do mesmo modo que a temperatura da mesa para
impressão: o "funciona comigo" é um troféu que alguns exibem após conseguir imprimir um número limitado
de formas simples, sem no entanto esmiuçar como e por quê o conseguiram, muitas vezes com alegações duvidosas
sobre os resultados obtidos e contraditórias à engenharia envolvida.

=== Causas da dificuldade

Entender o que torna as diversas marcas e tipos de filamento flexível difíceis de imprimir em uma impressora 3D
convencional é o primeiro passo para resolver o problema.

* **Existem diversos tipos de filamento flexível, com diferentes níveis de flexibilidade e propriedades**. De fato,
tudo o que um filamento precisa para ser considerado "flexível" é ser dobrado e voltar à forma original
sem marcas. Nessa classificação entram filamentos quase rígidos de poliuretano mas também termoplásticos
elastômeros suaves e molengas, entram filamentos de suporte que aderem facilmente à mesa como PVA e filamentos
de alta temperatura que sofrem warp e resistem à aderência como nylons. Tendo como única característica comum a
elasticidade, é fácil perceber que certa estratégias para uns pode falhar para outros. Em especial, os seguintes
problemas são derivados desta variabilidade: ** A maioria dos filamentos flexíveis **adere bem à mesa**, sem
precisar nem mesmo de cola ou mesa aquecida, e não sofre warp. Para filamentos que usam nylon, geralmente é o
contrário -- cola e mesa aquecida são fundamentais, não só o arranjo no extrusor.  ** O bom tracionamento
de um filamento flexível específico depende de um *equilíbrio delicado de pressão no tracionador* que se for
baixa, não consegue penetração dos dentes no filamento para tracioná-lo, e se for alta, leva ao ovalamento
do filamento que gera entupimentos e aumenta a chance de o filamento embolar. O equilíbrio será diferente para
cada filamento, e alguns extrusores nem mesmo têm ajuste dessa pressão.  * *Embolamento do filamento nos vãos
logo após o tracionador* são o acidente mais comum nas tentativas de impressão com filamento flexível. Como a
tendência de um fio flexível ao ser impelido para a frente pelo tracionador mas enfrentar resistência mecânica
é se flexionar ao invés de repassar a tração para a frente, qualquer folga ou reentrância que permite que
este fio acomode sua forma para a flexão fará com que ele se dobre, e a partir de uma dobra inicial ele já perde
toda a tração subsequente. Poucos mecanismos tracionadores têm espaçamento apertado o suficiente para impedir
que isto aconteça e mesmo o tubo por onde entra o filamento flexível para ir para a área quente tem que ter
baixo atrito e bem justo (o que se contrapõe ao uso de tubos mais espaçosos para funcionar bem com variações
de diâmetro de filamento).

image::image406.png[image,width=642,height=466]

* *Velocidades altas* compõem a chance de embolamento, pois tracionam maior quantidade de filamento com tendência a
dobrar numa unidade de tempo, com a mesma resistência mecânica.  * *Mudanças de velocidade, ou seja, acelerações*
também se compõem ao problema, pois é nos súbitos inícios e términos de tracionamento que os filamentos
flexíveis mais se curvam, já que ocorre a mudança de pressão rápida. Em especial, as **retrações**, que
são quando o filamento está em pressão constante para a frente, para ser subitamente parado e esticado para
trás, para então ser novamente tracionado pra frente, são os eventos com maior chance de embolamento, **mesmo
que as velocidades envolvidas sejam baixas**.  * *Stringing (fiapos)* são problemas constantes nas impressões com
filamento flexível. Isso ocorre tanto por o filamento flexível ter um escorrimento menos controlável quanto por as
estratégias que melhor mantêm extrusão se contraporem aos mecanismos de controle de fiapos (como a retração).
* *Subextrusão* é outro problema possível dos filamentos flexíveis __mesmo quando se tem um extrusor adequado
sem folgas__, podendo ocorrer tanto por ajustes de fatiamento quanto por perdas de pressão de tracionamento,
especialmente em impressões longas. Parte disso acontece por causa de pequenos fragmentos do filamento que se
acumulam nos dentes e passam a funcionar como se fossem um lubrificante sólido.

image::image407.png[image,width=642,height=467]

=== Soluções e mitigações

Entendido e caracterizado o problema, essas são as mitigações que se pode fazer para imprimir melhor com
filamento flexível:

* **Usar um extrusor sem folgas e sem atritos após o mecanismo de tracionamento**. Este é, de longe, o fator
mais importante. De nada adiantam todos os outros esforços se o filamento continua podendo embolar. Na maioria
dos casos, isso envolve trocar todo o extrusor por um outro modelo ou ter que modificá-lo bastante, como no
vídeo citado. Existem extrusores de mercado específicos para lidar com filamentos flexíveis e acopláveis à
vários modelos de impressora, como o __Flexion Extruder__, que tem até mecanismo de autolimpeza para impedir
que a engrenagem acumule fragmentos de filamento que prejudicariam a tração.

image::image408.png[image,width=642,height=332]

Pode não ser necessário comprar um extrusor novo: existem vários modelos imprimíveis,
com uma busca no site _thingiverse_ retornando mais de 500 modelos diferentes:
https://www.thingiverse.com/search?q=flexible+filament+extruder[_https://www.thingiverse.com/search?q=flexible+filament+extruder_]

* *Dependendo do extrusor, pode ser suficiente uma pequena modificação* para eliminar a folga. Tal modificação
será uma peça impressa que se encaixa na folga do extrusor e permite que o filamento escape.

image::image409.png[image,width=530,height=394]

* **Uma das modificações mais efetivas, que pode geralmente ser utilizada em conjunto com uma peça antigap, é
a inserção de um tubo de PTFE até o hotend**. O tubo de PTFE é uma peça comum e fácil de ser encontrada na
impressão 3D, visto que é usada em bowdens e no tubo de hotends. É bem justa para o filamento, tem baixíssimo
atrito e pode ser facilmente cortada com uma navalha para ficar bem rente às engrenagens tracionadoras. Muitos
modelos de extrusores para filamentos flexíveis já exigem o uso do tubo de PTFE, mas ele pode ser facilmente
adaptado alargando-se o tubo de saída do tracionador para seu encaixe.

image::image410.png[image,width=642,height=311]

* **A distância do tracionador ao hotend deve ser mínima**. Quanto maior a distância, maior a histerese elástica
que impede o tracionamento e favorece o comportamento de "mola". Por isso mesmo, bons extrusores de filamento
flexível são compactos. Pela mesma razão, _bowdens_ costumam ser impraticáveis para uso com filamento flexível,
uma notável exceção sendo o das impressoras _Ultimaker_ que com velocidades baixas consegue imprimi-los -- e
aí a razão de ser uma exceção é por a impressora usar filamento de 3mm de diâmetro, um padrão já em desuso
mas com menor histerese elástica.
* **O aperto do tracionador deve ser regulável**. Como o ponto ideal de aperto
varia de acordo com o filamento flexível usado, com alguns ovalando mais facilmente que outros com o aperto alto,
é desejável que o operador possa experimentar e encontrar o ponto ótimo de aperto. Uma das melhores formas de
se implementar isso é com parafusos reguláveis:

image::image411.png[image,width=594,height=342]

* Um *tensor de filamento* também ajuda a domar a histerese do filamento flexível, mantendo-o esticado até
a altura do tracionador. É útil porque filamento flácido tende a entrar nas engrenagens mais "de lado" e
portanto a embolar na saída.

image::image412.png[image,width=571,height=417]

* **Se puder escolher o parafuso tracionador ou pinhão do extrusor, prefira os canaletados ao invés dos retos**. Eles
guiam e aderem melhor a filamentos flexíveis. Por outro lado, isso exige também que a canaleta seja precisamente
alinhada com a saída do tracionador, caso contrário o filamento sofre dobras.
* **A primeira camada não deve
ser muito rente**. Contrariando o que aprendemos sobre fatiamento, no caso do filamento flexível é bom deixar
uma pequena folga na primeira camada. Isso porque a impressão rente deixa a pressão dentro do hotend alta,
e também porque a maioria dos filamentos flexíveis tem excelente adesão à mesa. A exceção notável são os
nylons, que sofrem warp e podem não aderir bem à mesa. A impressão mais alta pode ser feita de diversas formas,
desde colocar o endstop do eixo Z ligeiramente mais alto até mexendo em parâmetros de fatiamento, como o offset
vertical ou altura da primeira camada.  + E em termos de configurações de fatiamento, existem várias estratégias
que podem ser tomada para melhor imprimir com filamento flexível e com menos possibilidades de falhas.  1.
=== Ajustes de fatiamento

* *Velocidade de extrusão* é a configuração mais importante para a impressão com flexível funcionar. Uma
velocidade convencional de 60 mm/s geralmente não vai funcionar a não ser com extrusores muito bem preparados
para filamentos flexíveis, filamentos menos exigentes e formas impressas simples. Não acredite nos fanfarrões de
facebook que dizem imprimir Ninjaflex nesta velocidade em impressora com bowden! Comece com uma velocidade pequena
-- digamos, 15 mm/s, ou até mesmo 5mm/s -- imprimindo uma forma simples e vá aumentando à medida que conseguir
confiança que a impressora dá conta.  * *Aceleração do extrusor* também deve ser colocada em um valor baixo para
manter a pressão interna mais constante; um valor entre 200 e 500 mm/s^2^ é recomendado.  * *Retração* deve ser
minimizada. Embora alguns _reprappers_ aconselhem desligá-la totalmente, costuma ser suficiente deixá-la com baixa
velocidade e pequena distância (digamos, 15 mm/s e 2mm de retração). É importante também impedir um número
grande de retrações; neste caso, os ajustes de limitar o número por distância do Cura serão bem úteis, com
20 retrações a cada 10mm sendo o recomendado. Claro que o número de retrações é função da forma impressa,
então formas vazadas, finas e repletas de ilhas como as _voronoi_ terão probabilidade maior de falhar do que
peças inteiriças e grossas.  * No Slic3r, usar autospeed, embora aumente o tempo total de impressão, deixa a
pressão dentro do hotend o mais uniforme possível, diminuindo tanto as chances de falha quanto os artefatos de
impressão, e é altamente recomendada para filamento flexível.  * *Para mitigar o stringing e bolhas, Coasting*
(Simplify3D e Cura) e *Pressure Advance* (Slic3r) ajudam. Colocar uma *velocidade de percurso* (travel) alta, isto
é, a velocidade do carro do extrusor quando não está extrudando, também ajuda. E por fim, habilitar o *Z lift*
(levantamento de Z) quando for necessária uma retração também.  1.  [[dupla-extrusão]] == Dupla extrusão

Finalmente, vamos tratar de um dos ajustes que mais quebram a cabeça dos que tratam com modelos que precisam ser
impressos em extrusão dupla. Primeiro, vamos revisitar os quatro formatos principais de arquivos para impressão 3D:

* **STL**: o mais simples, apenas uma malha de triângulos orientados, sem informação de material.
* **OBJ**:
tem informação de material por polígonos e não objetos, e de uma forma mais orientada a visualização. Os
fatiadores não associam essa informação a extrusores diferentes.
* **AMF**: tem informação de material
adequada à impressão 3D, pode funcionar para associação automáticas a extrusores no Slic3r dependendo de
como o arquivo foi criado; não funciona no Cura novo e no Simplify3D.
* **3MF**: um formato novo ainda sem muito
suporte nos fatiadores populares.

Portanto, com exceção do AMF que _pode_ funcionar adequadamente no Slic3r -- exceto quando ele associa o extrusor
errado ao material! -, não parece muito jeito de lidar com a dupla extrusão, há?

image::image413.png[image,width=624,height=526]

A resposta é que há sim, é perfeitamente possível e até fácil modelar e associar partes de um modelo a extrusor
se você conhece o fluxo de trabalho recomendado para isso. A razão de não ser tão intuitivo com um arquivo
único que resolva todos os problemas é que se a impressão 3D de baixo custo ainda é nova, mais novo ainda é
seu uso com dois ou mais extrusores. O mercado aponta para fluxos mais fáceis e complexos, inclusive com mistura
de materiais, mas por enquanto devemos conhecer a forma "original" de lidar com isso, que envolve arquivos STL.

Como envolve arquivo STL, se ele não tem informação de material?

Essa é na verdade quase uma vantagem do arquivo: ele não tem informação de material, então você é quem
deve atribuir essa informação no fatiador. E ele tem informação de coordenadas: se você modela um corpo em
um arquivo, e em outro arquivo você modela uma cabeça cujas coordenadas se encaixam nas exatas coordenadas de
onde aquele corpo acaba, no fatiador eles aparecerão encaixados.

Você precisa informar ao fatiador, no entanto, que ele não deve mudar as coordenadas dos objetos, como por
exemplo os rearranjando automaticamente. No Slic3r, você faz isso pelo menu File → Preferences:

image::image414.png[image,width=487,height=358]

Abrimos ambos os STLs no Slic3r. Podem ser ambos ao mesmo tempo, um em sequência ao outro, ou arrastando os
arquivos para a janela: eles aparecerão sobrepostos, formando um cone contínuo:

image::image415.png[image,width=603,height=516]

Damos dois cliques em qualquer lugar do objeto. O Slic3r tem algo que são os "ajustes individuais por objeto", que
permitem fazer ajustes diferentes para vários objetos na mesa de impressão, como por exemplo infills diferentes. No
nosso caso, estamos querendo associar cada objeto a um material, ou cor nesse caso. Acabamos selecionando a parte
laranja do cone, como a janela mostra:

image::image416.png[image,width=439,height=331]

Clicamos no sinal de "+" verde abaixo da palavra "Extruder". Aparecerá uma lista desenrolável imensa para
selecionarmos o ajuste específico. Vamos para cima e achamos o "Extruders > Extruder". Ele vem preenchido
com o valor "default". Vejo o painel de materiais do lado e o filamento branco aparece primeiro, o que quer
dizer que está no extrusor 1. Como o material que quero é o filamento vermelho, seleciono o extrusor 2.

image::image417.png[image,width=572,height=419]

Repito a operação para o segundo objeto:

image::image418.png[image,width=578,height=423]

Dou "OK" e pronto, está terminado. O cone será impresso.

No Cura, o fluxo é um pouco diferente. Você importa as duas peças, e ele as dispõe automaticamente; uma vez
importadas, selecionamos a ferramenta "per objects settings", que já mostra de cara a configuração do
extrusor para modificarmos:

image::image419.png[image,width=583,height=410]

Deixo a parte selecionada com o primeiro extrusor, seleciono a segunda parte e mudo o ajuste para o segundo
extrusor. Agora só falta informar ao Cura que aquelas duas peças estão no mesmo sistema de coordenadas. A
palavra-chave para isso é "merge", misturar. Seleciono os dois modelos deixando a tecla _shift_ apertada e
clicando em cada um. Então clico com o botão direito em cima e escolho o "Merge Models":

image::image420.png[image,width=580,height=410]

Pronto! A visualização já mostra que os modelos estão com cores (extrusores) diferentes:

image::image421.png[image,width=581,height=408]

Eu posso ainda pedir uma "confirmação adicional" fazendo a _boa prática_ de sempre verificar o fatiamento. No
caso do Cura, é clicando no olho e selecionando "Layers":

image::image422.png[image,width=597,height=419]

Pronto! Fatiamento de dupla extrusão pronto pra ser impresso.

No Simplify3D, o processo é facilitado com o "Wizard de Extrusão Dupla", que te guia nos passos. Simplesmente
deixe ativo o perfil da sua impressora de dupla extrusão e importe os dois STLs. Em seguida, selecione Tools →
Dual Extrusion Wizard (Assistente de Extrusão Dupla):

image::image423.png[image,width=601,height=429]

No diálogo a seguir, simplesmente escolha que objeto vai em qual extrusor e selecione a opção "group and
align models" para informar que eles estão no mesmo sistema de coordenadas:

image::image424.png[image,width=431,height=295]

Você verá uma peça que parece de uma cor só, porque a visualização do Simplify3D mostra assim. Mas veja que
o cone aparece inteiro, o que quer dizer que as duas partes foram colocadas no mesmo sistema de coordenadas.

image::image425.png[image,width=558,height=399]

Clique em "prepare to print" para fatiar, selecione as duas cores e verá o fatiamento. Ainda não aparecem as
duas cores diferenciadas; para aparecer, você tem que ir no painel à esquerda, "Show in Preview" e selecionar
"Active Toolhead", para que o fatiador diferencie os extrusores ("toolheads") por cores.

image::image426.png[image,width=556,height=481]

Voilà! Dupla extrusão, exatamente como queríamos.

== Diversão com G-Code

[[gcode2]]Passamos brevemente pelo que é o G-Code em capítulos anteriores, mas não há como negar que o
conhecimento desta ‘linguagem de máquina’ é essencial ao profissional de impressão 3D em todos os níveis,
desde identificar e resolver problemas até aumentar a qualidade de suas impressões.

Em todos os momentos, será útil que o leitor possa avaliar o arquivo gerado pelo fatiador (geralmente com
extensão .gco ou .gcode). Recomendamos que a cada receita aplicada o leitor grave o arquivo e o abra em algum
editor ou visualizador de texto puro (gedit no Linux, wordpad no Windows, TextEdit no Mac OS X). Se o fatiador
usado for o **Slic3r**, a seguinte configuração deve ser ligada:

image::image427.png[image,width=553,height=478]

Para os propósitos deste capítulo, é desejável que o leitor use um controlador de impressão (print host)
para testar os comandos e ver sua saída. É importante também ter em mente que são comandos que vão mexer
diretamente com o hardware, e um comando errado pode muito bem afundar o bico na mesa, subir um componente para
temperaturas excessivas ou provocar acidentes de outros tipos, portanto se aconselha que o leitor fique sempre
pronto pra desligar a impressora caso perceba que algo do gênero está prestes a acontecer.

O controlador de impressão usado para ilustrar os exemplos aqui será o pronterface da suite printrun, que pode
ser baixado de _http://www.pronterface.com/#download_ -- este controlador de impressão é simples, autocontido
e tem "macros" associáveis a botões.

image::image428.png[image,width=630,height=437]

=== Uma introdução aos comandos G-Code

Até agora mostramos muitos exemplos de código e mesmo falamos alguns __comandos__, mas não dissemos o sentido deles.

O G-Code foi criado no MIT na década de 1950, com as primeiras CNCs. Nasceu para ser usado principalmente por
cartões perfurados -- somente mais tarde sendo feita em texto comum - que passavam instruções pontuais para as
máquinas executarem: __vá para a posição X "tal", a posição Y "tal", com velocidade "tal", e baixe
o instrumento; percorra mais 20 unidades positivas no eixo X na mesma velocidade; suba o instrumento e o desligue__.

Não era essencial que humanos entendessem a "linguagem" e portanto, diferente das linguagens de programação
que usamos hoje em dia que usam _mnemônicos_ em inglês para nos lembrarmos das palavras-chave ("print",
"echo", "for", "while", "read", etc.), os comandos são compactos e representados por uma letra
seguida de um número: "G"; por exemplo, **G28**.

Os comandos "G", aliás, foram os primeiros comandos do G-Code. São chamados de "comandos
preparatórios". Diferentemente de outras linguagens com padronização oficial e comitês de decisão, o G-Code
é uma linguagem extraordinariamente variada, com comandos e até a sintaxe dependendo muito de implementação
específica. Nas impressoras 3D de mercado, por exemplo, os comandos "G" são usados para operações herdadas
das CNCs, e as outras operações são implementadas por comandos "M", como "**M117**". Os comandos
"M" também são chamados de "funções miscelâneas". Nosso extrusor ou bico não tem esse nome no G-Code;
nas CNCs, era uma ferramenta como broca ou serra, e ferramenta em inglês é "Tool"; o comando de G-Code que
seleciona ferramentas é "T" seguido da numeração da ferramenta, começando por 0 (o primeiro extrusor é
selecionado com **T0**, o seguindo com T1, etc.).

A sintaxe do G-Code é uma única linha de qualquer tamanho, no seguinte formato:

*<número de linha opcional><comando><parâmetros do comando><checksum><comentário>*

**Os espaços são opcionais e ignorados, inclusive no meio de comandos**. Uma linha como "__G1
X100.500_Y109.500_E0.9516_F369__" (com "_" no lugar de espaço para melhor visualização) será interpretada
exatamente como "__G1X100.500Y109.500E0.9516F369__" ou ainda "__G_1X10_0._500Y109.5_00E0.9516_F36_9__".

* **Número de linha**: normalmente nos códigos de impressoras 3D não são usados, mas são suportados pela maioria
dos softwares apesar de desencorajados. O número tem que ser o primeiro campo da linha e precedido de "N", além
de sequencial: se a primeira linha começa com "N1", a segunda deve ser "N2". A utilidade desses números é
primariamente para estruturas de _loops_ e __condicionais__, que os firmwares de impressora 3D atualmente nem mesmo
suportam. Por isso não trataremos os comandos **IF**, **GOTO**, **WHILE**, os *registradores* e as *expressões
condicionais* de G-Code.
* **Comando**: É a palavra-chave que vai declarar a ação a ser tomada, com ou sem
argumentos. O G-Code não aceita mais de um comando por linha. Nas impressoras 3D, estamos limitados a três comandos:
**G**, *M* e **T**.
* **Parâmetros**: Assim como os comandos, os _parâmetros_ são dados por uma letra seguida por
um número (positivo ou negativo; os negativos, obviamente, começam com o sinal de "-"). Os tipos de parâmetro
mais comuns passados para comandos são: ** *S* era usado originalmente em CNCs para designar a velocidade (speed)
de rotação, mas em impressoras 3D este parâmetro __não tem esta função__. Ele é usado como um parâmetro
genérico para _distância_ ou __temperatura__, sendo usado em comandos de retração e ajuste de hotend e mesa.  **
*R* de retract, velocidade adicional ligada à retração, usada em poucos firmwares.  ** *F* de taxa de alimentação
(feedrate), sendo usado nas impressoras 3D para designar velocidade. A unidade utilizada dependerá do comando e da
configuração do firmware.  ** *T* é em poucos firmwares usado para feedrate de recuperação da retração. Note
que aqui T é parâmetro, não comando.  ** *X, Y* e **Z**: coordenadas/distâncias. **X10 Y5 Z30**, por exemplo,
significa 10 unidades em X, 5 em Y, 30 em Z. O significado dessas coordenadas dependerá da configuração e do
comando -- por exemplo, podem ser coordenadas absolutas ou relativas à posição atual da ferramenta.
** **E**:
quantidade de filamento do extrusor.  ** *A, B* e **C**: coordenadas/distâncias angulares ou rotacionais. Não
usadas em impressoras 3D.
** **P**: parâmetro de uso geral, sem significado predefinido, para comandos variados.
* **Checksum**: É um campo que contém um asterisco seguindo de um número de 0 a 255. Este número é calculado
a partir de todos os caracteres da linha atual até antes do asterisco, e serve para em conexões com ruído fazer
uma verificação simples se todos os caracteres chegaram corretamente. Não é usado em impressoras 3D modernas.
* **Comentário**: Um campo que começa com ponto-e-vírgula (;) e é totalmente ignorado pelo interpretador de
G-Code. Serve simplesmente para humanos entenderem o código. Uma linha de G-Code pode ser composta somente de
comentário, sem comandos.

Note que alguns comandos podem retornar uma mensagem que pode consistir de uma ou mais linhas no mesmo "terminal
controlador", como um comando que peça a versão do firmware ou o estado atual do extrusor.

Considerando que na prática não usaremos números de linhas e checksums e que usaremos espaços para ficarem
mais legíveis, os comandos de g-code são assim:

*Comando parâmetros; comentário*

Exemplo:

G1 E-0.5 F1200 ; ooze retract

O *G1* é um comando de __movimentação__. _O que_ ele vai movimentar, neste caso, será determinado pelos
parâmetros. Neste caso, o parâmetro "**E**" nos diz que é 0,5mm do filamento, mas com o sinal de menos,
significando que ele está retornando e não avançando com o filamento; e com a velocidade dada por F1200, que
é 1200 mm/min (20 mm/s). O comentário nos esclarece que isto é um "ooze retract", ou seja, uma retração
para evitar escorrimento.

Agora que entendemos a sintaxe, portanto, vamos aos comandos. Comecemos pelos comandos G mais básicos.

* *G0* e *G1* -- são os comandos de movimento. Em seu passado de CNC, o G0 era movimento "rápido" (na
velocidade máxima suportada pela máquina, equivalente ao __travel__) enquanto o G1 era o movimento linear
controlado. Em quase todos os firmwares de impressoras 3D de mercado, no entanto, o G0 e o G1 são exatamente o
mesmo comando, implementados como sinônimos e tendo, obviamente, os mesmos parâmetros (curiosamente, fatiadores
como Cura e MatterControl ainda geram g-code que para alguns movimentos usa G0, para outros G1). O comando tem 6
parâmetros possíveis; nem todos precisam ser colocados, mas é preciso providenciar pelo menos um. São eles,
onde _n_ é o valor numérico (inteiro ou racional) que segue: ** X__n__: A posição para a qual mover o eixo X.
** Y__n__: A posição para a qual mover o eixo Y.  ** Z__n__: A posição para a qual mover o eixo Z.  ** E__n__: A
quantidade de plástico a extrudar entre o ponto inicial e final do movimento, por default em unidade de comprimento
de filamento que entra (mm, por exemplo).  ** F__n__: A velocidade (por minuto) deste movimento.  ** S__n__: _flag_
para ativar a verificação do endstop. Com S0 (default), o endstop é ignorado, isto é, o firmware não vai
parar se o fim de curso for ativado. Com S1, o movimento pára quando o fim de curso de qualquer eixo for detectado.

Se você já se perguntou sobre a denominação de "5D firmware" nas opções de G-Code do Simplify3D, ela se
refere a este comando -- os 5 parâmetros ou "dimensões" X, Y, Z, E e F. Implementações velhas dos comandos
usavam menos parâmetros e o movimento era quebrado em duas partes. Quase todo firmware existente hoje em dia é 5D.

O movimento do G0/G1 é "interpolado" entre os pontos. O que isso quer dizer é que ele calcula uma linha reta
no espaço entre a origem e o destino (a menor distância entre dois pontos). Devido ao modo como a impressão
3D funciona, no entanto, com camadas horizontais, comandos G0/G1 que envolvem o eixo Z são raros, a maioria
funcionando em um plano -- nesse caso o Z é simplesmente omitido.

Exemplos:

G1 X20 Y20 F180 ; vai para X 20, Y 20 na velocidade de 180 unidades por minuto sem extrudar.

G0 X30 Y30 Z30 F180 E0.8 ; vai para X 30, Y 30, Z 30 na velocidade de 180 unidades por minuto extrudando 0,8
unidades de comprimento de filamento nesta trajetória.

Parece um comando simples o suficiente, não? Mas existem algumas peculiaridades a se notar, que valem também
para outros comandos:

1.  Pra começar, preste atenção que o parâmetro de velocidade toma como entrada a unidade _por minuto_ de
movimento. Isto está em contraste com a configuração da maioria dos fatiadores, que coloca tais velocidades em
comprimento por segundo. É comum o usuário que começa a usar g-code manualmente se esquecer de converter e não
entender o resultado.  2.  Qual comprimento, afinal, ele usa? A maioria dos firmwares usa como default o *sistema
métrico* para comprimento (milímetros), que pode ser mudado para o *sistema imperial* (polegadas) com o comando
**G20**, e mudado de volta para milímetros com **G21**. Essa mudança fica somente na _RAM_ da impressora, e volta
ao default quando desligada.  3.  Se você não colocar a velocidade, qual valor o firmware adota? A maioria dos
softwares adota a política "pegajosa" (__sticky__), isto é, retém o último valor usado para o comando. Se
você especificar, sem mais nenhum parâmetro, *G0 F600* e logo depois *G1 X40 Y10* (lembre-se, G0 e G1 são o
mesmo comando), ele vai para a posição X 40, Y 10 a 600 milímetros por segundo.  4.  As coordenadas dadas são
_em relação à posição que o extrusor está_ ou __em relação ao ponto (0,0,0) da impressora__, que definimos
em seção anterior? Assim que é ligada, o _default_ dos firmwares é usar a coordenada **absoluta**, isto é, se
você manda **G1 X40 Y10 Z20**, o extrusor sairá de qualquer coordenada em que estiver para ir à coordenada (40,
10, 20) __em relação à origem__. Para mudar este comportamento, você usa o comando **G91**, que interpretará
as próximas coordenadas como __relativas__, isto é, __em relação ao ponto atual__; se seu extrusor estiver na
coordenada (10,10,10) e você enviar G91 e depois G1 X40 Y10 Z20, ele vai ser dirigir a (10+40, 10+10, 10+20) = (50,
20, 30). No entanto, isto só funciona se a origem tiver sido determinada, pelo procedimento chamado de _homing_
(dado pelo comando **G28**); se você mandar o comando de coordenada absoluta antes do __homing__, o comportamento
é indeterminado e dependente de configuração e firmware. Em deltas com Marlin, por exemplo, por segurança o
extrusor não se move nessas condições. Para voltar ao modo absoluto, se usa **G90**. Veja que tais modos não
valem para as coordenadas do extrusor -- ele tem seu próprio status, ajustado para absoluto com o G-Code *M82*
(default) e para relativo com o **M83**.

image::image429.png[image,width=642,height=459]

* [[FEITO_G2_e_G3]]G2 e G3 são comandos de movimentação como G0/G1 mas para arcos, como descritos na seção
sobre o problema dos círculos.  * O *G4* é um comando de pausa por tempo. Para uso interativo de G-Code não
tem realmente utilidade, mas inserido em um arquivo .gcode de impressão pode servir para permitir que um elemento
esfrie ou aqueça, ou até dar tempo para haver intervenção do operador (apesar que, neste caso, se a máquina
tiver um painel interativo, serão preferíveis os comandos _M226_ ou __M600__). Parâmetros do G4: ** P__n__
-- tempo em milissegundos para a pausa.  ** S__n__ -- tempo em segundos para a pausa.

*G4 P10000* é equivalente a **G4 S10**.

* G10: comando para retração de firmware, por default não usado pelos fatiadores (que implementam a retração
usando G1). Usa os ajustes colocados pelo comando __M207__.  * G11: "unretract" (volta da retração) por firmware,
por default não usado pelos fatiadores (que implementam o unretract usando G1). Usa os ajustes colocados pelo
comando __M208__.  * G20: passa a interpretar as unidades usadas nos parâmetros como polegadas. A configuração
é perdida quando a impressora é desligada.  * G21: passa a interpretar as unidades usadas nos parâmetros como
milímetros. A configuração é perdida quando a impressora é desligada.  * G28: Implementa o __homing__. Quando
a impressora 3D é ligada, ela não "sabe" em que coordenadas o extrusor está posicionado. Quando o comando
G28 é enviado para a impressora 3D cartesiana, ela vai até o _fim de curso_ de cada eixo, deixando no final
do procedimento o extrusor na coordenada X=0, Y=0, Z=0 -- a "origem". No caso das impressoras 3D delta,
o G28 leva os braços até o topo de cada torre, terminando com o _effector_ no centro da mesa no plano XY e
na maior altura alcançável da impressora (Z máximo) -- (0,0,Zmax). De ambos os modos, a impressora passa a
"saber" em que coordenada está, e se os próximos movimentos do extrusor ou effector forem dados por ela,
ela continuará tendo esta referência.  + O G28 não necessariamente vai até o fim de curso de _todos_ os
eixos. Se forem passados parâmetros de eixos, ele vai até o fim de curso dos parâmetros (o valor numérico do
parâmetro é ignorado). Por exemplo, G28 X0 Y0 vai até o fim de curso do eixo X e Y. É importante notar que
o comportamento do G28 não é muito padronizado e existem firmwares que podem fazer o _homing_ completo mesmo
quando se especificam os eixos -- o que torna um risco colocar esse código na configuração de G-Code de fim
de impressão. Alguns firmwares usam "flags" de compilação para alterar o comportamento do _homing_ -- por
exemplo, o Marlin tem uma flag Z_SAFE_HOMING que faz com que o comando primeiro faça homing em X e Y, então vá
ao centro da mesa, baixe a sonda de autonivelamento e a use para o homing em __Z__. Reiterando os parâmetros: **
X__n__ -- vai até o fim de curso do eixo X. _n_ é ignorado.  ** Y__n__ -- vai até o fim de curso do eixo Y. _n_
é ignorado.  ** Z__n__ -- vai até o fim de curso do eixo Z. _n_ é ignorado.

image::image430.png[image,width=642,height=468]

* G29, G32, G33 e os vários modos de *autonivelamento de mesa* -- Neste ponto o leitor já deve estar razoavelmente
confortável com a noção de autonivelamento de mesa: uma chave ligada ao extrusor detecta a distância dele
à mesa em vários pontos, calcula a inclinação da mesa e compensa, via software, no cálculo das coordenadas
passadas ao G-Code. Certo? A princípio sim, e este procedimento surgiu nos firmwares através do comando G29. No
entanto, enquanto o Marlin continuou a estender esse comando para suas extensões de autonivelamento, o Repetier
Firmware deixou nele só a funcionalidade mais básica, reservando o comando G32 para a avançada, e ainda passou a
utilizar o G33 (utilizado no Marlin para calibração automática de deltas) para sua "distortion correction",
equivalente à mesh leveling do Marlin. Já o Smoothieware usa G32 para autocalibração de parâmetros de delta,
e G31 e G30 para o autonivelamento, nem mesmo tendo o G29.  + Confuso? Você não é o único! Mas, colocando de
maneira tabulada: ** O *Smoothieware* não tem o comando G29.  ** O *Repetier Firmware* tem o comando G29, mas ele
não faz autonivelamento verdadeiro -- ele apenas mede Z em 3 pontos e tira um valor médio, não inclinando a
impressão subsequente.  ** O *Marlin Firmware* tem o comando G29 mais sofisticado e configurável de todos. E na
versão 1.1.0 ele tem ainda um novo modo chamado de "Nivelamento de Mesa Unificado" que, se ligado, redefine
o G29 e adiciona _*muito*_ mais parâmetros e configurabilidade ao comando.  + *Sonda de autonivelamento* - o
autonivelamento é associado a uma _sonda_ (chave) no extrusor. Essa sonda é que vai sentir a distância a que
estará da mesa em cada um dos pontos. Se a sonda fica abaixo do nível do bico, ela precisará ser abaixada somente
durante a sondagem e recolhida no final, para não bater na mesa quando a impressão começar. Ela pode também
estar acima do nível do bico e não precisar ser recolhida, como os sensores indutivos. Mas em praticamente todos
os casos ela não fica no nível do bico, e a diferença de altura entre ela e o bico precisa ser informada na
configuração, assim como outros detalhes técnicos -- qual o pino do microcontrolador que usa, o tipo de sinal
(positivo ou negativo), que coordenadas sondar, etc. Essas configurações todas são definidas na compilação do
firmware e geralmente também se tornam acessíveis pela EEPROM. Esses detalhes variam enormemente com o hardware
e o firmware usado e são numerosos e específicos; tentar listar todos neste livro com os detalhes que merecem
seria infrutífero.  + Nas impressoras que têm o autonivelamento, o G29 é colocado no "Start G-Code" do
fatiador. Para funcionar ele exige que a impressora já saiba as coordenadas do extrusor, ou seja, todo comando de
autonivelamento vai exigir que o _homing_ (G28) já tenha sido feito, então no Start G-Code haverá o G28 e depois
o G29 (ou G32 no caso do Repetier). Algumas configurações colocam o G29/G32 apenas depois de a mesa ter atingido a
temperatura-alvo, pois ela se expande ligeiramente com o aquecimento e sondá-la já expandida evita distorções.
+ O autonivelamento feito desse jeito é sempre necessário em toda impressão, pois a inclinação da mesa fica
na RAM -- memória volátil - do microcontrolador e não é gravada. Adicionalmente, ela é resetada cada vez que
se faz homing (G28), precisando ser refeita.
** **Modos de detecção de desnível**: O autonivelamento funciona
de uma entre três formas: 1.  Mede-se o Z em 3 pontos e calcula-se a média (G29 do Repetier); 2.  Mede-se o
Z em 3 a 8 pontos e calcula-se um plano inclinado que passa naqueles pontos (autonivelamento padrão); 3.
Mede-se o Z em vários pontos da mesa e calcula-se uma malha de planos inclinados interligados que mapeia as
"imperfeições" da mesa. Este método se usa quando há deformação da mesa.
** **Modos de correção do
desnível**: 1.  Usa-se uma média dos níveis de Z para a primeira camada. Se a diferença for grande entre os
desníveis, poderá fazer o bico raspar na mesa. Ou ainda fazer com que o filamento não adira o suficiente. É
usado apenas no G29 do Repetier Firmware.  2.  Com o plano de desnível detectado no método 2, toma-se uma de
duas ações: a.  Calcula-se por software uma transformação de inclinação (rotação) a ser adotada para
cada coordenada, para compensar a inclinação; b.  Usam-se motores na impressora 3D para corrigir/rotacionar
a mesa para que fique paralela à direção de impressão.  3.  Com o mapa de desnivelamento do método 3, a.
faz-se uma transformação diagonal em cada paralelepípedo do mapa; ou b.  faz-se uma transformação diagonal
regressiva em cada paralelepípedo do mapa, tornando-se mais paralela à medida que se aproxima de uma altura H.

image::image431.png[image,width=642,height=820]

**Comandos M de interesse**: Os comandos "M" são extensões do G-Code inicialmente usadas para elementos
particulares das impressoras 3D em relação às suas parentes CNC, mas logo se tomaram mais que isso, controlando
até motores. Aqui uma lista dos mais úteis:

* *M0* -- parada incondicional, esvaziando o buffer e desligando motores e elementos de aquecimento.
* **M18**:
desabilita todos os motores de passo, que em caso contrário permanecem ligados e prendendo o movimento. Pode
ser útil, por exemplo, caso você precise mexer no carro X manulmente e ver se está deslizando suavemente no
trilho. Para a impressora voltar a energizá-los, use **M17**.
* **M104 S__nn__**: ajusta a temperatura-alvo do
extrusor atual para __nn__, sem bloquear o prompt.
* **M106 P__m__ S__nn__**: ajusta a ventoinha de número _m_
para a intensidade _nn_ de 0 a 255. M107 a desliga.
* **M109 S__nn__**: ajusta a temperatura-alvo do extrusor atual
para _nn_ e bloqueia o prompt, esperando que ele chegue à temperatura para liberar.
* **M114**: mostra posição
atual (X, Y, Z e E)
* **M115**: mostra versão e capacidades do firmware.
* **M119**: mostra status dos endstop
(acionados ou não).
* **M140 S__nn__**: ajusta a temperatura-alvo da mesa para __nn__, sem bloquear o prompt.
* **M190 S__nn__**: ajusta a temperatura-alvo da mesa para __nn__, bloqueando o prompt até que seja atingida.

Apêndices

= Licença de uso e reprodução deste documento

Este documento é disponibilizado sob a **Creative Commons Attribution-ShareAlike 4.0
International**, abreviada **CC BY-SA 4.0**, disponível na íntegra no endereço web
https://creativecommons.org/licenses/by-sa/4.0/legalcode[_https://creativecommons.org/licenses/by-sa/4.0/legalcode_].

image::image432.png[image,width=329,height=108]

Traduzindo a licença para termos leigos em português, ela diz o seguinte:

Os termos da licença regem que:

*Você tem o direito de:*

* *Compartilhar* -- copiar e redistribuir o material em qualquer mídia ou formato.  * *Adaptar* -- remixar,
transformar e criar a partir do material para qualquer fim, mesmo que comercial.

O licenciante não pode revogar estes direitos desde que você siga os termos da licença, a seguir:

De acordo com os seguintes termos:

image::image433.png[image,width=75,height=72]

*Atribuição* -- você deve dar o __crédito apropriado^1^__, providenciar um link para a licença e __indicar
se mudanças foram feitas^2^__. Você o pode fazer de qualquer maneira razoável, mas não de algum modo que sugira
que o licenciante endosse você ou o seu uso.

image::image434.png[image,width=73,height=72]

CompartilhaIgual -- Se você remixar, transformar ou criar a partir do material, tem de distribuir as suas
contribuições __sob a mesma licença__^3^ que o original.

Sem restrições adicionais -- você não pode aplicar termos jurídicos ou _medidas de caráter tecnológico^4^_
que restrinjam legalmente outros de fazerem algo que a licença permita.

Avisos:

Você não tem de cumprir com os termos da licença relativamente a elementos do material que estejam no domínio
público ou cuja utilização seja permitida por uma _exceção ou limitação^5^_ que seja aplicável.

Não são dadas quaisquer garantias. A licença pode não lhe dar todas as autorizações necessárias para o uso
pretendido. Por exemplo, outros direitos, tais como __direitos de imagem, de privacidade ou direitos morais^6^__,
podem limitar o uso do material.

_Notas numéricas:_

1 - Caso seja fornecido, você deve indicar o nome do criador e partes da atribuição, um aviso de direito autoral,
um aviso de licença e um link para o material. Licenças CC anteriores à versão 4.0 também requerem a você
prover o título do material se fornecido e quaisquer outras mudanças.

2 - Na 4.0, você deve indicar se modificou o material e manter a indicação de modificações anteriores. Na 3.0
e nas versões anteriores das licenças, a indicação de alterações apenas é exigida caso você tenha criado
um trabalho derivado.

3 - Você também pode utilizar uma das licenças compatíveis listadas em
https://creativecommons.org/compatiblelicenses[_https://creativecommons.org/compatiblelicenses_]

4 - A licença proíbe a aplicação de medidas eficazes de caráter tecnológico, definidas com referência ao
Artigo 11 do Tratado da OMPI sobre Direito de Autor.

5 - Os direitos dos utilizadores sob exceções e limitações, tais como utilização justa ("fair use") e
tratamento justo ("fair dealing"), não são afetados pelas licenças CC.

6 - Você pode necessitar de autorizações adicionais antes de utilizar o material como pretende.

== Glossário

.Convenções e nomenclatura específica
Nota sobre a organização do glossário: como praticamente um campo novo do conhecimento, é muito difícil reunir
_tudo_ que se fala e se escreve sobre impressão 3D. Para evitar sobrecarregar o glossário e para que o leitor
saiba procurar nas entradas, adotamos a seguinte organização:

* Não adicionamos nomes de pessoas e empresas ou produtos, exceto quando têm importância histórica inegável
na impressão 3D, como Stratasys. Outra exceção é para produtos de software, como fatiadores, mencionados
normalmente.
* Colocamos algumas palavras em inglês utilizadas no meio. Como um campo novo e internacional,
é comum que muitas palavras em inglês ainda sejam usadas, então é impossível não adicioná-las (e suas
versões traduzidas, caso aumentem em uso) especialmente para os leitores não falantes da língua. Por outro lado,
é impraticável traduzir todos os termos usados, especialmente os não-técnicos.
* Evitamos distorções e
traduções erradas. Como qualquer área incipiente, existem os falsos cognatos, as traduções que não refletem
uso da língua e "aproximações" que apenas aumentam a dúvida, ambiguidade e confusão no meio. Como uma
forma de contribuir para a clareza ao invés da obscuridade, evitamos adicionar tais termos como "__cama__"
como tradução literal de heatbed e "__cabeça__" para se referir a um extrusor. Quando podemos, esclarecemos
confusões de sentido frequentes, como entre "direct" e "direct drive".
* Usamos uma convenção
consistente de significados. Alguns termos têm suas variações de uso; em alguns lugares, o que chamamos de
"cold end" é chamado de "extrusor", enquanto chamamos de "extrusor" o conjunto de cold end e hotend;
o "bico" para algumas pessoas é sinônimo do hotend; enquanto na nossa convenção ele é o "nozzle". Não
pretendemos nos afirmar mais corretos que outros em nossas convenção, mas temos que escolher as palavras a
usar e nos baseamos em uso, clareza e resistência à ambiguidade pra isso, consistente por todo este documento.
* Adotamos a mesma convenção nas traduções voluntárias de software -- o autor deste livro fez a tradução
para português do fatiador __Cura__, vantagens de se trabalhar com software open-source (é possível influir em
sua direção!). Adotamos, no software, o mesmo conjunto de convenções de nomenclatura que usamos neste livro.
* Para compostos químicos, se não achar a palavra por extenso, procure pela abreviação. Por exemplo, se você
quer saber sobre o termo "polioximetileno", ele terá a sigla POM.


* *3DP* -- Também chamada de __binder jetting__, é uma técnica de impressão 3D que consiste em uma câmara
ser preenchida com sucessivas camadas planas de pó, e para cada camada depositada, uma cabeça de jato de tinta
deposita nas partes certas um líquido ligante com pigmentos que dão cor e endurecem a forma.
* *3D Scanning* --
ou __digitalização 3D__, é o ato de se inferir ou medir com máquinas a forma tridimensional de um objeto. Existem
várias técnicas de digitalização 3D, a mais acessível sendo a __fotogrametria__, que é a tomada de fotografias
do objeto por vários ângulos e a sucessiva inferência matemática de sua forma por comparação.
* *3D Systems*
-- empresa do ramo de impressão 3D fundada em 1986 por Chuck Hull, na ocasião do patenteamento da técnica de
impressão 3D _Estereolitografia_ (SLA).
* *3MF* -- formato extensível de arquivo de malha com informações de
constelações de objetos, cores, materiais, misturas, fatiamentos e outros metadados criado em XML para representar
objetos a serem impressos em 3D por um consórcio liderado pela Microsoft. Apesar da especificação aberta e com
código-fonte disponível, ainda é um formato pouco suportado por fatiadores e principalmentes modeladores 3D.  *
*A4988* -- o tipo mais popular e barato de _driver_ de motor de passo.
* *ABS* -- Acrilonitrila Butadieno Estireno,
o plástico mais usado em impressão 3D, um copolímero derivado de petróleo.
* *ABS juice* ou *suco de ABS*
-- solução de ABS dissolvido em acetona, usada para reparar peças e melhorar aderência à mesa.
* *ABS-PC* -- mistura dos plásticos ABS e Policarbonato, fazendo um meio-termo entre a resistência do policarbonato e a
facilidade de uso do ABS.
* *Acetona* -- solvente que pode ser usado para alisar peças em ABS ou até dissolver
este plástico.
* *Aditiva* (Fabricação / Manufatura) -- nomeiam-se assim as tecnologias que constroem objetos
tridimensionais através da adição de camadas, em contraste com as subtrativas, que trabalham por remoção
de material.
* *AMF* -- formato extensível de arquivo de malha com informações de constelações de objetos,
cores, materiais, triângulos curvados, misturas e outros metadados criado em XML para representar objetos a serem
impressos em 3D pela ASTM International e ISO, tornando-se o padrão ISO/ASTM 52915:2013. É um formato mais antigo
que seu concorrente 3MF e bem suportado em fatiadores, mas ainda deficiente no suporte pelos modeladores 3D.  *
*Anisotropia* -- a qualidade de ter propriedades físicas variáveis de acordo com a direção. Por exemplo,
um objeto impresso em FFF poderá ter alongamento na ruptura ou rigidez diferentes nas direções X, Y e Z.  *
*Arduino* -- linha de microcontroladores open-source usada como base para as impressoras 3D open-source reprap.
* *ASA* -- Acrilonitrila Estireno Acrilato, é um polímero plástico usado para impressão 3D, "concorrente"
do ABS com menor contração e mais resistência ao ambiente.
* *Autonivelamento de mesa* -- recurso que algumas
impressoras 3D têm de autodetectar inclinações da mesa de impressão e corrigi-las automaticamente ao se imprimir.
* *Bainha* -- em inglês __Brim__, é uma estrutura impressa chata em volta da peça que ajuda na adesão à mesa.
* *BAL* -- sigla para Bed Auto-Leveling, autonivelamento de mesa em inglês.
* *Barra lisa* -- ou __guia linear__,
são cilindros de aço usados como eixos deslizantes nas impressoras 3D.
* *Barra roscada* -- ou __parafuso
infinito__, é uma rosca longa usada como _fuso_ em impressoras 3D para mover um eixo (normalmente o vertical) *
*Barreira térmica* -- peça que fica entre o bloco aquecedor e o pescoço dissipador em um _hotend_ de impressora
3D e, feita de aço (mau condutor de calor) e sendo estreita, serve para proporcionar uma quebra na temperatura.  *
*Bearing* -- nome para _rolamento_ em inglês, peça com esferas de metal internas usada para elementos deslizantes
e rotatórios em máquinas.
* *Bico* -- ou _nozzle_ em inglês, é a extremidade do hotend por onde sai o plástico
derretido, geralmente feita de latão.
* *Binder jetting* -- técnica de impressão 3D industrial, também chamada de
"3DP", em que um líquido colorido e aglutinante alveja uma mesa de pó de material camada a camada.
* *Bipolar* (motor) -- motor elétrico com apenas dois pólos em seu campo estacionário, usado em impressoras 3D.
* *Blob*-- ou borrão, ou "verruga", é o nome que se dá às pequenas saliências aparentes em peças tridimensionais
de FFF por plástico em excesso ou outros erros de processo.
* *BOM* -- Bill Of Material, Lista de Materiais,
termo que costuma aparecer em receitas de construção de impressoras 3D open-source (reprap).
* *Borossilicato* -- vidro resistente feito da mistura de sílica e óxido bórico e usado para cobertura de mesas aquecidas no
exterior, mas difícil de encontrar no Brasil.
* *Bowden* -- estrutura em que o tracionador do extrusor fica
distante do aquecedor, sendo os dois ligados por um tubo de baixo atrito (em geral de PTFE). Também chamado
de __filamento guiado__.
* *Bridge* -- Ponte. Estrutura impressa que liga duas ilhas sem suporte.
* *Brim* -- Bainha (ver definição).
* *CAD* -- Computer-Aided Design: projeto auxiliado por computador, no contexto
da impressão 3D geralmente designando modeladores tridimensionais.
* *CAM* -- Computer-Aided Manufacturing:
manufatura auxiliada por computador, no contexto da impressão 3D geralmente designando o processo de impressão.  *
*Câmara aquecida* -- carcaça de impressoras fechadas preparada com dispositivo aquecedor para manter a temperatura
interna alta e evitar o "warp".
* *Cera perdida* -- processo de fabricação com molde em que uma escultura
em cera imersa em pó é evaporada e substituída por material derretido (geralmente metal) que então solidifica
tomando sua forma.
* *Clorofórmio* -- solvente tóxico que afeta alguns plásticos de impressão 3D, como o PLA.
* *CNC* -- Controle Numérico por Computador, se refere às ferramentas automatizadas que executam comandos
de controle pré-programados.
* *Coasting* -- ou __desengrenagem__, é uma técnica de impressão 3D FFF que
consiste em desligar o motor de tração antes do término da trajetória do plástico a ser depositado para que o
plástico escorrido se descarregue e complete a camada.
* *Combing* -- ou __wiping__, ou ainda __penteamento__,
é uma técnica de impressão 3D FFF que consiste em passar o bico com plástico escorrido em partes já impressas
da peça, de modo a limpar o bico e impedir que esse plástico escorrido forme __blobs__.
* *Compensação XY / horizontal* -- é uma técnica de fatiamento presente nos fatiadores slic3r, craftware, simplify3d e Cura
que permite compensar o espalhamento ou contração excessivo de material na impressão, agindo na direção
contrária desta.
* *Craftware* -- fatiador de impressão 3D com suportes personalizados da empresa CraftUnique,
software proprietário gratuito disponível para Windows, Mac OS X e Linux.
* *Cura* -- fatiador de impressão
3D open-source da empresa Ultimaker, disponível para Windows, Mac OS X e Linux.
* *Datasheet* -- referência
técnica de um componente ou dispositivo eletrônico, com todas as especificações, tolerâncias, valores e
fórmulas associados.
* *Delaminação* -- fenômeno que ocorre com a contração do material sendo impresso que
faz camadas se soltarem e fendas aparecerem na peça.
* *Delrin* -- nome comercial do POM, plástico de baixo
atrito usado em castanhas de fusos e rolamentos plásticos. Também conhecido por polioximetileno ou poliacetal.
* *Delta* (impressoras) -- é um tipo de robô paralelo que consiste de três braços conectados por juntas
universais na base. É um dos dois arranjos populares de eixos para impressoras 3D, junto com as "cartesianas".
* *Deltabot* -- sinônimo de delta, no contexto de impressão 3D.
* *Digitalização* -- ato de conversão
de informação analógica para digital; no contexto da impressão 3D, especificamente, designa a conversão de
objetos do mundo real para modelos 3D de computador.
* *Dissipação ativa* -- quando o componente usa ventoinha
para ser resfriado, ao invés de depender somente de material e geometria.
* *Dissipação passiva* -- quando o componente usa somente a geometria e material para dissipar o calor.
* *Direct Extruder* -- Extrusor em que
o tracionador e o hotend estão unidos diretamente. Não confundir com **direct drive**.
* *Direct Drive* -- mecanismo em que o motor aciona diretamente o elemento tracionado pelo pinhão, sem passar por engrenagens extras.
* *DIY* -- "Do It Yourself", "Faça Você Mesmo" em inglês.
* *DLP* -- "DLP" na verdade é sigla
para "Digital Light Processing", uma tecnologia de projeção de luz patenteada pela Texas Instruments, mas o
nome no contexto de impressão 3D designa a SLA/DLP, impressoras de resina com endurecimento por projetores DLP.
* *DMLS* -- Direct Metal Laser Sintering, uma técnica de impressão 3D que usa sinterização de pó de metal
em uma cuba, semelhantes a SLS.
* *Draft tower* -- estrutura oca criada durante a impressão, especialmente
impressão de dois ou mais extrusores, para funcionar para purga de filamento excedente. Também chamada de
purge tower ou purge pillar ou em português, __torre de purga__.
* *Drive gear* -- literalmente traduzido
como __engrenagem do acionador__, é o pinhão dentado usado nos motores.
* *Driver* -- nome genérico dado ao
dispositivo eletrônico que faz o acionamento e controle do motor de passo, implementando proteções como Ponte H.
* *DRV8825* -- driver comum para motores de impressoras 3D, mais caro que o A4988 mas mais resistente e com maior
capacidade de corrente.
* *E3D* -- fabricante open-source de hotends baseada em Oxford que efetivamente lidera
o mercado e os padrões dessas peças de impressoras 3D.
* *EBM* -- Electronic Beam Melting, uma tecnologia de
impressão 3D industrial que usa feixes de elétrons para criação de peças metálicas.
* *Enabling the Future* -- projeto comunitário de âmbito mundial que procura disponibilizar designs de próteses imprimíveis para
que voluntários as imprimam e distribuam a pessoas deficientes por todo o mundo.
* *Endstop* -- nome da chave
de fim de curso que, na malha aberta de uma impressora 3D, determina a coordenada zero do eixo.
* *Escaneamento 3D* -- o mesmo que __digitalização 3D__.
* *Estereolitografia* -- também chamada de SLA, é a tecnologia
de impressão que envolve resinas _fotopolimerizáveis_ atingidas de forma controlada por um laser ultravioleta
guiado por __galvos__. Tem uma tecnologia derivada chamada de SLA/DLP, usando um projetor ao invés dos galvos.
* *Exaptação* -- termo da biologia evolutiva, designa um órgão que ganha função diferente daquela que
normalmente exerce, como um braço que acaba evoluindo para asa. No escopo das impressoras 3D, tem a ver com a
propensão Maker de utilizar objetos de indústria de massa, como sprays de cabelo e molas de pregadores, para
funções para as quais não foram projetados, nas impressoras 3D.
* *Expo3DBR* -- evento anual de exposição e
encontro de profissionais de impressão 3D originário da comunidade __ReprapBR__.
* *Extrudar* -- expelir, emitir.
* *Extrusão de alumínio* -- nome que se dá às barras retas (perfis) de alumínio usadas na construção de algumas
impressoras 3D.
* *Extrusor* -- o elemento da impressora que deposita o plástico, formado da parte tracionadora,
ou cold end, e da parte de derretimento do plástico, o hotend.
* *Extrusora* -- extrusor. Em alguns contextos o
gênero feminino da palavra pode designar uma filamentadora, servindo para distinguir da peça de impressora 3D.
* *Extrusor Monolítico* -- outro nome para extrusor direct ou direto, isto é, em que cold end e hotend estão
unidos diretamente, sem bowden.
* *Extrusor Direto/Direct* -- extrusor em que cold end e hotend estão unidos
diretamente, sem bowden.
* *Fan* -- ventoinha, como as de PC, usadas em dispositivos da impressora 3D.
* *Fatiador* -- software que permite o arranjo de peças tridimensionais numa bandeja virtual e a transforma em instruções para
a impressora 3D fabricar tal forma. Muitos fatiadores são também __print hosts__.
* *FDM™* -- Fused Deposition
Modeling, ou deposição de modelagem fundida, a tecnologia das impressoras 3D que derretem plástico. O nome é
marca registrada da Stratasys.
* *FFF* -- nome alternativa para FDM sem trademarks envolvidos, mas designando o
mesmo processo e usado pelo projeto reprap para evitar complicações legais.
* *Fibra de Carbono* -- material
que consiste de filamentos fortes e com estrutura cristalina de carbono, comumente usado como agente de reforço de
outros materiais. Na impressão 3D, é vendido misturado a ABS ou Nylon.
* *Filamentadora* -- aparelho que derrete
grãos de plástico e extruda filamento plástico para ser usado em impressoras 3D. Também chamada de extrusora.
* *Filamento* -- o "fio" de plástico que alimenta uma impressora 3D FFF para a construção de objetos.  *
*Filamento Guiado* -- também conhecido como __bowden__, é um arranjo de extrusor em que cold end e hotend são
conectados por um tubo de baixo atrito longo, normalmente feito de PTFE. Nesse arranjo, geralmente o cold end -- o
tracionador -- fica fixo enquanto o hotend é a peça móvel.
* *Fita Azul de Pintor* -- Fita crepe com cobertura
acrílica _exaptada_ para funcionar como revestimento de mesa de impressão, visto que sua cobertura acrílica,
ao ser aquecida, facilita a aderência das peças sendo impressas.
* *Fork* -- Significa "bifurcação" em
inglês e é usado principalmente para projetos de software aberto cujo desenvolvimento diverge em duas direções:
uma "derivada", isto é, com desenvolvedores ou propósitos diferentes, e a "original". Muito frequentes
no meio aberto, os _forks_ costumam surgir quando há discordâncias entre os desenvolvedores ou simplesmente
a vontade de tentar algo diferente. Como exemplos, temos o __MarlinKimbra__, um fork do firmware __Marlin__; a
suíte de escritório __LibreOffice__, fork da __OpenOffice__; e a impressora 3D __Graber i3__, fork da _Prusa
i3_ versão 1.
* *Fotogrametria* -- técnica que com muitas amostras de fotos tiradas de vários ângulos de
um objeto, consegue inferir sua geometria tridimensional. O Manual de Reconstrução Facial de Cícero Moraes
explora bastante essa técnica: http://www.ciceromoraes.com.br/ebook/[_http://www.ciceromoraes.com.br/ebook/_]
* *Fotopolimerização* -- o fenômeno que faz uma substância monomérica entrar em processo de polimerização e
cura, geralmente passando do estado líquido para o sólido, ao ser atingida por luz de determinada frequência. Usa
em impressoras SLA e SLA/DLP.
* *Frictionless Innovation* -- fenômeno de pequenas inovações rápidas e graduais
que, acumuladas, se traduzem em uma grande inovação ou progresso de uma tecnologia, principalmente por não contarem
com o elemento da "propriedade" intelectual bloqueando sua dinâmica.
* *Fuso de esferas* -- atuador linear
mecânico, geralmente de metal e com sulcos helicoidas por onde esferas de metal rolam, que traduz o movimento de
rotação que sofre em movimento linear com pouquíssimo atrito.
* *Fuso trapezoidal* -- atuador linear mecânico,
geralmente de metal e com rosca trapezoidal isósceles com castanha acoplada, que traduz o movimento de rotação
que sofre em movimento linear com baixo atrito.
* *Fuzzy skin* -- técnica de fatiamento das paredes externas de
uma peça com perturbações semi-aleatórias de modo a se assemelhar a um contorno felpudo ou rugoso, utilizado
pelo fatiador Cura.
* *Galvo* -- ou galvanômetro de espelho, é um instrumento eletromecânico para a deflexão
controlada de feixes de laser, usado em impressoras 3D SLA.
* *G-Code* / *GCode* -- Código alfanumérico usado
por CNCs e impressoras 3D para comandos simples de posicionamento, movimentação, configuração e mudança de
estado dessas máquinas. Este livro usa como convenção a palavra "g-code", com hífen.
* *Gen7* -- Placa eletrônica controladora all-in-one antigamente baseada em Arduino, mas na iteração mais recente baseada em ARM,
criada para impressoras 3D reprap, com slots para drivers e saídas de potência.
* *Gen7-BR* -- modificação
brasileira da placa Gen7, feita pelo grupo de estudos reprapbr.
* *Graber* -- sobrenome de Shane Graber, criador
da impressora 3D __Graber i3__, uma modificação da Prusa i3 usando menos peças impressas e mais cortes de CNC.  *
*Grbl* -- software livre antigo de CNC, usado como base para grande parte dos firmwares de impressoras 3D populares.
* *HBP* -- Heated Bed Platform, o mesmo que mesa aquecida. Um acrônimo obscuro e totalmente dispensável mas
que volta e meia adorna as discussões envolvendo impressão 3D.
* *HDPE* -- High Density Polyethylene, ou PEAD
(Polietileno de Alta Densidade) em português, um plástico seguro para fins alimentícios usado em vasilhas
de leite e objetos domésticos.
* *Heatbed* ou *Heated bed* -- mesa aquecida, a plataforma onde as peças de
impressão 3D são fabricadas. O aquecimento serve para controlar a contração do plástico e fazer com que
permaneça aderido a ela.
* *Heatbreak* -- ver __barreira térmica__.
* *HiPS* -- High Impact Polystyrene,
ou Poliestireno de Alto Impacto, é um plástico de baixo custo que dissolve em D-Limoneno, comumente usado para
filamentos dissolvíveis de impressão 3D.
* *Hobbed bolt* -- parafuso trator, o parafuso que, conectado pela
cabeça a uma engrenagem e com dentes laterais, atua como elemento tracionador do extrusor.
* *Holding Torque* -- torque de retenção, torque de resistência ao movimento exercido pelo motor energizado quando em posição fixa.
* *Home* ou *Homing* -- movimento de busca da coordenada "zero" das impressoras 3D, levando o eixo da posição
atual até um extremo em que conecta uma chave de fim de curso (endstop).
* *Hotend* -- o dispositivo aquecido que
derrete e deposita o plástico da impressão 3D.
* *i3* -- Iteração 3; usada em alguns modelos de impressoras,
como Prusa e Graber. Segue o mesmo raciocínio da nomenclatura "MK", ver entrada MK no glossário.
* *Infill* -- preenchimento. A parte da peça impressa interior às paredes, geralmente preenchida com um padrão vazado de
filetes.
* *Jerk* -- movimento que, traduzido, seria "solavanco" ou "empurrão", e que denomina a súbita
mudança de direção do carro extrusor. Um ajuste de _jerk_ determina a mínima velocidade em que o extrusor
tem que estar para a aceleração entrar em ação.
* *Kapton* -- marca mais famosa das fitas de poliimida,
um filme plástico adesivo resistente ao calor usado para proteger e firmar peças quentes ou promover adesão
à mesa de impressão.
* *Kisslicer* -- fatiador proprietário multiplataforma cujo desenvolvimento estacionou
há alguns anos.
* *Kossel* -- um dos modelos mais famosos de reprap estilo __delta__.
* *Lost PLA casting* -- o processo de cera perdida, mas executado com peças de PLA no lugar da cera.
* *Lost wax casting* -- ver _cera perdida._
* *Maker* -- literalmente, __fazedor__;
* *MakerLinux* -- nome do pequeno empreendimento do autor
do livro, em que baseia seus serviços e criações para a comunidade.
* *Malha*
** *Aberta e Fechada (controle)*
-- _Malha aberta_ é um sistema em que a saída (resultado) não exerce qualquer ação sobre o sinal de controle,
_malha fechada_ é um sistema em que há um ou mais componentes no sistema para verificar (medir) a execução da
ação e realimentar o circuito com esta medida.  *
** *Como representação de uma figura tridimensional* -- uma
_malha poligonal_ é uma coleção de vértices, arestas e faces que definem a forma de um objeto poliédrico no
espaço tridimensional.
* *Manifold* -- redução de "2-manifold", que é a propriedade que queremos para
nossas malhas tridimensionais. Um malha ou objeto manifold é, intuitivamente falando, um objeto viável em 3
dimensões. Mais detalhes no capítulo de representações de objetos tridimensionais.
* *Mão 3D (projeto)* -- iniciativa acadêmica inspirada no projeto __Enabling the Future__, para conseguir próteses impressas e
assistência para a população carente. Mais detalhes na história da impressão 3D no Brasil.
* *Marlin* -- firmware open-source para arduino mais popular para impressoras 3D reprap, desenvolvido de forma colaborativa.
* *MarlinKimbra* -- _fork_ do Marlin com recursos especiais para impressoras deltas, recentemente renomeado para
MK4duo.
* *MatterControl* -- fatiador open-source e multiplataforma escrito em .Net da empresa __MatterHackers__.
* *MEK* -- Methyl Ethyl Ketone, ou Metil-Etil-Cetona, também chamada de propanona. É uma _cetona_ semelhante à
acetona, mas mais forte e menos volátil, usada em preparados como a "solução limpadora da Tigre".
* *Mesa aquecida* -- a plataforma onde as peças de impressão 3D são fabricadas. O aquecimento serve para controlar
a contração do plástico e fazer com que permaneça aderido a ela.
* *Micropasso* -- aumento da resolução
de passos de um motor através de formas de onda especialmente criadas para atingir regiões intermediárias.  *
*Microstep* -- mesmo que micropasso.
* *Mightyboard* -- placa controladora open-source da primeira geração
das impressoras 3D da empresa Makerbot.
* *MK* - abreviação de "Mark", marca. É um prefixo adotado para
diversas peças open-source de impressora 3D significando algo como "versão" e o mesmo "mark" pode se
referir a peças diferentes; por exemplo, existe uma _mesa aquecida_ MK2 e um _extrusor_ MK2. Devido ao uso,
no entanto, alguns termos são usados como sinônimos para certas peças; é raro ver alguém se referindo
ao extrusor MK2, mas é frequente ver alguém usando como sinônimo do modelo de mesa aquecida. Deste modo,
colocamos os sinônimos mais comuns, ainda que o uso seja "errado". O uso de "i" como em "Prusa i3"
segue o mesmo raciocínio, e nesse caso vem de iteração (não confundir com __interação__).
* *MK2* -- Mark 2, significa qualquer objeto com "versão 2", mas no contexto de reprap geralmente faz referências às
mesas aquecidas de fibra de vidro com resistência embutida.
* *MK2B* -- Assim como MK2, a MK2B no contexto de
reprap faz referência a uma mesa aquecida de fibra de vidro com resistência, na versão específica preparada
para voltagens de 12 e 24V.
* *MK3* -- Assim como MK2 e MK2B, no contexto de reprap a referência "MK3"
diz respeito a uma mesa aquecida de alumínio com resistência embutida.
* *MK7* -- no contexto de reprap,
quando MK7 é mencionado geralmente se refere a um formato específico de _drive gear_ (pinhão).
* *MK8* -- no contexto de reprap, quando MK8 é mencionado geralmente se refere a um formato específico de _drive gear_
(pinhão).
* *Motor DC* -- qualquer motor que seja alimentado com corrente contínua. Motores de passo são
motores DC.
* *Motor de passo* -- motor DC sem escovas que divide a rotação em um número de passos iguais
de rotação. É o tipo de motor mais frequentemente usado em impressoras 3D, especialmente os do tipo bipolar.
* *Motor planetário* -- motor que usa engrenagens "planetárias" (epicíclicas, o centro de uma rodando
em volta do centro de outra) internamente para conseguir redução da distância e multiplicação do torque.  *
*Mouse ears* -- estrutura circular adicionada aos cantos de peças a serem impressas para aprimorar sua aderência
na plataforma de impressão, descartada depois da peça impressa.
* *NC*
** *Non-Commercial* -- no âmbito de
licenças de software e hardware, significa licenças de obras que não podem ser usadas para fins comerciais.
** *Normally Closed* -- no âmbito eletrônico, diz respeito a chaves que em seu estado inativo, representam um
circuito fechado, abrindo quando acionados.
* *NEMA* -- associação de padrões estadunidense, "National
Electrical Manufacturers Association" ou "Associação de Fabricantes Elétricos Nacional".  *
* *NEMA17* -- motor descrito pelos padrões NEMA com 1,7×1,7 polegadas.
* *NO* -- **Normally Open**, ou normalmente
aberta. No âmbito eletrônico, diz respeito a chaves que em seu estado inativo, representam um circuito aberto,
fechando quando acionados.
* *Nozzle* -- Bico (do hotend).
* *Nylon* -- designação genérica para uma família
de termoplásticos feitos de __poliamida__.
* *OBJ* -- formato de arquivo de malha tridimensional da __Wavefront
technologies__, aberto e por isso muito popular, por vezes usado para compartilhamentos de designs 3D e suportado
pelos fatiadores em geral.
* *Oozing* -- escorrimento (de plástico derretido).
* *OpenBeam* -- marca de perfis de
alumínio comumente usados em impressoras 3D delta.
* *OpenSCAD* -- linguagem e software de programação declarativa
de figuras tridimensionais. Open-source e multiplataforma, https://www.openscad.org/[_https://www.openscad.org_] *
*Open-Source* -- software, hardware ou design que se enquadre na __Open Source Definition__, com 11 pontos que definem
obras abertas de livre compartilhamento e modificação: https://opensource.org/osd[_https://opensource.org/osd_] *
*Open-Source Hardware* -- hardware de design aberto, modificável e público que se enquadre na __Open Source Hardware
Definition__, https://www.oshwa.org/definition/[_https://www.oshwa.org/definition/_]
* *Overhang* -- em português, __seções pendentes__; são as partes de uma peça tridimensional que não têm material que as sustente abaixo.
* *Padrão de preenchimento* -- perfil geométrico que o preenchimento de uma peça assume quando calculada pelo
fatiador, como hexagonal, linear ou concêntrico.
* *Parafuso trator* -- o parafuso que, conectado pela cabeça
a uma engrenagem e com dentes laterais, atua como elemento tracionador do extrusor.
* *Patins* -- colocados em
__trilhos__, são bases de rolamentos em guias lineares industriais de alta eficiência utilizados em deltas como
a __Kossel Mini__.
* *PEAD* -- nome em português do __HDPE__.
* *PEEK* -- termoplástico de alto ponto de
fusão utilizado em hotends das primeiras repraps.
* *PEI* -- polieterimida, termoplástico de alto ponto de
fusão utilizado e coloração âmbas translúcida usada em coberturas adesivas para mesas aquecidas, e também
como base dos plásticos industriais Ultem.
* *Pellets* -- grãos de plástico cru, usados em filamentadoras para
produção de filamentos de impressão 3D.
* *Perfil de alumínio* -- ver __extrusão de alumínio__.
* *Pescoço dissipador* -- parte do hotend após o bloco aquecedor e o _heatbreak_ (barreira térmica) que tem como função
impedir que o calor chegue ao topo. Em modelos mais antigos é feito de material mau condutor de calor como PEEK,
em modelos mais novos é de metal condutor de calor como alumínio com aletas para auxiliar na dissipação.
* *PET* -- polietileno tereftalato, um polímero termoplástico da família dos poliésteres e o plástico
mais abundante da indústria moderna, usado em garrafas plásticas, fibras de roupas e resinas de engenharia.
* *PETG* -- PET com um radical glicol a mais, propriedade que evita que cristalize ao solidificar e portanto
o torna viável para ser utilizado em filamentos de impressão 3D.
* *PID* -- Proporcional -- Integral --
Derivada, um método de controle usado em automação industrial para entradas continuamente moduladas.
* *PLA* -- ácido polilático, um termoplástico orgânico e compostável utilizado em filamentos de impressão 3D.  *
*Planetary Gears/Motors* -- ver __motor planetário__.
* *Polaseal* -- marca de plásticos para plastificação
(3/2 poliéster e polietileno) usada em mesas de impressão 3D para facilitar aderência.
* *Poliacetal* -- __polixoximetileno (POM). Ver Delrin__.
* *Poliamida* -- polímetro termoplástico composto por monômeros
de amida conectados por ligações peptídicas. É de poliamidas que o nylon é feito.
* *Policarbonato* -- polissacarídeo que também é termoplástico, conhecido por sua resistência (usado em escudos à prova de balas),
transparência e, na impressão 3D como filamento, alta temperatura de extrusão.
* *Poliéster* -- categoria de polímeros com o grupo funcional éster na sua cadeia principal, com seu principal representante sendo o PET,
às vezes chamado de "o poliéster". Como materiais, têm geralmente alta tenacidade e módulo de young, baixa
absorção de umidade e baixa taxa de _warp_ quando sujeitas a impressão 3D.
* *Poliimida* -- ver __Kapton__.
* *Pololu* -- marca de hardware famosa por seus _drivers A4988_ baratos, usados nas placas controladoras das
impressoras 3D reprap.
* *POM* -- polioximetileno; ver __Delrin__.
* *Ponte* -- Estrutura impressa que liga duas ilhas sem suporte.
* *Preenchimento* -- A parte da peça impressa interior às paredes, geralmente preenchida
com um padrão vazado de filetes.
* *Printrun* -- a _suite_ de programas open-source a que pertence o _print
host_ pronterface.
* *Print the Legend* -- Documentário de 2014 da Netflix que procurou apagar o movimento
_reprap_ da história, ativamente impedindo que fosse mencionado mesmo que membros aparecessem no vídeo.  *
*Proprietário* -- adjetivo que se dá a obras digitais, software ou hardware cobertos por licenças restritivas
de copyright.
* *Pronterface* -- _print host_ open-source multiplataforma popular.
* *Prototipagem rápida* -- conjunto de técnicas para fabricação rápida de uma peça usando modelagem 3D e impressoras 3D.
* *Prusa* -- sobrenome do criador da popular reprap _Prusa i3_ (e __Prusa Mendel__), e nome de sua firma, Prusa Research.
* *Prusa calculator* -- clássico recurso web disponibilizado pela empresa _Prusa Research_ para cálculo fácil
de medidas de impressoras 3D.
* *PTFE* -- politetrafluoretileno, de nome comercial Teflon, é um fluropolímero
hidrofóbico de baixo coeficiente de atrito.
* *Pull-up* -- usado para a caracterização de resistores, um resistor
pull-up é um componente ligado a uma fonte de tensão para garantir que, se esta fonte for desconectada, o nível
lógico não saltará para alta impedância, ao invés disso permanecendo "ligado" (por isso o "up").
* *Pull-down* -- usado para a caracterização de resistores, um resistor pull-down é um componente ligado
a uma fonte de tensão para garantir que, se esta fonte for desconectada, o nível lógico não saltará para
alta impedância, ao invés disso permanecendo "desligado" (por isso o "down").
* *PVA* -- álcool
de polivinila, substância de que são feitos um determinado tipo de filamento solúvel em água.
* *PVAc* -- acetato de polivinila, a substância-base da cola branca escolar e cola de madeira.
* *PVP* -- conhecida também
como polivinilpirrolidona, polivinilpirrolideno ou ainda povidona, é um polímero solúvel em água formado por
cadeias de __vinilpirrolidonas__. Com viscosidade newtoniana e excelentes propriedades de umidificação, forma
facilmente filmes ou películas, e por isso é bastante usado como revestimento ou aditivo de revestimentos. Na
Impressão 3D, faz parte de pelo menos três técnicas de aderência à mesa: cola bastão, álcool gel e A.Bond,
podendo ser também usado isoladamente (diluído em água) como uma quarta técnica. Apesar de seu monômero ser
tóxico, a PVP em forma polimérica é completamente inofensiva.
* *PWM* -- Pulse-Width Modulation, ou modulação
por largura de pulso, uma técnica de modulação de ondas usada na eletrônica das repraps para "simular" de
forma digital intensidades analógicas de potência entregue aos componentes como motores e aquecedores.
* *Raft* -- em português a tradução sendo "balsa", o _raft_ é uma estrutura de plástico esparso impressa abaixo
da peça para providenciar uma base firme para a construção. O raft costuma ter o mesmo padrão da estrutura
de suporte e, como ele, é descartado após a impressão.
* *RAMPS* -- Reprap Arduino Mega Pololu Shield, um
circuito open-source adicional encaixável no Arduino Mega para que ele possa controlar a potência de dispositivos
de uma impressora 3D.
* *Repetier Firmware* -- um dos firmwares open-source mais populares para __repraps__,
com versões para Arduino e ARM.
* *Repetier Host* -- um dos print hosts mais populares, era open-source mas a
partir da versão 1.0 passou a ser somente gratuito, com código fechado. Por baixo, usa os fatiadores open-source
slic3r ou cura.
* *Repetier Server* -- um print host open-source de impressão 3D web.
* *Reprap, impressora*
-- uma impressora open-source que possa fabricar suas próprias peças. O significado mudou com o tempo e hoje é
comum chamar de reprap qualquer impressora open-source, seja fabricada com peças impressas ou não, e mesmo não
pertencente ao site do projeto reprap.
* *Reprap, projeto* -- um projeto criado por Vik Olliver, Adrian Bowyer e
voluntários para aproveitar a queda da patente do extrusor FDM em 2009 e criar todo um ecossistema de impressas
3D open-source. É a base de praticamente todas as impressoras 3d de baixo custo de hoje em dia.
* *ReprapBR* -- grupo e lista de discussão (google groups) formado em 2012 de interessados em eletrônica e desenvolvimento
colaborativo.
* *Repstrap* -- termo criado pelo projeto reprap para indicar qualquer impressora open-source que
não tenha partes de plástico replicáveis mas sirva para produzir as peças para uma reprap "legítima",
que tem a faculdade de se "replicar" produzindo novas peças plásticas. Essa diferenciação acabou caindo
em desuso e geralmente se chamam de "repraps" mesmo as impressoras 3D open-source do projeto que não tenham
(muitas) peças plásticas para se perpetuar. Um bom exemplo de uma "repstrap" seria a graber i3, impressora 3D
com construção muito próxima à prusa i3, mas que ao invés de usar peças conectoras de plástico impresso,
usa uma estrutura baseada em cortes de CNC de MDF, acrílico ou alumínio. O nome vem de "bootstrap", o
mesmo termo que deu origem ao termo "boot" de computadores pessoais.
* *Retração* -- movimento de retorno
breve do filamento do extrusor para que não fiquem resíduos de escorrimento de plástico derretido na peça.  *
*Rolamento* -- peça com esferas de metal internas usada para elementos deslizantes e rotatórios em máquinas.
* *Rostock* -- um dos modelos mais populares de delta do projeto reprap.
* *RUMBA* -- eletrônica de impressão 3D
open-source _all-in-one_ baseada em Arduino com muitas saídas e proteções.
* *S3G* -- protocolo da _Makerbot_
equivalente ao G-Code, com o formato de arquivo .x3g sendo sua implementação mais conhecida.
* *Sailfish* -- firmware open-source usado em impressoras estilo _Makerbot_ (hoje em dia, os clones).
* *Sanguinololu* -- eletrônica de impressão 3D open-source all-in-one baseada em Arduino de baixo custo, uma das primeiras a
surgir. Não mais desenvolvida.
* *Seam* -- termo para _costura_ em inglês, denomina o local em que as duas
pontas de um filete de plástico derretido depositado se encontram.
* *Servo Motor* -- motor de malha fechada; um
dispositivo que produz movimento em resposta a um comando e então regula a velocidade e direção deste movimento em
resposta à realimentação.
* *Sfact* -- nome novo da antiga suíte de utilitários fatiadores __Skeinforge__. Não
mais desenvolvida.
* *Shell* -- a "casca externa", ou as paredes, de uma peça.
* *Simplify3D* -- fatiador
multiplataforma proprietário conhecido por sua rapidez, riqueza de recursos e suportes personalizados.
* *Skeinforge* -- antiga suite de utilitários fatiadores em python, usada para CNC e impressão 3D.
* *Skirt* -- "saia", estrutura de poucos filetes criada em volta de uma peça sendo impressa somente para gastar um pouco de plástico
inicial e garantir que a impressão comece com filamento no bico.
* *SLA* -- __estereolitografia__.
* *SLA/DLP* -- modificação da estereolitografia usando um projetor (DLP) ao invés dos galvos.
* *Slic3r* -- fatiador
open-source multiplataforma com riqueza de recursos, escrito em perl e C++.
* *Slicer* -- "fatiador", em inglês.
* *SLM* -- Selective Laser Melting, uma tecnologia de impressão 3D semelhante a SLS usada com
metais derretidos por um feixe de laser. Veja também __DMLS__.
* *SLS* -- Selective Laser Sintering, uma
tecnologia de impressão 3D que envolve sinterização do material (aumentar a temperatura de um pó até perto
do ponto de derretimento, de modo que as partículas se unam) quando atingido por um feixe de laser, em camadas
sucessivas.
* *Smoothieboard* -- a eletrônica open-source oficial do projeto smoothieware.
* *Software Livre* -- software de computador que obedeça às 4 liberdades de software como definidas pela Free Software Foundation:
https://www.gnu.org/philosophy/free-sw.pt-br.html[_https://www.gnu.org/philosophy/free-sw.pt-br.html_]. Em
geral, todo software livre é open-source e vice-versa; são dois nomes pra mesma categoria.  *
*Solução Limpadora da Tigre* -- solução para limpeza que conta com boa proporção de MEK e
acetona, usada como substituta de acetona P.A. (Pureza Analítica) para alisamento e dissolução de
ABS, por não necessitar de permissão da polícia federal para compra e poder ser comprada em lojas
de tintas e ferragens. Não é a única do tipo, mas a mais fácil de achar no mercado nacional. Ficha técnica:
http://www.tigre.com.br/sites/default/files/produtos/ficha-tecnica/54001207.pdf[_http://www.tigre.com.br/sites/default/files/produtos/ficha-tecnica/54001207.pdf_]
* *Sprinter* -- um dos primeiros firmwares do projeto reprap, hoje não mais desenvolvido.
* *Stepper Motor*
-- __Motor de passo__.
* *Stepstick* -- assim como a Pololu, empresa conhecida pela fabricação de drivers
de motores baratos, com o diferencial de seus drivers serem open-source.
* *STL* -- formato simples de
triângulos orientados sem material, cores ou propriedades, em texto ou binário, desenvolvido pela 3D Systems
para a impressão 3D.
* *Stratasys* -- empresa de S. Scott Crump, inventor da tecnologia FDM e detentora de
muitas das patentes de impressão 3D da atualidade.
* *Subtrativa (Fabricação / Manufatura)* -- tecnologia
que remove material de um objeto inicial para dar-lhe a forma necessária; em contraste a fabricação aditiva
(impressão 3D).
* *Suco de ABS* -- solução de ABS dissolvido em acetona, usada para reparar peças e melhorar
aderência à mesa.
* *Suporte* -- estrutura descartável impressa abaixo de certas seções pendentes para dar
apoio a áreas "flutuantes" da peça enquanto é impressa.
* *Suporte solúvel / dissolvível* -- suporte
feito de filamento especial que quando exposto a um líquido solvente, desmancha e sai facilmente da peça.
* *Teflon* -- nome comercial do __PTFE__.
* *Termistor* -- elemento resistivo cuja resistência é diminuída
pelo aquecimento, usado para medir temperaturas de componentes aquecidos em impressoras 3D.
* *Termopar* -- dispositivo termoelétrico de dois metais conectados gerando uma tensão que cresce em proporção à diferença
de temperatura. Usado em impressoras 3D para medir temperaturas de componentes aquecidos, geralmente componentes
de temperaturas maiores que os medidos por termistores.
* *Termorresistência* -- termistor.
* *Thingiverse* -- site da _Makerbot_ (e portanto da Stratasys) de compartilhamento de designs tridimensionais para impressão 3D.
* *Torque* -- força de torção que resulta em rotação.
* *Trilho* -- elemento deslizante por onde o _patim_ se move.
* *Tritan* -- termoplástico propício para filamento de impressão 3D concorrente do policarbonato,
supostamente seguro para fins alimentícios por não conter BPA.
* *Ultem ®9085* -- filamento industrial da
Stratasys de alto ponto de fusão e retardamento de chamas, baseado em __PEI__.
* *UV*
** De *UltraVioleta* --
faixa do espectro eletromagnético com frequências logo acima da luz visível, em que a energia intrínseca sobe
o suficiente para que o limite superior já seja radiação ionizante. A Ultravioleta é dividida em faixas UV A
(315-400nm de comprimento de onda, faixa de trabalho de impressoras 3D SLA e DLP e também onde a radiação causa
o efeito de fotoenvelhecimento da pele humana), UV B (280nm-315nm, que faz ocorrer as queimaduras solares), UV C
(100-280nm, bloqueada pela camada de ozônio) e a faixa extrema (até 10nm).
*
* De **U-V mapping / mapeamento U-V**: este termo de modelagem tridimensional refere-se ao mapeamento dos eixos U e V (em contraste a X, Y e Z)
de um plano colorizado por textura na malha (pele, superfície) de um objeto 3D.
* *Vitamina* -- o projeto reprap
denomina de "vitaminas" a qualquer parte não-impressa de uma impressora 3D reprap, como a eletrônica, guias
lineares, mesa aquecida, etc.
* *Voxel* -- um "pixel volumétrico", ou volume endereçável por 3 coordenadas
em um volume cartesiano.
* *Voxelizer* -- fatiador proprietário gratuito que tem por característica distintiva
o fato de fatiar usando uma etapa intermediária de "voxelização" da peça.
* *Warp* -- nome que se dá
à contração diferencial do plástico impresso quando esfria, e que normalmente causa defeitos de fabricação
na peça.
* *X3D* -- formato livre de royalties de arquivos tridimensionais de padrão ISO, sucessor do VRML.  *
*X3G* -- formato de arquivo baseado no protocolo _S3G_ da Makerbot.
* *Youmagine* -- site de compartilhamento
de designs tridimensionais para impressão "rival" do thingiverse.
* *Z lift* -- breve levantamento do
extrusor que acontece durante uma retração, como recurso adicional pra impedir que filamento escorrido forme
uma "verruga" no plástico.
* *Z wobble* -- padrão regular de desníveis de camadas conforme se sobe no
sentido vertical causado por diversos fatores, entre eles diferenças de encaixes dos sulcos da barra roscada em
diferentes alturas.

<<<
== Sobre o autor

image::image435.jpeg[image,width=285,height=213,align="left",float="right"]Cláudio Luís Marques Sampaio, de apelido de internet
__Patola__, é graduado em engenharia de computação e tem mestrado em biologia molecular e genética, ambos pela
Universidade Estadual de Campinas. Desenvolvedor de Software, Administrador de Sistemas, Educador e Palestrante, é
apaixonado por embarcados, pelo movimento Maker, por impressoras 3D e, claro, pela sua esposa Kimberly. Considera que
a humanidade já sofre demais com escassez e não há razão para a continuarmos forçando em bens intrinsecamente
não-escassos, como idéias, implementações, designs e obras culturais. Considera também que a Impressora 3D
diminui a escassez característica do processo de manufatura, ao reduzir as etapas e trabalho do insumo até a
obra final. Como entusiasta da não-escassez na forma do __open-source__, procura colocar tudo o que produz,
de vídeos a obras escritas, passando por software e designs de coisas imprimíveis em 3D ("fisíveis"),
livremente disponível para modificação, distribuição e reuso. Seus principais endereços de compartilhamento são:

* http://www.makerlinux.com.br/[_http://www.makerlinux.com.br_] -- o portal da empresa _Makerlinux_ que
gerencia com sua esposa, onde procura agregar todas as suas contribuições de forma que sejam facilmente
encontráveis.  * http://www.thingiverse.com/Patola/designs[_http://www.thingiverse.com/Patola/designs_]
e https://www.youmagine.com/patola/designs[_https://www.youmagine.com/patola/designs_],
suas páginas de fisíveis em portais dedicados inteiramente a isso.
* https://github.com/Patola?tab=repositories[_https://github.com/Patola?tab=repositories_] -- página do portal de desenvolvimento coletivo e controle de versão __github__, por onde
gerencia as mudanças da maioria de suas criações digitais, de softwares a fisíveis e
textos escritos.
* https://www.youtube.com/makerlinux[_https://www.youtube.com/makerlinux_] -- canal de youtube, com vídeos também disponibilizados sob licenças livres
* https://www.youtube.com/channel/UC65ISAck97KwTJRlFHEvTOg[_https://www.youtube.com/channel/UC65ISAck97KwTJRlFHEvTOg_] -- canal de youtube em inglês
